{"version":3,"sources":["webpack:///../core/aria/button.js","webpack:///../components/button/index.js","webpack:///./sample-utils.js","webpack:///../components/dialog/index.js","webpack:///../components/menu/index.js","webpack:///../core/aria/attributes.js","webpack:///../components/menu/item.js","webpack:///../components/textfield/index.js","webpack:///../core/aria/tab.js","webpack:///../core/aria/rovingtabindex.js"],"names":["onKeyDown","event","key","buttonElement","currentTarget","getAttribute","stopPropagation","preventDefault","newEvent","document","createEvent","initEvent","dispatchEvent","attach","element","classList","add","Ripple","Overlay","attachCore","setAttribute","HTMLButtonElement","HTMLAnchorElement","hasAttribute","HTMLInputElement","addEventListener","AriaButton","detachCore","removeEventListener","removeAttribute","detach","__webpack_require__","d","__webpack_exports__","button_attach","button_detach","convertElementToCode","changeElementTagName","_core_dom__WEBPACK_IMPORTED_MODULE_0__","pug","arguments","length","undefined","linePrefix","htmlType","tagName","toLowerCase","attributes","classes","iterateArrayLike","c","push","attr","name","value","concat","sort","syntaxItems","join","openingHTMLLine","filter","item","trim","closingHTMLLine","lines","innerLines","onlyText","childNodes","child","lineText","HTMLElement","nodeValue","forEach","line","tagname","newElement","createElement","i","setNamedItem","cloneNode","firstChild","appendChild","parentElement","replaceChild","DialogStack","previousFocus","state","previousState","_classCallCheck","this","OPEN_DIALOGS","CANCEL_EVENT","CONFIRM_EVENT","CUSTOM_EVENT","DISMISS_EVENT","dialogCloser","getChildElementByClass","insertBefore","onCancelClick","popup","buttons","querySelectorAll","foundConfirmButton","foundCancelButton","button","Button","onCustomButtonClick","onConfirmClick","dialogElement","popupElement","getElementsByClassName","setupARIA","style","removeProperty","cancelElement","dispatchDomEvent","hide","findElementParentByClassName","cancel","onEscapeKeyDown","focusableElements","foundTarget","candidate","iterateSomeOfArrayLike","el","target","shiftKey","focus","e","handleTabKeyPress","onPopState","lastOpenDialog","Object","keys","every","title","getTitleText","window","history","pushState","titleElement","textContent","bodyElement","stackIndex","some","stack","index","activeElement","splice","hash","back","show","changed","pageX","pageY","dialogRect","getBoundingClientRect","pageXOffset","pageYOffset","rect","width","left","top","height","transformOriginX","offsetLeft","transformOriginY","offsetTop","setProperty","updateTransformOrigin","newState","Math","random","toString","substr","replaceState","dialogStack","focusElement","querySelector","Element","callerOverlayTouch","console","error","updateButtonText","texts","setTextNode","updateBody","content","body","insertAdjacentElement","DocumentFragment","lastChild","removeChild","create","options","updateTitle","buttonArea","buttonText","custom","autofocus","stacked","parent","MenuStack","originalEvent","pendingResizeOperation","OPEN_MENUS","HIDE_EVENT","menuElement","onMenuClick","onMenuScroll","type","scrollTop","scrollHeight","scrollLeft","scrollWidth","onWindowResize","lastOpenMenu","cancelTick","nextTick","updateMenuPosition","selectNextMenuItem","MenuItem","menu","backwards","menuItems","firstFocusableItem","lastFocusableElement","focusable","alignTarget","transformOrigin","useAlignTarget","margin","mdwPosition","mdwDirection","alignTop","indexOf","alignBottom","alignVCenter","alignStart","alignEnd","alignLeft","alignRight","alignHCenter","openUp","openDown","openNormal","openReverse","openVCenter","openHCenter","openLtr","openRtl","isPageRTL","isRtl","offsetY","offsetBottom","clientHeight","offsetX","offsetRight","clientWidth","popupElementHeight","popupElementWidth","canOpenDownwardsFromBottom","innerHeight","canOpenDownwardsFromTop","canOpenUpwardsFromTop","canOpenUpwardsFromBottom","canOpenRightwardsFromLeft","innerWidth","canOpenRightwardsFromRight","canOpenLeftwardsFromRight","canOpenLeftwardsFromLeft","canOpenFromCenter","candidates","map","candidateNumber","number","menuStack","menuItem","refreshMenuItems","pointerType","detail","SELECTED_CHANGED_EVENT","setSelected","_dom__WEBPACK_IMPORTED_MODULE_0__","originalAttr","ACTIVATE_EVENT","CHECK_EVENT","UNCHECK_EVENT","_core_overlay_index__WEBPACK_IMPORTED_MODULE_0__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_1__","_core_dom__WEBPACK_IMPORTED_MODULE_2__","onMouseMove","onClick","role","useAriaChecked","menuItemElement","isDisabled","toggleChecked","setChecked","checked","isCheckable","iterateElementSiblings","sibling","isChecked","setValue","textfieldElement","input","onInput","getPassiveEventListenerOption","inputElement","updateTextAreaSize","updateInputEmptyState","previousRowsValue","_window$getComputedSt","getComputedStyle","paddingTop","heightPx","parseInt","replace","paddingTopPx","floor","HTMLTextAreaElement","HTMLSelectElement","Date","hoursStr","getHours","minutesStr","getMinutes","secondsStr","getSeconds","getMilliseconds","valueAsDate","valueAsNumber","getTime","getTimezoneOffset","_attributes__WEBPACK_IMPORTED_MODULE_0__","childClass","focusableWhenDisabled","currentlyFocusedChild","currentTabIndexChild","firstFocusableChild","onChildFocus","onParentKeyDown","ctrlKey","altKey","metaKey","childElement","moveHorizontal","moveVertical","verticalOrientation","ariaOrientation","moveForwards","nextElementSibling","firstElementChild","previousElementSibling","lastElementChild"],"mappings":"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","file":"default.common.min.js","sourcesContent":["// https://www.w3.org/TR/wai-aria-practices/#button\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'button');\n  if (element instanceof HTMLButtonElement === false\n      && element instanceof HTMLAnchorElement === false\n      && !element.hasAttribute('tabindex')) {\n    element.setAttribute('tabindex', '0');\n  }\n  element.setAttribute('mdw-aria-button-js', '');\n  if (element instanceof HTMLButtonElement === false\n    && element instanceof HTMLInputElement === false) {\n    element.addEventListener('keydown', onKeyDown);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-button-js');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (!buttonElement) {\n    return;\n  }\n  if (buttonElement.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  buttonElement.dispatchEvent(newEvent);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\nimport * as Ripple from '../../core/ripple/index';\nimport * as Overlay from '../../core/overlay/index';\nimport * as AriaButton from '../../core/aria/button';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Ripple.attach(element);\n  element.classList.add('mdw-ripple');\n  Overlay.attach(element);\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  AriaButton.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaButton.detach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","import { iterateArrayLike } from '../core/dom';\n\n\n/**\n * @param {Element|HTMLElement} element\n * @param {boolean} [pug=false]\n * @param {string} [linePrefix='']\n * @return {string}\n */\nfunction convertElementToCode(element, pug = false, linePrefix = '') {\n  const htmlType = element.tagName.toLowerCase();\n  /** @type {string[]} */\n  const attributes = [];\n  /** @type {string[]} */\n  const classes = [];\n  iterateArrayLike(element.classList, (c) => {\n    classes.push(c);\n  });\n  iterateArrayLike(element.attributes, (attr) => {\n    if (attr.name === 'class') {\n      return;\n    }\n    if (attr.value.length) {\n      attributes.push(`${attr.name}=\"${attr.value}\"`);\n    } else {\n      attributes.push(attr.name);\n    }\n  });\n  attributes.sort();\n  const syntaxItems = [\n    htmlType,\n    classes.length ? `class=\"${classes.join(' ')}\"` : '',\n    attributes.join(' '),\n  ];\n  const openingHTMLLine = pug\n    ? `${htmlType === 'div' && classes.length ? '' : htmlType}${classes.length ? `.${classes.join('.')}` : ''}${attributes.length ? `(${attributes.join(' ')})` : ''}`\n    : `<${syntaxItems.filter(item => item).join(' ').trim()}>`;\n  const closingHTMLLine = pug ? '' : `</${htmlType}>`;\n  const lines = [openingHTMLLine];\n  const innerLines = [];\n  let onlyText = true;\n  iterateArrayLike(element.childNodes, (child) => {\n    let lineText;\n    if (child instanceof HTMLElement) {\n      lineText = convertElementToCode(child, pug, `  ${linePrefix}`);\n      if (lineText.trim()) {\n        onlyText = false;\n      }\n    } else if (child.nodeValue) {\n      if (pug) {\n        lineText = `  ${child.nodeValue}`;\n      }\n    }\n    if (lineText && lineText.trim()) {\n      innerLines.push(lineText);\n    }\n  });\n  if (onlyText) {\n    if (pug) {\n      return `${linePrefix + lines.join('')} ${innerLines.join('').trim()}`;\n    }\n    return linePrefix + lines.join('') + innerLines.join('').trim() + closingHTMLLine;\n  }\n  innerLines.forEach(line => lines.push(line));\n  lines.push(linePrefix + closingHTMLLine);\n  return linePrefix + lines.filter(line => line.trim()).join('\\n');\n}\n\n/**\n * @param {Element} element\n * @param {string} tagname\n * @return {Element}\n */\nfunction changeElementTagName(element, tagname) {\n  const newElement = document.createElement(tagname);\n  for (let i = element.attributes.length - 1; i >= 0; i -= 1) {\n    const attr = element.attributes.item(i);\n    newElement.attributes.setNamedItem(attr.cloneNode());\n  }\n  while (element.firstChild) {\n    newElement.appendChild(element.firstChild);\n  }\n\n  element.parentElement.replaceChild(newElement, element);\n  return newElement;\n}\n\nexport {\n  convertElementToCode,\n  changeElementTagName,\n};\n","// https://www.w3.org/TR/wai-aria-practices/#dialog_modal\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  findElementParentByClassName,\n  getChildElementByClass,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\nclass DialogStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object=} state\n   * @param {Object=} previousState\n   */\n  constructor(element, previousFocus, state, previousState) {\n    this.element = element;\n    this.previousFocus = previousFocus;\n    this.state = state;\n    this.previousState = previousState;\n  }\n}\n\n/** @type {DialogStack[]} */\nconst OPEN_DIALOGS = [];\n\nexport const CANCEL_EVENT = 'mdw:dialog-cancel';\n\nexport const CONFIRM_EVENT = 'mdw:dialog-confirm';\n\nexport const CUSTOM_EVENT = 'mdw:dialog-custom';\n\nexport const DISMISS_EVENT = 'mdw:dialog-dismiss';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-js', '');\n\n  let dialogCloser = getChildElementByClass(element, 'mdw-dialog__close');\n  if (!dialogCloser) {\n    dialogCloser = document.createElement('div');\n    dialogCloser.classList.add('mdw-dialog__close');\n    if (element.firstChild) {\n      element.insertBefore(dialogCloser, element.firstChild);\n    } else {\n      element.appendChild(dialogCloser);\n    }\n  }\n  dialogCloser.addEventListener('click', onCancelClick);\n  const popup = getChildElementByClass(element, 'mdw-dialog__popup');\n  popup.addEventListener('keydown', onKeyDown);\n  const buttons = popup.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  let foundConfirmButton = false;\n  let foundCancelButton = false;\n  iterateArrayLike(buttons, (button) => {\n    Button.attach(button);\n    if (button.hasAttribute('mdw-custom')) {\n      button.addEventListener('click', onCustomButtonClick);\n      return;\n    }\n    if (!foundConfirmButton) {\n      button.addEventListener('click', onConfirmClick);\n      foundConfirmButton = true;\n      return;\n    }\n    if (!foundCancelButton) {\n      button.addEventListener('click', onCancelClick);\n      foundCancelButton = true;\n      return;\n    }\n    button.addEventListener('click', onCustomButtonClick);\n  });\n  setupARIA(element);\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function setupARIA(dialogElement) {\n  if (dialogElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  dialogElement.setAttribute('role', 'dialog');\n  dialogElement.setAttribute('aria-modal', 'true');\n  if (!dialogElement.hasAttribute('aria-hidden')) {\n    dialogElement.setAttribute('aria-hidden', 'true');\n  }\n  const popupElement = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n  if (!popupElement) {\n    return;\n  }\n\n  if (!popupElement.hasAttribute('aria-label') && !popupElement.hasAttribute('aria-labelledby')) {\n    const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (titleElement) {\n      // titleElement\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function detach(dialogElement) {\n  dialogElement.removeAttribute('mdw-js');\n  const dialogCloser = getChildElementByClass(dialogElement, 'mdw-dialog__close');\n  if (dialogCloser) {\n    dialogCloser.removeEventListener('click', onCancelClick);\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (popupElement) {\n    popupElement.removeEventListener('keydown', onKeyDown);\n    popupElement.style.removeProperty('transform-origin');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  const buttons = popupElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button) => {\n    Button.detach(button);\n    button.removeEventListener('click', onConfirmClick);\n    button.removeEventListener('click', onCancelClick);\n    button.removeEventListener('click', onCustomButtonClick);\n  });\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCancelClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const cancelElement = (event.currentTarget);\n  if (dispatchDomEvent(cancelElement, CANCEL_EVENT)) {\n    const dialogElement = findElementParentByClassName(cancelElement, 'mdw-dialog');\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onConfirmClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  if (dispatchDomEvent(button, CONFIRM_EVENT)) {\n    const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCustomButtonClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  if (dispatchDomEvent(button, CUSTOM_EVENT)) {\n    const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Tab') {\n    handleTabKeyPress(event);\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    onEscapeKeyDown(event);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onEscapeKeyDown(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const popupElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(popupElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenDialog = OPEN_DIALOGS[OPEN_DIALOGS.length - 1];\n  if (!lastOpenDialog || !lastOpenDialog.previousState) {\n    return;\n  }\n  if ((lastOpenDialog.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenDialog.previousState[key])) {\n    if (dispatchDomEvent(lastOpenDialog.element, CANCEL_EVENT)) {\n      hide(lastOpenDialog.element);\n    } else {\n      // Revert pop state by pushing state again\n      const title = getTitleText(lastOpenDialog.element);\n      window.history.pushState(lastOpenDialog.state, title);\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function cancel(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CANCEL_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function confirm(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CONFIRM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {string}\n */\nexport function getTitleText(dialogElement) {\n  let title = 'Dialog';\n  const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (titleElement) {\n    title = titleElement.textContent;\n  } else {\n    const bodyElement = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n    if (bodyElement) {\n      title = bodyElement.textContent;\n    }\n  }\n  return title;\n}\n\n/**\n * @param {Element} dialogElement\n * @return {boolean} handled\n */\nexport function hide(dialogElement) {\n  if (dialogElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(dialogElement, DISMISS_EVENT)) {\n    return false;\n  }\n  dialogElement.setAttribute('aria-hidden', 'true');\n  let stackIndex = -1;\n  OPEN_DIALOGS.some((stack, index) => {\n    if (stack.element === dialogElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const stack = OPEN_DIALOGS[stackIndex];\n    if (stack.previousFocus) {\n      if (findElementParentByClassName(document.activeElement, 'mdw-dialog') === dialogElement) {\n        // Only pop focus back when hiding a dialog with focus within itself.\n        try {\n          stack.previousFocus.focus();\n        } catch (e) {\n          // Failed to focus\n        }\n      }\n    }\n    OPEN_DIALOGS.splice(stackIndex, 1);\n    if (stack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (stack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_DIALOGS.length) {\n    window.removeEventListener('popstate', onPopState);\n  }\n  return true;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(MouseEvent|KeyboardEvent|PointerEvent)=} event\n * @return {boolean} handled\n */\nexport function show(dialogElement, event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  let changed = false;\n\n  updateTransformOrigin(dialogElement, event);\n  if (dialogElement.getAttribute('aria-hidden') !== 'false') {\n    dialogElement.setAttribute('aria-hidden', 'false');\n    changed = true;\n  }\n  if (changed) {\n    attach(dialogElement);\n    const previousFocus = document.activeElement;\n    const newState = { hash: Math.random().toString(36).substr(2, 16) };\n    let previousState = null;\n    if (window.history && window.history.pushState) {\n      if (!window.history.state) {\n        // Create new previous state\n        window.history.replaceState({\n          hash: Math.random().toString(36).substr(2, 16),\n        }, document.title);\n      }\n      previousState = window.history.state;\n      const title = getTitleText(dialogElement);\n      window.history.pushState(newState, title);\n      window.addEventListener('popstate', onPopState);\n    }\n    const dialogStack = new DialogStack(dialogElement, previousFocus, newState, previousState);\n    OPEN_DIALOGS.push(dialogStack);\n    const focusElement = dialogElement.querySelector('[mdw-autofocus]');\n    try {\n      if (focusElement) {\n        if (event && event.target instanceof Element) {\n          const callerOverlayTouch = event.target.getAttribute('mdw-overlay-touch');\n          if (callerOverlayTouch != null) {\n            focusElement.setAttribute('mdw-overlay-touch', callerOverlayTouch);\n          }\n        }\n        focusElement.focus();\n      } else {\n        dialogElement.focus();\n      }\n    } catch (e) {\n      console.error(e);\n      // Failed to focus\n    }\n  }\n  return changed;\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function handleTabKeyPress(event) {\n  /** @type {Element} */\n  const popupElement = (event.currentTarget);\n  const focusableElements = popupElement.querySelectorAll([\n    'button:not(:disabled):not([tabindex=\"-1\"])',\n    '[href]:not(:disabled):not([tabindex=\"-1\"])',\n    'input:not(:disabled):not([tabindex=\"-1\"])',\n    'select:not(:disabled):not([tabindex=\"-1\"])',\n    'textarea:not(:disabled):not([tabindex=\"-1\"])',\n    '[tabindex]:not([tabindex=\"-1\"])'].join(', '));\n  let foundTarget = false;\n  let candidate = null;\n  iterateSomeOfArrayLike(focusableElements, (el) => {\n    if (el === event.target) {\n      foundTarget = true;\n      if (event.shiftKey) {\n        return true;\n      }\n    } else if (event.shiftKey) {\n      candidate = el;\n    } else if (foundTarget) {\n      candidate = el;\n      return true;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (event.shiftKey) {\n      // Select last item\n      candidate = focusableElements[focusableElements.length - 1];\n    } else {\n      // Select first item\n      candidate = focusableElements[0];\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  if (candidate) {\n    try {\n      candidate.focus();\n    } catch (e) {\n      // Failed to focus\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)=} content\n * @return {void}\n */\nexport function updateTitle(dialogElement, content) {\n  let title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (!content) {\n    if (!title) {\n      // Nothing to be done\n      return;\n    }\n    title.parentElement.removeChild(title);\n    return;\n  }\n  if (!title) {\n    title = document.createElement('div');\n    title.classList.add('mdw-dialog__title');\n    const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n    popup.insertBefore(title, popup.firstChild);\n  }\n  if (content instanceof DocumentFragment) {\n    while (title.lastChild) {\n      title.removeChild(title.lastChild);\n    }\n    title.appendChild(content);\n  } else {\n    title.textContent = content;\n  }\n}\n\n\n/**\n * @param {Element} dialogElement\n * @param {string[]} texts\n * @return {void}\n */\nexport function updateButtonText(dialogElement, texts) {\n  const buttons = dialogElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button, index) => {\n    setTextNode(button, texts[index]);\n  });\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)=} content\n * @return {void}\n */\nexport function updateBody(dialogElement, content) {\n  let body = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n  if (!content) {\n    if (!body) {\n      // Nothing to be done\n      return;\n    }\n    body.parentElement.removeChild(body);\n    return;\n  }\n  if (!body) {\n    body = document.createElement('div');\n    body.classList.add('mdw-dialog__body');\n    const title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (title) {\n      title.insertAdjacentElement('afterend', body);\n    } else {\n      const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n      popup.insertBefore(body, popup.firstChild);\n    }\n  }\n  if (content instanceof DocumentFragment) {\n    while (body.lastChild) {\n      body.removeChild(body.lastChild);\n    }\n    body.appendChild(content);\n  } else {\n    body.textContent = content;\n  }\n}\n\n/**\n * @param {Object} options\n * @param {(DocumentFragment|string)=} options.title\n * @param {(DocumentFragment|string)=} options.body\n * @param {string[]=} options.buttons\n * @param {boolean=} options.stacked\n * @param {Element=} options.parent\n * @param {boolean} [options.custom=false] Use custom button events\n * @param {(string|number)=} [options.autofocus=0] Autofocus button by index or text\n * @return {Element}\n */\nexport function create(options) {\n  const element = document.createElement('div');\n  element.classList.add('mdw-dialog');\n\n  const popup = document.createElement('div');\n  popup.classList.add('mdw-dialog__popup');\n  element.appendChild(popup);\n\n  updateTitle(element, options.title);\n  updateBody(element, options.body);\n\n  if (options.buttons) {\n    const buttonArea = document.createElement('div');\n    buttonArea.classList.add('mdw-dialog__button-area');\n    let index = 0;\n    options.buttons.forEach((buttonText) => {\n      const button = document.createElement('div');\n      button.classList.add('mdw-button');\n      button.classList.add('mdw-theme');\n      button.setAttribute('tabindex', '0');\n      button.setAttribute('mdw-ink', 'accent');\n      if (options.custom) {\n        button.setAttribute('mdw-custom', '');\n      }\n      button.textContent = buttonText;\n      buttonArea.appendChild(button);\n      if ((options.autofocus == null && index === 0)\n        || options.autofocus === index || options.autofocus === buttonText) {\n        button.setAttribute('mdw-autofocus', '');\n      }\n      index += 1;\n    });\n    if (options.stacked) {\n      buttonArea.setAttribute('mdw-stacked', '');\n    }\n    popup.appendChild(buttonArea);\n  }\n  if (options.parent) {\n    options.parent.appendChild(element);\n  }\n  attach(element);\n  return element;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(MouseEvent|KeyboardEvent|PointerEvent)=} event\n * @return {void}\n */\nexport function updateTransformOrigin(dialogElement, event) {\n  /** @type {HTMLElement} */\n  const popup = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  popup.style.removeProperty('transform-origin');\n  if (!event) {\n    return;\n  }\n  let pageX;\n  let pageY;\n  const dialogRect = dialogElement.getBoundingClientRect();\n  if ('pageX' in event && 'pageY' in event) {\n    ({ pageX, pageY } = event);\n    pageX -= window.pageXOffset;\n    pageY -= window.pageYOffset;\n  } else {\n    /** @type {Element} */\n    const target = (event.currentTarget || event.target);\n    const rect = target.getBoundingClientRect();\n    if (!rect.width && !rect.width && !rect.left && !rect.top) {\n      return;\n    }\n    pageX = rect.left + (rect.width / 2);\n    pageY = rect.top + (rect.height / 2);\n  }\n  const transformOriginX = pageX - dialogRect.left - popup.offsetLeft;\n  const transformOriginY = pageY - dialogRect.top - popup.offsetTop;\n  popup.style.setProperty('transform-origin', `${transformOriginX}px ${transformOriginY}px`);\n}\n\n// Aliases\nexport const dismiss = hide;\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  nextTick,\n  cancelTick,\n} from '../../core/dom';\n\nimport * as MenuItem from './item';\n\nclass MenuStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object=} state\n   * @param {Object=} previousState\n   * @param {MouseEvent=} originalEvent\n   */\n  constructor(element, previousFocus, state, previousState, originalEvent) {\n    this.element = element;\n    this.previousFocus = previousFocus;\n    this.state = state;\n    this.previousState = previousState;\n    this.originalEvent = originalEvent;\n    this.pendingResizeOperation = null;\n  }\n}\n\n/** @type {MenuStack[]} */\nconst OPEN_MENUS = [];\n\nexport const HIDE_EVENT = 'mdw:menu-hide';\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function attach(menuElement) {\n  menuElement.setAttribute('mdw-menu-js', '');\n  menuElement.addEventListener('click', onMenuClick);\n  menuElement.addEventListener('scroll', onMenuScroll);\n  menuElement.addEventListener('touchmove', onMenuScroll);\n  menuElement.addEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  setupARIA(menuElement);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function setupARIA(menuElement) {\n  if (menuElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  if (!menuElement.hasAttribute('aria-hidden')) {\n    menuElement.setAttribute('aria-hidden', 'true');\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-divider'),\n    el => el.setAttribute('role', 'separator'));\n  menuElement.setAttribute('role', 'menu');\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  if (popupElement) {\n    popupElement.setAttribute('role', 'none');\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onMenuScroll(event) {\n  // JS needed for Safari\n  event.preventDefault();\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\nexport function onMenuClick(event) {\n  if (event.currentTarget === event.target) {\n    event.stopPropagation();\n    hide(event.currentTarget);\n  }\n}\n\n/**\n * @return {void}\n */\nexport function onWindowResize() {\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.originalEvent) {\n    return;\n  }\n  if (lastOpenMenu.pendingResizeOperation) {\n    cancelTick(lastOpenMenu.pendingResizeOperation);\n  }\n  lastOpenMenu.pendingResizeOperation = nextTick(() => {\n    updateMenuPosition(\n      lastOpenMenu.element,\n      lastOpenMenu.element.getElementsByClassName('mdw-menu__popup')[0],\n      lastOpenMenu.originalEvent\n    );\n    lastOpenMenu.pendingResizeOperation = null;\n  });\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.previousState) {\n    return;\n  }\n  if ((lastOpenMenu.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenMenu.previousState[key])) {\n    hide(lastOpenMenu.element);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuElement = (event.currentTarget);\n  if (!menuElement || menuElement.getAttribute('aria-hidden') === 'true') {\n    return;\n  }\n\n  if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, false);\n    return;\n  }\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, true);\n    return;\n  }\n  if (event.key === 'Tab') {\n    // Hide menu allowing focus to revert to calling element\n    // To then allow browser default Tab interaction\n    // Unless menu hiding is cancelled\n    if (!hide(menuElement)) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    event.stopPropagation();\n    event.preventDefault();\n    hide(menuElement);\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function detach(menuElement) {\n  hide(menuElement);\n  menuElement.removeEventListener('click', onMenuClick);\n  menuElement.removeEventListener('scroll', onMenuScroll);\n  menuElement.removeEventListener('touchmove', onMenuScroll);\n  menuElement.removeEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  menuElement.removeAttribute('mdw-menu-js');\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  if (popupElement) {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), MenuItem.detach);\n}\n\n/**\n * @param {Element} menu\n * @param {boolean} [backwards=false]\n * @return {void}\n */\nexport function selectNextMenuItem(menu, backwards) {\n  const menuItems = menu.getElementsByClassName('mdw-menu__item');\n  let foundTarget = false;\n  let candidate = null;\n  let firstFocusableItem = null;\n  let lastFocusableElement = null;\n  const target = document.activeElement;\n\n  // Hidden elements cannot be focused\n  // Disabled elements cannot be focused on IE11\n  // Skip elements that fail to receive focus\n  iterateSomeOfArrayLike(menuItems, (el) => {\n    el.focus();\n    const focusable = (document.activeElement === el);\n    if (focusable) {\n      if (!firstFocusableItem) {\n        firstFocusableItem = el;\n      }\n      lastFocusableElement = el;\n    }\n    if (el === target) {\n      foundTarget = true;\n      if (backwards && candidate) {\n        return true;\n      }\n      return false;\n    }\n    if (backwards) {\n      if (focusable) {\n        candidate = el;\n      }\n      return false;\n    }\n    if (foundTarget) {\n      if (focusable) {\n        candidate = el;\n        return true;\n      }\n      return false;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (backwards) {\n      candidate = lastFocusableElement;\n    } else {\n      candidate = firstFocusableItem;\n    }\n  }\n  if (candidate && document.activeElement !== candidate) {\n    candidate.focus();\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @param {Element} popupElement\n * @param {MouseEvent=} event\n * @param {boolean=} [alignTarget=true]\n * @return {void}\n */\nexport function updateMenuPosition(menuElement, popupElement, event, alignTarget) {\n  let top = 'auto';\n  let left = 'auto';\n  let transformOrigin = '';\n  const useAlignTarget = (alignTarget !== false);\n  const margin = useAlignTarget ? '0' : '';\n  const mdwPosition = menuElement.getAttribute('mdw-position') || '';\n  const mdwDirection = menuElement.getAttribute('mdw-direction') || '';\n  let alignTop = mdwPosition.indexOf('top') !== -1;\n  let alignBottom = mdwPosition.indexOf('bottom') !== -1;\n  let alignVCenter = mdwPosition.indexOf('vcenter') !== -1;\n\n  const alignStart = mdwPosition.indexOf('start') !== -1;\n  const alignEnd = mdwPosition.indexOf('end') !== -1;\n  let alignLeft = mdwPosition.indexOf('left') !== -1;\n  let alignRight = mdwPosition.indexOf('right') !== -1;\n  let alignHCenter = mdwPosition.indexOf('hcenter') !== -1;\n\n  let openUp = mdwDirection.indexOf('up') !== -1;\n  let openDown = mdwDirection.indexOf('down') !== -1;\n  const openNormal = mdwDirection.indexOf('normal') !== -1;\n  const openReverse = mdwDirection.indexOf('reverse') !== -1;\n  let openVCenter = mdwDirection.indexOf('vcenter') !== -1;\n  let openHCenter = mdwDirection.indexOf('hcenter') !== -1;\n  let openLtr = mdwDirection.indexOf('ltr') !== -1;\n  let openRtl = mdwDirection.indexOf('rtl') !== -1;\n\n  /** @type {HTMLElement} */\n  const target = (event.currentTarget || event.target);\n\n  let isPageRTL = null;\n  if (alignStart || alignEnd || openNormal || openReverse) {\n    // Using page-direction based values\n    isPageRTL = isRtl();\n    if (alignStart || alignEnd) {\n      if (alignStart) {\n        if (isPageRTL) {\n          alignRight = true;\n        } else {\n          alignLeft = true;\n        }\n      } else if (isPageRTL) {\n        alignLeft = true;\n      } else {\n        alignRight = true;\n      }\n    }\n    if (openNormal || openReverse) {\n      if (openNormal) {\n        if (isPageRTL) {\n          openRtl = true;\n        } else {\n          openLtr = true;\n        }\n      } else if (isPageRTL) {\n        openLtr = true;\n      } else {\n        openRtl = true;\n      }\n    }\n  }\n  const offsetTop = useAlignTarget ? 0 : -event.offsetY;\n  const offsetBottom = useAlignTarget ? target.clientHeight : event.offsetY;\n  const offsetLeft = useAlignTarget ? 0 : -event.offsetX;\n  const offsetRight = useAlignTarget ? target.clientWidth : event.offsetX;\n  const rect = target.getBoundingClientRect();\n  const pageX = rect.left;\n  const pageY = rect.top;\n\n  /* Automatic Positioning\n    *\n    * 9 Positions\n    *   3      7      4\n    *     ┌─────────┐\n    *     │         │\n    *   5 │    9    │ 6\n    *     │         │\n    *     └─────────┘\n    *   1      8      2\n    *\n    * 1: Bottom Left\n    * 2: Bottom Right\n    * 3: Top Left\n    * 4: Top Right\n    * 5: VCenter Left\n    * 6: VCenter Right\n    * 7: HCenter Top\n    * 8: HCenter Bottom\n    * 9: VCenter HCenter\n    *\n    * 9 Directions:\n    * a - Down LTR\n    * b - Down RTL\n    * c - Up LTR\n    * d - Up RTL\n    * e - LTR\n    * f - RTL\n    * g - Down\n    * h - Up\n    * i - Center\n    *\n    *\n    * 16 total combos\n    * 1a 1b 1c 1d  └↘ └↙ └↗ └↖\n    * 2a 2b 2c 2d  ┘↘ ┘↙ ┘↗ ┘↖\n    * 3a 3b 3c 3d  ┌↘ ┌↙ ┌↗ ┌↖\n    * 4a 4b 4c 4d  ┐↘ ┐↙ ┐↗ ┐↖\n    *\n    * Avoid using opposite angle\n    *\n    * 1a XX 1c 1d  └↘ ██ └↗ └↖\n    * XX 2b 2c 2d  ██ ┘↙ ┘↗ ┘↖\n    * 1a 3b 3c XX  ┌↘ ┌↙ ┌↗ ██\n    * 4a 4b XX 4d  ┐↘ ┐↙ ██ ┐↖\n    *\n    *\n    * Preference Order:\n    * - Flow from corner           1a 2b 3c 4d    └↘ ┘↙ ┌↗ ┐↖\n    * - Open adjacent to target    4a 3b 2c 1d    ┐↘ ┌↙ ┘↗ └↖\n    * - Overlay target             3a 4b 1c 2d    ┌↘ ┐↙ └↗ ┘↖\n    * - Open from horizontal side  5e 6f          │→ │←\n    * - Open from center           9i             █·\n    */\n\n  popupElement.style.setProperty('max-height', 'none');\n  const popupElementHeight = popupElement.clientHeight;\n  const popupElementWidth = popupElement.clientWidth;\n  const canOpenDownwardsFromBottom = !alignTop && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetBottom) <= window.innerHeight;\n  const canOpenDownwardsFromTop = !alignBottom && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetTop) <= window.innerHeight;\n  const canOpenUpwardsFromTop = !alignBottom && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetTop >= popupElementHeight;\n  const canOpenUpwardsFromBottom = !alignTop && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetBottom >= popupElementHeight;\n  const canOpenRightwardsFromLeft = !alignRight && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetLeft) <= window.innerWidth;\n  const canOpenRightwardsFromRight = !alignLeft && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetRight) <= window.innerWidth;\n  const canOpenLeftwardsFromRight = !alignLeft && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetRight >= popupElementWidth;\n  const canOpenLeftwardsFromLeft = !alignRight && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetLeft >= popupElementWidth;\n  const canOpenFromCenter = !alignLeft && !alignRight && !alignTop && !alignBottom\n    && !openUp && !openDown\n    && ((pageX + offsetLeft) / 2) >= (popupElementWidth / 2)\n    && (popupElementWidth / 2) + ((pageX + offsetLeft) / 2) <= window.innerWidth;\n  popupElement.style.removeProperty('max-height');\n  const candidates = [\n    canOpenDownwardsFromBottom && canOpenRightwardsFromLeft, // 1a └↘\n    canOpenDownwardsFromBottom && canOpenLeftwardsFromRight, // 2b ┘↙\n    canOpenUpwardsFromTop && canOpenRightwardsFromLeft, // 3c ┌↗\n    canOpenUpwardsFromTop && canOpenLeftwardsFromLeft, // 4d ┐↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromRight, // 4a ┐↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromLeft, // 3b ┌↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2c ┘↗\n    canOpenUpwardsFromBottom && canOpenLeftwardsFromLeft, // 1d └↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromLeft, // 3a ┌↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromRight, // 4b ┐↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromLeft, // 1c └↗\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2d ┘↖\n    canOpenRightwardsFromLeft, // 5e │→\n    canOpenLeftwardsFromRight, // 6f │←\n    canOpenFromCenter, // 9i █·\n  ].map((value, index) => {\n    if (value) {\n      return index + 1;\n    }\n    return 0;\n  }).filter(value => value !== 0);\n  if (candidates.length) {\n    let candidateNumber;\n    if (isPageRTL === null) {\n      isPageRTL = isRtl();\n    }\n    if (isPageRTL) {\n      candidateNumber = [2, 1, 4, 3, 6, 5, 8, 7, 10, 9, 12, 11, 14, 13, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    } else {\n      candidateNumber = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    }\n    if (candidateNumber == null) {\n      candidateNumber = isPageRTL ? 2 : 1;\n    }\n    switch (candidateNumber) {\n      // Position\n      default:\n      case 1:\n      case 8:\n      case 11:\n        alignBottom = true; alignLeft = true;\n        break;\n      case 2:\n      case 7:\n      case 12:\n        alignBottom = true; alignRight = true;\n        break;\n      case 3:\n      case 6:\n      case 9:\n        alignTop = true; alignLeft = true;\n        break;\n      case 4:\n      case 5:\n      case 10:\n        alignTop = true; alignRight = true;\n        break;\n      case 13:\n        alignVCenter = true; alignLeft = true;\n        break;\n      case 14:\n        alignVCenter = true; alignRight = true;\n        break;\n      case 15:\n        alignVCenter = true; alignHCenter = true;\n    }\n    switch (candidateNumber) {\n      // Direction\n      default:\n      case 1:\n      case 5:\n      case 9:\n        openDown = true; openLtr = true;\n        break;\n      case 2:\n      case 6:\n      case 10:\n        openDown = true; openRtl = true;\n        break;\n      case 3:\n      case 7:\n      case 11:\n        openUp = true; openLtr = true;\n        break;\n      case 4:\n      case 8:\n      case 12:\n        openUp = true; openRtl = true;\n        break;\n      case 13:\n        openLtr = true; openVCenter = true;\n        break;\n      case 14:\n        openRtl = true; openVCenter = true;\n        break;\n      case 15:\n        openHCenter = true; openVCenter = true;\n        break;\n    }\n  }\n\n  if (openLtr) {\n    if (alignRight) {\n      left = `${pageX + offsetRight}px`;\n    } else if (alignHCenter) {\n      left = `${pageX + ((offsetLeft + offsetRight) / 2)}px`;\n    } else {\n      left = `${pageX + offsetLeft}px`;\n    }\n    transformOrigin = 'left';\n  } else if (openHCenter) {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - (popupElementWidth / 2)}px`;\n    } else if (alignRight) {\n      left = `${(pageX + offsetRight) - (popupElementWidth / 2)}px`;\n    } else {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - (popupElementWidth / 2)}px`;\n    }\n    transformOrigin = 'center';\n  } else {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - popupElementWidth}px`;\n    } else if (alignHCenter) {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - popupElementWidth}px`;\n    } else {\n      left = `${(pageX + offsetRight) - popupElementWidth}px`;\n    }\n    transformOrigin = 'right';\n  }\n\n  if (openUp) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - popupElement.clientHeight}px`;\n    } else if (alignVCenter) {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - popupElement.clientHeight}px`;\n    } else {\n      top = `${(pageY + offsetTop) - popupElement.clientHeight}px`;\n    }\n    transformOrigin += ' bottom';\n  } else if (openVCenter) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - (popupElement.clientHeight / 2)}px`;\n    } else if (alignTop) {\n      top = `${(pageY + offsetTop) - (popupElement.clientHeight / 2)}px`;\n    } else {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - (popupElement.clientHeight / 2)}px`;\n    }\n    transformOrigin += ' center';\n  } else {\n    if (alignTop) {\n      top = `${pageY + offsetTop}px`;\n    } else if (alignVCenter) {\n      top = `${pageY + ((offsetTop + offsetBottom) / 2)}px`;\n    } else {\n      top = `${pageY + offsetBottom}px`;\n    }\n    transformOrigin += ' top';\n  }\n\n  popupElement.style.setProperty('top', top);\n  popupElement.style.setProperty('left', left);\n  popupElement.style.setProperty('right', 'auto');\n  popupElement.style.setProperty('bottom', 'auto');\n  popupElement.style.setProperty('margin', margin);\n  popupElement.style.setProperty('transform-origin', transformOrigin);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function refreshMenuItems(menuElement) {\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), (menuItem) => {\n    menuItem.setAttribute('tabindex', '-1');\n    MenuItem.attach(menuItem);\n  });\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  popupElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {Element} menuElement\n * @param {MouseEvent=} event\n * @param {boolean=} [alignTarget=true]\n * @return {boolean} handled\n */\nexport function show(menuElement, event, alignTarget) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  let changed = false;\n  if (event) {\n    updateMenuPosition(menuElement, popupElement, event, alignTarget);\n  } else {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  if (menuElement.getAttribute('aria-hidden') !== 'false') {\n    menuElement.setAttribute('aria-hidden', 'false');\n    changed = true;\n  }\n  if (changed) {\n    attach(menuElement);\n    const previousFocus = document.activeElement;\n    const newState = { hash: Math.random().toString(36).substr(2, 16) };\n    let previousState = null;\n    if (window.history && window.history.pushState) {\n      if (!window.history.state) {\n        // Create new previous state\n        window.history.replaceState({\n          hash: Math.random().toString(36).substr(2, 16),\n        }, document.title);\n      }\n      previousState = window.history.state;\n      window.history.pushState(newState, document.title);\n      window.addEventListener('popstate', onPopState);\n      window.addEventListener('resize', onWindowResize);\n    }\n    const menuStack = new MenuStack(menuElement, previousFocus, newState, previousState, event);\n    OPEN_MENUS.push(menuStack);\n    refreshMenuItems(menuElement);\n    if (event && !event.pointerType && !event.detail) {\n      // Triggered with keyboard event\n      selectNextMenuItem(menuElement);\n    } else {\n      popupElement.focus();\n    }\n  }\n  return changed;\n}\n\n/**\n * @param {Element} menuElement\n * @return {boolean} handled\n */\nexport function hide(menuElement) {\n  if (menuElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  menuElement.setAttribute('aria-hidden', 'true');\n  let stackIndex = -1;\n  OPEN_MENUS.some((stack, index) => {\n    if (stack.element === menuElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const menuStack = OPEN_MENUS[stackIndex];\n    if (menuStack.previousFocus) {\n      menuStack.previousFocus.focus();\n    }\n    OPEN_MENUS.splice(stackIndex, 1);\n    if (menuStack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (menuStack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_MENUS.length) {\n    window.removeEventListener('popstate', onPopState);\n    window.removeEventListener('resize', onWindowResize);\n  }\n  dispatchDomEvent(menuElement, HIDE_EVENT);\n  return true;\n}\n","import { dispatchDomEvent } from '../dom';\n\nexport const SELECTED_CHANGED_EVENT = 'mdw:aria-selectedchanged';\n\n/**\n * @param {Element} element\n * @param {'false'|'true'} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} changed\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  const originalAttr = element.getAttribute('aria-selected');\n  if (value === 'true') {\n    if (originalAttr === 'true') {\n      return false;\n    }\n    element.setAttribute('aria-selected', 'true');\n  } else {\n    if (originalAttr === 'false') {\n      return false;\n    }\n    if (!originalAttr || originalAttr !== 'false') {\n      element.setAttribute('aria-selected', 'false');\n      return false;\n    }\n    element.setAttribute('aria-selected', 'false');\n  }\n  if (!dispatchEvent) {\n    return true;\n  }\n  if (!dispatchDomEvent(element, SELECTED_CHANGED_EVENT)) {\n    // Revert\n    if (originalAttr == null) {\n      element.removeAttribute('aria-selected');\n    } else {\n      element.setAttribute('aria-selected', originalAttr);\n    }\n    return false;\n  }\n  return true;\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateElementSiblings,\n} from '../../core/dom';\n\nexport const ACTIVATE_EVENT = 'mdw:menuitem-activate';\nexport const CHECK_EVENT = 'mdw:menuitem-check';\nexport const UNCHECK_EVENT = 'mdw:menuitem-uncheck';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  // If mouseover is used, an item can still lose focus via keyboard navigation.\n  // An extra event listener would need to be created to catch blur but the cursor\n  // would still remain over the element, thus needing another mousemove event.\n  // Prioritization is given to less event listeners rather than operations per second.\n  element.addEventListener('mousemove', onMouseMove);\n  element.addEventListener('click', onClick);\n  element.addEventListener('keydown', onKeyDown);\n  setupARIA(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function setupARIA(element) {\n  if (element.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  const role = element.getAttribute('role');\n  let useAriaChecked = false;\n  if (role === 'menuitemcheckbox' || role === 'menuitemradio') {\n    useAriaChecked = true;\n  } else if (role !== 'menuitem') {\n    if (element.getElementsByClassName('mdw-menu__check').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemcheckbox');\n    } else if (element.getElementsByClassName('mdw-menu__radio').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemradio');\n    } else {\n      element.setAttribute('role', 'menuitem');\n    }\n  }\n  if (useAriaChecked && !element.hasAttribute('aria-checked')) {\n    element.setAttribute('aria-checked', 'false');\n  }\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__text'),\n    el => el.setAttribute('role', 'text'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__check'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__info'),\n    el => el.setAttribute('role', 'note'));\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n  if (isDisabled(menuItemElement)) {\n    return;\n  }\n  const role = menuItemElement.getAttribute('role');\n  if (role === 'menuitemcheckbox') {\n    toggleChecked(menuItemElement);\n  } else if (role === 'menuitemradio') {\n    setChecked(menuItemElement, true);\n  }\n  dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onMouseMove(event) {\n  /** @type {HTMLElement} */\n  const el = (event.currentTarget);\n  if (!el) {\n    return;\n  }\n  const previousFocus = document.activeElement;\n  if (previousFocus === el) {\n    // Already focused\n    return;\n  }\n  if (el.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  el.focus();\n  if (document.activeElement !== el) {\n    if (previousFocus && document.activeElement !== previousFocus) {\n      previousFocus.focus();\n    }\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n\n  if (event.key === 'Enter') {\n    event.stopPropagation();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    onClick(event);\n    return;\n  }\n\n  if (event.key === 'Spacebar' || (event.key === ' ')) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    const role = menuItemElement.getAttribute('role');\n    if (role === 'menuitemcheckbox') {\n      toggleChecked(menuItemElement);\n    } else if (role === 'menuitemradio') {\n      setChecked(menuItemElement, true);\n    } else {\n      dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isChecked(element) {\n  return (element.getAttribute('aria-checked') === 'true');\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return (element.getAttribute('aria-disabled') === 'true');\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n * @return {boolean} uiChanged\n */\nexport function setChecked(element, checked) {\n  const role = element.getAttribute('role');\n  let isCheckable = false;\n  if (role === 'menuitemcheckbox') {\n    isCheckable = true;\n    if (!dispatchDomEvent(element, checked ? CHECK_EVENT : UNCHECK_EVENT)) {\n      return false;\n    }\n  }\n  if (role === 'menuitemradio') {\n    isCheckable = true;\n    if (checked) {\n      if (!dispatchDomEvent(element, CHECK_EVENT)) {\n        return false;\n      }\n      iterateElementSiblings(element, (sibling) => {\n        if (sibling.getAttribute('role') === 'menuitemradio') {\n          sibling.setAttribute('aria-checked', 'false');\n        }\n      });\n    }\n  }\n  if (!isCheckable) {\n    return false;\n  }\n  element.setAttribute('aria-checked', checked ? 'true' : 'false');\n  return true;\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function toggleChecked(element) {\n  const checked = !isChecked(element);\n  return setChecked(element, checked);\n}\n\n/**\n * @param {Element} element\n * @return {boolean} handled\n */\nexport function openSubMenu(element) {\n  const hasPopup = element.getAttribute('aria-haspopup');\n  if (hasPopup !== 'menu' && hasPopup !== 'true') {\n    return false;\n  }\n\n  // TODO: Open new menu\n  return false;\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousemove', onMouseMove);\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-js');\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","import { getPassiveEventListenerOption } from '../../core/dom';\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function attach(textfieldElement) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.addEventListener('input', onInput, getPassiveEventListenerOption());\n    onInput({ currentTarget: input });\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function detach(textfieldElement) {\n  textfieldElement.removeAttribute('mdw-value-empty');\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.removeEventListener('input', onInput);\n  }\n}\n\n/**\n * @param {Event|{currentTarget}} event\n * @return {void}\n */\nexport function onInput(event) {\n  const inputElement = event.currentTarget;\n  if (inputElement.parentElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(inputElement);\n  }\n  updateInputEmptyState(inputElement);\n}\n\n/**\n * @param {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} inputElement\n * @return {void} */\nexport function updateInputEmptyState(inputElement) {\n  const attributeName = 'mdw-value-empty';\n  const textfieldElement = inputElement.parentElement;\n  if (inputElement.value) {\n    if (textfieldElement.hasAttribute(attributeName)) {\n      textfieldElement.removeAttribute(attributeName);\n    }\n  } else if (!textfieldElement.hasAttribute(attributeName)) {\n    textfieldElement.setAttribute('mdw-value-empty', '');\n  }\n}\n\n/**\n * @param {HTMLTextAreaElement} inputElement\n * @return {number} Single row height */\nexport function updateTextAreaSize(inputElement) {\n  const previousRowsValue = inputElement.getAttribute('rows');\n  inputElement.setAttribute('rows', '1');\n  const { height, paddingTop } = window.getComputedStyle(inputElement);\n  if (!height || height === 'auto') {\n    inputElement.setAttribute('rows', previousRowsValue);\n    return -1;\n  }\n  const heightPx = parseInt(height.replace('px', ''), 10);\n  const paddingTopPx = parseInt(paddingTop.replace('px', ''), 10);\n  inputElement.setAttribute('rows', Math.floor((inputElement.scrollHeight - paddingTopPx) / heightPx).toString());\n  return heightPx;\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {string|Date|number}\n */\nexport function getValue(textfieldElement) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if ((input instanceof HTMLTextAreaElement) || (input instanceof HTMLSelectElement)) {\n    return input.value;\n  }\n  const type = input.hasAttribute('type') && input.getAttribute('type').toLowerCase();\n  switch (type) {\n    case 'number':\n    case 'range':\n      return Number.isNaN(input.valueAsNumber) ? null : input.valueAsNumber;\n    case 'date':\n    case 'datetime-local':\n    case 'time':\n      if (input.value == null) {\n        return null;\n      }\n      return new Date(\n        (new Date(input.valueAsNumber).getTimezoneOffset() * 60 * 1000) + input.valueAsNumber\n      );\n    default:\n      return input.value;\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @param {(string|Date|number)=} value\n * @return {void}\n */\nexport function setValue(textfieldElement, value) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (value == null) {\n    input.value = null;\n  } else if (input instanceof HTMLTextAreaElement || input instanceof HTMLSelectElement) {\n    if (value instanceof Date) {\n      input.value = value.toString();\n    } else if (typeof value === 'string') {\n      input.value = value;\n    } else {\n      input.value = value.toString(10);\n    }\n  } else if (value instanceof Date) {\n    const type = input.hasAttribute('type') && input.getAttribute('type').toLowerCase();\n    if (type === 'time') {\n      const hoursStr = `${value.getHours() < 10 ? '0' : ''}${value.getHours()}`;\n      const minutesStr = `${value.getMinutes() < 10 ? '0' : ''}${value.getMinutes()}`;\n      const secondsStr = `${value.getSeconds() < 10 ? '0' : ''}${value.getSeconds()}`;\n      input.value = `${hoursStr}:${minutesStr}:${secondsStr}.${value.getMilliseconds()}`;\n    } else {\n      switch (type) {\n        case 'date':\n          input.valueAsDate = value;\n          break;\n        case 'datetime-local':\n          input.valueAsNumber = value.getTime() - (value.getTimezoneOffset() * 60 * 1000);\n          break;\n        case 'number':\n        case 'range':\n          input.valueAsNumber = value.getTime();\n          break;\n        default:\n          input.value = value.toString();\n      }\n    }\n  } else if (typeof value === 'string') {\n    input.value = value;\n  } else {\n    const type = input.hasAttribute('type') && input.getAttribute('type').toLowerCase();\n    switch (type) {\n      case 'date':\n      case 'time':\n      case 'datetime-local':\n      case 'number':\n      case 'range':\n        input.valueAsNumber = value;\n        break;\n      default:\n        input.value = value.toString();\n    }\n  }\n  updateInputEmptyState(input);\n  if (input instanceof HTMLTextAreaElement && textfieldElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(input);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport { setSelected } from './attributes';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'tab');\n  element.setAttribute('mdw-aria-tab-js', '');\n  element.addEventListener('click', onClick);\n  element.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-tab-js');\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, 'true');\n}\n\n/**\n * Remap Space and Enter as Click\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  element.dispatchEvent(newEvent);\n}\n","import { iterateArrayLike, iterateElementSiblings, isRtl } from '../dom';\n\n// https://www.w3.org/TR/wai-aria-practices/#kbd_roving_tabindex\n\n/**\n * @param {Element} parentElement\n * @param {string} childClass\n * @param {boolean} [focusableWhenDisabled=true]\n * @return {void}\n */\nexport function attach(parentElement, childClass, focusableWhenDisabled = true) {\n  /** @type {Element} */\n  let currentlyFocusedChild = null;\n  /** @type {Element} */\n  let currentTabIndexChild = null;\n  /** @type {Element} */\n  let firstFocusableChild = null;\n  iterateArrayLike(parentElement.getElementsByClassName(childClass), (child) => {\n    if (!currentlyFocusedChild && document.activeElement === child) {\n      currentlyFocusedChild = child;\n    } else if (!currentTabIndexChild && child.getAttribute('tabindex') === '0') {\n      currentTabIndexChild = child;\n    } else {\n      if (!firstFocusableChild && child.getAttribute('aria-hidden') !== 'true'\n        && (focusableWhenDisabled || child.getAttribute('aria-disabled') !== 'true')) {\n        firstFocusableChild = child;\n      }\n      child.setAttribute('tabindex', '-1');\n    }\n    child.addEventListener('focus', onChildFocus);\n  });\n  if (currentlyFocusedChild) {\n    currentlyFocusedChild.setAttribute('tabindex', '0');\n  } else if (currentTabIndexChild) {\n    if (currentlyFocusedChild) {\n      currentTabIndexChild.setAttribute('tabindex', '-1');\n    }\n  } else if (firstFocusableChild) {\n    firstFocusableChild.setAttribute('tabindex', '0');\n  }\n  parentElement.addEventListener('keydown', onParentKeyDown);\n}\n\n\n/**\n * @param {Element} parentElement\n * @param {string} childClass\n * @return {void}\n */\nexport function detach(parentElement, childClass) {\n  iterateArrayLike(parentElement.getElementsByClassName(childClass), (child) => {\n    child.removeEventListener('focus', onChildFocus);\n  });\n  parentElement.removeEventListener('keydown', onParentKeyDown);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nfunction onChildFocus(event) {\n  /** @type {Element} */\n  const child = (event.currentTarget);\n  child.setAttribute('tabindex', '0');\n  iterateElementSiblings(child, (sibling) => {\n    if (sibling.hasAttribute('tabindex')) {\n      sibling.setAttribute('tabindex', '-1');\n    }\n  });\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onParentKeyDown(event) {\n  if (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\n    return;\n  }\n\n  /** @type {Element} */\n  const parentElement = (event.currentTarget);\n  /** @type {Element} */\n  const childElement = (event.target);\n  if (childElement.parentElement !== parentElement) {\n    return;\n  }\n\n  let moveHorizontal = false;\n  let moveVertical = false;\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      moveHorizontal = true;\n      break;\n    case 'ArrowDown':\n    case 'ArrowUp':\n    case 'Down':\n    case 'Up':\n      moveVertical = true;\n      break;\n    default:\n      return;\n  }\n\n  let verticalOrientation = true;\n  // DOM Read\n  const ariaOrientation = parentElement.getAttribute('aria-orientation');\n  if (ariaOrientation === 'horizontal') {\n    verticalOrientation = false;\n  } else if (ariaOrientation !== 'vertical') {\n    const role = parentElement.getAttribute('role');\n    verticalOrientation = role !== 'listbox' && role !== 'tablist';\n  }\n  let moveForwards = false;\n  if (verticalOrientation) {\n    if (!moveVertical) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Down':\n        moveForwards = true;\n        break;\n      case 'ArrowUp':\n      case 'Up':\n        // moveForwards = false;\n        break;\n      default:\n        return;\n    }\n  } else {\n    if (!moveHorizontal) {\n      return;\n    }\n    const isPageRTL = isRtl();\n    switch (event.key) {\n      case 'ArrowLeft':\n      case 'Left':\n        moveForwards = isPageRTL;\n        break;\n      case 'ArrowRight':\n      case 'Right':\n        moveForwards = !isPageRTL;\n        break;\n      default:\n        return;\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  let candidate = childElement;\n\n  do {\n    if (moveForwards) {\n      candidate = candidate.nextElementSibling || candidate.parentElement.firstElementChild;\n    } else {\n      candidate = candidate.previousElementSibling || candidate.parentElement.lastElementChild;\n    }\n    if (candidate.hasAttribute('tabindex') && candidate.getAttribute('aria-hidden') !== 'true') {\n      try {\n        // @ts-ignore\n        candidate.focus();\n      } catch (e) {\n        // Ignore error.\n      }\n    }\n    // Abort if we've looped all the way back to original element\n    // Abort if candidate reserved focus\n  } while (candidate !== childElement && document.activeElement !== candidate);\n}\n"],"sourceRoot":""}