{"version":3,"sources":["webpack:///../core/dom.js","webpack:///../core/aria/rovingtabindex.js","webpack:///../core/aria/button.js","webpack:///../components/button/index.js","webpack:///../core/ripple/index.js","webpack:///../core/overlay/index.js","webpack:///../components/dialog/index.js","webpack:///../components/list/secondary.js","webpack:///../components/list/content.js","webpack:///../core/throttler.js","webpack:///../components/layout/index.js","webpack:///../components/menu/index.js","webpack:///../components/tab/item.js","webpack:///../components/menu/item.js","webpack:///../components/list/index.js","webpack:///../components/textfield/index.js","webpack:///../components/list/item.js","webpack:///../components/bottomnav/item.js","webpack:///../components/snackbar/index.js","webpack:///../components/datatable/index.js","webpack:///../core/aria/attributes.js","webpack:///../core/aria/tab.js","webpack:///../adapters/list/index.js","webpack:///../components/bottomnav/index.js","webpack:///../adapters/search/index.js","webpack:///../components/tab/panel.js","webpack:///../components/tab/content.js","webpack:///../components/tab/list.js","webpack:///../components/tab/index.js","webpack:///../components/chip/index.js","webpack:///../components/chip/item.js","webpack:///../adapters/datatable/column.js","webpack:///../components/progress/index.js","webpack:///../adapters/datatable/index.js","webpack:///../components/fab/index.js","webpack:///../adapters/dom/index.js","webpack:///../core/transition/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getPassiveEventListenerOption","nextTick","cancelTick","getChildElementByClass","findElementParentByClassName","isRtl","dispatchDomEvent","iterateArrayLike","iterateSomeOfArrayLike","iterateElementSiblings","getTextNode","setTextNode","scrollToElement","passiveEventListenerSupported","options","passive","window","addEventListener","removeEventListener","err","testPassiveEventListenerOptionSupport","requestAnimationFrame","cb","setTimeout","cancelAnimationFrame","clearTimeout","element","className","child","getElementsByClassName","parentElement","includeSelf","el","classList","contains","document","documentElement","dir","type","detail","event","CustomEvent","bubbles","cancelable","Event","createEvent","initEvent","initCustomEvent","dispatchEvent","arrayLike","fn","Array","prototype","forEach","call","some","distance","sibling","previousElementSibling","nextElementSibling","node","create","textNode","childNodes","childNode","nodeType","Node","TEXT_NODE","createTextNode","appendChild","value","nodeValue","removeChild","smooth","rtl","parent","targetScrollLeft","scrollWidth","offsetLeft","offsetWidth","elementRect","getBoundingClientRect","parentRect","subPixelScrollPosition","left","Math","abs","scrollLeft","scrollTo","top","behavior","style","setProperty","removeProperty","TABINDEX_ZEROED","FORWARDS_REQUESTED","BACKWARDS_REQUESTED","setupTabIndexes","detach","removeTabIndex","selectNext","selectPrevious","_dom__WEBPACK_IMPORTED_MODULE_0__","items","focusableWhenDisabled","arguments","length","undefined","currentlyFocusedChild","currentTabIndexChild","firstFocusableChild","activeElement","getAttribute","setAttribute","onChildFocus","onKeyDownHandler","currentTarget","excludeItems","item","indexOf","hasAttribute","ctrlKey","altKey","shiftKey","metaKey","childElement","target","moveHorizontal","moveVertical","key","verticalOrientation","ariaOrientation","moveForwards","isPageRTL","stopPropagation","preventDefault","attemptFocus","focus","e","list","current","reverse","foundCurrent","index","array","candidate","onKeyDown","buttonElement","newEvent","attach","add","Ripple","Overlay","attachCore","HTMLButtonElement","HTMLInputElement","AriaButton","detachCore","removeAttribute","button_attach","button_detach","rippleContainer","createElement","firstChild","insertBefore","rippleInner","onClick","onMouseDown","onTouchStart","onAnimationEnd","pointerType","rect","updateRipplePosition","pageX","pageXOffset","pageY","pageYOffset","drawRipple","touch","changedTouches","matches","msMatchesSelector","isActive","x","y","width","height","xPos","yPos","clientWidth","clientHeight","hypotenuse","sqrt","concat","initiator","currentInitiator","animationName","clearRipple","lastInteractionWasTouch","onBlur","onFocus","matchMedia","DialogStack","previousFocus","state","previousState","_classCallCheck","this","OPEN_DIALOGS","CANCEL_EVENT","CONFIRM_EVENT","CUSTOM_EVENT","DISMISS_EVENT","onTransitionEnd","dialogCloser","onCancelClick","popup","buttons","querySelectorAll","foundConfirmButton","foundCancelButton","button","Button","onCustomButtonClick","onConfirmClick","dialogElement","popupElement","setupARIA","propertyName","HTMLAnchorElement","cancelElement","cancel","hide","confirm","onEscapeKeyDown","focusableElements","join","foundTarget","HTMLElement","handleTabKeyPress","onPopState","lastOpenDialog","Object","keys","every","title","getTitleText","history","pushState","titleElement","textContent","bodyElement","stackIndex","stack","splice","hash","back","show","changed","hadLayer","getPropertyValue","dialogRect","Element","transformOriginX","transformOriginY","offsetTop","updateTransformOrigin","newState","random","toString","substr","replaceState","dialogStack","push","focusElement","querySelector","scrollIntoView","updateButtonText","texts","updateBody","content","body","insertAdjacentElement","DocumentFragment","lastChild","updateTitle","buttonArea","buttonText","custom","autofocus","stacked","SECONDARY_ACTION_EVENT","onInteraction","listSecondaryElement","ACTIVATE_EVENT","SELECTED_CHANGE_EVENT","CHECKED_CHANGE_EVENT","FOCUS_EVENT","content_attach","onSecondaryAction","content_onClick","isDisabled","content_detach","setSelected","setChecked","setCurrent","listContentElement","secondaryElement","ListSecondary","onCheckToggleRequest","currentValue","newValue","Attributes","Throttler","throttleTimeMs","pending","queued","queue","_this","run","isNavDrawerModalShowing","hideNavDrawer","getAppBarElement","showFab","hideFab","resetScroll","MIN_SCROLL_DELTA","MOBILE_BREAKPOINT","TABLET_BREAKPOINT","SCROLL_THROTTLE_TIME_MS","lastScrollY","penultimateScrollY","scrolledPastAppBar","appBarElement","layoutContentElement","lastScrollBottomDistance","scrollThrottler","onBodyScroll","contentElement","getContentElement","onContentScroll","toggleNavDrawer","showNavDrawer","toggleSideSheet","showSideSheet","hideSideSheet","scrim","onScrimClick","onScrimScroll","getScrollThrottler","scrollTop","scrollHeight","navDrawer","location","id","innerWidth","sidesheet","onScroll","shouldAutoHideAppBar","appBar","autoHide","changeFabCut","fabElement","fabCutAttr","trim","openAppBarFabCut","replace","closeAppBarFabCut","isBody","scrollElement","currentScrollY","change","delta","scrollBottom","scrollBottomDistance","scrollBottomChange","didScrollUp","isAtScrollTop","newScrollUp","didScrollDown","isAtScrollBottom","newScrollDown","bottomAppBar","scrolledAway","newScrollAway","scrolledBack","isAtRest","MenuStack","originalEvent","pendingResizeOperation","OPEN_MENUS","HIDE_EVENT","menuElement","onMenuClick","onMenuScroll","onWindowResize","lastOpenMenu","updateMenuPosition","selectNextMenuItem","MenuItem","menu","backwards","menuItems","firstFocusableItem","lastFocusableElement","focusable","alignTarget","transformOrigin","useAlignTarget","margin","mdwPosition","mdwDirection","alignTop","alignBottom","alignVCenter","alignStart","alignEnd","alignLeft","alignRight","alignHCenter","openUp","openDown","openNormal","openReverse","openVCenter","openHCenter","openLtr","openRtl","offsetY","offsetBottom","offsetX","offsetRight","popupElementHeight","popupElementWidth","canOpenDownwardsFromBottom","innerHeight","canOpenDownwardsFromTop","canOpenUpwardsFromTop","canOpenUpwardsFromBottom","canOpenRightwardsFromLeft","canOpenRightwardsFromRight","canOpenLeftwardsFromRight","canOpenLeftwardsFromLeft","canOpenFromCenter","candidates","map","filter","candidateNumber","number","menuStack","menuItem","refreshMenuItems","_core_aria_tab__WEBPACK_IMPORTED_MODULE_0__","_core_dom__WEBPACK_IMPORTED_MODULE_1__","_core_overlay_index__WEBPACK_IMPORTED_MODULE_2__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_3__","AriaTab","attachAria","CHECK_EVENT","UNCHECK_EVENT","_core_overlay_index__WEBPACK_IMPORTED_MODULE_0__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_1__","_core_dom__WEBPACK_IMPORTED_MODULE_2__","onMouseMove","role","useAriaChecked","menuItemElement","toggleChecked","checked","isCheckable","isChecked","attachAll","_core_dom__WEBPACK_IMPORTED_MODULE_0__","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_1__","_item__WEBPACK_IMPORTED_MODULE_2__","_content__WEBPACK_IMPORTED_MODULE_3__","root","listElement","newRole","children","setupAria","ListItem","RovingTabIndex","onForwardsRequested","onBackwardsRequested","onTabIndexZeroed","ListContent","onSelectedChangeEvent","onCheckedChangeEvent","onContentFocusEvent","onFocusInteraction","split","interaction","listElementRole","itemElement","defaultPrevented","currentItem","setValue","textfieldElement","input","onInput","inputElement","updateTextAreaSize","updateInputEmptyState","attrName","previousRowsAttrValue","rows","_window$getComputedSt","getComputedStyle","paddingTop","heightPx","parseInt","paddingTopPx","floor","HTMLTextAreaElement","HTMLSelectElement","Date","hoursStr","getHours","minutesStr","getMinutes","secondsStr","getSeconds","getMilliseconds","valueAsDate","valueAsNumber","getTime","getTimezoneOffset","_content__WEBPACK_IMPORTED_MODULE_0__","listItemElement","isTreeItem","roleIsNone","activatorContent","parentRole","contentChild","setExpanded","isExpanded","onChildContentActivate","treeitem","activatedElement","SnackbarQueueItem","hideTimeout","SNACKBAR_QUEUE","SHOW_EVENT","snackbarElement","onButtonClick","slice","reverseIndex","clearHideTimeout","findNextQueueItem","q","handleAnimationChange","currentQueueItem","autoHideString","timeInSeconds","parseFloat","timeout","nextQueueItem","update","span","getElementsByTagName","text","buttonInk","autoDestroy","newlyCreated","skipQueue","updateTabIndex","getScroller","headerRow","getHeaderRow","tbody","getTableBody","cellFocusable","rowFocusable","onHeaderRowClick","onTableBodyKeyDown","onTableBodyClick","firstRow","foundTabbableRow","firstCell","foundTabbableCell","row","cells","cell","mdwDataTable","findParentCell","hasSelection","checkboxes","checkbox","HTMLTableRowElement","HTMLTableCellElement","removeOtherTabIndexes","HTMLTableSectionElement","td","tr","HTMLTableElement","cellIndex","mdwTable","ascending","th","i","deleteRow","sort","a","b","aCell","bCell","aText","bText","dataset","localeCompare","fragment","createDocumentFragment","currentSelection","isRow","nextSelection","sectionRowIndex","newRow","newIndex","newRowIndex","newCellIndex","isRtlEnabled","isLeft","isRight","datatableElement","scroller","footer","table","getTable","tableElement","thead","name","dispatchEventName","stringValue","explicit","emptyValue","attr","_attributes__WEBPACK_IMPORTED_MODULE_0__","AnyListAdapterRenderer","data","primaryText","s","String","ListAdapter","_possibleConstructorReturn","_getPrototypeOf","render","DomAdapter","bottomnavElement","selectedItem","BottomNavItem","containsTextFilter","toLocaleLowerCase","startsWithTextFilter","defaultItemTextParser","textElement","selectSibling","scrollItemIntoView","listItem","visibility","_rect","next","bottom","getElementVisibility","block","inline","SearchAdapter","textfield","List","textFilter","itemTextParser","onItemSelected","inputValue","suggestedInput","setSelectionRange","hideDropDown","onTextFieldKeydownEvent","handleInputEvent","handleBlurEvent","searchOnFocus","dropdown","filterItems","debounce","suggestionMethod","currentSearchTerm","previousValue","performSearch","updateList","results","_this2","showDropDown","performDebounce","checkExpired","searchResults","filterListItems","onErrorCallback","error","message","resolve","reject","Error","searchTerm","_this3","dropDownElement","suggestion","TextField","selectionStart","selectionEnd","fnFilter","_this4","hasItem","newSelection","isDropDownShown","click","tabPanelElement","setHidden","SCROLL_EVENT","onTabContentScroll","tabContentElement","isPageRtl","scrollPoint","visibleIndex","visibilityPercentage","panel","rightPanel","leftPeekPanel","rightPeekPanel","selectedIndex","leftPanelIndex","isResting","leftSelected","rightSelected","lastIndex","leftPanel","currentTargetIndexString","currentTargetIndex","newSelectedIndex","TabPanel","selectPanel","panelElement","scrollToPanel","currentSelectedIndex","panelIndex","otherPanels","tabListElement","setIndicatorPosition","percentage","animate","indicatorElement","leftItem","right","nextItem","TabItem","tab_attach","tab_detach","onResize","RESIZE_WAIT_FRAMES","tabElement","TabList","TabContent","onTabItemSelectedChange","selectedPanel","panels","tabItemElement","tabItemIndex","tabItems","stage","performResize","relatedPanel","relatedItem","dispatchEvents","_item__WEBPACK_IMPORTED_MODULE_1__","ChipItem","_core_ripple_index__WEBPACK_IMPORTED_MODULE_0__","DataTableAdapterColumn","innerHTML","sortable","sortIcon","customSortIcon","hasChildNodes","tooltip","wrapper","primaryColumn","rowSelector","checkboxLabel","icon","constructTableCheckbox","renderer","defaultCheckboxRenderer","defaultCellRenderer","formatter","foundTextNode","circumference","PI","progressCircleElement","dashOffset","pathElements","DataTableAdapter","datatable","datasource","sorter","onValueChangeRequested","onValueChanged","onElementClickListener","handleClickInteraction","onElementScrollListener","onElementScroll","tabindexRow","tabindexRowData","getDataForTableRow","DataTable","columns","page","pageLimit","debounceTimeMs","useLazyRendering","filteredDatasource","forceRefresh","performLazyRender","throttledRenderPending","scheduleThrottledRender","performThrottledRender","debounceTimeout","currentCell","getTableCell","tagName","toLowerCase","setCheckOnAllRows","setHasSelection","currentRow","getTableRow","object","selectedRows","getSelectedRows","updateSortIcons","updateSortColumn","tableHeaderCell","refresh","tableColumn","direction","valueA","valueB","sortedTableHeaderCell","otherTableHeader","columnIndex","column","selectorColumn","getDatasource","buildScrollListener","destroyScrollListener","min","total","max","paginationDetailsElement","previousPageButton","nextPageButton","getFooter","disabled","needsDraw","optionsElement","rowsPerPageText","limits","limitsElement","select","limit","option","dropdownIcon","updateRowCount","updatePaginator","refreshRows","paginationControls","viewportTop","viewportBottom","offsetHeight","rowTop","rowBottom","visibleRows","firstRowIndex","Infinity","lastRowIndex","_this5","len","minRowCount","screen","foundFirstVisibleRow","startIndex","endIndex","isRowVisible","_this6","getLazyRenderRows","refreshRow","clearNonvisibleRows","refreshFilter","_this7","rowLength","rowsToDisplay","offset","rowDifference","newRows","_this8","getTableRowForData","datasourceIndex","minIndex","rowIndex","_this9","refreshCell","missingColumn","missingCell","insertCell","formattedValue","search","_this10","closer","onCloserClicked","onFabButtonClicked","toggle","AnyDomAdapterCreator","AnyDomAdapterRenderer","dataElementMap","Map","elementDataMap","WeakMap","dataBoundsMap","onScrollerScrollListener","onScrollerScroll","setupRecycleOptions","recycle","recycleOptions","position","drawViewport","deferRenderDebounce","deferRender","unlinkedDataItems","removeItem","clear","refreshItem","maxBottomBounds","idle","itemsToDraw","foundVisibleItem","additionalPrerenderSize","preRenderTop","preRenderBottom","cachedBounds","get","newBounds","storeBoundsCache","delete","lastRenderedBounds","renderedElements","newPaddingTop","removeElement","lastItem","lastItemBounds","equalSize","fastMeasure","cache","set","offsetParentRect","offsetParent","subpixelCache","dataIndex","elementIndex","bounds","firstElementChild","previousBounds","checkPosition","siblingIndex","previousDataObject","inserted","previousElement","transitionElement","pxToInteger","px","convertBorderRadius","parsePercentage","numValue","horizontal","vertical","getShapeTransform","targetElement","originElement","originStyle","originRect","targetRect","originCSSStyle","originX","originWidth","originY","originHeight","boxSizing","paddingRight","paddingBottom","paddingLeft","translateX","translateY","scaleX","scaleY","toStyleSyle","toShapeElement","shapeTransform","fromShapeElement","contentTransform","toContentElement","fromContentElement","transitionProperties","oldFromShapeProperties","oldToShapeProperties","oldFromContentProperties","oldToContentProperties","newFromShapeProperties","prop","substring","match","shadow","inset","blurRadius","spreadRadius","color","numberValue","v","topLeft","topRight","bottomLeft","bottomRight","horizontalRadii","verticalRadii","calculatedDuration","duration","totalDuration","fadeInTime","fadeOutTime","transformTransition","fadeInTransition","fadeOutTransition","property","callback","expectedDuration","hasEnded","revertFrom","transition","onComplete"],"mappings":"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","file":"entire-framework.min.js","sourcesContent":["/** @type {?boolean} */\nlet passiveEventListenerSupported = null;\n\n/** @return {void} */\nfunction testPassiveEventListenerOptionSupport() {\n  try {\n    passiveEventListenerSupported = false;\n    const options = {\n      get passive() {\n        passiveEventListenerSupported = true;\n        return true;\n      },\n    };\n    // @ts-ignore\n    window.addEventListener('test', options, options);\n    // @ts-ignore\n    window.removeEventListener('test', options, options);\n  } catch (err) {\n    passiveEventListenerSupported = false;\n  }\n}\n\n/** @return {Object|boolean} */\nexport function getPassiveEventListenerOption() {\n  if (passiveEventListenerSupported == null) {\n    testPassiveEventListenerOptionSupport();\n  }\n  if (passiveEventListenerSupported) {\n    return { passive: true };\n  }\n  return false;\n}\n\nexport const nextTick = window.requestAnimationFrame || (cb => window.setTimeout(cb, 17));\n\nexport const cancelTick = window.cancelAnimationFrame || window.clearTimeout;\n\n/**\n * @param {Element} element\n * @param {string} className\n * @return {Element}\n */\nexport function getChildElementByClass(element, className) {\n  const child = element.getElementsByClassName(className)[0];\n  if (child && child.parentElement !== element) {\n    return null;\n  }\n  return child;\n}\n\n/**\n * @param {Element} element\n * @param {string} className\n * @param {boolean} [includeSelf=true]\n * @return {HTMLElement}\n */\nexport function findElementParentByClassName(element, className, includeSelf) {\n  let el;\n  if (includeSelf === false) {\n    el = element.parentElement;\n  } else {\n    /** @type {HTMLElement} */\n    el = (element);\n  }\n  while (el != null && !el.classList.contains(className)) {\n    el = el.parentElement;\n  }\n  return el;\n}\n\n/** @return {boolean} */\nexport function isRtl() {\n  return document.documentElement.dir === 'rtl';\n}\n\n/**\n * @param {Element} element\n * @param {string} type\n * @param {Object} [detail]\n * @return {boolean}\n */\nexport function dispatchDomEvent(element, type, detail) {\n  let event;\n  if (typeof CustomEvent === 'function') {\n    event = new CustomEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      detail,\n    });\n  } else if (detail == null) {\n    if (typeof Event === 'function') {\n      event = new Event(type, {\n        bubbles: true,\n        cancelable: true,\n      });\n    } else {\n      event = document.createEvent('Event');\n      event.initEvent(type, true, true);\n    }\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, detail);\n  }\n  return element.dispatchEvent(event);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):any} fn\n * @return {void}\n * @template {any} T\n */\nexport function iterateArrayLike(arrayLike, fn) {\n  Array.prototype.forEach.call(arrayLike, fn);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):boolean|void} fn\n * @return {boolean}\n * @template {any} T\n */\nexport function iterateSomeOfArrayLike(arrayLike, fn) {\n  return Array.prototype.some.call(arrayLike, fn);\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.nextElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateSomeOfElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Node} node\n * @param {boolean} [create]\n * @return {Node}\n */\nexport function getTextNode(node, create) {\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (create && !textNode) {\n    textNode = document.createTextNode('');\n    node.appendChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {Node} node\n * @param {string} value\n * @return {Node}\n */\nexport function setTextNode(node, value) {\n  /** @type {ChildNode} */\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (value) {\n    if (!textNode) {\n      textNode = document.createTextNode(value);\n      node.appendChild(textNode);\n    } else {\n      textNode.nodeValue = value;\n    }\n  } else if (textNode) {\n    node.removeChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {HTMLElement} element\n * @param {boolean} [smooth=false]\n * @param {boolean} [rtl=false]\n * @return {void}\n */\nexport function scrollToElement(element, smooth, rtl) {\n  if (!element) {\n    return;\n  }\n  const parent = element.parentElement;\n  if (!parent) {\n    return;\n  }\n\n  let targetScrollLeft = rtl\n    ? parent.scrollWidth + element.offsetLeft - element.offsetWidth\n    : element.offsetLeft;\n\n  const elementRect = element.getBoundingClientRect();\n  const parentRect = parent.getBoundingClientRect();\n  let subPixelScrollPosition = elementRect.left - parentRect.left;\n  if (subPixelScrollPosition < 0) {\n    subPixelScrollPosition = 0;\n  }\n  if (Math.abs(subPixelScrollPosition - targetScrollLeft) < 2) {\n    targetScrollLeft = subPixelScrollPosition;\n  }\n  if (parent.scrollLeft === targetScrollLeft) {\n    return;\n  }\n\n  if (parent.scrollTo) {\n    parent.scrollTo({\n      top: 0,\n      left: targetScrollLeft,\n      behavior: smooth ? 'smooth' : 'auto',\n    });\n    return;\n  }\n  parent.style.setProperty('scroll-behavior', 'auto');\n  parent.scrollLeft = targetScrollLeft;\n  nextTick(() => {\n    parent.style.removeProperty('scroll-behavior');\n  });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#kbd_roving_tabindex\n\nimport {\n  iterateArrayLike,\n  isRtl,\n  dispatchDomEvent,\n  iterateSomeOfArrayLike,\n} from '../dom';\n\nexport const TABINDEX_ZEROED = 'mdw:rovingtabindex-tabindexzeroed';\nexport const FORWARDS_REQUESTED = 'mdw:rovingtabindex-forwardsrequested';\nexport const BACKWARDS_REQUESTED = 'mdw:rovingtabindex-backwardsrequested';\n\n/**\n * @param {Element} parentElement\n * @param {ArrayLike<Element>} items\n * @param {boolean} [focusableWhenDisabled=true]\n * @return {void}\n */\nexport function setupTabIndexes(parentElement, items, focusableWhenDisabled = true) {\n  /** @type {Element} */\n  let currentlyFocusedChild = null;\n  /** @type {Element} */\n  let currentTabIndexChild = null;\n  /** @type {Element} */\n  let firstFocusableChild = null;\n  iterateArrayLike(items, (child) => {\n    if (!currentlyFocusedChild && document.activeElement === child) {\n      currentlyFocusedChild = child;\n    } else if (!currentTabIndexChild && child.getAttribute('tabindex') === '0') {\n      currentTabIndexChild = child;\n    } else {\n      if (!firstFocusableChild && child.getAttribute('aria-hidden') !== 'true'\n        && (focusableWhenDisabled || child.getAttribute('aria-disabled') !== 'true')) {\n        firstFocusableChild = child;\n      }\n      child.setAttribute('tabindex', '-1');\n    }\n    child.addEventListener('focus', onChildFocus);\n  });\n  if (currentlyFocusedChild) {\n    currentlyFocusedChild.setAttribute('tabindex', '0');\n  } else if (currentTabIndexChild) {\n    if (currentlyFocusedChild) {\n      currentTabIndexChild.setAttribute('tabindex', '-1');\n    }\n  } else if (firstFocusableChild) {\n    firstFocusableChild.setAttribute('tabindex', '0');\n  }\n  parentElement.addEventListener('keydown', onKeyDownHandler);\n}\n\n\n/**\n * @param {Element} parentElement\n * @param {ArrayLike<Element>} items\n * @return {void}\n */\nexport function detach(parentElement, items) {\n  iterateArrayLike(items, (child) => {\n    child.removeEventListener('focus', onChildFocus);\n  });\n  parentElement.removeEventListener('keydown', onKeyDownHandler);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nfunction onChildFocus(event) {\n  /** @type {Element} */\n  const child = (event.currentTarget);\n  if (child.getAttribute('tabindex') === '0') {\n    return;\n  }\n  child.setAttribute('tabindex', '0');\n  dispatchDomEvent(child, TABINDEX_ZEROED);\n}\n\n/**\n * @param {ArrayLike<Element>} items\n * @param {Element[]} [excludeItems]\n * @return {void}\n */\nexport function removeTabIndex(items, excludeItems = []) {\n  iterateArrayLike(items, (item) => {\n    if (excludeItems.indexOf(item) !== -1) {\n      return;\n    }\n    if (item.hasAttribute('tabindex')) {\n      item.setAttribute('tabindex', '-1');\n    }\n  });\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDownHandler(event) {\n  if (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\n    return;\n  }\n\n  /** @type {Element} */\n  const parentElement = (event.currentTarget);\n  /** @type {Element} */\n  const childElement = (event.target);\n\n  let moveHorizontal = false;\n  let moveVertical = false;\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      moveHorizontal = true;\n      break;\n    case 'ArrowDown':\n    case 'ArrowUp':\n    case 'Down':\n    case 'Up':\n      moveVertical = true;\n      break;\n    default:\n      return;\n  }\n\n  let verticalOrientation = true;\n  // DOM Read\n  const ariaOrientation = parentElement.getAttribute('aria-orientation');\n  if (ariaOrientation === 'horizontal') {\n    verticalOrientation = false;\n  } else if (ariaOrientation !== 'vertical') {\n    switch (parentElement.getAttribute('role')) {\n      case 'listbox':\n      case 'tablist':\n      case 'tree':\n        verticalOrientation = true;\n        break;\n      default:\n        verticalOrientation = false;\n    }\n  }\n  let moveForwards = false;\n  if (verticalOrientation) {\n    if (!moveVertical) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Down':\n        moveForwards = true;\n        break;\n      case 'ArrowUp':\n      case 'Up':\n        // moveForwards = false;\n        break;\n      default:\n        return;\n    }\n  } else {\n    if (!moveHorizontal) {\n      return;\n    }\n    const isPageRTL = isRtl();\n    switch (event.key) {\n      case 'ArrowLeft':\n      case 'Left':\n        moveForwards = isPageRTL;\n        break;\n      case 'ArrowRight':\n      case 'Right':\n        moveForwards = !isPageRTL;\n        break;\n      default:\n        return;\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  if (moveForwards) {\n    dispatchDomEvent(childElement, FORWARDS_REQUESTED);\n  } else {\n    dispatchDomEvent(childElement, BACKWARDS_REQUESTED);\n  }\n}\n\n/**\n * @param {HTMLElement} element\n * @return {boolean}\n */\nfunction attemptFocus(element) {\n  try {\n    element.focus();\n  } catch (e) {\n    // Ignore error.\n  }\n  return document.activeElement === element;\n}\n\n/**\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @param {boolean} [reverse]\n * @return {void}\n */\nexport function selectNext(list, current = null, reverse = false) {\n  let foundCurrent = false;\n\n  const iterateResult = iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!foundCurrent) {\n      if (current) {\n        if (candidate === current) {\n          foundCurrent = true;\n        }\n      } else if (candidate.getAttribute('tabindex') === '0') {\n        foundCurrent = true;\n      }\n      return false;\n    }\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    return attemptFocus(candidate);\n  });\n  if (iterateResult) {\n    return;\n  }\n  iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    // Abort if we've looped all the way back to original element\n    // Abort if candidate received focus\n    return (attemptFocus(candidate) || candidate === current);\n  });\n}\n\n/**\n * Alias for selectNext(list, current, true);\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @return {void}\n */\nexport function selectPrevious(list, current) {\n  return selectNext(list, current, true);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'button');\n  if (element instanceof HTMLButtonElement === false\n      && !element.hasAttribute('tabindex')) {\n    element.setAttribute('tabindex', '0');\n  }\n  element.setAttribute('mdw-aria-button-js', '');\n  if (element instanceof HTMLButtonElement === false\n    && element instanceof HTMLInputElement === false) {\n    element.addEventListener('keydown', onKeyDown);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-button-js');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (!buttonElement) {\n    return;\n  }\n  if (buttonElement.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  buttonElement.dispatchEvent(newEvent);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\nimport * as Ripple from '../../core/ripple/index';\nimport * as Overlay from '../../core/overlay/index';\nimport * as AriaButton from '../../core/aria/button';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Ripple.attach(element);\n  element.classList.add('mdw-ripple');\n  Overlay.attach(element);\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  AriaButton.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaButton.detach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","import {\n  getChildElementByClass, nextTick, getPassiveEventListenerOption, iterateArrayLike,\n} from '../dom';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-ripple'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  let rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (!rippleContainer) {\n    rippleContainer = document.createElement('div');\n    rippleContainer.classList.add('mdw-ripple__container');\n    rippleContainer.setAttribute('role', 'presentation');\n    if (element.firstChild) {\n      element.insertBefore(rippleContainer, element.firstChild);\n    } else {\n      element.appendChild(rippleContainer);\n    }\n  }\n\n  let rippleInner = getChildElementByClass(rippleContainer, 'mdw-ripple__inner');\n  if (!rippleInner) {\n    rippleInner = document.createElement('div');\n    rippleInner.classList.add('mdw-ripple__inner');\n    rippleInner.setAttribute('role', 'presentation');\n    rippleContainer.appendChild(rippleInner);\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.removeAttribute('mdw-fade-out');\n  element.setAttribute('mdw-ripple-js', '');\n  element.addEventListener('click', onClick, getPassiveEventListenerOption());\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  rippleInner.addEventListener('animationend', onAnimationEnd, getPassiveEventListenerOption());\n}\n\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (!event.pointerType && !event.detail) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = event.pageX - rect.left - window.pageXOffset;\n  const y = event.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'mouse');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  const touch = event.changedTouches[0];\n  if (!touch) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = touch.pageX - rect.left - window.pageXOffset;\n  const y = touch.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'touch');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n\n  nextTick(() => {\n    if (isActive(rippleContainer.parentElement)) {\n      if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n        return;\n      }\n      updateRipplePosition(rippleInner);\n      drawRipple(rippleInner, 'key');\n    }\n  });\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isActive(element) {\n  if (element.matches) {\n    return element.matches(':active');\n  }\n  // @ts-ignore\n  if (element.msMatchesSelector) {\n    // @ts-ignore\n    element.msMatchesSelector(':active');\n  }\n  return false;\n}\n\n/**\n * @param {HTMLElement} rippleInner\n * @param {number} [x]\n * @param {number} [y]\n * @return {void}\n */\nexport function updateRipplePosition(rippleInner, x, y) {\n  let width;\n  let height;\n  let xPos = x;\n  let yPos = y;\n  if (x == null) {\n    xPos = rippleInner.parentElement.clientWidth / 2;\n    width = xPos;\n  } else if (x >= rippleInner.parentElement.clientWidth / 2) {\n    width = x;\n    // furthest horizontal side is left\n  } else {\n    width = rippleInner.parentElement.clientWidth - x;\n    // furthest horizontal side is right\n  }\n  if (y == null) {\n    yPos = rippleInner.parentElement.clientHeight / 2;\n    height = yPos;\n  } else if (y >= rippleInner.parentElement.clientHeight / 2) {\n    height = y;\n    // furthest vertical side is bottom\n  } else {\n    height = rippleInner.parentElement.clientHeight - y;\n    // furthest vertical side is top\n  }\n  const hypotenuse = Math.sqrt((width * width) + (height * height));\n  rippleInner.style.setProperty('height', `${hypotenuse}px`);\n  rippleInner.style.setProperty('width', `${hypotenuse}px`);\n  rippleInner.style.setProperty('left', `${xPos - (hypotenuse / 2)}px`);\n  rippleInner.style.setProperty('top', `${yPos - (hypotenuse / 2)}px`);\n}\n\n/**\n * @param {Element} rippleInner\n * @param {string} initiator\n * @return {void}\n */\nexport function drawRipple(rippleInner, initiator) {\n  const currentInitiator = rippleInner.getAttribute('mdw-fade-in');\n  if (currentInitiator && currentInitiator !== initiator) {\n    // Only allow repeat interactions from same initiator\n    return;\n  }\n  rippleInner.setAttribute('mdw-fade-in', initiator);\n  if (currentInitiator === initiator) {\n    // Repeat the animation\n    if (rippleInner.hasAttribute('mdw-fade-in-repeat')) {\n      rippleInner.removeAttribute('mdw-fade-in-repeat');\n    } else {\n      rippleInner.setAttribute('mdw-fade-in-repeat', '');\n    }\n  }\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  /** @type {HTMLElement} */\n  const rippleInner = (event.currentTarget);\n  if (event.animationName === 'ripple-fade-in' || event.animationName === 'ripple-fade-in-repeat') {\n    rippleInner.setAttribute('mdw-fade-in-complete', '');\n    return;\n  }\n  if (event.animationName === 'ripple-fade-out') {\n    rippleInner.removeAttribute('mdw-fade-in');\n    rippleInner.removeAttribute('mdw-fade-in-repeat');\n    rippleInner.removeAttribute('mdw-fade-in-complete');\n    rippleInner.removeAttribute('mdw-fade-out');\n  }\n}\n\n/**\n * @param {Element} rippleInner\n * @return {void}\n */\nexport function clearRipple(rippleInner) {\n  if (!rippleInner.hasAttribute('mdw-fade-in')) {\n    return;\n  }\n  if (rippleInner.hasAttribute('mdw-keydown') && !rippleInner.hasAttribute('mdw-keyup')) {\n    return;\n  }\n  if (!rippleInner.hasAttribute('mdw-fade-in-complete')) {\n    return;\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.setAttribute('mdw-fade-out', '');\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (event.pointerType || event.detail) {\n    return;\n  }\n  if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n    // Already handled by keydown\n    return;\n  }\n  updateRipplePosition(rippleInner);\n  drawRipple(rippleInner, 'key');\n  nextTick(() => {\n    clearRipple(rippleInner);\n  });\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  const rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (rippleContainer) {\n    element.removeChild(rippleContainer);\n  }\n  element.removeAttribute('mdw-ripple-js');\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousedown', onMouseDown);\n  element.removeEventListener('touchstart', onTouchStart);\n  element.removeEventListener('keydown', onKeyDown);\n}\n","import { getPassiveEventListenerOption, iterateArrayLike } from '../dom';\n\nlet lastInteractionWasTouch = false;\n\nif (window && window.matchMedia) {\n  lastInteractionWasTouch = window.matchMedia('(any-pointer: coarse)').matches;\n}\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-overlay'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-overlay-js', '');\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.addEventListener('blur', onBlur, getPassiveEventListenerOption());\n  element.addEventListener('focus', onFocus, getPassiveEventListenerOption());\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.hasAttribute('mdw-overlay-touch')) {\n    return;\n  }\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'true');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onBlur(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  const value = element.getAttribute('mdw-overlay-touch');\n  if (value == null) {\n    return;\n  }\n  if (value === 'true') {\n    lastInteractionWasTouch = true;\n  } else {\n    lastInteractionWasTouch = false;\n  }\n  element.removeAttribute('mdw-overlay-touch');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element.hasAttribute('mdw-overlay-touch')) {\n    // Element was focused without a mouse or touch event (keyboard or programmatic)\n    if (lastInteractionWasTouch) {\n      element.setAttribute('mdw-overlay-touch', 'true');\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-overlay-js');\n  element.removeAttribute('mdw-overlay-touch');\n  element.removeEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.removeEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.removeEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.removeEventListener('blur', onBlur, getPassiveEventListenerOption());\n}\n","// https://www.w3.org/TR/wai-aria-practices/#dialog_modal\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  findElementParentByClassName,\n  getChildElementByClass,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\nclass DialogStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object} [state]\n   * @param {Object} [previousState]\n   */\n  constructor(element, previousFocus, state, previousState) {\n    this.element = (element);\n    this.previousFocus = (previousFocus);\n    this.state = state;\n    this.previousState = previousState;\n  }\n}\n\n/** @type {DialogStack[]} */\nconst OPEN_DIALOGS = [];\n\nexport const CANCEL_EVENT = 'mdw:dialog-cancel';\n\nexport const CONFIRM_EVENT = 'mdw:dialog-confirm';\n\nexport const CUSTOM_EVENT = 'mdw:dialog-custom';\n\nexport const DISMISS_EVENT = 'mdw:dialog-dismiss';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-dialog-js', '');\n  element.addEventListener('transitionend', onTransitionEnd);\n\n  let dialogCloser = getChildElementByClass(element, 'mdw-dialog__close');\n  if (!dialogCloser) {\n    dialogCloser = document.createElement('div');\n    dialogCloser.className = 'mdw-dialog__close';\n    if (element.firstChild) {\n      element.insertBefore(dialogCloser, element.firstChild);\n    } else {\n      element.appendChild(dialogCloser);\n    }\n  }\n  dialogCloser.addEventListener('click', onCancelClick);\n  const popup = getChildElementByClass(element, 'mdw-dialog__popup');\n  popup.addEventListener('keydown', onKeyDown);\n  const buttons = popup.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  let foundConfirmButton = false;\n  let foundCancelButton = false;\n  iterateArrayLike(buttons, (button) => {\n    Button.attach(button);\n    if (button.hasAttribute('mdw-custom')) {\n      button.addEventListener('click', onCustomButtonClick);\n      return;\n    }\n    if (!foundConfirmButton) {\n      button.addEventListener('click', onConfirmClick);\n      foundConfirmButton = true;\n      return;\n    }\n    if (!foundCancelButton) {\n      button.addEventListener('click', onCancelClick);\n      foundCancelButton = true;\n      return;\n    }\n    button.addEventListener('click', onCustomButtonClick);\n  });\n  setupARIA(element);\n}\n\n/**\n * @param {TransitionEvent} event\n * @return {void}\n */\nexport function onTransitionEnd(event) {\n  if (event.propertyName !== 'opacity') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const dialogElement = (event.currentTarget);\n  if (dialogElement.getAttribute('aria-hidden') !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (!popupElement) {\n    return;\n  }\n  popupElement.style.removeProperty('display');\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function setupARIA(dialogElement) {\n  if (dialogElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  dialogElement.setAttribute('role', 'dialog');\n  dialogElement.setAttribute('aria-modal', 'true');\n  if (!dialogElement.hasAttribute('aria-hidden')) {\n    dialogElement.setAttribute('aria-hidden', 'true');\n  }\n  const popupElement = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n  if (!popupElement) {\n    return;\n  }\n\n  if (!popupElement.hasAttribute('aria-label') && !popupElement.hasAttribute('aria-labelledby')) {\n    const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (titleElement) {\n      // titleElement\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function detach(dialogElement) {\n  dialogElement.removeEventListener('transitionend', onTransitionEnd);\n  dialogElement.removeAttribute('mdw-dialog-js');\n  const dialogCloser = getChildElementByClass(dialogElement, 'mdw-dialog__close');\n  if (dialogCloser) {\n    dialogCloser.removeEventListener('click', onCancelClick);\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (popupElement) {\n    popupElement.removeEventListener('keydown', onKeyDown);\n    popupElement.style.removeProperty('transform-origin');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  const buttons = popupElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button) => {\n    Button.detach(button);\n    button.removeEventListener('click', onConfirmClick);\n    button.removeEventListener('click', onCancelClick);\n    button.removeEventListener('click', onCustomButtonClick);\n  });\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCancelClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const cancelElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(cancelElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onConfirmClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  confirm(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCustomButtonClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  if (dispatchDomEvent(dialogElement, CUSTOM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Tab') {\n    handleTabKeyPress(event);\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    onEscapeKeyDown(event);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onEscapeKeyDown(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const popupElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(popupElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenDialog = OPEN_DIALOGS[OPEN_DIALOGS.length - 1];\n  if (!lastOpenDialog || !lastOpenDialog.previousState) {\n    return;\n  }\n  if ((lastOpenDialog.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenDialog.previousState[key])) {\n    if (dispatchDomEvent(lastOpenDialog.element, CANCEL_EVENT)) {\n      hide(lastOpenDialog.element);\n    } else {\n      // Revert pop state by pushing state again\n      const title = getTitleText(lastOpenDialog.element);\n      window.history.pushState(lastOpenDialog.state, title);\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function cancel(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CANCEL_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function confirm(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CONFIRM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {string}\n */\nexport function getTitleText(dialogElement) {\n  let title = 'Dialog';\n  const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (titleElement) {\n    title = titleElement.textContent;\n  } else {\n    const bodyElement = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n    if (bodyElement) {\n      title = bodyElement.textContent;\n    }\n  }\n  return title;\n}\n\n/**\n * @param {Element} dialogElement\n * @return {boolean} handled\n */\nexport function hide(dialogElement) {\n  if (dialogElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(dialogElement, DISMISS_EVENT)) {\n    return false;\n  }\n  dialogElement.setAttribute('aria-hidden', 'true');\n  // .mdw-dialog__popup hidden by transitionEnd event\n  let stackIndex = -1;\n  OPEN_DIALOGS.some((stack, index) => {\n    if (stack.element === dialogElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const stack = OPEN_DIALOGS[stackIndex];\n    if (stack.previousFocus && stack.previousFocus instanceof HTMLElement) {\n      if (findElementParentByClassName(document.activeElement, 'mdw-dialog') === dialogElement) {\n        // Only pop focus back when hiding a dialog with focus within itself.\n        try {\n          stack.previousFocus.focus();\n        } catch (e) {\n          // Failed to focus\n        }\n      }\n    }\n    OPEN_DIALOGS.splice(stackIndex, 1);\n    if (stack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (stack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_DIALOGS.length) {\n    window.removeEventListener('popstate', onPopState);\n  }\n  return true;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {boolean} handled\n */\nexport function show(dialogElement, event) {\n  if (event && event.type === 'click' && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  let changed = false;\n\n  if (dialogElement.getAttribute('aria-hidden') !== 'false') {\n    dialogElement.setAttribute('aria-hidden', 'false');\n    /** @type {HTMLElement} */\n    const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n    popupElement.style.setProperty('display', 'flex');\n    changed = true;\n  }\n\n  updateTransformOrigin(dialogElement, event);\n\n  if (!changed) {\n    return false;\n  }\n  attach(dialogElement);\n  const previousFocus = document.activeElement;\n  const newState = { hash: Math.random().toString(36).substr(2, 16) };\n  let previousState = null;\n  if (window.history && window.history.pushState) {\n    if (!window.history.state) {\n      // Create new previous state\n      window.history.replaceState({\n        hash: Math.random().toString(36).substr(2, 16),\n      }, document.title);\n    }\n    previousState = window.history.state;\n    const title = getTitleText(dialogElement);\n    window.history.pushState(newState, title);\n    window.addEventListener('popstate', onPopState);\n  }\n  const dialogStack = new DialogStack(dialogElement, previousFocus, newState, previousState);\n  OPEN_DIALOGS.push(dialogStack);\n  const focusElement = dialogElement.querySelector('[mdw-autofocus]');\n  try {\n    if (focusElement && focusElement instanceof HTMLElement) {\n      if (focusElement.scrollIntoView) {\n        focusElement.scrollIntoView();\n      }\n      focusElement.focus();\n    } else if (dialogElement instanceof HTMLElement) {\n      dialogElement.focus();\n    }\n  } catch (e) {\n    // Failed to focus\n  }\n  return true;\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function handleTabKeyPress(event) {\n  /** @type {Element} */\n  const popupElement = (event.currentTarget);\n  const focusableElements = popupElement.querySelectorAll([\n    'button:not(:disabled):not([tabindex=\"-1\"])',\n    '[href]:not(:disabled):not([tabindex=\"-1\"])',\n    'input:not(:disabled):not([tabindex=\"-1\"])',\n    'select:not(:disabled):not([tabindex=\"-1\"])',\n    'textarea:not(:disabled):not([tabindex=\"-1\"])',\n    '[tabindex]:not([tabindex=\"-1\"])'].join(', '));\n  let foundTarget = false;\n  let candidate = null;\n  iterateSomeOfArrayLike(focusableElements, (el) => {\n    if (el === event.target) {\n      foundTarget = true;\n      if (event.shiftKey) {\n        return true;\n      }\n    } else if (event.shiftKey) {\n      candidate = el;\n    } else if (foundTarget) {\n      candidate = el;\n      return true;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (event.shiftKey) {\n      // Select last item\n      candidate = focusableElements[focusableElements.length - 1];\n    } else {\n      // Select first item\n      candidate = focusableElements[0];\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  if (candidate && candidate instanceof HTMLElement) {\n    try {\n      candidate.focus();\n    } catch (e) {\n      // Failed to focus\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)} [content]\n * @return {void}\n */\nexport function updateTitle(dialogElement, content) {\n  let title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (!content) {\n    if (!title) {\n      // Nothing to be done\n      return;\n    }\n    title.parentElement.removeChild(title);\n    return;\n  }\n  if (!title) {\n    title = document.createElement('div');\n    title.className = 'mdw-dialog__title';\n    const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n    popup.insertBefore(title, popup.firstChild);\n  }\n  if (content instanceof DocumentFragment) {\n    while (title.lastChild) {\n      title.removeChild(title.lastChild);\n    }\n    title.appendChild(content);\n  } else {\n    title.textContent = content;\n  }\n}\n\n\n/**\n * @param {Element} dialogElement\n * @param {string[]} texts\n * @return {void}\n */\nexport function updateButtonText(dialogElement, texts) {\n  const buttons = dialogElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button, index) => {\n    setTextNode(button, texts[index]);\n  });\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)} [content]\n * @return {void}\n */\nexport function updateBody(dialogElement, content) {\n  let body = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n  if (!content) {\n    if (!body) {\n      // Nothing to be done\n      return;\n    }\n    body.parentElement.removeChild(body);\n    return;\n  }\n  if (!body) {\n    body = document.createElement('div');\n    body.className = 'mdw-dialog__body mdw-theme';\n    body.setAttribute('mdw-ink', 'medium');\n    const title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (title) {\n      title.insertAdjacentElement('afterend', body);\n    } else {\n      const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n      popup.insertBefore(body, popup.firstChild);\n    }\n  }\n  if (content instanceof DocumentFragment) {\n    while (body.lastChild) {\n      body.removeChild(body.lastChild);\n    }\n    body.appendChild(content);\n  } else {\n    body.textContent = content;\n  }\n}\n\n/**\n * @param {Object} options\n * @param {(DocumentFragment|string)} [options.title]\n * @param {(DocumentFragment|string)} [options.body]\n * @param {string[]} [options.buttons]\n * @param {boolean} [options.stacked=false]\n * @param {Element} [options.parent]\n * @param {boolean} [options.custom=false] Use custom button events\n * @param {(string|number)} [options.autofocus=0] Autofocus button by index or text\n * @return {Element}\n */\nexport function create(options) {\n  const element = document.createElement('div');\n  element.className = 'mdw-dialog';\n\n  const popup = document.createElement('div');\n  popup.className = 'mdw-dialog__popup mdw-theme';\n  popup.setAttribute('mdw-surface', 'card');\n  element.appendChild(popup);\n\n  updateTitle(element, options.title);\n  updateBody(element, options.body);\n\n  if (options.buttons) {\n    const buttonArea = document.createElement('div');\n    buttonArea.className = 'mdw-dialog__button-area';\n    let index = 0;\n    options.buttons.forEach((buttonText) => {\n      const button = document.createElement('div');\n      button.className = 'mdw-button mdw-theme';\n      button.setAttribute('tabindex', '0');\n      button.setAttribute('mdw-ink', 'secondary');\n      if (options.custom) {\n        button.setAttribute('mdw-custom', '');\n      }\n      button.textContent = buttonText;\n      buttonArea.appendChild(button);\n      if ((options.autofocus == null && index === 0)\n        || options.autofocus === index || options.autofocus === buttonText) {\n        button.setAttribute('mdw-autofocus', '');\n      }\n      index += 1;\n    });\n    if (options.stacked) {\n      buttonArea.setAttribute('mdw-stacked', '');\n    }\n    popup.appendChild(buttonArea);\n  }\n  if (options.parent) {\n    options.parent.appendChild(element);\n  }\n  attach(element);\n  return element;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {void}\n */\nexport function updateTransformOrigin(dialogElement, event) {\n  /** @type {HTMLElement} */\n  const popup = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  popup.style.removeProperty('transform-origin');\n  if (!event) {\n    return;\n  }\n  const hadLayer = popup.style.getPropertyValue('display') != null;\n  if (!hadLayer) {\n    popup.style.setProperty('display', 'flex');\n  }\n  let pageX;\n  let pageY;\n  const dialogRect = dialogElement.getBoundingClientRect();\n  if ('pageX' in event && 'pageY' in event) {\n    ({ pageX, pageY } = event);\n    pageX -= window.pageXOffset;\n    pageY -= window.pageYOffset;\n  } else {\n    /** @type {Element} */\n    const target = (event.target || event.currentTarget);\n    if (target instanceof Element === false) {\n      return;\n    }\n    const rect = target.getBoundingClientRect();\n    if (!rect.width && !rect.width && !rect.left && !rect.top) {\n      return;\n    }\n    pageX = rect.left + (rect.width / 2);\n    pageY = rect.top + (rect.height / 2);\n  }\n  const transformOriginX = pageX - dialogRect.left - popup.offsetLeft;\n  const transformOriginY = pageY - dialogRect.top - popup.offsetTop;\n  popup.style.setProperty('transform-origin', `${transformOriginX}px ${transformOriginY}px`);\n  if (!hadLayer) {\n    popup.style.removeProperty('display');\n  }\n}\n\n// Aliases\nexport const dismiss = hide;\n","import { dispatchDomEvent, getPassiveEventListenerOption } from '../../core/dom';\n\nexport const SECONDARY_ACTION_EVENT = 'mdw:listsecondary-action';\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function attach(listSecondaryElement) {\n  if (!listSecondaryElement.hasAttribute('mdw-action')) {\n    return;\n  }\n  listSecondaryElement.addEventListener('click', onClick);\n  listSecondaryElement.addEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onInteraction(event) {\n  event.stopPropagation();\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listSecondaryElement = (event.currentTarget);\n  dispatchDomEvent(listSecondaryElement, SECONDARY_ACTION_EVENT);\n}\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function detach(listSecondaryElement) {\n  listSecondaryElement.removeEventListener('click', onClick);\n  listSecondaryElement.removeEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n","import { iterateArrayLike, dispatchDomEvent } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\nimport * as Attributes from '../../core/aria/attributes';\n\nimport * as ListSecondary from './secondary';\n\nexport const ACTIVATE_EVENT = 'mdw:listcontent-activate';\nexport const SELECTED_CHANGE_EVENT = 'mdw:listcontent-selectedchange';\nexport const CHECKED_CHANGE_EVENT = 'mdw:listcontent-checkedchange';\nexport const FOCUS_EVENT = 'mdw:listcontent-focus';\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function attach(listContentElement) {\n  attachCore(listContentElement);\n  if (!listContentElement.hasAttribute('mdw-no-overlay')) {\n    listContentElement.classList.add('mdw-overlay');\n    Overlay.attach(listContentElement);\n  }\n  if (!listContentElement.hasAttribute('mdw-no-ripple')) {\n    listContentElement.classList.add('mdw-ripple');\n    Ripple.attach(listContentElement);\n  }\n  if (listContentElement.getAttribute('role') === 'radio'\n  && listContentElement.getAttribute('aria-checked') === 'true'\n  && listContentElement.getAttribute('tabindex') !== '0') {\n    listContentElement.setAttribute('tabindex', '0');\n  }\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.attach(secondaryElement);\n  }\n  listContentElement.addEventListener(ListSecondary.SECONDARY_ACTION_EVENT, onSecondaryAction);\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  if (document.activeElement !== event.currentTarget) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (!listContentElement) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  if (isDisabled(listContentElement)) {\n    return;\n  }\n\n  if (event.key === 'Spacebar' || event.key === ' ') {\n    if (onCheckToggleRequest(listContentElement)) {\n      return;\n    }\n  }\n\n  // Slightly redundant, but performs ripple\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  listContentElement.dispatchEvent(newEvent);\n}\n\n/**\n * @param {Element} listContentElement\n * @return {boolean} handled\n */\nfunction onCheckToggleRequest(listContentElement) {\n  const currentValue = listContentElement.getAttribute('aria-checked');\n  if (currentValue == null) {\n    // Attribute does not exist\n    return false;\n  }\n  let newValue = currentValue === 'true' ? 'false' : 'true';\n  if (newValue === 'false' && listContentElement.getAttribute('role') === 'radio') {\n    newValue = 'true';\n  }\n  Attributes.setChecked(listContentElement, newValue, CHECKED_CHANGE_EVENT);\n  return true;\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function attachCore(listContentElement) {\n  if (!listContentElement.hasAttribute('role')) {\n    if (listContentElement.parentElement.getAttribute('role') === 'none') {\n      listContentElement.setAttribute('role', 'option');\n    }\n  }\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__icon'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__avatar'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  listContentElement.addEventListener('click', onClick);\n  listContentElement.addEventListener('keydown', onKeyDown);\n  listContentElement.addEventListener('focus', onFocus);\n}\n\n/**\n * Sets [aria-checked=\"true\"] on Focus if [role=\"radio\"]\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  dispatchDomEvent(listContentElement, FOCUS_EVENT);\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onSecondaryAction(event) {\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (isDisabled(listContentElement)) {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  onCheckToggleRequest(listContentElement);\n\n  // Regardless if checkable, event is propagated up\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (isDisabled(listContentElement)) {\n    return;\n  }\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (!secondaryElement || !secondaryElement.hasAttribute('mdw-action')) {\n    if (onCheckToggleRequest(listContentElement)) {\n      return;\n    }\n  }\n  dispatchDomEvent(listContentElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return (element.getAttribute('aria-disabled') === 'true');\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function detachCore(listContentElement) {\n  listContentElement.removeEventListener('click', onClick);\n  listContentElement.removeEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function detach(listContentElement) {\n  detachCore(listContentElement);\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.detach(secondaryElement);\n  }\n  listContentElement.removeEventListener(ListSecondary.SECONDARY_ACTION_EVENT, onSecondaryAction);\n  Ripple.detach(listContentElement);\n  Overlay.detach(listContentElement);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setChecked(element, value, dispatchEvent = true) {\n  return Attributes.setChecked(element, value, dispatchEvent ? CHECKED_CHANGE_EVENT : null);\n}\n\n// Alias\nexport const { setCurrent } = Attributes;\n","export default class Throttler {\n  /** @param {number} throttleTimeMs */\n  constructor(throttleTimeMs) {\n    this.pending = false;\n    this.queued = false;\n    this.queue = null;\n    this.throttleTimeMs = throttleTimeMs;\n  }\n\n  abort() {\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.pending = false;\n    this.queued = false;\n  }\n\n  /**\n   * @param {function} fn\n   * @return {void}\n   */\n  run(fn) {\n    if (this.pending) {\n      this.queued = true;\n      return;\n    }\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.queued = false;\n    this.pending = true;\n    this.queue = setTimeout(() => {\n      this.pending = false;\n      if (this.queued) {\n        this.run(fn);\n      }\n    }, this.throttleTimeMs);\n    fn();\n  }\n}\n","import { iterateArrayLike } from '../../core/dom';\nimport Throttler from '../../core/throttler';\n\nconst MIN_SCROLL_DELTA = 24; // Avoid finger bounce\n\nconst MOBILE_BREAKPOINT = 600;\nconst TABLET_BREAKPOINT = 1024;\n\n// Throttler will execute at earliest convenience\n// Smoother than using requestAnimationFrame\nconst SCROLL_THROTTLE_TIME_MS = 20;\n\n/** @type {number} */\nlet lastScrollY = null;\n/** @type {number} */\nlet penultimateScrollY = null;\nlet scrolledPastAppBar = false;\n/** @type {HTMLElement} */\nlet appBarElement = null;\n/** @type {HTMLElement} */\nlet layoutContentElement = null;\n/** @type {number} */\nlet lastScrollBottomDistance = null;\n/** @type {Throttler} */\nlet scrollThrottler = null;\n\n/** @return {void} */\nexport function attach() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    // Initialize with scroll up\n    document.body.addEventListener('scroll', onBodyScroll);\n    const contentElement = getContentElement();\n    if (contentElement) {\n      contentElement.addEventListener('scroll', onContentScroll);\n    }\n    resetScroll();\n  }\n\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-toggle'),\n    el => el.addEventListener('click', toggleNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-show'),\n    el => el.addEventListener('click', showNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-hide'),\n    el => el.addEventListener('click', hideNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-toggle'),\n    el => el.addEventListener('click', toggleSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-show'),\n    el => el.addEventListener('click', showSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-hide'),\n    el => el.addEventListener('click', hideSideSheet));\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.addEventListener('click', onScrimClick);\n    scrim.addEventListener('scroll', onScrimScroll);\n    scrim.addEventListener('touchmove', onScrimScroll);\n    scrim.addEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {Throttler} */\nexport function getScrollThrottler() {\n  if (!scrollThrottler) {\n    scrollThrottler = new Throttler(SCROLL_THROTTLE_TIME_MS);\n  }\n  return scrollThrottler;\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onScrimScroll(event) {\n  // JS needed for Safari\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    event.preventDefault();\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/** @return {boolean} */\nexport function isNavDrawerModalShowing() {\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  if (!navDrawer) {\n    return false;\n  }\n  if (window.location.hash !== `#${navDrawer.id}` && navDrawer.getAttribute('aria-hidden') !== 'false') {\n    return false;\n  }\n  return (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-navdrawer-style') === 'modal');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function onScrimClick(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  if (isNavDrawerModalShowing()) {\n    hideNavDrawer();\n  }\n  const sidesheet = document.getElementsByClassName('mdw-layout__sidesheet')[0];\n  if (sidesheet && sidesheet.getAttribute('aria-hidden') === 'false') {\n    if (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-sidesheet-style') === 'modal') {\n      hideSideSheet();\n    }\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__navdrawer')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  navDrawer.setAttribute('aria-hidden', 'true');\n  if (window.location.hash === `#${navDrawer.id}`) {\n    window.location.hash = '';\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleNavDrawer(event) {\n  if (document.getElementsByClassName('mdw-layout__navdrawer')[0].getAttribute('aria-hidden') === 'false') {\n    hideNavDrawer(event);\n  } else {\n    showNavDrawer(event);\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'true');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleSideSheet(event) {\n  if (document.getElementsByClassName('mdw-layout__sidesheet')[0].getAttribute('aria-hidden') === 'false') {\n    hideSideSheet(event);\n  } else {\n    showSideSheet(event);\n  }\n}\n\n/** @return {void} */\nexport function detach() {\n  document.removeEventListener('scroll', onBodyScroll);\n  const content = getContentElement();\n  if (content) {\n    content.removeEventListener('scroll', onContentScroll);\n  }\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.removeEventListener('click', onScrimClick);\n    scrim.removeEventListener('scroll', onScrimScroll);\n    scrim.removeEventListener('touchmove', onScrimScroll);\n    scrim.removeEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {void} */\nexport function onBodyScroll() {\n  // position:sticky scrolling\n  getScrollThrottler().run(() => onScroll(true));\n}\n\n/** @return {boolean} */\nexport function isMobile() {\n  return window.innerWidth < MOBILE_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function isTablet() {\n  return window.innerWidth >= MOBILE_BREAKPOINT\n    && window.innerWidth < TABLET_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function shouldAutoHideAppBar() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return false;\n  }\n  const autoHide = appBar.getAttribute('mdw-autohide');\n  if (autoHide == null) {\n    return false;\n  }\n  if (autoHide === '') {\n    return true;\n  }\n  if (autoHide.indexOf('tablet') !== -1 && isTablet()) {\n    return true;\n  }\n  if (autoHide.indexOf('mobile') !== -1 && isMobile()) {\n    return true;\n  }\n  return false;\n}\n\n/** @return {void} */\nexport function onContentScroll() {\n  getScrollThrottler().run(() => onScroll(false));\n}\n\n/** @return {HTMLElement} */\nexport function getAppBarElement() {\n  if (!appBarElement) {\n    /** @type {HTMLElement} */\n    appBarElement = (document.getElementsByClassName('mdw-layout__appbar')[0]);\n  }\n  return appBarElement;\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function showFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'false');\n  if (changeFabCut !== false) {\n    openAppBarFabCut();\n  }\n}\n\n/** @return {void} */\nexport function openAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (fabCutAttr == null) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') === -1) {\n    appBar.setAttribute('mdw-fab-cut', `open ${fabCutAttr}`.trim());\n  }\n}\n\n/** @return {void} */\nexport function closeAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (!fabCutAttr) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') !== -1) {\n    appBar.setAttribute('mdw-fab-cut', fabCutAttr.replace('open', '').trim());\n  }\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function hideFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'true');\n  if (changeFabCut !== false) {\n    closeAppBarFabCut();\n  }\n}\n\n/** @return {boolean} */\nexport function isFabShown() {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return false;\n  }\n  return fabElement.getAttribute('aria-hidden') !== 'true';\n}\n\n/** @return {HTMLElement} */\nexport function getContentElement() {\n  if (!layoutContentElement) {\n    /** @type {HTMLElement} */\n    layoutContentElement = (document.getElementsByClassName('mdw-layout__content')[0]);\n  }\n  return layoutContentElement;\n}\n\n/** @return {void} */\nexport function resetScroll() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    appBar.removeAttribute('mdw-hide');\n    appBar.removeAttribute('mdw-raise');\n  }\n  scrolledPastAppBar = false;\n  lastScrollY = 0 + MIN_SCROLL_DELTA;\n  penultimateScrollY = lastScrollY;\n  onScroll(true);\n}\n\n/**\n * @param {boolean} isBody\n * @return {void}\n */\nexport function onScroll(isBody) {\n  const contentElement = getContentElement();\n  const scrollElement = isBody ? document.body : contentElement;\n  const currentScrollY = scrollElement.scrollTop;\n  const change = currentScrollY - lastScrollY;\n  const delta = Math.abs(change);\n  if (delta === 0) {\n    // Horizontal scroll?\n    return;\n  }\n  if (currentScrollY < 0 && lastScrollY <= 0) {\n    // Repeated overscroll event\n    return;\n  }\n\n  const scrollBottom = scrollElement.scrollHeight - scrollElement.clientHeight;\n  const scrollBottomDistance = scrollBottom - currentScrollY;\n  const scrollTopChange = currentScrollY <= 0\n    || lastScrollY <= 0;\n  const scrollBottomChange = scrollBottomDistance === 0 && lastScrollBottomDistance !== 0;\n\n  lastScrollBottomDistance = scrollBottomDistance;\n  if (delta < MIN_SCROLL_DELTA && !scrollTopChange && !scrollBottomChange) {\n    return;\n  }\n\n  const didScrollUp = (scrollBottomDistance > 0) && (change < 0);\n  const isAtScrollTop = didScrollUp && currentScrollY <= 0;\n  const newScrollUp = didScrollUp && lastScrollY >= penultimateScrollY;\n  const didScrollDown = (change > 0);\n  const isAtScrollBottom = didScrollDown && (scrollBottomDistance <= 0);\n  const newScrollDown = didScrollDown && lastScrollY <= penultimateScrollY;\n\n  penultimateScrollY = lastScrollY;\n  lastScrollY = currentScrollY;\n\n  // To avoid DOM read, abort if scrolling in same direction and has already past app bar\n  if ((change === 0) || (!isAtScrollTop && !newScrollUp && !isAtScrollBottom && !newScrollDown\n    && scrolledPastAppBar)) {\n    return;\n  }\n\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n\n  const bottomAppBar = appBar.hasAttribute('mdw-bottom');\n\n  const scrolledAway = bottomAppBar ? didScrollUp : didScrollDown;\n  const newScrollAway = scrolledAway && (bottomAppBar ? newScrollUp : newScrollDown);\n\n  // For code readability\n  const scrolledBack = !scrolledAway;\n  const newScrollBack = scrolledBack && (bottomAppBar ? newScrollDown : newScrollUp);\n\n  const isAtRest = (bottomAppBar ? isAtScrollBottom : isAtScrollTop);\n\n  if (scrolledBack) {\n    // scrolledPastAppBar needs to be recalculated\n    scrolledPastAppBar = false;\n  }\n\n  // Don't perform on each scroll back, only on first\n  if (newScrollBack || isAtRest) {\n    if (appBar.hasAttribute('mdw-autohide')) {\n      appBar.removeAttribute('mdw-hide');\n      appBar.style.removeProperty('margin-top');\n    }\n  }\n\n  if (!scrolledPastAppBar) {\n    if (bottomAppBar) {\n      scrolledPastAppBar = currentScrollY <= scrollBottom - appBar.clientHeight;\n    } else {\n      scrolledPastAppBar = currentScrollY > appBar.clientHeight;\n    }\n  }\n\n  if (isAtRest) {\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.setAttribute('mdw-prominent', '');\n    }\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.removeAttribute('mdw-raise');\n    }\n    return;\n  }\n\n  // Not at rest\n  if (scrolledAway && scrolledPastAppBar) {\n    if (shouldAutoHideAppBar()) {\n      appBar.setAttribute('mdw-hide', '');\n      if (!isBody) {\n        appBar.style.setProperty('margin-top', `${-appBar.clientHeight}px`);\n      }\n    }\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.removeAttribute('mdw-prominent');\n    }\n  }\n\n  if (newScrollAway) {\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.setAttribute('mdw-raise', '');\n    }\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  nextTick,\n  cancelTick,\n} from '../../core/dom';\n\nimport * as MenuItem from './item';\n\nclass MenuStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object} [state]\n   * @param {Object} [previousState]\n   * @param {MouseEvent|PointerEvent} [originalEvent]\n   */\n  constructor(element, previousFocus, state, previousState, originalEvent) {\n    this.element = element;\n    this.previousFocus = previousFocus;\n    this.state = state;\n    this.previousState = previousState;\n    this.originalEvent = originalEvent;\n    this.pendingResizeOperation = null;\n  }\n}\n\n/** @type {MenuStack[]} */\nconst OPEN_MENUS = [];\n\nexport const HIDE_EVENT = 'mdw:menu-hide';\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function attach(menuElement) {\n  menuElement.setAttribute('mdw-menu-js', '');\n  menuElement.addEventListener('click', onMenuClick);\n  menuElement.addEventListener('scroll', onMenuScroll);\n  menuElement.addEventListener('touchmove', onMenuScroll);\n  menuElement.addEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  setupARIA(menuElement);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function setupARIA(menuElement) {\n  if (menuElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  if (!menuElement.hasAttribute('aria-hidden')) {\n    menuElement.setAttribute('aria-hidden', 'true');\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-divider'),\n    el => el.setAttribute('role', 'separator'));\n  menuElement.setAttribute('role', 'menu');\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  if (popupElement) {\n    popupElement.setAttribute('role', 'none');\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onMenuScroll(event) {\n  // JS needed for Safari\n  event.preventDefault();\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/**\n * @param {MouseEvent|PointerEvent} event\n * @return {void}\n */\nexport function onMenuClick(event) {\n  if (event.currentTarget === event.target && event.target instanceof HTMLElement) {\n    event.stopPropagation();\n    hide(event.target);\n  }\n}\n\n/**\n * @return {void}\n */\nexport function onWindowResize() {\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.originalEvent) {\n    return;\n  }\n  if (lastOpenMenu.pendingResizeOperation) {\n    cancelTick(lastOpenMenu.pendingResizeOperation);\n  }\n  lastOpenMenu.pendingResizeOperation = nextTick(() => {\n    updateMenuPosition(\n      lastOpenMenu.element,\n      /** @type {HTMLElement} */ (lastOpenMenu.element.getElementsByClassName('mdw-menu__popup')[0]),\n      lastOpenMenu.originalEvent\n    );\n    lastOpenMenu.pendingResizeOperation = null;\n  });\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.previousState) {\n    return;\n  }\n  if ((lastOpenMenu.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenMenu.previousState[key])) {\n    hide(lastOpenMenu.element);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuElement = (event.currentTarget);\n  if (!menuElement || menuElement.getAttribute('aria-hidden') === 'true') {\n    return;\n  }\n\n  if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, false);\n    return;\n  }\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, true);\n    return;\n  }\n  if (event.key === 'Tab') {\n    // Hide menu allowing focus to revert to calling element\n    // To then allow browser default Tab interaction\n    // Unless menu hiding is cancelled\n    if (!hide(menuElement)) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    event.stopPropagation();\n    event.preventDefault();\n    hide(menuElement);\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function detach(menuElement) {\n  hide(menuElement);\n  menuElement.removeEventListener('click', onMenuClick);\n  menuElement.removeEventListener('scroll', onMenuScroll);\n  menuElement.removeEventListener('touchmove', onMenuScroll);\n  menuElement.removeEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  menuElement.removeAttribute('mdw-menu-js');\n  /** @type {HTMLElement} */\n  const popupElement = (menuElement.getElementsByClassName('mdw-menu__popup')[0]);\n  if (popupElement) {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), MenuItem.detach);\n}\n\n/**\n * @param {Element} menu\n * @param {boolean} [backwards=false]\n * @return {void}\n */\nexport function selectNextMenuItem(menu, backwards) {\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const menuItems = (menu.getElementsByClassName('mdw-menu__item'));\n  let foundTarget = false;\n  /** @type {HTMLElement} */\n  let candidate = null;\n  /** @type {HTMLElement} */\n  let firstFocusableItem = null;\n  let lastFocusableElement = null;\n  const target = document.activeElement;\n\n  // Hidden elements cannot be focused\n  // Disabled elements cannot be focused on IE11\n  // Skip elements that fail to receive focus\n  iterateSomeOfArrayLike(menuItems, (el) => {\n    el.focus();\n    const focusable = (document.activeElement === el);\n    if (focusable) {\n      if (!firstFocusableItem) {\n        firstFocusableItem = el;\n      }\n      lastFocusableElement = el;\n    }\n    if (el === target) {\n      foundTarget = true;\n      if (backwards && candidate) {\n        return true;\n      }\n      return false;\n    }\n    if (backwards) {\n      if (focusable) {\n        candidate = el;\n      }\n      return false;\n    }\n    if (foundTarget) {\n      if (focusable) {\n        candidate = el;\n        return true;\n      }\n      return false;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (backwards) {\n      candidate = lastFocusableElement;\n    } else {\n      candidate = firstFocusableItem;\n    }\n  }\n  if (candidate && document.activeElement !== candidate) {\n    candidate.focus();\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @param {HTMLElement} popupElement\n * @param {MouseEvent|PointerEvent} [event]\n * @param {boolean} [alignTarget=true]\n * @return {void}\n */\nexport function updateMenuPosition(menuElement, popupElement, event, alignTarget) {\n  let top = 'auto';\n  let left = 'auto';\n  let transformOrigin = '';\n  const useAlignTarget = (alignTarget !== false);\n  const margin = useAlignTarget ? '0' : '';\n  const mdwPosition = menuElement.getAttribute('mdw-position') || '';\n  const mdwDirection = menuElement.getAttribute('mdw-direction') || '';\n  let alignTop = mdwPosition.indexOf('top') !== -1;\n  let alignBottom = mdwPosition.indexOf('bottom') !== -1;\n  let alignVCenter = mdwPosition.indexOf('vcenter') !== -1;\n\n  const alignStart = mdwPosition.indexOf('start') !== -1;\n  const alignEnd = mdwPosition.indexOf('end') !== -1;\n  let alignLeft = mdwPosition.indexOf('left') !== -1;\n  let alignRight = mdwPosition.indexOf('right') !== -1;\n  let alignHCenter = mdwPosition.indexOf('hcenter') !== -1;\n\n  let openUp = mdwDirection.indexOf('up') !== -1;\n  let openDown = mdwDirection.indexOf('down') !== -1;\n  const openNormal = mdwDirection.indexOf('normal') !== -1;\n  const openReverse = mdwDirection.indexOf('reverse') !== -1;\n  let openVCenter = mdwDirection.indexOf('vcenter') !== -1;\n  let openHCenter = mdwDirection.indexOf('hcenter') !== -1;\n  let openLtr = mdwDirection.indexOf('ltr') !== -1;\n  let openRtl = mdwDirection.indexOf('rtl') !== -1;\n\n  /** @type {HTMLElement} */\n  const target = (event.currentTarget || event.target);\n\n  let isPageRTL = null;\n  if (alignStart || alignEnd || openNormal || openReverse) {\n    // Using page-direction based values\n    isPageRTL = isRtl();\n    if (alignStart || alignEnd) {\n      if (alignStart) {\n        if (isPageRTL) {\n          alignRight = true;\n        } else {\n          alignLeft = true;\n        }\n      } else if (isPageRTL) {\n        alignLeft = true;\n      } else {\n        alignRight = true;\n      }\n    }\n    if (openNormal || openReverse) {\n      if (openNormal) {\n        if (isPageRTL) {\n          openRtl = true;\n        } else {\n          openLtr = true;\n        }\n      } else if (isPageRTL) {\n        openLtr = true;\n      } else {\n        openRtl = true;\n      }\n    }\n  }\n  const offsetTop = useAlignTarget ? 0 : -event.offsetY;\n  const offsetBottom = useAlignTarget ? target.clientHeight : event.offsetY;\n  const offsetLeft = useAlignTarget ? 0 : -event.offsetX;\n  const offsetRight = useAlignTarget ? target.clientWidth : event.offsetX;\n  const rect = target.getBoundingClientRect();\n  const pageX = rect.left;\n  const pageY = rect.top;\n\n  /* Automatic Positioning\n    *\n    * 9 Positions\n    *   3      7      4\n    *     ┌─────────┐\n    *     │         │\n    *   5 │    9    │ 6\n    *     │         │\n    *     └─────────┘\n    *   1      8      2\n    *\n    * 1: Bottom Left\n    * 2: Bottom Right\n    * 3: Top Left\n    * 4: Top Right\n    * 5: VCenter Left\n    * 6: VCenter Right\n    * 7: HCenter Top\n    * 8: HCenter Bottom\n    * 9: VCenter HCenter\n    *\n    * 9 Directions:\n    * a - Down LTR\n    * b - Down RTL\n    * c - Up LTR\n    * d - Up RTL\n    * e - LTR\n    * f - RTL\n    * g - Down\n    * h - Up\n    * i - Center\n    *\n    *\n    * 16 total combos\n    * 1a 1b 1c 1d  └↘ └↙ └↗ └↖\n    * 2a 2b 2c 2d  ┘↘ ┘↙ ┘↗ ┘↖\n    * 3a 3b 3c 3d  ┌↘ ┌↙ ┌↗ ┌↖\n    * 4a 4b 4c 4d  ┐↘ ┐↙ ┐↗ ┐↖\n    *\n    * Avoid using opposite angle\n    *\n    * 1a XX 1c 1d  └↘ ██ └↗ └↖\n    * XX 2b 2c 2d  ██ ┘↙ ┘↗ ┘↖\n    * 1a 3b 3c XX  ┌↘ ┌↙ ┌↗ ██\n    * 4a 4b XX 4d  ┐↘ ┐↙ ██ ┐↖\n    *\n    *\n    * Preference Order:\n    * - Flow from corner           1a 2b 3c 4d    └↘ ┘↙ ┌↗ ┐↖\n    * - Open adjacent to target    4a 3b 2c 1d    ┐↘ ┌↙ ┘↗ └↖\n    * - Overlay target             3a 4b 1c 2d    ┌↘ ┐↙ └↗ ┘↖\n    * - Open from horizontal side  5e 6f          │→ │←\n    * - Open from center           9i             █·\n    */\n\n  popupElement.style.setProperty('max-height', 'none');\n  const popupElementHeight = popupElement.clientHeight;\n  const popupElementWidth = popupElement.clientWidth;\n  const canOpenDownwardsFromBottom = !alignTop && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetBottom) <= window.innerHeight;\n  const canOpenDownwardsFromTop = !alignBottom && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetTop) <= window.innerHeight;\n  const canOpenUpwardsFromTop = !alignBottom && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetTop >= popupElementHeight;\n  const canOpenUpwardsFromBottom = !alignTop && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetBottom >= popupElementHeight;\n  const canOpenRightwardsFromLeft = !alignRight && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetLeft) <= window.innerWidth;\n  const canOpenRightwardsFromRight = !alignLeft && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetRight) <= window.innerWidth;\n  const canOpenLeftwardsFromRight = !alignLeft && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetRight >= popupElementWidth;\n  const canOpenLeftwardsFromLeft = !alignRight && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetLeft >= popupElementWidth;\n  const canOpenFromCenter = !alignLeft && !alignRight && !alignTop && !alignBottom\n    && !openUp && !openDown\n    && ((pageX + offsetLeft) / 2) >= (popupElementWidth / 2)\n    && (popupElementWidth / 2) + ((pageX + offsetLeft) / 2) <= window.innerWidth;\n  popupElement.style.removeProperty('max-height');\n  const candidates = [\n    canOpenDownwardsFromBottom && canOpenRightwardsFromLeft, // 1a └↘\n    canOpenDownwardsFromBottom && canOpenLeftwardsFromRight, // 2b ┘↙\n    canOpenUpwardsFromTop && canOpenRightwardsFromLeft, // 3c ┌↗\n    canOpenUpwardsFromTop && canOpenLeftwardsFromLeft, // 4d ┐↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromRight, // 4a ┐↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromLeft, // 3b ┌↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2c ┘↗\n    canOpenUpwardsFromBottom && canOpenLeftwardsFromLeft, // 1d └↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromLeft, // 3a ┌↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromRight, // 4b ┐↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromLeft, // 1c └↗\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2d ┘↖\n    canOpenRightwardsFromLeft, // 5e │→\n    canOpenLeftwardsFromRight, // 6f │←\n    canOpenFromCenter, // 9i █·\n  ].map((value, index) => {\n    if (value) {\n      return index + 1;\n    }\n    return 0;\n  }).filter(value => value !== 0);\n  if (candidates.length) {\n    let candidateNumber;\n    if (isPageRTL === null) {\n      isPageRTL = isRtl();\n    }\n    if (isPageRTL) {\n      candidateNumber = [2, 1, 4, 3, 6, 5, 8, 7, 10, 9, 12, 11, 14, 13, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    } else {\n      candidateNumber = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    }\n    if (candidateNumber == null) {\n      candidateNumber = isPageRTL ? 2 : 1;\n    }\n    switch (candidateNumber) {\n      // Position\n      default:\n      case 1:\n      case 8:\n      case 11:\n        alignBottom = true; alignLeft = true;\n        break;\n      case 2:\n      case 7:\n      case 12:\n        alignBottom = true; alignRight = true;\n        break;\n      case 3:\n      case 6:\n      case 9:\n        alignTop = true; alignLeft = true;\n        break;\n      case 4:\n      case 5:\n      case 10:\n        alignTop = true; alignRight = true;\n        break;\n      case 13:\n        alignVCenter = true; alignLeft = true;\n        break;\n      case 14:\n        alignVCenter = true; alignRight = true;\n        break;\n      case 15:\n        alignVCenter = true; alignHCenter = true;\n    }\n    switch (candidateNumber) {\n      // Direction\n      default:\n      case 1:\n      case 5:\n      case 9:\n        openDown = true; openLtr = true;\n        break;\n      case 2:\n      case 6:\n      case 10:\n        openDown = true; openRtl = true;\n        break;\n      case 3:\n      case 7:\n      case 11:\n        openUp = true; openLtr = true;\n        break;\n      case 4:\n      case 8:\n      case 12:\n        openUp = true; openRtl = true;\n        break;\n      case 13:\n        openLtr = true; openVCenter = true;\n        break;\n      case 14:\n        openRtl = true; openVCenter = true;\n        break;\n      case 15:\n        openHCenter = true; openVCenter = true;\n        break;\n    }\n  }\n\n  if (openLtr) {\n    if (alignRight) {\n      left = `${pageX + offsetRight}px`;\n    } else if (alignHCenter) {\n      left = `${pageX + ((offsetLeft + offsetRight) / 2)}px`;\n    } else {\n      left = `${pageX + offsetLeft}px`;\n    }\n    transformOrigin = 'left';\n  } else if (openHCenter) {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - (popupElementWidth / 2)}px`;\n    } else if (alignRight) {\n      left = `${(pageX + offsetRight) - (popupElementWidth / 2)}px`;\n    } else {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - (popupElementWidth / 2)}px`;\n    }\n    transformOrigin = 'center';\n  } else {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - popupElementWidth}px`;\n    } else if (alignHCenter) {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - popupElementWidth}px`;\n    } else {\n      left = `${(pageX + offsetRight) - popupElementWidth}px`;\n    }\n    transformOrigin = 'right';\n  }\n\n  if (openUp) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - popupElement.clientHeight}px`;\n    } else if (alignVCenter) {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - popupElement.clientHeight}px`;\n    } else {\n      top = `${(pageY + offsetTop) - popupElement.clientHeight}px`;\n    }\n    transformOrigin += ' bottom';\n  } else if (openVCenter) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - (popupElement.clientHeight / 2)}px`;\n    } else if (alignTop) {\n      top = `${(pageY + offsetTop) - (popupElement.clientHeight / 2)}px`;\n    } else {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - (popupElement.clientHeight / 2)}px`;\n    }\n    transformOrigin += ' center';\n  } else {\n    if (alignTop) {\n      top = `${pageY + offsetTop}px`;\n    } else if (alignVCenter) {\n      top = `${pageY + ((offsetTop + offsetBottom) / 2)}px`;\n    } else {\n      top = `${pageY + offsetBottom}px`;\n    }\n    transformOrigin += ' top';\n  }\n\n  popupElement.style.setProperty('top', top);\n  popupElement.style.setProperty('left', left);\n  popupElement.style.setProperty('right', 'auto');\n  popupElement.style.setProperty('bottom', 'auto');\n  popupElement.style.setProperty('margin', margin);\n  popupElement.style.setProperty('transform-origin', transformOrigin);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function refreshMenuItems(menuElement) {\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), (menuItem) => {\n    menuItem.setAttribute('tabindex', '-1');\n    MenuItem.attach(menuItem);\n  });\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  popupElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {Element} menuElement\n * @param {MouseEvent|PointerEvent} [event]\n * @param {boolean} [alignTarget=true]\n * @return {boolean} handled\n */\nexport function show(menuElement, event, alignTarget) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (menuElement.getElementsByClassName('mdw-menu__popup')[0]);\n  let changed = false;\n  if (event) {\n    updateMenuPosition(menuElement, popupElement, event, alignTarget);\n  } else {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  if (menuElement.getAttribute('aria-hidden') !== 'false') {\n    menuElement.setAttribute('aria-hidden', 'false');\n    changed = true;\n  }\n  if (changed) {\n    attach(menuElement);\n    const previousFocus = document.activeElement;\n    const newState = { hash: Math.random().toString(36).substr(2, 16) };\n    let previousState = null;\n    if (window.history && window.history.pushState) {\n      if (!window.history.state) {\n        // Create new previous state\n        window.history.replaceState({\n          hash: Math.random().toString(36).substr(2, 16),\n        }, document.title);\n      }\n      previousState = window.history.state;\n      window.history.pushState(newState, document.title);\n      window.addEventListener('popstate', onPopState);\n      window.addEventListener('resize', onWindowResize);\n    }\n    const menuStack = new MenuStack(menuElement, previousFocus, newState, previousState, event);\n    OPEN_MENUS.push(menuStack);\n    refreshMenuItems(menuElement);\n    if (event && !event.detail && ('pointerType' in event) && !event.pointerType) {\n      // Triggered with keyboard event\n      selectNextMenuItem(menuElement);\n    } else {\n      popupElement.focus();\n    }\n  }\n  return changed;\n}\n\n/**\n * @param {Element} menuElement\n * @return {boolean} handled\n */\nexport function hide(menuElement) {\n  if (menuElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  menuElement.setAttribute('aria-hidden', 'true');\n  let stackIndex = -1;\n  OPEN_MENUS.some((stack, index) => {\n    if (stack.element === menuElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const menuStack = OPEN_MENUS[stackIndex];\n    if (menuStack.previousFocus && menuStack.previousFocus instanceof HTMLElement) {\n      menuStack.previousFocus.focus();\n    }\n    OPEN_MENUS.splice(stackIndex, 1);\n    if (menuStack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (menuStack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_MENUS.length) {\n    window.removeEventListener('popstate', onPopState);\n    window.removeEventListener('resize', onWindowResize);\n  }\n  dispatchDomEvent(menuElement, HIDE_EVENT);\n  return true;\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:tabitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-tab__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateElementSiblings,\n} from '../../core/dom';\n\nexport const ACTIVATE_EVENT = 'mdw:menuitem-activate';\nexport const CHECK_EVENT = 'mdw:menuitem-check';\nexport const UNCHECK_EVENT = 'mdw:menuitem-uncheck';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  // If mouseover is used, an item can still lose focus via keyboard navigation.\n  // An extra event listener would need to be created to catch blur but the cursor\n  // would still remain over the element, thus needing another mousemove event.\n  // Prioritization is given to less event listeners rather than operations per second.\n  element.addEventListener('mousemove', onMouseMove);\n  element.addEventListener('click', onClick);\n  element.addEventListener('keydown', onKeyDown);\n  setupARIA(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function setupARIA(element) {\n  if (element.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  const role = element.getAttribute('role');\n  let useAriaChecked = false;\n  if (role === 'menuitemcheckbox' || role === 'menuitemradio') {\n    useAriaChecked = true;\n  } else if (role !== 'menuitem') {\n    if (element.getElementsByClassName('mdw-menu__check').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemcheckbox');\n    } else if (element.getElementsByClassName('mdw-menu__radio').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemradio');\n    } else {\n      element.setAttribute('role', 'menuitem');\n    }\n  }\n  if (useAriaChecked && !element.hasAttribute('aria-checked')) {\n    element.setAttribute('aria-checked', 'false');\n  }\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__text'),\n    el => el.setAttribute('role', 'text'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__check'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__info'),\n    el => el.setAttribute('role', 'note'));\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n  if (isDisabled(menuItemElement)) {\n    return;\n  }\n  const role = menuItemElement.getAttribute('role');\n  if (role === 'menuitemcheckbox') {\n    toggleChecked(menuItemElement);\n  } else if (role === 'menuitemradio') {\n    setChecked(menuItemElement, true);\n  }\n  dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onMouseMove(event) {\n  /** @type {HTMLElement} */\n  const el = (event.currentTarget);\n  if (!el) {\n    return;\n  }\n  const previousFocus = document.activeElement;\n  if (previousFocus === el) {\n    // Already focused\n    return;\n  }\n  if (el.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  el.focus();\n  if (document.activeElement !== el) {\n    if (document.activeElement !== previousFocus && previousFocus instanceof HTMLElement) {\n      previousFocus.focus();\n    }\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n\n  if (event.key === 'Enter') {\n    event.stopPropagation();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    onClick(event);\n    return;\n  }\n\n  if (event.key === 'Spacebar' || (event.key === ' ')) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    const role = menuItemElement.getAttribute('role');\n    if (role === 'menuitemcheckbox') {\n      toggleChecked(menuItemElement);\n    } else if (role === 'menuitemradio') {\n      setChecked(menuItemElement, true);\n    } else {\n      dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isChecked(element) {\n  return (element.getAttribute('aria-checked') === 'true');\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return (element.getAttribute('aria-disabled') === 'true');\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n * @return {boolean} uiChanged\n */\nexport function setChecked(element, checked) {\n  const role = element.getAttribute('role');\n  let isCheckable = false;\n  if (role === 'menuitemcheckbox') {\n    isCheckable = true;\n    if (!dispatchDomEvent(element, checked ? CHECK_EVENT : UNCHECK_EVENT)) {\n      return false;\n    }\n  }\n  if (role === 'menuitemradio') {\n    isCheckable = true;\n    if (checked) {\n      if (!dispatchDomEvent(element, CHECK_EVENT)) {\n        return false;\n      }\n      iterateElementSiblings(element, (sibling) => {\n        if (sibling.getAttribute('role') === 'menuitemradio') {\n          sibling.setAttribute('aria-checked', 'false');\n        }\n      });\n    }\n  }\n  if (!isCheckable) {\n    return false;\n  }\n  element.setAttribute('aria-checked', checked ? 'true' : 'false');\n  return true;\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function toggleChecked(element) {\n  const checked = !isChecked(element);\n  return setChecked(element, checked);\n}\n\n/**\n * @param {Element} element\n * @return {boolean} handled\n */\nexport function openSubMenu(element) {\n  const hasPopup = element.getAttribute('aria-haspopup');\n  if (hasPopup !== 'menu' && hasPopup !== 'true') {\n    return false;\n  }\n\n  // TODO: Open new menu\n  return false;\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousemove', onMouseMove);\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-js');\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n// https://www.w3.org/TR/wai-aria-practices/#TreeView\n// https://www.w3.org/TR/wai-aria-practices/examples/landmarks/navigation.html\n\nimport { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\n\nimport * as ListItem from './item';\nimport * as ListContent from './content';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-list'), attach);\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function attach(listElement) {\n  let role = listElement.getAttribute('role');\n  if (!role) {\n    let newRole = 'listbox';\n    const parentRole = listElement.parentElement && listElement.parentElement.getAttribute('role');\n    if (parentRole === 'treeitem') {\n      newRole = 'group';\n    } else if (iterateSomeOfArrayLike(listElement.children,\n      child => child.hasAttribute('aria-expanded') && child.classList.contains('mdw-list__item'))) {\n      newRole = 'tree';\n    }\n    listElement.setAttribute('role', newRole);\n    role = newRole;\n  }\n\n  setupAria(listElement, role);\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.attach(child);\n    }\n  });\n  if (role === 'radiogroup') {\n    if (!listElement.hasAttribute('mdw-on-focus')) {\n      listElement.setAttribute('mdw-on-focus', 'check');\n    }\n  }\n  iterateArrayLike(listElement.getElementsByClassName('mdw-list'), attach);\n  if (listElement.hasAttribute('mdw-list-js')) {\n    return;\n  }\n  if (role !== 'listbox' && role !== 'tree' && role !== 'radiogroup') {\n    return;\n  }\n\n  switch (role) {\n    case 'tree':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n      return;\n  }\n\n  listElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  listElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  listElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.addEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.addEventListener(ListContent.CHECKED_CHANGE_EVENT, onCheckedChangeEvent);\n  listElement.addEventListener(ListContent.FOCUS_EVENT, onContentFocusEvent);\n  listElement.setAttribute('mdw-list-js', '');\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onContentFocusEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  const onFocusInteraction = listElement.getAttribute('mdw-on-focus');\n  if (!onFocusInteraction) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.target);\n  if (ListContent.isDisabled(listContentElement)) {\n    return;\n  }\n  onFocusInteraction.split(' ').forEach((interaction) => {\n    switch (interaction) {\n      case 'select':\n        ListContent.setSelected(listContentElement, true);\n        break;\n      case 'check':\n        ListContent.setChecked(listContentElement, true);\n        break;\n      default:\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  // List is readonly\n  if (listElement.getAttribute('aria-readonly') === 'true') {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  const listElementRole = listElement.getAttribute('role');\n  if (listElementRole !== 'listbox' && listElementRole !== 'tree') {\n    // Bubble up\n    return;\n  }\n  const { detail } = event;\n  if (detail.value === 'false') {\n    // Item is radio-like and cannot be unselected\n    if (listElement.getAttribute('aria-required') === 'true'\n      && listElement.getAttribute('aria-multiselectable') !== 'true') {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (listElement.getAttribute('aria-multiselectable') !== 'true') {\n    // Item is radio-like and must uncheck others\n    setTimeout(() => {\n      // Wait to see if event is cancelled\n      if (event.defaultPrevented) {\n        return;\n      }\n      const role = itemElement.getAttribute('role');\n      iterateArrayLike(listElement.querySelectorAll(`[role=\"${role}\"][aria-selected=\"true\"]`),\n        (item) => {\n          if (item === itemElement) {\n            return;\n          }\n          item.setAttribute('aria-selected', 'false');\n        });\n    });\n  }\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onCheckedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  if (listElement.getAttribute('aria-readonly') === 'true') {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  const listElementRole = listElement.getAttribute('role');\n  if (listElementRole !== 'radiogroup') {\n    // Bubble up\n    return;\n  }\n\n  const { detail } = event;\n  if (detail.value === 'false') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  setTimeout(() => {\n    // Wait to see if event is cancelled\n    if (event.defaultPrevented) {\n      return;\n    }\n    iterateArrayLike(listElement.querySelectorAll('[role=\"radio\"][aria-checked=\"true\"]'),\n      (item) => {\n        if (item === itemElement) {\n          return;\n        }\n        item.setAttribute('aria-checked', 'false');\n      });\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"treeitem\"]'), [currentItem]);\n      break;\n    case 'listbox':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"option\"]'), [currentItem]);\n      break;\n    case 'radiogroup':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"radio\"]'), [currentItem]);\n      break;\n    default:\n  }\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {Element} listElement\n * @param {string} role\n * @return {void}\n */\nexport function setupAria(listElement, role = 'tree') {\n  if (!listElement.hasAttribute('role')) {\n    listElement.setAttribute('role', role);\n  }\n  listElement.setAttribute('aria-orientation', 'vertical');\n  if (!listElement.hasAttribute('aria-multiselectable')) {\n    listElement.setAttribute('aria-multiselectable', 'false');\n  }\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function detach(listElement) {\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.detach(child);\n    }\n  });\n  RovingTabIndex.detach(\n    listElement,\n    listElement.querySelectorAll(`[role=\"${listElement.getAttribute('role') === 'tree' ? 'treeitem' : 'option'}\"]`)\n  );\n  listElement.removeEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.removeEventListener(ListContent.CHECKED_CHANGE_EVENT, onCheckedChangeEvent);\n  listElement.removeEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  listElement.removeEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  listElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.removeAttribute('mdw-list-js');\n}\n","import { getPassiveEventListenerOption } from '../../core/dom';\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function attach(textfieldElement) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.addEventListener('input', onInput, getPassiveEventListenerOption());\n    onInput({ currentTarget: input });\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function detach(textfieldElement) {\n  textfieldElement.removeAttribute('mdw-value-empty');\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.removeEventListener('input', onInput);\n  }\n}\n\n/**\n * @param {Event|{currentTarget:HTMLElement}} event\n * @return {void}\n */\nexport function onInput(event) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement} */\n  const inputElement = (event.currentTarget);\n  if (inputElement.parentElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(/** @type {HTMLTextAreaElement} */ (inputElement));\n  }\n  updateInputEmptyState(inputElement);\n}\n\n/**\n * @param {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} inputElement\n * @return {void} */\nexport function updateInputEmptyState(inputElement) {\n  const attrName = 'mdw-value-empty';\n  const textfieldElement = inputElement.parentElement;\n  if (inputElement.value) {\n    if (textfieldElement.hasAttribute(attrName)) {\n      textfieldElement.removeAttribute(attrName);\n    }\n  } else if (!textfieldElement.hasAttribute(attrName)) {\n    textfieldElement.setAttribute(attrName, '');\n  }\n}\n\n/**\n * @param {HTMLTextAreaElement} inputElement\n * @return {number} Single row height */\nexport function updateTextAreaSize(inputElement) {\n  const previousRowsAttrValue = inputElement.getAttribute('rows');\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = 1;\n  const { height, paddingTop } = window.getComputedStyle(inputElement);\n  if (!height || height === 'auto') {\n    if (previousRowsAttrValue == null) {\n      inputElement.removeAttribute('rows');\n    } else {\n      inputElement.setAttribute('rows', previousRowsAttrValue);\n    }\n    return -1;\n  }\n  const heightPx = parseInt(height.replace('px', ''), 10);\n  const paddingTopPx = parseInt(paddingTop.replace('px', ''), 10);\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = Math.floor((inputElement.scrollHeight - paddingTopPx) / heightPx);\n  return heightPx;\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {string|Date|number}\n */\nexport function getValue(textfieldElement) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if ((input instanceof HTMLTextAreaElement) || (input instanceof HTMLSelectElement)) {\n    return input.value;\n  }\n  switch (input.type) {\n    case 'number':\n    case 'range':\n      return Number.isNaN(input.valueAsNumber) ? null : input.valueAsNumber;\n    case 'date':\n    case 'datetime-local':\n    case 'time':\n      if (input.value == null) {\n        return null;\n      }\n      return new Date(\n        (new Date(input.valueAsNumber).getTimezoneOffset() * 60 * 1000) + input.valueAsNumber\n      );\n    default:\n      return input.value;\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @param {string|Date|number} [value]\n * @return {void}\n */\nexport function setValue(textfieldElement, value) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (value == null) {\n    input.value = null;\n  } else if (input instanceof HTMLTextAreaElement || input instanceof HTMLSelectElement) {\n    if (value instanceof Date) {\n      input.value = value.toString();\n    } else if (typeof value === 'string') {\n      input.value = value;\n    } else {\n      input.value = value.toString(10);\n    }\n  } else if (value instanceof Date) {\n    if (input.type === 'time') {\n      const hoursStr = `${value.getHours() < 10 ? '0' : ''}${value.getHours()}`;\n      const minutesStr = `${value.getMinutes() < 10 ? '0' : ''}${value.getMinutes()}`;\n      const secondsStr = `${value.getSeconds() < 10 ? '0' : ''}${value.getSeconds()}`;\n      input.value = `${hoursStr}:${minutesStr}:${secondsStr}.${value.getMilliseconds()}`;\n    } else {\n      switch (input.type) {\n        case 'date':\n          input.valueAsDate = value;\n          break;\n        case 'datetime-local':\n          input.valueAsNumber = value.getTime() - (value.getTimezoneOffset() * 60 * 1000);\n          break;\n        case 'number':\n        case 'range':\n          input.valueAsNumber = value.getTime();\n          break;\n        default:\n          input.value = value.toString();\n      }\n    }\n  } else if (typeof value === 'string') {\n    input.value = value;\n  } else {\n    switch (input.type) {\n      case 'date':\n      case 'time':\n      case 'datetime-local':\n      case 'number':\n      case 'range':\n        input.valueAsNumber = value;\n        break;\n      default:\n        input.value = value.toString();\n    }\n  }\n  updateInputEmptyState(input);\n  if (input instanceof HTMLTextAreaElement && textfieldElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(input);\n  }\n}\n","import * as ListContent from './content';\nimport { iterateArrayLike, getChildElementByClass } from '../../core/dom';\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attach(listItemElement) {\n  attachCore(listItemElement);\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.attach);\n  if (listItemElement.hasAttribute('aria-expanded')) {\n    if (!listItemElement.hasAttribute('mdw-expander-js')) {\n      listItemElement.setAttribute('mdw-pre-expander-js', '');\n      setTimeout(() => {\n        if (listItemElement.hasAttribute('mdw-pre-expander-js')) {\n          listItemElement.removeAttribute('mdw-pre-expander-js');\n          listItemElement.setAttribute('mdw-expander-js', '');\n        }\n      }, 500);\n    }\n    setExpanded(listItemElement, isExpanded(listItemElement));\n  }\n  listItemElement.addEventListener(ListContent.ACTIVATE_EVENT, onChildContentActivate);\n  listItemElement.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attachCore(listItemElement) {\n  setupAria(listItemElement);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {boolean}\n */\nexport function isExpanded(listItemElement) {\n  return (listItemElement.getAttribute('aria-expanded') === 'true');\n}\n\n/**\n * @param {Element} listItemElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(listItemElement, value) {\n  listItemElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n  iterateArrayLike(listItemElement.querySelectorAll('[role=\"treeitem\"]'), (treeitem) => {\n    treeitem.setAttribute('mdw-skip-tab', value ? 'false' : 'true');\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onChildContentActivate(event) {\n  /** @type {HTMLElement} */\n  const activatedElement = (event.target);\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!activatedElement || activatedElement.parentElement !== element) {\n    return;\n  }\n  if (element.hasAttribute('aria-expanded')) {\n    event.stopPropagation();\n    setExpanded(element, !isExpanded(element));\n  }\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function setupAria(listItemElement) {\n  let isTreeItem = null;\n  let roleIsNone = false;\n  if (!listItemElement.hasAttribute('role')) {\n    if (listItemElement.hasAttribute('aria-expanded')) {\n      listItemElement.setAttribute('role', 'treeitem');\n      isTreeItem = true;\n      roleIsNone = false;\n    } else {\n      listItemElement.setAttribute('role', 'none');\n      isTreeItem = false;\n      roleIsNone = true;\n    }\n  }\n  if (isTreeItem !== false || listItemElement.getAttribute('role') === 'treeitem') {\n    const activatorContent = getChildElementByClass(listItemElement, 'mdw-list__content');\n    if (activatorContent && !activatorContent.hasAttribute('role')) {\n      activatorContent.setAttribute('role', 'none');\n    }\n  }\n  if (!roleIsNone) {\n    return;\n  }\n  const parentRole = listItemElement.parentElement && listItemElement.parentElement.getAttribute('role');\n  if (!parentRole) {\n    return;\n  }\n  const contentChild = getChildElementByClass(listItemElement, 'mdw-list__content');\n  if (!contentChild) {\n    return;\n  }\n  if (contentChild.hasAttribute('role')) {\n    return;\n  }\n  switch (parentRole) {\n    case 'listbox':\n      contentChild.setAttribute('role', 'option');\n      break;\n    case 'radiogroup':\n      contentChild.setAttribute('role', 'radio');\n      break;\n    case 'group':\n    case 'tree':\n    case 'treeitem':\n      contentChild.setAttribute('role', 'treeitem');\n      break;\n    default:\n    case 'list':\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  if (document.activeElement !== event.currentTarget) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  if (!element.hasAttribute('aria-expanded')) {\n    return;\n  }\n  const activatorContent = getChildElementByClass(element, 'mdw-list__content');\n  if (!activatorContent) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  activatorContent.dispatchEvent(newEvent);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function detach(listItemElement) {\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.detach);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:bottomnavitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-bottomnav__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#alert\n// https://www.w3.org/TR/wai-aria-practices/#alert\n\nimport {\n  dispatchDomEvent,\n  findElementParentByClassName,\n  nextTick,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\n/**\n * @typedef SnackbarCreateOptions\n * @property {!string} text\n * @property {!string} [buttonText]\n * @property {string} [buttonInk='primary']\n * @property {boolean} [stacked=false]\n * @property {number|boolean} [autoHide=4] Auto hide time in seconds\n * @property {boolean} [autoDestroy=true] Destroy element after hide\n * @property {Element} [parent] Parent element to which to append\n * @property {boolean} [show=true] Show element after creation\n * @property {boolean} [skipQueue=false] Skip queue\n */\n\nclass SnackbarQueueItem {\n  /**\n   * @param {Element} element\n   * @param {SnackbarCreateOptions} [options]\n   */\n  constructor(element, options) {\n    this.element = element;\n    this.options = options;\n    this.hideTimeout = null;\n  }\n\n  /** @return {void} */\n  clearHideTimeout() {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n      this.hideTimeout = null;\n    }\n  }\n}\n\n/** @type {SnackbarQueueItem[]} */\nconst SNACKBAR_QUEUE = [];\n\nexport const HIDE_EVENT = 'mdw:snackbar-hide';\nexport const SHOW_EVENT = 'mdw:snackbar-show';\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function attach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.attach(button);\n    button.addEventListener('click', onButtonClick);\n  }\n  snackbarElement.setAttribute('mdw-js', '');\n  snackbarElement.addEventListener('animationend', onAnimationEnd);\n  snackbarElement.addEventListener('keydown', onKeyDown);\n  setupARIA(snackbarElement);\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function setupARIA(snackbarElement) {\n  if (snackbarElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  snackbarElement.setAttribute('role', 'alert');\n  snackbarElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    // Allow users to close snackbar with escape, for accessibilty reasons\n    event.stopPropagation();\n    event.preventDefault();\n    /** @type {Element} */\n    const snackbarElement = (event.currentTarget);\n    hide(snackbarElement);\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function detach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.detach(button);\n    button.removeEventListener('click', onButtonClick);\n  }\n  // Remove timeouts and stacks\n  SNACKBAR_QUEUE.slice().reverse().forEach((queue, reverseIndex, array) => {\n    if (queue.element === snackbarElement) {\n      queue.clearHideTimeout();\n      const index = array.length - reverseIndex - 1;\n      SNACKBAR_QUEUE.splice(index, 1);\n    }\n  });\n  snackbarElement.removeAttribute('mdw-js');\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onButtonClick(event) {\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (buttonElement instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const snackbarElement = findElementParentByClassName(buttonElement, 'mdw-snackbar');\n  hide(snackbarElement);\n}\n\n/**\n * @param {Element} element\n * @return {SnackbarQueueItem}\n */\nexport function findNextQueueItem(element) {\n  let queue = null;\n  SNACKBAR_QUEUE.some((q) => {\n    if (q.element === element) {\n      queue = q;\n      return true;\n    }\n    return false;\n  });\n  return queue;\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  handleAnimationChange(/** @type {Element} */ (event.currentTarget));\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function handleAnimationChange(snackbarElement) {\n  const showing = snackbarElement.getAttribute('aria-hidden') === 'false';\n  if (showing) {\n    const currentQueueItem = findNextQueueItem(snackbarElement);\n    if (currentQueueItem && currentQueueItem.hideTimeout) {\n      return;\n    }\n    const autoHideString = snackbarElement.getAttribute('mdw-autohide');\n    if (autoHideString == null) {\n      return;\n    }\n    const timeInSeconds = parseFloat(autoHideString) || 4;\n    if (timeInSeconds < 0) {\n      return;\n    }\n    const timeout = setTimeout(() => {\n      hide(snackbarElement);\n    }, timeInSeconds * 1000);\n    if (currentQueueItem) {\n      currentQueueItem.hideTimeout = timeout;\n    }\n    return;\n  }\n\n  const nextQueueItem = findNextQueueItem(snackbarElement);\n  if (nextQueueItem) {\n    update(snackbarElement, nextQueueItem.options);\n    show(snackbarElement);\n    return;\n  }\n  if (snackbarElement.hasAttribute('mdw-autodestroy')) {\n    if (snackbarElement.parentElement) {\n      snackbarElement.parentElement.removeChild(snackbarElement);\n    }\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {boolean} changed\n */\nexport function hide(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, HIDE_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'true');\n  const currentQueueItem = findNextQueueItem(snackbarElement);\n  if (currentQueueItem) {\n    SNACKBAR_QUEUE.splice(SNACKBAR_QUEUE.indexOf(currentQueueItem), 1);\n  }\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {?Element} snackbarElement\n * @return {boolean} changed\n */\nexport function show(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'false') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, SHOW_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'false');\n  attach(snackbarElement);\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {SnackbarCreateOptions} options\n * @return {void}\n */\nexport function update(element, options) {\n  element.classList.add('mdw-snackbar');\n  if (!element.classList.contains('mdw-theme')) {\n    // Guidelines conflict stating a background should be fully opaque\n    // But says spec says to use #000000 with 87% opacity\n    // Calculated against white, opaque value is #212121 (Gray-900)\n    element.classList.add('mdw-theme');\n    element.setAttribute('mdw-surface', 'background 900');\n    element.setAttribute('mdw-dark', '');\n  }\n  let span = element.getElementsByTagName('span')[0];\n  if (span) {\n    // To trigger screen readers, we destroy and create a new span and textnode\n    span.parentElement.removeChild(span);\n  }\n  span = document.createElement('span');\n  if (element.firstChild) {\n    element.insertBefore(span, element.firstChild);\n  } else {\n    element.appendChild(span);\n  }\n  const textNode = document.createTextNode(options.text);\n  span.appendChild(textNode);\n  let button = element.getElementsByClassName('mdw-button')[0];\n  if (options.buttonText) {\n    if (!button) {\n      button = document.createElement('a');\n      element.appendChild(button);\n    }\n    setTextNode(button, options.buttonText);\n    button.classList.add('mdw-button');\n    if (typeof options.buttonInk === 'undefined') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', 'secondary');\n    } else if (typeof options.buttonInk === 'string') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', options.buttonInk);\n    } else {\n      // Don't set attribute if null is passed\n    }\n  } else if (button && button.parentElement) {\n    button.parentElement.removeChild(button);\n  }\n  if (options.stacked) {\n    element.setAttribute('mdw-stacked', '');\n  }\n  if (options.autoHide !== false) {\n    let timeInSeconds;\n    if (options.autoHide === true) {\n      timeInSeconds = 4;\n    } else if (options.autoHide == null) {\n      timeInSeconds = 4;\n    } else {\n      timeInSeconds = options.autoHide;\n    }\n    if (timeInSeconds > 0) {\n      element.setAttribute('mdw-autohide', timeInSeconds.toString());\n    }\n  }\n  if (options.autoDestroy !== false) {\n    element.setAttribute('mdw-autodestroy', '');\n  }\n}\n\n/**\n * Creates a Snackbar element if required and adds to show queue\n * @param {SnackbarCreateOptions} options\n * @return {HTMLElement}\n */\nexport function create(options) {\n  let element;\n  let newlyCreated = false;\n  if (options.parent) {\n    /** @type {HTMLElement} */\n    element = (options.parent.getElementsByClassName('mdw-snackbar')[0]);\n  }\n  if (!element) {\n    element = document.createElement('div');\n    if (options.parent) {\n      options.parent.appendChild(element);\n    }\n    newlyCreated = true;\n  }\n  const queue = new SnackbarQueueItem(element, options);\n  if (options.skipQueue) {\n    SNACKBAR_QUEUE.splice(0, 0, queue);\n  } else {\n    SNACKBAR_QUEUE.push(queue);\n  }\n\n  if (options.show !== false) {\n    if (newlyCreated) {\n      // Update after show to trigger a text change\n      update(element, options);\n      show(element);\n      update(element, options);\n    } else {\n      show(element);\n    }\n  }\n  return element;\n}\n","// https://www.w3.org/TR/wai-aria-practices/#grid\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  findElementParentByClassName,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  if (!element.hasAttribute('role')) {\n    element.setAttribute('role', 'grid');\n  }\n  element.setAttribute('mdw-js', '');\n  const headerRow = getHeaderRow(element);\n  const tbody = getTableBody(element);\n  const cellFocusable = element.hasAttribute('mdw-cell-focusable');\n  const rowFocusable = element.hasAttribute('mdw-row-focusable');\n\n  headerRow.addEventListener('click', onHeaderRowClick);\n  tbody.addEventListener('keydown', onTableBodyKeyDown);\n  tbody.addEventListener('click', onTableBodyClick);\n  /** @type {HTMLTableRowElement} */\n  let firstRow = null;\n  let foundTabbableRow = false;\n  /** @type {HTMLTableCellElement} */\n  let firstCell = null;\n  let foundTabbableCell = false;\n  iterateArrayLike(tbody.rows, (row) => {\n    if (rowFocusable) {\n      if (!firstRow) {\n        firstRow = row;\n      }\n      if (!foundTabbableRow && row.getAttribute('tabindex') === '0') {\n        foundTabbableRow = true;\n      } else {\n        row.setAttribute('tabindex', '-1');\n      }\n    } else {\n      row.removeAttribute('tabindex');\n    }\n    iterateArrayLike(row.cells, (cell) => {\n      if (cellFocusable && !rowFocusable) {\n        if (!firstCell) {\n          firstCell = cell;\n        }\n        if (!foundTabbableCell && cell.getAttribute('tabindex') === '0') {\n          foundTabbableCell = true;\n        } else {\n          cell.setAttribute('tabindex', '-1');\n        }\n      } else {\n        cell.removeAttribute('tabindex');\n      }\n    });\n  });\n  if (rowFocusable && !foundTabbableRow && firstRow) {\n    updateTabIndex(firstRow, false);\n  } else if (cellFocusable && !foundTabbableCell && firstCell) {\n    updateTabIndex(firstCell, false);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onTableBodyClick(event) {\n  /** @type {HTMLTableSectionElement} */\n  const tbody = (event.currentTarget);\n  const mdwDataTable = findElementParentByClassName(tbody, 'mdw-datatable');\n  const { target } = event;\n  let cell = null;\n  /** @type {HTMLTableRowElement} */\n  let row = null;\n\n  if (target instanceof HTMLInputElement && target.type === 'checkbox') {\n    if (mdwDataTable.hasAttribute('mdw-datatable-adapter')) {\n      return;\n    }\n    // Checkbox clicked\n    cell = findParentCell(target);\n    if (!cell.hasAttribute('mdw-selector')) {\n      return;\n    }\n    event.stopPropagation();\n    /** @type {HTMLTableRowElement} */\n    row = (cell.parentElement);\n    let hasSelection = false;\n    if (target.checked) {\n      row.setAttribute('aria-selected', 'true');\n      hasSelection = true;\n    } else {\n      row.setAttribute('aria-selected', 'false');\n      /** @type {NodeListOf<HTMLInputElement>} */\n      const checkboxes = (mdwDataTable.querySelectorAll('td[mdw-selector] input[type=checkbox]'));\n      hasSelection = iterateSomeOfArrayLike(checkboxes, checkbox => checkbox.checked);\n    }\n    if (hasSelection) {\n      mdwDataTable.setAttribute('mdw-has-selection', '');\n    } else {\n      mdwDataTable.removeAttribute('mdw-has-selection');\n    }\n    return;\n  }\n  if (target instanceof HTMLTableRowElement) {\n    row = target;\n  } else if (target instanceof HTMLTableCellElement) {\n    cell = target;\n  } else {\n    cell = findParentCell(/** @type {Element} */ (target));\n  }\n\n  if (cell) {\n    /** @type {HTMLTableRowElement} */\n    row = (cell.parentElement);\n    const cellFocusable = mdwDataTable.hasAttribute('mdw-cell-focusable');\n    if (cellFocusable) {\n      updateTabIndex(cell);\n      return;\n    }\n  }\n  if (row) {\n    const rowFocusable = mdwDataTable.hasAttribute('mdw-row-focusable');\n    if (rowFocusable) {\n      updateTabIndex(row);\n    }\n  }\n}\n\n/**\n * @param {HTMLTableRowElement|HTMLTableCellElement} element\n * @param {boolean} [removeOtherTabIndexes=true]\n * @return {void}\n */\nexport function updateTabIndex(element, removeOtherTabIndexes) {\n  if (removeOtherTabIndexes !== false) {\n    /** @type {HTMLElement} */\n    let tbody = element;\n    while (tbody != null && tbody instanceof HTMLTableSectionElement === false) {\n      tbody = tbody.parentElement;\n    }\n    if (element instanceof HTMLTableCellElement) {\n      iterateArrayLike(tbody.querySelectorAll('td[tabindex=\"0\"]'), (td) => {\n        if (td !== element) {\n          td.setAttribute('tabindex', '-1');\n        }\n      });\n    }\n    if (element instanceof HTMLTableRowElement) {\n      iterateArrayLike(tbody.querySelectorAll('tr[tabindex=\"0\"]'), (tr) => {\n        if (tr !== element) {\n          tr.setAttribute('tabindex', '-1');\n        }\n      });\n    }\n  }\n  if (element.getAttribute('tabindex') !== '0') {\n    element.setAttribute('tabindex', '0');\n    dispatchDomEvent(element, 'mdw:tabindexchanged');\n  }\n}\n\n/**\n * @param {Element} element\n * @return {HTMLTableCellElement}\n */\nexport function findParentCell(element) {\n  let el = element;\n  while (el != null) {\n    if (el instanceof HTMLTableElement) {\n      return null;\n    }\n    if (el instanceof HTMLTableCellElement) {\n      return el;\n    }\n    el = el.parentElement;\n  }\n  return null;\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onHeaderRowClick(event) {\n  /** @type {HTMLElement} */\n  const targetElement = (event.target);\n  const cell = findParentCell(targetElement);\n  if (!cell) {\n    return;\n  }\n  if (cell.cellIndex === -1) {\n    return;\n  }\n  if (!cell.hasAttribute('mdw-sortable')) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const headerRow = (event.currentTarget);\n  const mdwTable = findElementParentByClassName(headerRow, 'mdw-datatable');\n  if (!mdwTable) {\n    return;\n  }\n  if (mdwTable.hasAttribute('mdw-datatable-adapter')) {\n    return;\n  }\n  let ascending = true;\n  if (cell.hasAttribute('mdw-sorted') && !cell.getAttribute('mdw-sorted')) {\n    ascending = false;\n  }\n  if (ascending) {\n    cell.setAttribute('mdw-sorted', '');\n  } else {\n    cell.setAttribute('mdw-sorted', 'desc');\n  }\n  iterateArrayLike(cell.parentElement.getElementsByTagName('th'), (th) => {\n    if (th !== cell) {\n      th.removeAttribute('mdw-sorted');\n    }\n  });\n\n  /** @type {HTMLTableSectionElement} */\n  const tbody = getTableBody(mdwTable);\n  const rows = [];\n  for (let i = tbody.rows.length - 1; i >= 0; i -= 1) {\n    rows.push(tbody.rows.item(i));\n    tbody.deleteRow(i);\n  }\n  rows.sort((a, b) => {\n    const aCell = a.cells.item(cell.cellIndex);\n    const bCell = b.cells.item(cell.cellIndex);\n    const aText = aCell.textContent;\n    const bText = bCell.textContent;\n    if (aCell.dataset.type === 'number') {\n      return parseFloat(bText) - parseFloat(aText);\n    }\n    return bText.localeCompare(aText);\n  });\n  if (ascending) {\n    rows.reverse();\n  }\n  const fragment = document.createDocumentFragment();\n  rows.forEach((row) => {\n    fragment.appendChild(row);\n  });\n  tbody.appendChild(fragment);\n  event.stopPropagation();\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onTableBodyKeyDown(event) {\n  const currentSelection = document.activeElement;\n  let cellIndex = 0;\n  /** @type {HTMLTableRowElement} */\n  let row = null;\n  let isRow = false;\n  /** @type {HTMLTableRowElement|HTMLTableCellElement} */\n  let nextSelection = null;\n  if (currentSelection instanceof HTMLTableCellElement) {\n    ({ cellIndex } = currentSelection);\n    /** @type {HTMLTableRowElement} */\n    row = (currentSelection.parentElement);\n  } else if (currentSelection instanceof HTMLTableRowElement) {\n    isRow = true;\n    row = currentSelection;\n  }\n  if (!row) {\n    return;\n  }\n  /** @type {HTMLTableSectionElement} */\n  const tbody = (event.currentTarget);\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    if (row.sectionRowIndex === 0) {\n      return;\n    }\n    const newRow = tbody.rows.item(row.sectionRowIndex - 1);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(cellIndex);\n    }\n  } else if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    const newIndex = row.sectionRowIndex + 1;\n    if (newIndex >= tbody.rows.length) {\n      return;\n    }\n    const newRow = tbody.rows.item(newIndex);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(cellIndex);\n    }\n  } else if (event.ctrlKey && event.key === 'Home') {\n    if (row.sectionRowIndex === 0 && cellIndex === 0) {\n      return;\n    }\n    const newRow = tbody.rows.item(0);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(0);\n    }\n  } else if (event.ctrlKey && event.key === 'End') {\n    const newRowIndex = tbody.rows.length - 1;\n    let newCellIndex = 0;\n    if (!isRow) {\n      newCellIndex = row.cells.length - 1;\n    }\n    if (row.sectionRowIndex === newRowIndex && cellIndex === newCellIndex) {\n      return;\n    }\n    const newRow = tbody.rows.item(newRowIndex);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(newCellIndex);\n    }\n  } else if (event.key === 'Home') {\n    if (isRow) {\n      return;\n    }\n    if (cellIndex === 0) {\n      return;\n    }\n    nextSelection = row.cells.item(0);\n  } else if (event.key === 'End') {\n    if (isRow) {\n      return;\n    }\n    const newIndex = row.cells.length - 1;\n    if (newIndex === cellIndex) {\n      return;\n    }\n    nextSelection = row.cells.item(newIndex);\n  } else {\n    const isRtlEnabled = isRtl();\n    let isLeft = false;\n    let isRight = false;\n    if (event.key === 'ArrowLeft' || (event.key === 'Left')) {\n      if (isRtlEnabled) {\n        isRight = true;\n      } else {\n        isLeft = true;\n      }\n    }\n    if (event.key === 'ArrowRight' || (event.key === 'Right')) {\n      if (isRtlEnabled) {\n        isLeft = true;\n      } else {\n        isRight = true;\n      }\n    }\n    if (isLeft) {\n      if (isRow) {\n        return;\n      }\n      if (cellIndex === 0) {\n        return;\n      }\n      nextSelection = row.cells.item(cellIndex - 1);\n    } else if (isRight) {\n      if (isRow) {\n        return;\n      }\n      const newIndex = cellIndex + 1;\n      if (newIndex >= row.cells.length) {\n        return;\n      }\n      nextSelection = row.cells.item(newIndex);\n    }\n  }\n  if (nextSelection) {\n    event.stopPropagation();\n    event.preventDefault();\n    currentSelection.setAttribute('tabindex', '-1');\n    nextSelection.focus();\n    updateTabIndex(nextSelection, false);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-js');\n  const headerRow = getHeaderRow(element);\n  const tbody = getTableBody(element);\n  headerRow.removeEventListener('click', onHeaderRowClick);\n  tbody.removeEventListener('keydown', onTableBodyKeyDown);\n  tbody.removeEventListener('click', onTableBodyClick);\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLElement}\n */\nexport function getScroller(datatableElement) {\n  /** @type {HTMLElement} */\n  let scroller = (datatableElement.getElementsByClassName('mdw-datatable__scroller')[0]);\n  if (!scroller) {\n    scroller = document.createElement('div');\n    scroller.classList.add('mdw-datatable__scroller');\n    const footer = datatableElement.getElementsByClassName('mdw-datatable__footer')[0];\n    if (footer) {\n      datatableElement.insertBefore(scroller, footer);\n    } else {\n      datatableElement.appendChild(scroller);\n    }\n    // Move table into scroller if it exists\n    const table = datatableElement.getElementsByTagName('table')[0];\n    if (table) {\n      table.parentElement.removeChild(table);\n      scroller.appendChild(table);\n    }\n  }\n  return scroller;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableElement}\n */\nexport function getTable(datatableElement) {\n  if (datatableElement instanceof HTMLTableElement) {\n    return datatableElement;\n  }\n  let table = datatableElement.getElementsByTagName('table')[0];\n  if (!table) {\n    const scroller = getScroller(datatableElement);\n    table = document.createElement('table');\n    scroller.appendChild(table);\n  }\n  return table;\n}\n\n/**\n * @param {Element} tableElement\n * @return {HTMLTableRowElement}\n */\nexport function getHeaderRow(tableElement) {\n  let thead = tableElement.getElementsByTagName('thead')[0];\n  if (!thead) {\n    const table = getTable(tableElement);\n    thead = document.createElement('thead');\n    table.appendChild(thead);\n  }\n  let headerRow = thead.getElementsByTagName('tr')[0];\n  if (!headerRow) {\n    headerRow = document.createElement('tr');\n    thead.appendChild(headerRow);\n  }\n  return headerRow;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableSectionElement}\n */\nexport function getTableBody(datatableElement) {\n  let tbody = datatableElement.getElementsByTagName('tbody')[0];\n  if (!tbody) {\n    const table = getTable(datatableElement);\n    tbody = document.createElement('tbody');\n    table.appendChild(tbody);\n  }\n  return tbody;\n}\n","import { dispatchDomEvent } from '../dom';\n\n/**\n * @param {string} name Attribute Name\n * @param {Element} element Element\n * @param {string|boolean} value Boolean Attribute Value\n * @param {string} [dispatchEventName] OnChangeEvent\n * @param {boolean} [explicit=true]\n * @param {string} [emptyValue=false] Default empty value\n * @return {boolean} successful\n */\nfunction setAttribute(name, element, value, dispatchEventName, explicit = true, emptyValue = 'false') {\n  const attr = element.getAttribute(name);\n  let stringValue;\n  if (typeof value === 'string') {\n    stringValue = value;\n  } else {\n    stringValue = (value ? 'true' : 'false');\n  }\n  if (attr === stringValue) {\n    // Nothing to change\n    return true;\n  }\n  if (stringValue === emptyValue) {\n    // Set default empty value\n    if (attr == null) {\n      // No attribute set\n      if (explicit) {\n        // Explicitly set attribute\n        element.setAttribute(name, stringValue);\n      }\n      return true;\n    }\n    if (!explicit) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, stringValue);\n    }\n  } else {\n    // Non default value;\n    element.setAttribute(name, stringValue);\n  }\n  if (!dispatchEventName) {\n    return true;\n  }\n  // Alert change\n  if (!dispatchDomEvent(element, dispatchEventName, { value: stringValue })) {\n    // Revert\n    if (attr == null) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, attr);\n    }\n    return false;\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setCurrent(element, value, dispatchEventName) {\n  // Some browsers incorrectly style [aria-current=\"false\"]\n  // Attribute will be removed when false|\"false\"\n  return setAttribute('aria-current', element, value, dispatchEventName, false);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  return setAttribute('aria-selected', element, value, dispatchEventName);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setChecked(element, value, dispatchEventName) {\n  return setAttribute('aria-checked', element, value, dispatchEventName);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as Attributes from './attributes';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'tab');\n  element.setAttribute('mdw-aria-tab-js', '');\n  element.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-tab-js');\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  if (Attributes.setSelected(element, value, dispatchEventName)) {\n    Attributes.setCurrent(element, value);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Remap Space and Enter as Click\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  element.dispatchEvent(newEvent);\n}\n","import DomAdapter from '../dom/index';\nimport * as ListItem from '../../components/list/item';\n\n/**\n * @template T1\n * @template T2\n * @typedef {import('../dom/index').DomAdapterCreateOptions<T1,T2>} DomAdapterCreateOptions<T1,T2>\n */\n\n/**\n * @param {HTMLLIElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyListAdapterRenderer(element, data) {\n  let primaryText = element.getElementsByClassName('mdw-list__text')[0];\n  if (!primaryText) {\n    let contentElement = element.getElementsByClassName('mdw-list__content')[0];\n    if (!contentElement) {\n      contentElement = document.createElement('div');\n      contentElement.className = 'mdw-list__content';\n      element.appendChild(contentElement);\n    }\n    primaryText = document.createElement('div');\n    primaryText.className = 'mdw-list__text';\n    contentElement.appendChild(primaryText);\n    ListItem.attach(element);\n  }\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      s = new String(data).toString(); // eslint-disable-line no-new-wrappers\n    }\n  }\n  if (primaryText.textContent !== s) {\n    primaryText.textContent = s;\n  }\n}\n\n/**\n * @template T\n * @typedef {Object} ListAdapterCreateOptions\n * @prop {HTMLElement} element\n * @prop {Array<T>} datasource\n * @prop {function(HTMLLIElement, T):void} [render={function(HTMLIElement,T):void}]\n */\n\n/**\n * @template T\n * @extends {DomAdapter<T, HTMLLIElement>}\n * */\nexport default class ListAdapter extends DomAdapter {\n  /** @param {ListAdapterCreateOptions<T>} options */\n  constructor(options) {\n    super(options);\n    if (!options.render) {\n      this.render = AnyListAdapterRenderer;\n    }\n    this.create = ListAdapter.create;\n  }\n\n  static create() {\n    const element = document.createElement('li');\n    element.classList.add('mdw-list__item');\n    return element;\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport { iterateArrayLike } from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as BottomNavItem from './item';\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function attach(bottomnavElement) {\n  setupARIA(bottomnavElement);\n  /** @type {Element} */\n  let selectedItem;\n  const items = bottomnavElement.getElementsByClassName('mdw-bottomnav__item');\n\n  iterateArrayLike(items, (item) => {\n    BottomNavItem.attach(item);\n    if (!selectedItem && item.getAttribute('aria-selected') === 'true') {\n      selectedItem = item;\n    }\n  });\n  if (!selectedItem) {\n    selectedItem = items[0];\n  }\n  if (selectedItem) {\n    BottomNavItem.setSelected(selectedItem, true, true);\n  }\n  bottomnavElement.addEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  bottomnavElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  bottomnavElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(bottomnavElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectNext(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function setupARIA(bottomnavElement) {\n  bottomnavElement.setAttribute('role', 'tablist');\n  bottomnavElement.setAttribute('aria-multiselectable', 'false');\n  bottomnavElement.setAttribute('aria-orientation', 'horizontal');\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function detach(bottomnavElement) {\n  bottomnavElement.removeEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.removeEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  bottomnavElement.removeEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  bottomnavElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  iterateArrayLike(bottomnavElement.getElementsByClassName('mdw-bottomnav__item'), BottomNavItem.detach);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  iterateArrayLike(bottomnavElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      BottomNavItem.setSelected(item, false);\n    }\n  });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#combobox\n\nimport { iterateSomeOfArrayLike, iterateArrayLike, getTextNode } from '../../core/dom';\n\nimport * as List from '../../components/list/index';\nimport * as ListContent from '../../components/list/content';\nimport * as TextField from '../../components/textfield/index';\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction containsTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) !== -1;\n}\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction startsWithTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) === 0;\n}\n\n/**\n * @param {Element} item\n * @return {string}\n */\nfunction defaultItemTextParser(item) {\n  if (item.hasAttribute('data-mdw-search-text')) {\n    return item.getAttribute('data-mdw-search-text');\n  }\n  let textElement;\n  [\n    'mdw-list__text-line',\n    'mdw-list__text',\n    'mdw-list__content',\n  ].some((className) => {\n    textElement = item.getElementsByClassName(className)[0];\n    return textElement != null;\n  });\n\n  const textNode = textElement ? getTextNode(textElement) : getTextNode(item);\n  if (textNode) {\n    return textNode.textContent || '';\n  }\n  return '';\n}\n\n/**\n * @param {Element} list\n * @param {boolean} [backwards=false]\n * @return {Element} sibling\n */\nfunction selectSibling(list, backwards) {\n  const current = list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n  const items = list.querySelectorAll('[role=\"option\"]:not([aria-hidden=\"true\"]):not([disabled])');\n  let sibling;\n  if (current && current.getAttribute('aria-hidden') !== 'true') {\n    iterateSomeOfArrayLike(items, (item, index) => {\n      if (item !== current) {\n        return false;\n      }\n      if (backwards) {\n        sibling = items[index - 1];\n      } else {\n        sibling = items[index + 1];\n      }\n      return true;\n    });\n  } else if (backwards) {\n    sibling = items[items.length - 1];\n  } else {\n    sibling = items[0];\n  }\n  if (sibling && sibling !== current) {\n    if (current) {\n      current.setAttribute('aria-selected', 'false');\n    }\n    sibling.setAttribute('aria-selected', 'true');\n    return sibling;\n  }\n  return null;\n}\n\n/**\n * @param {Element} listItem\n * @return {void}\n */\nfunction scrollItemIntoView(listItem) {\n  /**\n   * @param {Element} el\n   * @return {number}\n   */\n  function getElementVisibility(el) {\n    let rect = el.getBoundingClientRect();\n    const { top, height } = rect;\n    let next = el.parentElement;\n    do {\n      rect = next.getBoundingClientRect();\n      if ((top + height) > rect.bottom) {\n        // bottom clipped\n        return 1;\n      }\n      if (top < rect.top) {\n        // top clipped\n        return -1;\n      }\n      next = next.parentElement;\n    } while (next !== document.body);\n    if (top < 0) {\n      return -1;\n    }\n    if ((top + height) > document.documentElement.clientHeight) {\n      return 1;\n    }\n    return 0;\n  }\n  const visibility = getElementVisibility(listItem);\n  if (visibility < 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  } else if (visibility > 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  }\n}\n\n/**\n * @callback SearchAdapterTextFilter\n * @param {string} input\n * @param {string} content\n * @return {boolean} passes\n */\n\n/**\n * @template T\n * @typedef SearchAdapterOptions\n * @prop {Element} textfield\n * @prop {Element} list\n * @prop {('contains'|'startsWith'|SearchAdapterTextFilter)} [textFilter='contains']\n * @prop {function(Element):string} [itemTextParser]\n * @prop {boolean} [dropdown=false]\n * @prop {boolean} [filterItems=true]\n * @prop {('replace'|'append'|'none')} [suggestionMethod='replace']\n * @prop {function(string, function(T[]=), function(Error=)=):void} [performSearch]\n * @prop {function(T[], function(), function(Error=)):void} [updateList]\n * @prop {boolean} [searchOnFocus=true]\n * @prop {number} [debounce=null] Debounce time in milliseconds\n */\n\n/** @template T */\nexport default class SearchAdapter {\n  /** @param {SearchAdapterOptions<T>} options */\n  constructor(options) {\n    this.textfield = options.textfield;\n    this.list = options.list;\n    this.list.setAttribute('role', 'listbox');\n    List.attach(this.list);\n    if (typeof options.textFilter === 'function') {\n      this.filter = options.textFilter;\n    } else if (options.textFilter === 'startsWith') {\n      this.filter = startsWithTextFilter;\n    } else {\n      this.filter = containsTextFilter;\n    }\n    this.itemTextParser = defaultItemTextParser || options.itemTextParser;\n    /** @type {HTMLInputElement} */\n    const input = (this.textfield.getElementsByClassName('mdw-textfield__input')[0]);\n    this.input = input;\n    this.list.addEventListener(ListContent.ACTIVATE_EVENT, (event) => {\n      /** @type {HTMLElement} */\n      const item = (event.target);\n      this.onItemSelected(item);\n      const inputValue = this.input.value || '';\n      this.suggestedInput = inputValue;\n      this.input.setSelectionRange(inputValue.length, inputValue.length);\n      this.input.focus();\n      this.hideDropDown();\n    });\n    this.input.addEventListener('keydown', (event) => {\n      this.onTextFieldKeydownEvent(event);\n    });\n    this.input.addEventListener('input', (event) => {\n      if (this.handleInputEvent) {\n        this.handleInputEvent(event);\n      }\n    });\n    this.input.addEventListener('blur', (event) => {\n      if (this.handleBlurEvent) {\n        this.handleBlurEvent(event);\n      }\n    });\n    this.input.addEventListener('focus', (event) => {\n      if (this.searchOnFocus) {\n        this.handleInputEvent(event);\n      }\n    });\n\n    this.dropdown = options.dropdown;\n    if (options.filterItems !== false) {\n      this.filterItems = true;\n    }\n    if (options.searchOnFocus !== false) {\n      this.searchOnFocus = true;\n    }\n    this.debounce = options.debounce;\n    this.suggestionMethod = options.suggestionMethod || 'replace';\n    this.currentSearchTerm = this.input.value || '';\n    /** @type {string} */\n    this.suggestedInput = null;\n    /** @type {string} */\n    this.previousValue = null;\n    this.performSearch = options.performSearch || ((value, resolve = () => {}) => resolve());\n    this.updateList = options.updateList || ((results, resolve = () => {}) => resolve());\n  }\n\n  /**\n   * Default input handler\n   * @param {Event} [event]\n   * @return {void}\n   */\n  handleInputEvent(event) { // eslint-disable-line no-unused-vars\n    if (document.activeElement !== this.input) {\n      return;\n    }\n    const inputValue = this.input.value || '';\n    if (inputValue === this.suggestedInput) {\n      return;\n    }\n    this.showDropDown();\n    if (inputValue === this.previousValue) {\n      return;\n    }\n    this.previousValue = inputValue;\n    this.currentSearchTerm = inputValue;\n\n    /**\n     * @param {Error} error\n     * @return {void}\n     */\n    function onErrorCallback(error) {\n      if (error.message === 'debounced') {\n        return;\n      }\n      if (error.message === 'expired') {\n        return;\n      }\n      throw error;\n    }\n\n    // IE does not support ES6 Promises\n    // Using resolve/reject callbacks instead.\n    // Syntactically ugly, but removes need for a polyfill.\n    this.performDebounce(inputValue,\n      () => this.checkExpired(inputValue,\n        () => this.performSearch(inputValue,\n          searchResults => this.checkExpired(inputValue,\n            () => this.updateList(searchResults,\n              () => this.filterListItems(),\n              onErrorCallback),\n            onErrorCallback),\n          onErrorCallback),\n        onErrorCallback),\n      onErrorCallback);\n\n    /**\n     * Promise.resolve()\n     *   .then(() => this.performDebounce(inputValue))\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.performSearch(inputValue))\n     *   .then((searchResults) => {\n     *     results = searchResults;\n     *   })\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.updateList(results))\n     *   .then(() => this.filterListItems())\n     *   .catch((error) => {\n     *     if (error.message === 'debounced') {\n     *       return;\n     *     }\n     *     if (error.message === 'expired') {\n     *       return;\n     *     }\n     *     throw error;\n     *   });\n     */\n  }\n\n  /**\n   * @param {string} inputValue\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  checkExpired(inputValue, resolve, reject) {\n    if (inputValue === this.currentSearchTerm) {\n      resolve();\n    } else {\n      reject(new Error('expired'));\n    }\n  }\n\n  /**\n   * @param {string} searchTerm\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  performDebounce(searchTerm, resolve, reject) {\n    if (!this.debounce) {\n      resolve();\n      return;\n    }\n    setTimeout(() => {\n      if (searchTerm !== this.currentSearchTerm) {\n        reject(new Error('debounced'));\n        return;\n      }\n      resolve();\n    }, this.debounce);\n  }\n\n  /** @return {boolean} handled */\n  showDropDown() {\n    if (!this.dropdown) {\n      return false;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    let changed = false;\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.removeAttribute('mdw-hide');\n      changed = true;\n    }\n    if (!dropDownElement.hasAttribute('mdw-show')) {\n      dropDownElement.setAttribute('mdw-show', '');\n      changed = true;\n    }\n    return changed;\n  }\n\n  /** @return {boolean} handled */\n  isDropDownShown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      return false;\n    }\n    if (this.input === document.activeElement) {\n      return true;\n    }\n    if (dropDownElement.hasAttribute('mdw-show')) {\n      return true;\n    }\n    return false;\n  }\n\n  /** @return {boolean} handled */\n  hideDropDown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (!dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.setAttribute('mdw-hide', '');\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {Event|FocusEvent} event\n   * @return {void}\n   */\n  handleBlurEvent(event) { // eslint-disable-line no-unused-vars\n    if (this.dropdown) {\n      const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n      if (dropDownElement.hasAttribute('mdw-show')) {\n        dropDownElement.removeAttribute('mdw-show');\n      }\n    }\n  }\n\n  /**\n   * @param {Element} item\n   * @return {void}\n   */\n  onItemSelected(item) {\n    if (this.suggestionMethod === 'none') {\n      return;\n    }\n    let suggestion = this.itemTextParser(item);\n    if (suggestion) {\n      suggestion = suggestion.trim();\n    }\n    if (!suggestion) {\n      return;\n    }\n    this.suggestedInput = suggestion;\n    if (this.suggestionMethod === 'replace') {\n      TextField.setValue(this.textfield, suggestion);\n    } else if (this.suggestionMethod === 'append') {\n      const selectionStart = (this.previousValue || '').length;\n      const selectionEnd = suggestion.length;\n      TextField.setValue(this.textfield, suggestion);\n      this.input.setSelectionRange(selectionStart, selectionEnd);\n    }\n  }\n\n  /**\n   * @param {SearchAdapterTextFilter} [fnFilter]\n   * @return {void}\n   */\n  filterListItems(fnFilter) {\n    if (!this.filterItems) {\n      return;\n    }\n    const input = this.input.value;\n    const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n    const items = this.list.querySelectorAll('[role=\"option\"]');\n    let hasItem = false;\n    iterateArrayLike(items, (item) => {\n      const content = this.itemTextParser(item);\n      const fn = fnFilter || this.filter;\n      if (fn(input, content)) {\n        hasItem = true;\n        item.setAttribute('aria-hidden', 'false');\n      } else {\n        item.setAttribute('aria-hidden', 'true');\n      }\n    });\n    if (current && current.getAttribute('aria-hidden') === 'true') {\n      const newSelection = selectSibling(this.list);\n      if (newSelection) {\n        this.onItemSelected(newSelection);\n      }\n    }\n    if (!hasItem) {\n      this.hideDropDown();\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event\n   * @return {void}\n   */\n  onTextFieldKeydownEvent(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    if (event.ctrlKey || event.altKey) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowUp':\n      case 'Up': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, true);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'ArrowDown':\n      case 'Down': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, false);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'Esc':\n      case 'Escape': {\n        if (this.hideDropDown()) {\n          this.suggestedInput = this.previousValue;\n          TextField.setValue(this.textfield, this.previousValue);\n          event.stopPropagation();\n          event.preventDefault();\n        }\n        break;\n      }\n      case 'Enter': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n            event.preventDefault();\n          }\n        }\n        break;\n      }\n      case 'Tab': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n          }\n        }\n        break;\n      }\n      default:\n    }\n  }\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tabpanel\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function attach(tabPanelElement) {\n  tabPanelElement.setAttribute('role', 'tabpanel');\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function detach(tabPanelElement) {\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {boolean}\n */\nexport function isExpanded(tabPanelElement) {\n  return tabPanelElement.getAttribute('aria-expanded') === 'true';\n}\n\n/**\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n}\n\n/**\n * Hide element to avoid tabbing into next panel\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setHidden(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-hidden', value ? 'true' : 'false');\n}\n","import {\n  iterateArrayLike,\n  scrollToElement,\n  dispatchDomEvent,\n  isRtl,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\nimport * as TabPanel from './panel';\n\nexport const SCROLL_EVENT = 'mdw:tabcontent-scroll';\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function attach(tabContentElement) {\n  tabContentElement.addEventListener('scroll', onTabContentScroll);\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.attach);\n  tabContentElement.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function detach(tabContentElement) {\n  tabContentElement.removeEventListener('keydown', onKeyDown);\n  tabContentElement.removeAttribute('mdw-selected-index');\n  tabContentElement.removeEventListener('scroll', onTabContentScroll);\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.detach);\n}\n\n/**\n * Prevent scrolling with keyboard\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      event.preventDefault();\n      break;\n    default:\n  }\n}\n\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabContentElement = (event.currentTarget);\n  if (tabContentElement.hasAttribute('mdw-no-scroll')) {\n    return;\n  }\n  const isPageRtl = isRtl();\n  const scrollPoint = tabContentElement.scrollLeft / tabContentElement.clientWidth;\n  let visibleIndex = Math.floor(scrollPoint);\n  let visibilityPercentage = scrollPoint - visibleIndex;\n\n  // Percentage may be incorrect due to floating point rounding errors\n  // Compare integer values provided by browser to check for 0\n  iterateSomeOfArrayLike(tabContentElement.children, ((/** @type {HTMLElement} */ panel, index) => {\n    if (tabContentElement.scrollLeft === panel.offsetLeft) {\n      visibleIndex = index;\n      visibilityPercentage = 0;\n      return true;\n    }\n    return false;\n  }));\n\n  const isResting = visibilityPercentage === 0;\n  let rightPanel;\n  let leftPeekPanel;\n  let rightPeekPanel;\n  let leftSelected = false;\n  let rightSelected = false;\n  let selectedIndex;\n  let leftPanelIndex;\n  if (isPageRtl) {\n    const lastIndex = tabContentElement.children.length - 1;\n    leftPanelIndex = lastIndex - visibleIndex;\n    leftPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex - 1));\n    rightPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 1));\n    rightPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 2));\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = lastIndex - visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = lastIndex - (visibleIndex + 1);\n    }\n  } else {\n    leftPanelIndex = visibleIndex;\n    rightPanel = tabContentElement.children.item(visibleIndex + 1);\n    leftPeekPanel = tabContentElement.children.item(visibleIndex - 1);\n    rightPeekPanel = tabContentElement.children.item(visibleIndex + 2);\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = visibleIndex + 1;\n    }\n  }\n  /** @type {HTMLElement} */\n  const leftPanel = (tabContentElement.children.item(leftPanelIndex));\n\n  const currentTargetIndexString = tabContentElement.getAttribute('mdw-target-index');\n  const currentTargetIndex = currentTargetIndexString == null\n    ? null : parseInt(currentTargetIndexString, 10);\n\n  let newSelectedIndex = null;\n  if (currentTargetIndex == null) {\n    TabPanel.setExpanded(leftPanel, leftSelected);\n    if (rightPanel) {\n      TabPanel.setExpanded(rightPanel, rightSelected);\n    }\n    newSelectedIndex = selectedIndex;\n  } else if (currentTargetIndex === selectedIndex) {\n    tabContentElement.removeAttribute('mdw-target-index');\n  }\n\n\n  TabPanel.setHidden(leftPanel, false);\n  if (leftPeekPanel) {\n    TabPanel.setHidden(leftPeekPanel, isResting || !leftSelected);\n  }\n  if (rightPanel) {\n    TabPanel.setHidden(rightPanel, isResting);\n  }\n  if (rightPeekPanel) {\n    TabPanel.setHidden(rightPeekPanel, isResting || !rightSelected);\n  }\n\n  dispatchDomEvent(tabContentElement, SCROLL_EVENT, {\n    newSelectedIndex,\n    leftPanelIndex,\n    visibilityPercentage,\n  });\n}\n\n/**\n * @param {HTMLElement} tabContentElement\n * @param {HTMLElement|number} panel element or index\n * @param {true|false|'smooth'} [scrollToPanel='smooth']\n * @return {void}\n */\nexport function selectPanel(tabContentElement, panel, scrollToPanel = 'smooth') {\n  /** @type {HTMLElement} */\n  let panelElement;\n  /** @type {number} */\n  let currentSelectedIndex = null;\n  /** @type {number} */\n  let panelIndex = null;\n  /** @type {Element[]} */\n  const otherPanels = [];\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), (el, index) => {\n    if (currentSelectedIndex == null && TabPanel.isExpanded(el)) {\n      currentSelectedIndex = index;\n    }\n    if (panel === el || panel === index) {\n      TabPanel.setExpanded(el, true);\n      TabPanel.setHidden(el, false);\n      /** @type {HTMLElement} */\n      panelElement = (el);\n      panelIndex = index;\n    } else {\n      otherPanels.push(el);\n    }\n  });\n  if (!panelElement) {\n    // Invalid index or panel not in tabcontent\n    return;\n  }\n  otherPanels.forEach(sibling => TabPanel.setExpanded(sibling, false));\n\n  const isPageRtl = isRtl();\n  const targetScrollLeft = isPageRtl\n    ? panelElement.parentElement.scrollWidth + panelElement.offsetLeft - panelElement.offsetWidth\n    : panelElement.offsetLeft;\n  if (!scrollToPanel || panelElement.parentElement.scrollLeft === targetScrollLeft) {\n    // No scrolling, hide others\n    otherPanels.forEach(sibling => TabPanel.setHidden(sibling, true));\n    return;\n  }\n  if (scrollToPanel && panelElement) {\n    if (panelIndex == null) {\n      tabContentElement.removeAttribute('mdw-target-index');\n    } else {\n      tabContentElement.setAttribute('mdw-target-index', panelIndex.toString(10));\n    }\n    scrollToElement(panelElement, scrollToPanel === 'smooth', isPageRtl);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport {\n  iterateArrayLike, getPassiveEventListenerOption, scrollToElement,\n} from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as TabItem from './item';\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function attach(tabListElement) {\n  let indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (!indicatorElement) {\n    indicatorElement = document.createElement('div');\n    indicatorElement.classList.add('mdw-tab__indicator');\n    tabListElement.appendChild(indicatorElement);\n  }\n\n  setupARIA(tabListElement);\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.attach);\n  RovingTabIndex.setupTabIndexes(tabListElement, tabListElement.querySelectorAll('[role=\"tab\"]'));\n  tabListElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent,\n    getPassiveEventListenerOption());\n  tabListElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  tabListElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  tabListElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(tabListElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectNext(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function setupARIA(tabListElement) {\n  if (tabListElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  tabListElement.setAttribute('role', 'tablist');\n  tabListElement.setAttribute('aria-multiselectable', 'false');\n  tabListElement.setAttribute('aria-orientation', 'horizontal');\n  const indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (indicatorElement) {\n    indicatorElement.setAttribute('role', 'presentation');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function detach(tabListElement) {\n  tabListElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  RovingTabIndex.detach(tabListElement, tabListElement.querySelectorAll('[role=\"tab\"]'));\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.detach);\n}\n\n/**\n * @param {Element} tabListElement\n * @param {Element|number} item element or index\n * @param {number} [percentage=0]\n * @param {boolean} [animate=false]\n * @return {void}\n */\nexport function setIndicatorPosition(tabListElement, item, percentage, animate = false) {\n  /** @type {HTMLElement} */\n  const indicatorElement = (tabListElement.getElementsByClassName('mdw-tab__indicator')[0]);\n  if (!indicatorElement) {\n    return;\n  }\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  /** @type {HTMLElement} */\n  const leftItem = (item instanceof Element ? item : items.item(item));\n  let left = leftItem.offsetLeft;\n  let right = left + leftItem.offsetWidth;\n\n  if (percentage > 0) {\n    left += (percentage * leftItem.offsetWidth);\n    /** @type {HTMLElement} */\n    let nextItem = (leftItem.nextElementSibling);\n    if (!nextItem.classList.contains('mdw-tab__item')) {\n      // RTL\n      /** @type {HTMLElement} */\n      nextItem = (leftItem.previousElementSibling);\n    }\n    right = nextItem.offsetLeft + (percentage * nextItem.offsetWidth);\n  }\n\n  // RTL is inversed\n  const width = Math.abs(right - left);\n  indicatorElement.style.setProperty('transform', `translateX(${left}px) scaleX(${width / 1000})`);\n  if (animate) {\n    indicatorElement.setAttribute('mdw-animate', '');\n  } else {\n    indicatorElement.removeAttribute('mdw-animate');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @return {Element}\n */\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @param {boolean} [dispatchEvents=false]\n * @return {void}\n */\nexport function selectItemAtIndex(tabListElement, tabItemIndex, dispatchEvents = false) {\n  tabListElement.setAttribute('mdw-selected-index', tabItemIndex.toString(10));\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  if (dispatchEvents) {\n    const item = items.item(tabItemIndex);\n    if (item) {\n      TabItem.setSelected(item, true, true);\n    }\n    return;\n  }\n  iterateArrayLike(items, (el, index) => {\n    if (tabItemIndex === index) {\n      TabItem.setSelected(el, true, false);\n      if (tabListElement.hasAttribute('mdw-scrollable')) {\n        scrollToElement(el, true);\n      }\n    } else {\n      TabItem.setSelected(el, false, false);\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  iterateArrayLike(tabListElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      TabItem.setSelected(item, false, false);\n    }\n  });\n}\n","import {\n  iterateArrayLike,\n  nextTick,\n  getPassiveEventListenerOption,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\nimport * as TabContent from './content';\nimport * as TabList from './list';\nimport * as TabPanel from './panel';\nimport * as TabItem from './item';\n\nconst RESIZE_WAIT_FRAMES = 5;\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function attach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.attach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.attach(tabContentElement);\n  }\n\n  tabElement.addEventListener(TabContent.SCROLL_EVENT, onTabContentScroll,\n    getPassiveEventListenerOption());\n  tabElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange,\n    getPassiveEventListenerOption());\n\n  /** @type {ArrayLike<Element>} */\n  const items = (tabListElement && tabListElement.getElementsByClassName('mdw-tab__item')) || [];\n  /** @type {ArrayLike<Element>} */\n  const panels = (tabContentElement && tabContentElement.getElementsByClassName('mdw-tab__panel')) || [];\n\n  let selectedItem;\n  let selectedPanel;\n  iterateArrayLike(items, (itemElement, index) => {\n    if (itemElement.getAttribute('aria-selected') === 'true') {\n      selectedItem = itemElement;\n      selectedPanel = panels[index];\n    }\n  });\n  if (!selectedItem && items.length) {\n    selectedItem = items[0];\n    selectedPanel = panels[0];\n  }\n  if (selectedItem) {\n    TabItem.setSelected(selectedItem, true);\n  }\n  if (selectedPanel) {\n    TabPanel.setHidden(selectedPanel, false);\n    TabPanel.setExpanded(selectedPanel, true);\n  }\n  onResize(tabElement);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabItemSelectedChange(event) {\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const tabItemElement = (event.target);\n  /** @type {HTMLElement} */\n  const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n  if (tabContentElement) {\n    let tabItemIndex = -1;\n    const tabItems = tabElement.querySelectorAll('.mdw-tab__list [role=\"tab\"]');\n    iterateSomeOfArrayLike(tabItems, (el, index) => {\n      if (el === tabItemElement) {\n        tabItemIndex = index;\n        return true;\n      }\n      return false;\n    });\n    if (!tabContentElement.hasAttribute('mdw-no-scroll')) {\n      TabContent.selectPanel(tabContentElement, tabItemIndex, 'smooth');\n      return;\n    }\n    TabContent.selectPanel(tabContentElement, tabItemIndex, true);\n  }\n\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.setIndicatorPosition(tabListElement, tabItemElement, 0, true);\n  }\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function detach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.detach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.detach(tabContentElement);\n  }\n\n  tabElement.removeEventListener(TabContent.SCROLL_EVENT, onTabContentScroll);\n  tabElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange);\n  tabElement.removeAttribute('mdw-resize-stage');\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function onResize(tabElement) {\n  let stage = 0;\n  tabElement.setAttribute('mdw-resize-stage', stage.toString());\n  /** @return {void} */\n  function performResize() {\n    if (!tabElement.hasAttribute('mdw-resize-stage')) {\n      // Skip resize\n      return;\n    }\n    const attrStage = tabElement.getAttribute('mdw-resize-stage');\n    if (attrStage !== stage.toString()) {\n      // Off-sync due to another resize event\n      return;\n    }\n    stage += 1;\n    tabElement.setAttribute('mdw-resize-stage', stage.toString());\n    if (stage === RESIZE_WAIT_FRAMES) {\n      /** @type {HTMLElement} */\n      const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n      if (tabContentElement && !tabContentElement.hasAttribute('mdw-no-scroll')) {\n        /** @type {HTMLElement} */\n        const relatedPanel = (tabContentElement.querySelector('.mdw-tab__panel[aria-expanded=\"true\"]'));\n        if (relatedPanel) {\n          TabContent.selectPanel(tabContentElement, relatedPanel, true);\n        }\n      }\n    } else if (stage === RESIZE_WAIT_FRAMES * 2) {\n      /** @type {HTMLElement} */\n      const tabListElement = (tabElement.getElementsByClassName('mdw-tab__list')[0]);\n      if (tabListElement) {\n        /** @type {HTMLElement} */\n        const relatedItem = (tabListElement.querySelector('.mdw-tab__item[aria-selected=\"true\"]'));\n        if (relatedItem) {\n          TabList.setIndicatorPosition(tabListElement, relatedItem, 0);\n        }\n      }\n      tabElement.removeAttribute('mdw-resize-stage');\n      return;\n    }\n\n    nextTick(performResize);\n  }\n  nextTick(performResize);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  if (tabElement.hasAttribute('mdw-resize-stage')) {\n    return;\n  }\n  const { detail } = event;\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (!tabListElement) {\n    return;\n  }\n  TabList.setIndicatorPosition(tabListElement, detail.leftPanelIndex, detail.visibilityPercentage);\n  if (detail.newSelectedIndex != null) {\n    TabList.selectItemAtIndex(tabListElement, detail.newSelectedIndex, false);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport { iterateArrayLike } from '../../core/dom';\nimport * as ChipItem from './item';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.detach);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport * as Ripple from '../../core/ripple/index';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  Ripple.detach(element);\n}\n","/**\n * @callback DataTableAdapterColumnFormatter<T>\n * @param {any} value\n * @param {T} [object]\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterColumnRenderer<T>\n * @param {HTMLTableCellElement} cell,\n * @param {any} value\n * @param {T} data\n * @return {void}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapterColumn\n * @typedef DataTableAdapterColumnOptions<T>\n * @property {string} key\n * @property {(string|DocumentFragment)} [name='']\n * @property {'checkbox'|string} [type]\n * @property {boolean} [rowSelector]\n * @property {string} [tooltip]\n * @property {boolean} [sortable]\n * @property {boolean} [primaryColumn]\n * @property {HTMLElement} [customSortIcon]\n * @property {string} [innerHTML]\n * @property {DocumentFragment} [fragment]\n * @property {DataTableAdapterColumnRenderer<T>} [renderer]\n * @property {DataTableAdapterColumnFormatter<T>} [formatter]\n * @template T\n */\n\n/** @return {HTMLLabelElement} */\nfunction constructTableCheckbox() {\n  const checkboxLabel = document.createElement('label');\n  checkboxLabel.className = 'mdw-selection';\n  const input = document.createElement('input');\n  input.className = 'mdw-selection__input';\n  input.type = 'checkbox';\n  const icon = document.createElement('div');\n  icon.className = 'mdw-selection__icon';\n  icon.setAttribute('mdw-checkbox', '');\n  checkboxLabel.appendChild(input);\n  checkboxLabel.appendChild(icon);\n  return checkboxLabel;\n}\n\n/**\n * @template T\n */\nexport default class DataTableAdapterColumn {\n  /** @param {DataTableAdapterColumnOptions<T>} options */\n  constructor(options) {\n    this.element = document.createElement('th');\n    if (options.innerHTML != null) {\n      this.element.innerHTML = options.innerHTML;\n    } else if (options.fragment) {\n      this.element.appendChild(options.fragment);\n    }\n    this.key = options.key;\n    this.element.dataset.key = options.key;\n\n    if (options.sortable) {\n      this.element.setAttribute('mdw-sortable', '');\n      let sortIcon = options.customSortIcon;\n      if (!sortIcon) {\n        sortIcon = document.createElement('div');\n        sortIcon.classList.add('mdw-datatable__sort-icon');\n        sortIcon.classList.add('material-icons');\n        sortIcon.textContent = 'arrow_downward';\n      }\n      if (this.element.hasChildNodes()) {\n        this.element.insertBefore(this.element.firstChild, options.customSortIcon);\n      } else {\n        this.element.appendChild(sortIcon);\n      }\n    }\n    if (options.tooltip) {\n      const wrapper = document.createElement('span');\n      wrapper.classList.add('mdw-tooltip__wrapper');\n      const target = document.createElement('span');\n      target.classList.add('mdw-tooltip__target');\n      if (!options.name) {\n        target.textContent = '';\n      } else if (typeof options.name === 'string') {\n        target.textContent = options.name;\n      } else {\n        target.appendChild(options.name);\n      }\n      const tooltip = document.createElement('div');\n      tooltip.className = 'mdw-tooltip mdw-theme';\n      tooltip.setAttribute('mdw-surface', 'background 700');\n      tooltip.setAttribute('mdw-dark', '');\n      tooltip.textContent = options.tooltip;\n      wrapper.appendChild(target);\n      wrapper.appendChild(tooltip);\n      this.element.appendChild(wrapper);\n    } else if (options.name) {\n      let node;\n      if (typeof options.name === 'string') {\n        node = document.createTextNode(options.name);\n      } else {\n        node = options.name;\n      }\n      this.element.appendChild(node);\n    }\n\n    this.primaryColumn = options.primaryColumn;\n    if (options.primaryColumn) {\n      this.element.setAttribute('mdw-primary-column', '');\n    }\n\n    this.rowSelector = options.rowSelector;\n\n    if (this.rowSelector) {\n      this.element.setAttribute('mdw-selector', '');\n    }\n    if (options.type) {\n      this.element.dataset.type = options.type;\n      this.type = options.type;\n    }\n    if (this.rowSelector && this.type === 'checkbox') {\n      const checkboxLabel = constructTableCheckbox();\n      this.element.appendChild(checkboxLabel);\n    }\n\n    if (options.renderer) {\n      this.renderer = options.renderer;\n    } else if (options.type === 'checkbox') {\n      this.renderer = DataTableAdapterColumn.defaultCheckboxRenderer;\n    } else {\n      this.renderer = DataTableAdapterColumn.defaultCellRenderer;\n    }\n    this.formatter = options.formatter || (value => value);\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCheckboxRenderer(cell, value) {\n    let input = cell.getElementsByTagName('input')[0];\n    const checked = !!value;\n    if (!input) {\n      const checkboxLabel = document.createElement('label');\n      checkboxLabel.className = 'mdw-selection';\n      input = document.createElement('input');\n      input.className = 'mdw-selection__input';\n      input.type = 'checkbox';\n      input.checked = checked;\n      const icon = document.createElement('div');\n      icon.className = 'mdw-selection__icon';\n      icon.setAttribute('mdw-checkbox', '');\n      checkboxLabel.appendChild(input);\n      checkboxLabel.appendChild(icon);\n      cell.appendChild(checkboxLabel);\n    }\n    if (input.checked !== checked) {\n      input.checked = checked;\n    }\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCellRenderer(cell, value) {\n    let stringValue;\n    if (value == null) {\n      stringValue = '';\n    } else {\n      stringValue = value.toString();\n    }\n    const len = cell.childNodes.length;\n    let foundTextNode = false;\n    for (let i = len - 1; i >= 0; i -= 1) {\n      const node = cell.childNodes.item(i);\n      if (!foundTextNode && node.nodeType === Node.TEXT_NODE) {\n        if (node.nodeValue !== stringValue) {\n          node.nodeValue = stringValue;\n        }\n        foundTextNode = true;\n      } else {\n        cell.removeChild(node);\n      }\n    }\n    if (!foundTextNode) {\n      const node = document.createTextNode(stringValue);\n      cell.appendChild(node);\n    }\n  }\n}\n","const radius = 8.75;\nconst circumference = 2 * Math.PI * radius;\n\n// TODO: Upgrade IE/Edge browsers to animate with rAF\n\n/**\n * @param {Element} progressCircleElement\n * @return {void}\n */\nexport function attach(progressCircleElement) {\n  /** @type {Element} */\n  let svg = (progressCircleElement.getElementsByTagName('svg')[0]);\n  if (!svg) {\n    svg = (document.createElement('svg'));\n    svg.setAttribute('viewbox', '0 0 24 24');\n    progressCircleElement.appendChild(svg);\n  }\n  const paths = svg.getElementsByTagName('path');\n  if (paths.length !== 2) {\n    svg.innerHTML = `\n      <path d=\"M12 3.25A8.75 8.75 0 1 1 3.25 12\"/>\n      <path d=\"M12 3.25A8.75 8.75 0 1 1 3.25 12 A 8.75 8.75 0 0 1 12 3.25\"/>\n    `;\n  }\n}\n\n/**\n * @param {Element} progressCircleElement\n * @param {number} value Percentage value (0-100);\n * @return {void}\n */\nexport function setValue(progressCircleElement, value) {\n  const dashOffset = circumference * (3 - (value / 100));\n  const pathElements = progressCircleElement.getElementsByTagName('path');\n  pathElements[pathElements.length - 1].style.setProperty('stroke-dashoffset', dashOffset.toString());\n}\n","import { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\n\nimport * as Button from '../../components/button/index';\nimport * as DataTable from '../../components/datatable/index';\nimport DataTableAdapterColumn from './column';\n\n/**\n * @typedef {import('./column').DataTableAdapterColumnOptions<T>} DataTableAdapterColumnOptions<T>\n * @template T\n */\n\n/**\n * Callback fired when value change is requested\n * Return truthy value to cancel updating object\n * @callback DataTableAdapterOnValueChangeRequestedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {boolean} cancel\n * @template T\n */\n\n/**\n * Callback fired when value is changed\n * @callback DataTableAdapterOnValueChangedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {void}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterFilter<T>\n * @param {T} element\n * @param {number} [index]\n * @param {T[]} array\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterSorter<T>\n * @param {T} a\n * @param {T} b\n * @return {number}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapter\n * @typedef DataTableAdapterOptions<T>\n * @prop {HTMLElement} options.datatable\n * @prop {T[]} options.datasource Object array\n * @prop {DataTableAdapterFilter<T>} [options.filter]\n * @prop {DataTableAdapterOnValueChangeRequestedCallback<T>} [options.onValueChangeRequested]\n * @prop {DataTableAdapterOnValueChangedCallback<T>} [options.onValueChanged]\n * @prop {DataTableAdapterSorter<T>} [options.sorter]\n * @template T\n */\n\n/** @template {Object} T */\nexport default class DataTableAdapter {\n  /** @param {DataTableAdapterOptions<T>} options */\n  constructor(options) {\n    this.element = options.datatable;\n    this.datasource = options.datasource;\n    this.filter = options.filter;\n    this.sorter = options.sorter;\n    this.onValueChangeRequested = options.onValueChangeRequested || (() => false);\n    this.onValueChanged = options.onValueChanged || (() => {});\n\n    this.onElementClickListener = (/** @type {MouseEvent|PointerEvent} */ event) => {\n      this.handleClickInteraction(event);\n    };\n    // Use one click event listener to reduce overhead and allow dynamic content\n    this.element.addEventListener('click', this.onElementClickListener);\n\n    this.onElementScrollListener = () => {\n      this.onElementScroll();\n    };\n\n    /** @type {HTMLTableRowElement} */\n    this.tabindexRow = null;\n    /** @type {Object} */\n    this.tabindexRowData = null;\n    this.element.addEventListener('mdw:tabindexchanged', (event) => {\n      if (this.element.hasAttribute('mdw-row-focusable')) {\n        this.tabindexRow = /** @type {HTMLTableRowElement} */ (event.target);\n        this.tabindexRowData = this.getDataForTableRow(this.tabindexRow);\n      }\n    });\n    DataTable.attach(this.element);\n    this.scroller = DataTable.getScroller(this.element);\n    this.element.setAttribute('mdw-datatable-adapter', '');\n    /** @type {DataTableAdapterColumn<T>[]} */\n    this.columns = [];\n    this.page = 0;\n    this.pageLimit = 0;\n    this.debounceTimeMs = 0;\n    this.throttleTimeMs = 0;\n    this.useLazyRendering = false;\n  }\n\n  detach() {\n    this.element.removeAttribute('mdw-datatable-adapter');\n    this.element = null;\n    this.datasource = null;\n    this.filteredDatasource = null;\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  performThrottledRender(forceRefresh = false) {\n    this.performLazyRender(forceRefresh);\n    if (this.throttledRenderPending) {\n      this.throttledRenderPending = false;\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  scheduleThrottledRender(forceRefresh = false) {\n    if (this.throttleTimeMs < 17) {\n      window.requestAnimationFrame(() => this.performThrottledRender(forceRefresh));\n    } else {\n      setTimeout(() => this.performThrottledRender(forceRefresh), this.throttleTimeMs);\n    }\n  }\n\n  onElementScroll() {\n    if (this.debounceTimeout) {\n      clearTimeout(this.debounceTimeout);\n      this.debounceTimeout = null;\n    }\n    if (this.throttledRenderPending) {\n      // Will perform in the future\n      return;\n    }\n    if (this.debounceTimeMs) {\n      this.debounceTimeout = setTimeout(() => {\n        this.scheduleThrottledRender();\n        this.throttledRenderPending = true;\n      }, this.debounceTimeMs);\n    } else {\n      this.scheduleThrottledRender();\n      this.throttledRenderPending = true;\n    }\n  }\n\n  buildScrollListener() {\n    this.scroller.addEventListener('scroll', this.onElementScrollListener);\n  }\n\n  destroyScrollListener() {\n    this.scroller.removeEventListener('scroll', this.onElementScrollListener);\n  }\n\n  /**\n   * @param {PointerEvent|MouseEvent} event\n   * @return {void}\n   */\n  handleClickInteraction(event) {\n    const { target } = event;\n    if (target instanceof HTMLInputElement) {\n      if (target.type === 'checkbox') {\n        event.stopPropagation();\n        const currentCell = this.getTableCell(target);\n        if (currentCell.tagName.toLowerCase() === 'th') {\n          this.setCheckOnAllRows(target.checked, currentCell.cellIndex);\n          this.setHasSelection(target.checked);\n          return;\n        }\n        const currentRow = this.getTableRow(target);\n        const object = this.getDataForTableRow(currentRow);\n        if (this.onValueChangeRequested(object, currentCell.dataset.key, target.checked)) {\n          event.preventDefault();\n          return;\n        }\n        object[currentCell.dataset.key] = target.checked;\n        this.onValueChanged(object, currentCell.dataset.key, target.checked);\n        if (currentCell.hasAttribute('mdw-selector')) {\n          if (target.checked) {\n            currentRow.setAttribute('aria-selected', 'true');\n            this.setHasSelection(true);\n          } else {\n            currentRow.removeAttribute('aria-selected');\n            const selectedRows = this.getSelectedRows();\n            this.setHasSelection(selectedRows.length !== 0);\n          }\n        }\n      }\n      return;\n    }\n    const currentCell = this.getTableCell(/** @type {HTMLElement} */ (target));\n    if (currentCell) {\n      if (currentCell.tagName.toLowerCase() === 'th' && currentCell.hasAttribute('mdw-sortable')) {\n        event.stopPropagation();\n        let ascending = true;\n        if (currentCell.hasAttribute('mdw-sorted') && !currentCell.getAttribute('mdw-sorted')) {\n          ascending = false;\n        }\n        this.updateSortIcons(currentCell, ascending);\n        if (this.updateSortColumn) {\n          this.updateSortColumn(currentCell, ascending);\n        }\n      }\n    }\n  }\n\n  /**\n   * Overridable sorting method\n   * @param {HTMLTableHeaderCellElement} [tableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortColumn(tableHeaderCell, ascending) {\n    if (!tableHeaderCell) {\n      this.sorter = null;\n      this.refresh();\n      return;\n    }\n    if (tableHeaderCell.cellIndex === -1) {\n      // Header not attached to row!\n      return;\n    }\n    const index = tableHeaderCell.cellIndex;\n    const tableColumn = this.columns[index];\n    const direction = ascending ? 1 : -1;\n    this.sorter = ((/** @type {T} */ a, /** @type {T} */ b) => {\n      const valueA = a[tableColumn.key];\n      const valueB = b[tableColumn.key];\n      if (valueA == null) {\n        if (valueB == null) {\n          return 0;\n        }\n        return -1 * direction;\n      }\n      if (valueB == null) {\n        return direction;\n      }\n      if (tableColumn.type === 'number') {\n        return (parseFloat(valueA) - parseFloat(valueB)) * direction;\n      }\n      if (tableColumn.type === 'checkbox') {\n        return ((valueA ? 1 : 0) - (valueB ? 1 : 0)) * direction;\n      }\n      if (valueA.localeCompare) {\n        return valueA.localeCompare(valueB) * direction;\n      }\n      // eslint-disable-next-line eqeqeq\n      if (valueA == valueB) {\n        return 0;\n      }\n      return (valueA - valueB) * direction;\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLTableHeaderCellElement} [sortedTableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortIcons(sortedTableHeaderCell, ascending) {\n    if (sortedTableHeaderCell) {\n      if (ascending) {\n        sortedTableHeaderCell.setAttribute('mdw-sorted', '');\n      } else {\n        sortedTableHeaderCell.setAttribute('mdw-sorted', 'desc');\n      }\n    }\n    iterateArrayLike(this.element.getElementsByTagName('th'), (otherTableHeader) => {\n      if (otherTableHeader !== sortedTableHeaderCell) {\n        otherTableHeader.removeAttribute('mdw-sorted');\n      }\n    });\n  }\n\n  /**\n   * @param {boolean} value\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  setCheckOnAllRows(value, columnIndex) {\n    const column = this.columns[columnIndex];\n    this.datasource.forEach((object) => {\n      object[column.key] = value; // eslint-disable-line no-param-reassign\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableRowElement}\n   */\n  getTableRow(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableRowElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableRow(element.parentElement);\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableCellElement}\n   */\n  getTableCell(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableCellElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableCell(element.parentElement);\n  }\n\n  /** @return {T[]} */\n  getSelectedRows() {\n    const selectorColumn = this.columns.filter(column => column.rowSelector)[0];\n    if (!selectorColumn) {\n      return [];\n    }\n    return this.getDatasource().filter(row => row[selectorColumn.key]);\n  }\n\n  /**\n   * @param {boolean} value\n   * @return {void}\n   */\n  setHasSelection(value) {\n    if (value) {\n      this.element.setAttribute('mdw-has-selection', '');\n      return;\n    }\n    this.element.removeAttribute('mdw-has-selection');\n  }\n\n  /**\n   * @param {T[]} datasource Object array\n   * @return {void}\n   */\n  setDatasource(datasource) {\n    this.datasource = datasource;\n  }\n\n  /**\n   * Toggle lazy rending for datasources\n   * @param {boolean} value\n   * @return {void}\n   */\n  setUseLazyRendering(value) {\n    this.useLazyRendering = value;\n    if (value) {\n      this.buildScrollListener();\n    } else {\n      this.destroyScrollListener();\n    }\n  }\n\n  /**\n   * @param {DataTableAdapterColumnOptions<T>} options\n   * @return {DataTableAdapterColumn<T>}\n   */\n  addColumn(options) {\n    const tableColumn = new DataTableAdapterColumn(options);\n    const headerRow = this.getHeaderRow();\n    headerRow.appendChild(tableColumn.element);\n    this.columns.push(tableColumn);\n    return tableColumn;\n  }\n\n  updatePaginator() {\n    if (!this.pageLimit) {\n      return;\n    }\n    const min = this.page * this.pageLimit;\n    const total = this.getDatasource().length;\n    let max = this.pageLimit + min;\n    if (max > total) {\n      max = total;\n    }\n    this.paginationDetailsElement.textContent = `${min + 1}-${max} of ${total}`;\n    this.previousPageButton.setAttribute('aria-disabled', (min === 0 ? 'true' : 'false'));\n    this.nextPageButton.setAttribute('aria-disabled', (max === total ? 'true' : 'false'));\n  }\n\n  /**\n   * @param {Object} options\n   * @param {boolean} [options.disabled=false]\n   * @param {number} [options.limit=10]\n   * @param {number[]} [options.limits=[10,25,50,100]]\n   * @return {void}\n   */\n  setPagination(options = {}) {\n    const footer = this.getFooter(!options.disabled);\n    if (options.disabled) {\n      this.pageLimit = 0;\n      this.page = 0;\n      if (footer) {\n        footer.style.setProperty('display', 'none');\n      }\n      this.needsDraw = true;\n      return;\n    }\n    footer.style.removeProperty('display');\n    let optionsElement = footer.getElementsByClassName('mdw-datatable__footer-options')[0];\n    if (!optionsElement) {\n      optionsElement = document.createElement('div');\n      optionsElement.classList.add('mdw-datatable__footer-options');\n      const rowsPerPageText = document.createElement('span');\n      rowsPerPageText.textContent = 'Rows per page';\n      const limits = options.limits || [10, 25, 50, 100];\n      const limitsElement = document.createElement('label');\n      limitsElement.classList.add('mdw-textfield');\n      limitsElement.setAttribute('mdw-solo', '');\n      const select = document.createElement('select');\n      select.classList.add('mdw-textfield__input');\n      limits.forEach((limit) => {\n        const option = document.createElement('option');\n        option.value = limit.toString();\n        option.textContent = limit.toString();\n        select.appendChild(option);\n      });\n      select.value = (options.limit && options.limit.toString()) || '10';\n      const dropdownIcon = document.createElement('div');\n      dropdownIcon.classList.add('mdw-textfield__icon');\n      dropdownIcon.setAttribute('mdw-dropdown', '');\n      limitsElement.appendChild(select);\n      limitsElement.appendChild(dropdownIcon);\n      optionsElement.appendChild(rowsPerPageText);\n      optionsElement.appendChild(limitsElement);\n      footer.appendChild(optionsElement);\n      select.addEventListener('input', () => {\n        this.pageLimit = parseInt(select.value, 10);\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = footer.getElementsByClassName('mdw-datatable__footer-details')[0];\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = document.createElement('div');\n      this.paginationDetailsElement.classList.add('mdw-datatable__footer-details');\n      footer.appendChild(this.paginationDetailsElement);\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = footer.getElementsByClassName('mdw-datatable__footer-controls')[0];\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = document.createElement('div');\n      this.paginationControls.classList.add('mdw-datatable__footer-controls');\n      footer.appendChild(this.paginationControls);\n    }\n    if (!this.previousPageButton || !this.nextPageButton) {\n      const buttons = this.paginationControls.getElementsByClassName('mdw-button');\n      if (buttons.length !== 2) {\n        this.previousPageButton = document.createElement('a');\n        this.previousPageButton.classList.add('mdw-button');\n        this.previousPageButton.classList.add('material-icons');\n        this.previousPageButton.setAttribute('mdw-icon', '');\n        this.previousPageButton.textContent = 'chevron_left';\n        this.paginationControls.appendChild(this.previousPageButton);\n        Button.attach(this.previousPageButton);\n\n        this.nextPageButton = document.createElement('a');\n        this.nextPageButton.classList.add('mdw-button');\n        this.nextPageButton.classList.add('material-icons');\n        this.nextPageButton.setAttribute('mdw-icon', '');\n        this.nextPageButton.textContent = 'chevron_right';\n        this.paginationControls.appendChild(this.nextPageButton);\n        Button.attach(this.nextPageButton);\n      } else {\n        this.previousPageButton = buttons[0];\n        this.nextPageButton = buttons[1];\n      }\n      this.previousPageButton.addEventListener('click', () => {\n        if (this.previousPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page -= 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n      this.nextPageButton.addEventListener('click', () => {\n        if (this.nextPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page += 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    this.pageLimit = options.limit || 10;\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {boolean} create\n   * @return {HTMLElement}\n   */\n  getFooter(create) {\n    /** @type {HTMLElement} */\n    let footer = (this.element.getElementsByClassName('mdw-datatable__footer')[0]);\n    if (!footer && create) {\n      footer = document.createElement('div');\n      footer.classList.add('mdw-datatable__footer');\n      this.element.appendChild(footer);\n    }\n    return footer;\n  }\n\n  /**\n   * @param {HTMLTableRowElement} el\n   * @param {?number} viewportTop\n   * @param {?number} viewportBottom\n   * @return {boolean}\n   */\n  isRowVisible(\n    el,\n    viewportTop = this.scroller.scrollTop,\n    viewportBottom = this.scroller.scrollTop + this.scroller.offsetHeight\n  ) {\n    const rowTop = el.offsetTop;\n    const rowBottom = rowTop + el.offsetHeight;\n    if (rowTop > viewportTop && rowTop < viewportBottom) {\n      // Top of row is visible\n      return true;\n    }\n    if (rowBottom > viewportTop && rowBottom < viewportBottom) {\n      // Bottom of row is visible\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {(HTMLTableRowElement[])} visibleRows\n   * @return {void}\n   */\n  clearNonvisibleRows(visibleRows) {\n    const tbody = this.getTableBody();\n    if (visibleRows.length === tbody.rows.length) {\n      return;\n    }\n    let firstRowIndex = Infinity;\n    let lastRowIndex = -Infinity;\n    if (visibleRows.length) {\n      firstRowIndex = visibleRows[0].sectionRowIndex;\n      lastRowIndex = visibleRows[visibleRows.length - 1].sectionRowIndex;\n    }\n    iterateArrayLike(tbody.rows, (row, index) => {\n      if (index >= firstRowIndex && index <= lastRowIndex) {\n        return;\n      }\n      if (row.lastChild) {\n        // Store row height to prevent layout shifting\n        row.style.setProperty('height', `${row.offsetHeight || 0}px`);\n      }\n      while (row.lastChild) {\n        row.removeChild(row.lastChild);\n      }\n    });\n  }\n\n  /**\n   * @return {HTMLTableRowElement[]}\n   */\n  getLazyRenderRows() {\n    const tbody = this.getTableBody();\n    const len = tbody.rows.length;\n    /** @type {HTMLTableRowElement[]} */\n    const rows = [];\n    const minRowCount = window.screen.height / 48;\n    if (len <= minRowCount) {\n      iterateArrayLike(tbody.rows, (row) => {\n        rows.push(row);\n      });\n      return rows;\n    }\n    let foundFirstVisibleRow = false;\n    let startIndex = 0;\n    let endIndex = 0;\n    const viewportTop = this.scroller.scrollTop;\n    const viewportBottom = viewportTop + this.scroller.offsetHeight;\n    iterateSomeOfArrayLike(tbody.rows, (row, index) => {\n      if (this.isRowVisible(row, viewportTop, viewportBottom)) {\n        if (!foundFirstVisibleRow) {\n          foundFirstVisibleRow = true;\n          startIndex = index;\n        }\n        endIndex = index;\n      } else if (foundFirstVisibleRow) {\n        return true;\n      }\n      return false;\n    });\n\n    while ((endIndex - startIndex) + 1 < minRowCount) {\n      if (startIndex === 0) {\n        endIndex += 1;\n      } else if (endIndex === len - 1) {\n        startIndex -= 1;\n      } else {\n        startIndex -= 1;\n        endIndex += 1;\n      }\n    }\n    for (let i = startIndex; i <= endIndex; i += 1) {\n      rows.push(tbody.rows.item(i));\n    }\n\n    return rows;\n  }\n\n  /**\n   * @param {boolean} forceRefresh\n   * @return {void}\n   */\n  performLazyRender(forceRefresh = false) {\n    const visibleRows = this.getLazyRenderRows();\n    visibleRows.forEach((row) => {\n      if (forceRefresh || !row.cells.length) {\n        this.refreshRow(row.sectionRowIndex);\n      }\n    });\n    this.clearNonvisibleRows(visibleRows);\n  }\n\n  /**\n   * @param {DataTableAdapterFilter<T>} filter\n   * @return {void}\n   */\n  setFilter(filter) {\n    this.filter = filter;\n    this.refreshFilter();\n  }\n\n  /**\n   * @param {DataTableAdapterSorter<T>} sorter\n   * @return {void}\n   */\n  setSorter(sorter) {\n    this.sorter = sorter;\n    this.refreshFilter();\n  }\n\n  refreshFilter() {\n    if (this.filter && this.sorter) {\n      this.filteredDatasource = this.datasource.filter(this.filter).sort(this.sorter);\n    } else if (this.filter) {\n      this.filteredDatasource = this.datasource.filter(this.filter);\n    } else if (this.sorter) {\n      this.filteredDatasource = this.datasource.slice(0).sort(this.sorter);\n    } else {\n      this.filteredDatasource = null;\n    }\n  }\n\n  /**\n   * Get filtered datasource\n   * @return {T[]}\n   */\n  getDatasource() {\n    if (this.filter || this.sorter) {\n      if (this.filteredDatasource == null) {\n        this.refreshFilter();\n      }\n      return this.filteredDatasource;\n    }\n    return this.datasource;\n  }\n\n  /**\n   * Update number of rows in table\n   * @param {boolean} [refresh=false] Refresh new rows\n   * @return {void}\n   */\n  updateRowCount(refresh) {\n    const tbody = this.getTableBody();\n    const rowLength = tbody.rows.length;\n\n    const datasource = this.getDatasource();\n    let rowsToDisplay = datasource.length;\n    if (this.pageLimit) {\n      let offset = this.page * this.pageLimit;\n      if (offset > rowsToDisplay) {\n        // Datasource or filter likely changed\n        // Reset to page 0\n        this.page = 0;\n        offset = 0;\n      }\n      rowsToDisplay -= offset;\n      if (rowsToDisplay > this.pageLimit) {\n        rowsToDisplay = this.pageLimit;\n      }\n    }\n\n    const rowDifference = rowsToDisplay - rowLength;\n    const newRows = [];\n\n    if (rowDifference < 0) {\n      // too many rows\n      for (let i = rowLength - 1; i >= rowsToDisplay; i -= 1) {\n        const row = tbody.rows.item(i);\n        tbody.removeChild(row);\n      }\n    }\n    if (rowDifference > 0) {\n      const fragment = document.createDocumentFragment();\n      for (let i = 0; i < rowDifference; i += 1) {\n        const row = document.createElement('tr');\n        if (this.element.hasAttribute('mdw-row-focusable')) {\n          row.setAttribute('tabindex', '-1');\n        }\n        newRows.push(row);\n        fragment.appendChild(row);\n      }\n      tbody.appendChild(fragment);\n    }\n    if (refresh && rowDifference !== 0) {\n      if (this.useLazyRendering) {\n        this.scheduleThrottledRender(true);\n      } else {\n        newRows.forEach((row) => {\n          this.refreshRow(row.sectionRowIndex);\n        });\n      }\n    }\n  }\n\n  /** @return {void} */\n  refreshRows() {\n    if (this.useLazyRendering) {\n      this.performLazyRender(true);\n    } else {\n      const tbody = this.getTableBody();\n      iterateArrayLike(tbody.rows, (row, index) => {\n        this.refreshRow(index);\n      });\n    }\n    if (this.tabindexRowData) {\n      const row = this.getTableRowForData(this.tabindexRowData);\n      if (row !== this.tabindexRow) {\n        if (this.tabindexRow) {\n          this.tabindexRow.setAttribute('tabindex', '-1');\n        }\n        if (row) {\n          if (document.activeElement === this.tabindexRow) {\n            row.focus();\n          }\n          DataTable.updateTabIndex(row, false);\n        }\n        this.tabindexRow = row;\n      }\n    }\n    if (this.useLazyRendering) {\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /** @return {void} */\n  refresh() {\n    this.refreshFilter();\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {HTMLTableRowElement} row\n   * @return {T}\n   */\n  getDataForTableRow(row) {\n    const index = (row.sectionRowIndex) + (this.page * this.pageLimit);\n    return this.getDatasource()[index];\n  }\n\n  /**\n   * @param {T} data\n   * @return {HTMLTableRowElement} row\n   */\n  getTableRowForData(data) {\n    const datasourceIndex = this.getDatasource().indexOf(data);\n    if (datasourceIndex === -1) {\n      return null;\n    }\n    const minIndex = this.page * this.pageLimit;\n    return this.getTableBody().rows.item(datasourceIndex - minIndex);\n  }\n\n  /**\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshRow(rowIndex) {\n    const row = this.getTableBody().rows.item(rowIndex);\n    row.style.removeProperty('height');\n    this.columns.forEach((column, columnIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshCell(columnIndex, rowIndex) {\n    const tableColumn = this.columns[columnIndex];\n    const row = this.getTableBody().rows.item(rowIndex);\n    let len = row.cells.length;\n    while (len <= columnIndex) {\n      // Generate cells\n      const missingColumn = this.columns[len];\n      const missingCell = row.insertCell();\n      if (missingColumn.type) {\n        missingCell.dataset.type = missingColumn.type;\n      }\n      missingCell.dataset.key = missingColumn.key;\n      if (missingColumn.rowSelector) {\n        missingCell.setAttribute('mdw-selector', '');\n      }\n      if (missingColumn.primaryColumn) {\n        missingCell.setAttribute('mdw-primary-column', '');\n      }\n      len += 1;\n    }\n    const cell = row.cells.item(columnIndex);\n    const data = this.getDataForTableRow(row);\n    const value = data[tableColumn.key];\n    if (tableColumn.rowSelector) {\n      if (row.getAttribute('aria-selected') !== (value ? 'true' : 'false')) {\n        row.setAttribute('aria-selected', (value ? 'true' : 'false'));\n      }\n    }\n    const formattedValue = tableColumn.formatter(value, data);\n    tableColumn.renderer(cell, formattedValue, data);\n  }\n\n  /**\n   * @param {HTMLTableCellElement|DataTableAdapterColumn<T>|number|string} search\n   * @return {DataTableAdapterColumn<T>}\n   */\n  getColumn(search) {\n    if (search instanceof DataTableAdapterColumn) {\n      return search;\n    }\n    if (search instanceof HTMLTableCellElement) {\n      return this.columns.filter(column => column.element === search)[0];\n    }\n    if (typeof search === 'string') {\n      return this.columns.filter(column => column.element.dataset.key === search)[0];\n    }\n    return this.columns[search];\n  }\n\n  /** @return {HTMLTableElement} */\n  getTable() {\n    let table = this.element.getElementsByTagName('table')[0];\n    if (!table) {\n      table = document.createElement('table');\n      const footer = this.element.getElementsByClassName('mdw-datatable__footer')[0];\n      if (footer) {\n        this.element.insertBefore(table, footer);\n      } else {\n        this.element.appendChild(table);\n      }\n    }\n    return table;\n  }\n\n  /** @return {HTMLTableRowElement} */\n  getHeaderRow() {\n    let thead = this.element.getElementsByTagName('thead')[0];\n    if (!thead) {\n      const table = this.getTable();\n      thead = document.createElement('thead');\n      table.appendChild(thead);\n    }\n    let headerRow = thead.getElementsByTagName('tr')[0];\n    if (!headerRow) {\n      headerRow = document.createElement('tr');\n      thead.appendChild(headerRow);\n    }\n    return headerRow;\n  }\n\n  /** @return {HTMLTableSectionElement} */\n  getTableBody() {\n    if (this.tbody) {\n      return this.tbody;\n    }\n    this.tbody = this.element.getElementsByTagName('tbody')[0];\n    if (!this.tbody) {\n      const table = this.getTable();\n      this.tbody = document.createElement('tbody');\n      table.appendChild(this.tbody);\n    }\n    return this.tbody;\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  refreshColumn(columnIndex) {\n    const tbody = this.getTableBody();\n    iterateArrayLike(tbody.rows, (row, rowIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n}\n","import { findElementParentByClassName } from '../../core/dom';\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function attach(fabElement) {\n  let closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (!closer) {\n    closer = document.createElement('div');\n    closer.classList.add('mdw-fab__close');\n    fabElement.appendChild(closer);\n  }\n  closer.addEventListener('click', onCloserClicked);\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.addEventListener('click', onFabButtonClicked);\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function detach(fabElement) {\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.removeEventListener('click', onFabButtonClicked);\n  const closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (closer) {\n    closer.removeEventListener('click', onCloserClicked);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCloserClicked(event) {\n  /** @type {HTMLElement} */\n  const closer = (event.currentTarget);\n  const fabElement = findElementParentByClassName(closer, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  hide(fabElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onFabButtonClicked(event) {\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const fabElement = findElementParentByClassName(button, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  toggle(fabElement);\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function show(fabElement) {\n  let changed = false;\n  if (fabElement.hasAttribute('mdw-hide')) {\n    fabElement.removeAttribute('mdw-hide');\n    changed = true;\n  }\n  if (!fabElement.hasAttribute('mdw-show')) {\n    fabElement.setAttribute('mdw-show', '');\n    changed = true;\n  }\n  return changed;\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function hide(fabElement) {\n  if (!fabElement.hasAttribute('mdw-hide')) {\n    fabElement.setAttribute('mdw-hide', '');\n  } else {\n    return false;\n  }\n  if (fabElement.hasAttribute('mdw-show')) {\n    fabElement.removeAttribute('mdw-show');\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function toggle(fabElement) {\n  if (hide(fabElement)) {\n    return;\n  }\n  show(fabElement);\n}\n","/** @return {HTMLElement} */\nfunction AnyDomAdapterCreator() {\n  return document.createElement('div');\n}\n\n/**\n * @param {HTMLElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyDomAdapterRenderer(element, data) {\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      // eslint-disable-next-line no-new-wrappers\n      s = new String(data).toString();\n    }\n  }\n  if (element.textContent !== s) {\n    // eslint-disable-next-line no-param-reassign\n    element.textContent = s;\n  }\n}\n\n/**\n * @typedef {Object} DomAdapterRecycleOptions\n * @prop {HTMLElement} scroller Scrolling container element\n * @prop {boolean} [equalSize=false] All elements are equally sized\n * @prop {boolean} [block=false] All elements are block-like\n * @prop {boolean} [fastMeasure=false] Use integer precision for layout\n * @prop {boolean} [deferRender=false] Render on scroll idle\n */\n\n/**\n * @template T1\n * @template {HTMLElement} T2\n * @typedef {Object} DomAdapterCreateOptions\n * @prop {HTMLElement} element\n * @prop {Array<T1>} datasource\n * @prop {DomAdapterRecycleOptions} [recycle]\n * @prop {function(T1):T2} [create={function(T1):HTMLElement}]\n * @prop {function(T2, T1):void} [render={function(HTMLElement,T1):void}]\n */\n\n/**\n * @typedef {Object} DomAdapterBoundsCache\n * @prop {number} top\n * @prop {number} right\n * @prop {number} bottom\n * @prop {number} left\n * @prop {number} height\n * @prop {number} width\n */\n\n/**\n * @template T1\n * @template {HTMLElement} T2\n */\nexport default class DomAdapter {\n  /** @param {DomAdapterCreateOptions<T1, T2>} options */\n  constructor(options) {\n    this.element = options.element;\n    this.datasource = options.datasource;\n    /** @type {Map<T1, T2>} */\n    this.dataElementMap = new Map();\n    /** @type {WeakMap<T2, T1>} */\n    this.elementDataMap = new WeakMap();\n    /** @type {WeakMap<any, DomAdapterBoundsCache>} */\n    this.dataBoundsMap = new WeakMap();\n    this.create = options.create || AnyDomAdapterCreator;\n    this.render = options.render || AnyDomAdapterRenderer;\n    this.onScrollerScrollListener = () => this.onScrollerScroll();\n    this.setupRecycleOptions(options.recycle);\n  }\n\n  /**\n   * @param {DomAdapterRecycleOptions} recycleOptions\n   * @return {void}\n   */\n  setupRecycleOptions(recycleOptions) {\n    this.recycle = recycleOptions;\n    if (!this.recycle) {\n      return;\n    }\n    this.recycle.scroller.addEventListener('scroll', this.onScrollerScrollListener);\n    const scrollerStyle = window.getComputedStyle(this.recycle.scroller);\n    if (scrollerStyle.position === 'static') {\n      this.recycle.scroller.style.setProperty('position', 'relative');\n    }\n  }\n\n  onScrollerScroll() {\n    this.drawViewport(false);\n    if (this.deferRenderDebounce) {\n      clearTimeout(this.deferRenderDebounce);\n      this.deferRenderDebounce = null;\n    }\n    if (this.recycle && this.recycle.deferRender) {\n      this.deferRenderDebounce = setTimeout(() => {\n        this.drawViewport(true);\n      }, 50);\n    }\n  }\n\n  /**\n   * @param {boolean} [checkForRemovedItems=true]\n   * @return {void}\n   */\n  refresh(checkForRemovedItems = true) {\n    if (checkForRemovedItems) {\n      /** @type {T1[]} */\n      const unlinkedDataItems = [];\n      this.dataElementMap.forEach((element, data) => {\n        if (this.datasource.indexOf(data) === -1) {\n          unlinkedDataItems.push(data);\n        }\n      });\n      unlinkedDataItems.forEach((data) => {\n        this.removeItem(data);\n      });\n    }\n    if (this.recycle) {\n      this.element.style.removeProperty('box-sizing');\n      this.element.style.removeProperty('padding-top');\n      this.element.style.removeProperty('padding-bottom');\n      this.element.style.removeProperty('height');\n      this.clear();\n      this.drawViewport(true);\n    } else {\n      this.datasource.forEach((data) => {\n        this.refreshItem(data);\n      });\n    }\n  }\n\n  /** @return {void} */\n  clear() {\n    this.maxBottomBounds = 0;\n    this.dataElementMap.clear();\n    this.dataBoundsMap = new WeakMap();\n    this.elementDataMap = new WeakMap();\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild);\n    }\n  }\n\n\n  /**\n   * @param {boolean} [idle=false]\n   * @return {void}\n   */\n  drawViewport(idle = false) {\n    if (!this.recycle || !this.recycle.scroller) {\n      return;\n    }\n    const itemsToDraw = [];\n    let foundVisibleItem = false;\n    const additionalPrerenderSize = (window.screen.height - this.recycle.scroller.clientHeight) / 2;\n    const viewportTop = this.recycle.scroller.scrollTop;\n    const viewportBottom = (this.recycle.scroller.scrollTop + this.recycle.scroller.offsetHeight);\n    const preRenderTop = viewportTop - additionalPrerenderSize;\n    const preRenderBottom = viewportBottom + additionalPrerenderSize;\n    for (let i = 0; i < this.datasource.length; i += 1) {\n      const item = this.datasource[i];\n      let cachedBounds = this.dataBoundsMap.get(item);\n      let newBounds = false;\n      if (!cachedBounds) {\n        const el = this.refreshItem(item, {\n          render: !this.recycle.deferRender,\n        });\n        cachedBounds = this.storeBoundsCache(item, el);\n        newBounds = true;\n      }\n      if ((cachedBounds.top >= viewportTop && cachedBounds.top <= viewportBottom)\n          || (cachedBounds.bottom >= viewportTop && cachedBounds.bottom <= viewportBottom)) {\n        itemsToDraw.push(item);\n        foundVisibleItem = true;\n      } else if ((cachedBounds.top >= preRenderTop && cachedBounds.top <= preRenderBottom)\n              || (cachedBounds.bottom >= preRenderTop && cachedBounds.bottom <= preRenderBottom)) {\n        itemsToDraw.push(item);\n      } else if (foundVisibleItem) {\n        if (newBounds) {\n          this.dataBoundsMap.delete(item);\n        }\n        break;\n      }\n    }\n    const renderedElements = [];\n    let newPaddingTop = 0;\n    let lastRenderedBounds;\n    for (let i = 0; i < itemsToDraw.length; i += 1) {\n      const item = itemsToDraw[i];\n      let element = this.dataElementMap.get(item);\n\n      if (!element) {\n        element = this.refreshItem(item, {\n          render: (this.recycle.deferRender ? idle : true),\n        });\n      } else if (this.recycle.deferRender && idle) {\n        this.render(element, item);\n      }\n      const cachedBounds = this.dataBoundsMap.get(item);\n      if (i === 0) {\n        newPaddingTop = cachedBounds.top;\n      }\n      if (i === itemsToDraw.length - 1) {\n        lastRenderedBounds = cachedBounds;\n      }\n      renderedElements.push(element);\n    }\n    for (let i = this.element.children.length - 1; i >= 0; i -= 1) {\n      const child = this.element.children.item(i);\n      if (renderedElements.indexOf(child) === -1) {\n        this.removeElement(child);\n      }\n    }\n    this.element.style.setProperty('padding-top', `${newPaddingTop}px`);\n    const lastItem = this.datasource[this.datasource.length - 1];\n    const lastItemBounds = this.dataBoundsMap.get(lastItem);\n\n    if (lastItemBounds) {\n      this.element.style.setProperty('box-sizing', 'border-box');\n      this.element.style.setProperty('height', `${lastItemBounds.bottom}px`);\n      this.element.style.removeProperty('padding-bottom');\n    } else if (this.recycle.equalSize) {\n      this.element.style.setProperty('box-sizing', 'border-box');\n      this.element.style.setProperty('height', `${lastRenderedBounds.height * this.datasource.length}px`);\n      this.element.style.removeProperty('padding-bottom');\n    } else {\n      if (!this.maxBottomBounds || lastRenderedBounds.bottom > this.maxBottomBounds) {\n        this.maxBottomBounds = lastRenderedBounds.bottom;\n      }\n      const height = this.maxBottomBounds - newPaddingTop;\n      this.element.style.setProperty('box-sizing', 'content-box');\n      this.element.style.setProperty('height', `${height}px`);\n      this.element.style.setProperty('padding-bottom', `${64}px`);\n    }\n  }\n\n  /**\n   * @param {T1} data\n   * @param {T2} element\n   * @return {DomAdapterBoundsCache} bounds\n   */\n  storeBoundsCache(data, element) {\n    if (!this.recycle) {\n      return null;\n    }\n\n    if (this.recycle.fastMeasure) {\n      const cache = {\n        top: element.offsetTop,\n        right: element.offsetWidth + element.offsetLeft,\n        bottom: element.offsetHeight + element.offsetTop,\n        left: element.offsetLeft,\n        height: element.clientHeight,\n        width: element.clientWidth,\n      };\n      this.dataBoundsMap.set(data, cache);\n      return cache;\n    }\n\n    const offsetParentRect = element.offsetParent.getBoundingClientRect();\n    const elementRect = element.getBoundingClientRect();\n    const top = elementRect.top - offsetParentRect.top + element.offsetParent.scrollTop;\n    const left = elementRect.left - offsetParentRect.left + element.offsetParent.scrollLeft;\n    const subpixelCache = {\n      top,\n      right: elementRect.width + left,\n      bottom: elementRect.height + top,\n      left,\n      height: elementRect.height,\n      width: elementRect.width,\n    };\n    this.dataBoundsMap.set(data, subpixelCache);\n    return subpixelCache;\n  }\n\n  /**\n   * @param {T1} data\n   * @param {Object} [options]\n   * @param {boolean} [options.checkPosition=true]\n   * @param {boolean} [options.create=true]\n   * @param {boolean} [options.render=true]\n   * @return {T2} element\n   */\n  refreshItem(data, options = {}) {\n    const dataIndex = this.datasource.indexOf(data);\n    if (dataIndex === -1) {\n      // Item has been removed\n      this.removeItem(data);\n      return null;\n    }\n    let elementIndex = -1;\n    let element = this.dataElementMap.get(data);\n    if (!element) {\n      if (options.create === false) {\n        this.dataBoundsMap.delete(data);\n        return null;\n      }\n      /** @type {T2} */\n      element = (this.create(data));\n      element.setAttribute('aria-posinset', dataIndex.toString(10));\n      this.dataElementMap.set(data, element);\n      this.elementDataMap.set(element, data);\n    }\n    if (this.recycle && this.recycle.block) {\n      const bounds = this.dataBoundsMap.get(data);\n      element.style.setProperty('position', 'absolute');\n      element.style.setProperty('left', '0');\n      element.style.setProperty('right', '0');\n      if (bounds) {\n        element.style.setProperty('top', `${bounds.top}px`);\n      } else if (dataIndex === 0) {\n        element.style.setProperty('top', '0');\n      } else if (this.recycle.equalSize) {\n        element.style.setProperty('top', `${this.element.firstElementChild.clientHeight * dataIndex}px`);\n      } else {\n        const previousBounds = this.dataBoundsMap.get(this.datasource[dataIndex - 1]);\n        if (!previousBounds) {\n          throw new Error('No bounds!');\n        }\n        element.style.setProperty('top', `${previousBounds.bottom}px`);\n      }\n      if (!element.parentElement) {\n        this.element.appendChild(element);\n      }\n    } else if (options.checkPosition === false) {\n      if (!element.parentElement) {\n        this.element.appendChild(element);\n      }\n    } else {\n      if (element.parentElement === this.element) {\n        // Element is in DOM\n        let sibling = this.element.firstElementChild;\n        let siblingIndex = -1;\n        while (sibling) {\n          siblingIndex += 1;\n          if (sibling === element) {\n            elementIndex = siblingIndex;\n            break;\n          }\n          sibling = sibling.nextElementSibling;\n        }\n      }\n      if (elementIndex !== dataIndex) {\n        if (elementIndex !== -1) {\n          // Element exists in wrong position and needs to be removed\n          this.removeElement(element);\n        }\n        if (!this.element.children.length) {\n          this.element.appendChild(element);\n        } else {\n          // Iterate through datasource to previous sibling element\n          let siblingIndex = dataIndex - 1;\n          let inserted = false;\n          let previousDataObject;\n          do {\n            previousDataObject = this.datasource[siblingIndex];\n            const previousElement = this.dataElementMap.get(previousDataObject);\n            if (previousElement) {\n              previousElement.insertAdjacentElement('afterend', element);\n              inserted = true;\n            } else {\n              siblingIndex -= 1;\n            }\n          } while (previousDataObject && !inserted);\n          if (!inserted) {\n            this.element.insertBefore(element, this.element.firstElementChild);\n          }\n        }\n      }\n    }\n    if (options.render === false) {\n      if (this.recycle && !this.recycle.deferRender) {\n        this.dataBoundsMap.delete(data);\n      }\n    } else {\n      this.render(element, data);\n    }\n    return element;\n  }\n\n  /**\n   * @param {T2} element\n   * @return {void}\n   */\n  removeElement(element) {\n    if (element.parentElement) {\n      element.parentElement.removeChild(element);\n    }\n    const data = this.elementDataMap.get(element);\n    if (data) {\n      this.dataElementMap.delete(data);\n    }\n    this.elementDataMap.delete(element);\n  }\n\n  /**\n   * @param {T1} data\n   * @return {void}\n   */\n  removeItem(data) {\n    this.dataElementMap.delete(data);\n    const element = this.dataElementMap.get(data);\n    if (element) {\n      this.removeElement(element);\n    }\n  }\n\n  detach() {\n    this.element = null;\n    this.datasource = null;\n  }\n}\n","// https://material.io/design/navigation/navigation-transitions.html\n\nimport { nextTick } from '../dom';\n\n/**\n * @param {string} px\n * @return {number}\n */\nfunction pxToInteger(px) {\n  if (!px) {\n    return 0;\n  }\n  return parseInt(px, 10);\n}\n\n/**\n * @param {string} stringValue\n * @param {number} scaleX\n * @param {number} scaleY\n * @return {string}\n */\nfunction convertBoxShadow(stringValue, scaleX, scaleY) {\n  /**\n   * @param {string} shadow\n   * @return {string}\n   */\n  function convertShadow(shadow) {\n    let inset = '';\n    let offsetX = '';\n    let offsetY = '';\n    let blurRadius = '';\n    let spreadRadius = '';\n    let color = '';\n    shadow.split(' ').forEach((value) => {\n      if (value.toLowerCase() === 'inset') {\n        inset = value;\n        return;\n      }\n      if (value.indexOf('(') !== -1 || !value.match(/\\d/).length) {\n        color = value;\n        return;\n      }\n      const numberValue = pxToInteger(value);\n      if (!offsetX) {\n        offsetX = `${numberValue / scaleX}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!offsetY) {\n        offsetY = `${numberValue / scaleY}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!blurRadius) {\n        blurRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      } else {\n        spreadRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      }\n    });\n    return [\n      inset,\n      offsetX,\n      offsetY,\n      blurRadius,\n      spreadRadius,\n      color,\n    ].filter(v => v).join(' ');\n  }\n\n  if (!stringValue) {\n    return '';\n  }\n  return stringValue\n    // Strip spaces from anything parenthesized\n    .replace(/\\([^)]+\\)/g, substring => substring.replace(/ /g, ''))\n    // Split shadows by commas no inside parentheses\n    .match(/[^,(]+\\([^)]+\\)?[^,]*(|$)/g)\n    // Trim empty spaces\n    .map(shadow => shadow.trim())\n    // Convert values\n    .map(convertShadow)\n    // Rejoin shadows\n    .join(', ');\n}\n\n/**\n * @param {string} stringValue\n * @param {number} width\n * @param {number} height\n * @return {{horizontal:number, vertical:number}}\n */\nfunction convertBorderRadius(stringValue, width, height) {\n  /**\n   * @param {string} value\n   * @param {number} length\n   * @return {number}\n   */\n  function parsePercentage(value, length) {\n    const numValue = pxToInteger(value);\n    if (value.indexOf('%') === -1) {\n      return numValue;\n    }\n    return (numValue * length / 100.0);\n  }\n\n  if (!stringValue) {\n    return {\n      horizontal: 0,\n      vertical: 0,\n    };\n  }\n\n  const split = stringValue.split(' ');\n  if (split.length === 1) {\n    return {\n      horizontal: parsePercentage(stringValue, width),\n      vertical: parsePercentage(stringValue, height),\n    };\n  }\n  return {\n    horizontal: parsePercentage(split[0], width),\n    vertical: parsePercentage(split[1], height),\n  };\n}\n\n/**\n * @param {HTMLElement} targetElement\n * @param {HTMLElement} originElement\n * @param {CSSStyleDeclaration} [originStyle]\n * @return {Object}\n */\nexport function getShapeTransform(targetElement, originElement, originStyle) {\n  const originRect = originElement.getBoundingClientRect();\n  const targetRect = targetElement.getBoundingClientRect();\n  const originCSSStyle = originStyle || window.getComputedStyle(originElement);\n\n  let originX = originRect.left;\n  let originWidth = originRect.width;\n  let originY = originRect.top;\n  let originHeight = originRect.height;\n  if (originCSSStyle.boxSizing === 'border-box') {\n    const paddingTop = pxToInteger(originCSSStyle.paddingTop);\n    const paddingRight = pxToInteger(originCSSStyle.paddingRight);\n    const paddingBottom = pxToInteger(originCSSStyle.paddingBottom);\n    const paddingLeft = pxToInteger(originCSSStyle.paddingLeft);\n    originX += paddingLeft;\n    originWidth -= (paddingLeft + paddingRight);\n    originY += paddingTop;\n    originHeight -= (paddingTop + paddingBottom);\n  }\n\n  return {\n    originWidth,\n    originHeight,\n    translateX: originX - targetRect.left,\n    translateY: originY - targetRect.top,\n    scaleX: originWidth / targetRect.width,\n    scaleY: originHeight / targetRect.height,\n    toString() {\n      return [\n        `translateX(${this.translateX}px)`,\n        `translateY(${this.translateY}px)`,\n        `scaleX(${this.scaleX})`,\n        `scaleY(${this.scaleY})`,\n      ].join(' ');\n    },\n  };\n}\n\n/**\n * @param {HTMLElement} element\n * @param {string} property\n * @param {function(TransitionEvent):void} callback\n * @param {number} [expectedDuration]\n * @return {function} removeListener\n */\nfunction buildTransitionEndListener(element, property, callback, expectedDuration) {\n  let hasEnded = false;\n  const onTransitionEnd = (/** @type {TransitionEvent} */ event) => {\n    if (event.propertyName !== property) {\n      return;\n    }\n    hasEnded = true;\n    element.removeEventListener('transitionend', onTransitionEnd);\n    callback(event);\n  };\n  element.addEventListener('transitionend', onTransitionEnd);\n  if (expectedDuration) {\n    setTimeout(() => {\n      element.removeEventListener('transitionend', onTransitionEnd);\n      if (!hasEnded) {\n        callback(null);\n      }\n    }, expectedDuration + 500);\n  }\n  return () => {\n    element.removeEventListener('transitionend', onTransitionEnd);\n  };\n}\n\n/**\n * @typedef {Object} TransitionElementOptions\n * @prop {HTMLElement} fromShapeElement\n * @prop {HTMLElement} toShapeElement\n * @prop {HTMLElement} fromContentElement\n * @prop {HTMLElement} toContentElement\n * @prop {number} [duration=250|300] (250ms collapse or 300ms expand)\n * @prop {boolean} [revertFrom=false] Revert from elements on completion\n * @prop {function(TransitionElementOptions)} [onTransitionEnd]\n * @prop {function(TransitionElementOptions)} [onComplete]\n */\n\n/**\n * @param {TransitionElementOptions} options\n * @return {function():void} revertAllElements()\n */\nexport function transitionElement(options) {\n  const toStyleSyle = window.getComputedStyle(options.toShapeElement);\n\n  const shapeTransform = getShapeTransform(\n    options.fromShapeElement, options.toShapeElement, toStyleSyle\n  );\n  const contentTransform = getShapeTransform(options.toContentElement, options.fromContentElement);\n\n  const transitionProperties = [\n    'transition',\n    'transform-origin',\n    'transform',\n    'background-color',\n    'border-radius',\n    'box-shadow',\n    'z-index',\n    'filter',\n    'opacity',\n    'visibility',\n  ];\n\n  /** @type {Object.<string,string>} */\n  const oldFromShapeProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldToShapeProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldFromContentProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldToContentProperties = {};\n  /** @type {Object.<string,string>} */\n  const newFromShapeProperties = {};\n  transitionProperties.forEach((prop) => {\n    oldFromShapeProperties[prop] = options.fromShapeElement.style.getPropertyValue(prop);\n    oldToShapeProperties[prop] = options.toShapeElement.style.getPropertyValue(prop);\n    oldFromContentProperties[prop] = options.fromContentElement.style.getPropertyValue(prop);\n    oldToContentProperties[prop] = options.toContentElement.style.getPropertyValue(prop);\n    if (prop === 'box-shadow') {\n      newFromShapeProperties[prop] = convertBoxShadow(\n        toStyleSyle.getPropertyValue(prop),\n        shapeTransform.scaleX,\n        shapeTransform.scaleY\n      );\n    } else if (prop === 'border-radius') {\n      const topLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const topRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const horizontalRadii = [\n        `${topLeft.horizontal / shapeTransform.scaleX}px`,\n        `${topRight.horizontal / shapeTransform.scaleX}px`,\n        `${bottomLeft.horizontal / shapeTransform.scaleX}px`,\n        `${bottomRight.horizontal / shapeTransform.scaleX}px`,\n      ].join(' ');\n      const verticalRadii = [\n        `${topLeft.vertical / shapeTransform.scaleY}px`,\n        `${topRight.vertical / shapeTransform.scaleY}px`,\n        `${bottomLeft.vertical / shapeTransform.scaleY}px`,\n        `${bottomRight.vertical / shapeTransform.scaleY}px`,\n      ].join(' ');\n      newFromShapeProperties[prop] = `${horizontalRadii} / ${verticalRadii}`;\n    } else {\n      newFromShapeProperties[prop] = toStyleSyle.getPropertyValue(prop);\n    }\n  });\n\n  options.fromShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toContentElement.setAttribute('mdw-transition-busy', '');\n  options.fromContentElement.setAttribute('mdw-transition-busy', '');\n\n  // Hide toContentElement and overlay over fromContentElement immediately\n  options.toContentElement.style.setProperty('opacity', '0');\n  options.toContentElement.style.setProperty('transition', 'none');\n  options.toContentElement.style.setProperty('transform-origin', '0 0 0');\n  options.toContentElement.style.setProperty('transform', contentTransform);\n  options.toContentElement.style.setProperty('z-index', '9');\n  options.toContentElement.style.setProperty('visibility', 'visible');\n\n  options.fromContentElement.style.setProperty('opacity', '1');\n\n  options.fromShapeElement.style.setProperty('transition', 'none');\n  options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n  options.fromShapeElement.style.setProperty('transform', 'none');\n  options.fromShapeElement.style.setProperty('z-index', '8');\n\n  options.toShapeElement.style.setProperty('background-color', 'transparent');\n  options.toShapeElement.style.setProperty('filter', 'none');\n  options.toShapeElement.style.setProperty('box-shadow', 'none');\n  options.toShapeElement.style.setProperty('visibility', 'visible');\n\n  const revertFunction = () => {\n    transitionProperties.forEach((prop) => {\n      if (oldFromShapeProperties[prop] == null) {\n        options.fromShapeElement.style.removeProperty(prop);\n      } else {\n        options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n      }\n      if (oldToShapeProperties[prop] == null) {\n        options.toShapeElement.style.removeProperty(prop);\n      } else {\n        options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n      }\n      if (oldFromContentProperties[prop] == null) {\n        options.fromContentElement.style.removeProperty(prop);\n      } else {\n        options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n      }\n      if (oldToContentProperties[prop] == null) {\n        options.toContentElement.style.removeProperty(prop);\n      } else {\n        options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n      }\n    });\n  };\n\n  nextTick(() => {\n    nextTick(() => {\n      let calculatedDuration = options.duration;\n      if (calculatedDuration == null) {\n        if (shapeTransform.scaleX * shapeTransform.scaleY >= 1) {\n          calculatedDuration = 300; // expand\n        } else {\n          calculatedDuration = 250; // collapse\n        }\n      }\n      const totalDuration = calculatedDuration.toString(10);\n      const fadeInTime = (calculatedDuration * 0.70).toString(10);\n      const fadeOutTime = (calculatedDuration * 0.30).toString(10);\n      const transformTransition = transitionProperties\n        .filter(prop => prop !== 'transform-origin' && prop !== 'opacity' && prop !== 'transition')\n        .map(prop => `${prop} ${totalDuration}ms cubic-bezier(0.4, 0.0, 0.2, 1) 0s`)\n        .join(', ');\n      const fadeInTransition = `opacity ${fadeInTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) ${fadeOutTime}ms`;\n      const fadeOutTransition = [\n        `opacity ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n        `visibility ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n      ].join(', ');\n\n      options.fromShapeElement.style.setProperty('transition', transformTransition);\n      transitionProperties.forEach((prop) => {\n        if (prop === 'transform') {\n          options.fromShapeElement.style.setProperty('transform', shapeTransform);\n        } else if (prop === 'transition') {\n          // noop;\n        } else if (prop === 'transform-origin') {\n          options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n        } else if (prop === 'z-index') {\n          options.fromShapeElement.style.setProperty('z-index', '8');\n        } else if (prop === 'visibility') {\n          options.fromShapeElement.style.setProperty('visibility', 'hidden');\n        } else if (newFromShapeProperties[prop] == null) {\n          options.fromShapeElement.style.removeProperty(prop);\n        } else {\n          options.fromShapeElement.style.setProperty(prop, newFromShapeProperties[prop]);\n        }\n      });\n\n      nextTick(() => {\n        buildTransitionEndListener(options.fromShapeElement, 'transform', () => {\n          transitionProperties.forEach((prop) => {\n            if (prop === 'transition') {\n              options.toShapeElement.style.setProperty('transition', 'none');\n              options.toContentElement.style.setProperty('transition', 'none');\n            } else {\n              if (oldToShapeProperties[prop] == null) {\n                options.toShapeElement.style.removeProperty(prop);\n              } else {\n                options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n              }\n              if (oldToContentProperties[prop] == null) {\n                options.toContentElement.style.removeProperty(prop);\n              } else {\n                options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n              }\n            }\n\n            if (prop === 'visibility' && !options.revertFrom) {\n              return;\n            }\n            if (oldFromContentProperties[prop] == null) {\n              options.fromContentElement.style.removeProperty(prop);\n            } else {\n              options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n            }\n            if (oldFromShapeProperties[prop] == null) {\n              options.fromShapeElement.style.removeProperty(prop);\n            } else {\n              options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n            }\n          });\n          if (options.onTransitionEnd) {\n            options.onTransitionEnd(options);\n          }\n          nextTick(() => {\n            if (oldToShapeProperties.transition == null) {\n              options.toShapeElement.style.removeProperty('transition');\n            } else {\n              options.toShapeElement.style.setProperty('transition', oldToShapeProperties.transition);\n            }\n            if (oldToContentProperties.transition == null) {\n              options.toContentElement.style.removeProperty('transition');\n            } else {\n              options.toContentElement.style.setProperty('transition', oldToContentProperties.transition);\n            }\n            options.fromShapeElement.removeAttribute('mdw-transition-busy');\n            options.toShapeElement.removeAttribute('mdw-transition-busy');\n            options.toContentElement.removeAttribute('mdw-transition-busy');\n            options.fromContentElement.removeAttribute('mdw-transition-busy');\n            if (options.onComplete) {\n              options.onComplete(options);\n            }\n          });\n        }, calculatedDuration);\n      });\n\n      // Fade out fromContent while shaping into new content\n      options.fromContentElement.style.setProperty('transition', fadeOutTransition);\n      options.fromContentElement.style.setProperty('opacity', '0');\n      options.fromContentElement.style.setProperty('visibility', 'hidden');\n\n      options.toContentElement.style.setProperty('transition', [\n        transformTransition,\n        fadeInTransition,\n      ].join(', '));\n      options.toContentElement.style.setProperty('opacity', '1');\n      options.toContentElement.style.setProperty('transform', 'none');\n    });\n  });\n\n  return revertFunction;\n}\n"],"sourceRoot":""}