{"version":3,"sources":["webpack:///../core/dom.js","webpack:///../core/aria/keyboard.js","webpack:///../core/aria/rovingtabindex.js","webpack:///../core/aria/button.js","webpack:///../components/button/index.js","webpack:///../core/aria/attributes.js","webpack:///../core/ripple/index.js","webpack:///../core/overlay/index.js","webpack:///../components/dialog/index.js","webpack:///../core/throttler.js","webpack:///../components/layout/index.js","webpack:///../components/list/content.js","webpack:///../components/menu/index.js","webpack:///../components/selection/input.js","webpack:///../components/selection/index.js","webpack:///../components/tab/item.js","webpack:///../components/menu/item.js","webpack:///../components/datatable/cell.js","webpack:///../components/list/index.js","webpack:///../components/textfield/index.js","webpack:///../components/datatable/row.js","webpack:///../components/list/item.js","webpack:///../components/bottomnav/item.js","webpack:///../components/snackbar/index.js","webpack:///../components/datatable/index.js","webpack:///../components/datatable/columnheader.js","webpack:///../core/aria/tab.js","webpack:///../adapters/list/index.js","webpack:///../components/bottomnav/index.js","webpack:///../adapters/search/index.js","webpack:///../components/tab/panel.js","webpack:///../components/tab/content.js","webpack:///../components/tab/list.js","webpack:///../components/tab/index.js","webpack:///../components/chip/index.js","webpack:///../components/chip/item.js","webpack:///../adapters/datatable/column.js","webpack:///../components/progress/index.js","webpack:///../components/list/secondary.js","webpack:///../adapters/datatable/index.js","webpack:///../components/fab/index.js","webpack:///../components/selection/radiogroup.js","webpack:///../components/datatable/rowheader.js","webpack:///../adapters/dom/index.js","webpack:///../core/transition/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getPassiveEventListenerOption","nextTick","cancelTick","getChildElementByClass","findElementParentByClassName","isRtl","dispatchDomEvent","iterateArrayLike","iterateSomeOfArrayLike","iterateElementSiblings","getTextNode","setTextNode","scrollToElement","passiveEventListenerSupported","options","passive","window","addEventListener","removeEventListener","err","testPassiveEventListenerOptionSupport","requestAnimationFrame","cb","setTimeout","cancelAnimationFrame","clearTimeout","element","className","child","getElementsByClassName","parentElement","includeSelf","el","classList","contains","document","documentElement","dir","eventTarget","type","detail","event","CustomEvent","bubbles","cancelable","Event","createEvent","initEvent","initCustomEvent","dispatchEvent","arrayLike","fn","Array","prototype","forEach","call","some","distance","sibling","previousElementSibling","nextElementSibling","node","create","textNode","childNodes","childNode","nodeType","Node","TEXT_NODE","createTextNode","appendChild","value","nodeValue","removeChild","smooth","rtl","parent","targetScrollLeft","scrollWidth","offsetLeft","offsetWidth","elementRect","getBoundingClientRect","parentRect","subPixelScrollPosition","left","Math","abs","scrollLeft","scrollTo","top","behavior","style","setProperty","removeProperty","FORWARD_ARROW_KEY","BACK_ARROW_KEY","UP_ARROW_KEY","DOWN_ARROW_KEY","HOME_KEY","END_KEY","SPACEBAR_KEY","ENTER_KEY","attach","detach","_dom__WEBPACK_IMPORTED_MODULE_0__","PAGEUP_KEY","PAGEDOWN_KEY","onKeyDownHandler","currentTarget","ctrlKey","shiftKey","altKey","metaKey","repeat","key","stopPropagation","preventDefault","TABINDEX_ZEROED","setupTabIndexes","removeTabIndex","selectNext","selectPrevious","items","focusableWhenDisabled","arguments","length","undefined","currentlyFocusedChild","currentTabIndexChild","firstFocusableChild","activeElement","getAttribute","setAttribute","hasAttribute","onChildFocus","excludeItems","item","indexOf","attemptFocus","focus","e","list","current","loop","reverse","foundCurrent","index","array","candidate","HTMLElement","onKeyDown","buttonElement","newEvent","add","Ripple","Overlay","attachCore","HTMLButtonElement","HTMLInputElement","AriaButton","detachCore","removeAttribute","button_attach","button_detach","setCurrent","setSelected","isChecked","setChecked","isDisabled","isExpanded","setExpanded","isReadonly","name","dispatchEventName","stringValue","explicit","emptyValue","attr","rippleContainer","createElement","firstChild","insertBefore","rippleInner","onClick","onMouseDown","onTouchStart","onAnimationEnd","pointerType","rect","updateRipplePosition","pageX","pageXOffset","pageY","pageYOffset","drawRipple","touch","changedTouches","matches","msMatchesSelector","isActive","x","y","width","height","xPos","yPos","clientWidth","clientHeight","hypotenuse","sqrt","concat","initiator","currentInitiator","animationName","clearRipple","lastInteractionWasTouch","onBlur","onFocus","matchMedia","DialogStack","previousFocus","state","previousState","_classCallCheck","this","OPEN_DIALOGS","CANCEL_EVENT","CONFIRM_EVENT","CUSTOM_EVENT","DISMISS_EVENT","onTransitionEnd","dialogCloser","onCancelClick","popup","buttons","querySelectorAll","foundConfirmButton","foundCancelButton","button","Button","onCustomButtonClick","onConfirmClick","dialogElement","popupElement","setupARIA","propertyName","HTMLAnchorElement","cancelElement","cancel","hide","confirm","onEscapeKeyDown","focusableElements","join","foundTarget","target","handleTabKeyPress","onPopState","lastOpenDialog","Object","keys","every","title","getTitleText","history","pushState","titleElement","textContent","bodyElement","stackIndex","stack","splice","hash","back","show","changed","hadLayer","getPropertyValue","dialogRect","Element","transformOriginX","transformOriginY","offsetTop","updateTransformOrigin","newState","random","toString","substr","replaceState","dialogStack","push","focusElement","querySelector","scrollIntoView","updateButtonText","texts","updateBody","content","body","insertAdjacentElement","DocumentFragment","lastChild","updateTitle","buttonArea","buttonText","custom","autofocus","stacked","Throttler","throttleTimeMs","pending","queued","queue","_this","run","isNavDrawerModalShowing","hideNavDrawer","getAppBarElement","showFab","hideFab","resetScroll","MIN_SCROLL_DELTA","MOBILE_BREAKPOINT","TABLET_BREAKPOINT","SCROLL_THROTTLE_TIME_MS","lastScrollY","penultimateScrollY","scrolledPastAppBar","appBarElement","layoutContentElement","lastScrollBottomDistance","scrollThrottler","onBodyScroll","contentElement","getContentElement","onContentScroll","toggleNavDrawer","showNavDrawer","toggleSideSheet","showSideSheet","hideSideSheet","scrim","onScrimClick","onScrimScroll","getScrollThrottler","scrollTop","scrollHeight","navDrawer","location","id","innerWidth","sidesheet","onScroll","shouldAutoHideAppBar","appBar","autoHide","changeFabCut","fabElement","fabCutAttr","trim","openAppBarFabCut","replace","closeAppBarFabCut","isBody","scrollElement","currentScrollY","change","delta","scrollBottom","scrollBottomDistance","scrollBottomChange","didScrollUp","isAtScrollTop","newScrollUp","didScrollDown","isAtScrollBottom","newScrollDown","bottomAppBar","scrolledAway","newScrollAway","scrolledBack","isAtRest","r","ACTIVATE_EVENT","SELECTED_CHANGE_EVENT","FOCUS_EVENT","_core_dom__WEBPACK_IMPORTED_MODULE_0__","_core_overlay_index__WEBPACK_IMPORTED_MODULE_1__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_2__","_core_aria_attributes__WEBPACK_IMPORTED_MODULE_3__","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_4__","_secondary__WEBPACK_IMPORTED_MODULE_5__","listContentElement","secondaryElement","ListSecondary","Keyboard","onEnterKey","Attributes","MenuStack","originalEvent","pendingResizeOperation","OPEN_MENUS","HIDE_EVENT","menuElement","onMenuClick","onMenuScroll","onWindowResize","lastOpenMenu","updateMenuPosition","selectNextMenuItem","MenuItem","menu","backwards","menuItems","firstFocusableItem","lastFocusableElement","focusable","alignTarget","transformOrigin","useAlignTarget","margin","mdwPosition","mdwDirection","alignTop","alignBottom","alignVCenter","alignStart","alignEnd","alignLeft","alignRight","alignHCenter","openUp","openDown","openNormal","openReverse","openVCenter","openHCenter","openLtr","openRtl","isPageRTL","offsetY","offsetBottom","offsetX","offsetRight","popupElementHeight","popupElementWidth","canOpenDownwardsFromBottom","innerHeight","canOpenDownwardsFromTop","canOpenUpwardsFromTop","canOpenUpwardsFromBottom","canOpenRightwardsFromLeft","canOpenRightwardsFromRight","canOpenLeftwardsFromRight","canOpenLeftwardsFromLeft","canOpenFromCenter","candidates","map","filter","candidateNumber","number","menuStack","menuItem","refreshMenuItems","CLICK_EVENT","CHECKED_CHANGE_EVENT","selection_attach","inputElement","SelectionInput","onActivateEvent","selectionElement","role","newValue","_core_aria_tab__WEBPACK_IMPORTED_MODULE_0__","_core_dom__WEBPACK_IMPORTED_MODULE_1__","_core_overlay_index__WEBPACK_IMPORTED_MODULE_2__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_3__","AriaTab","attachAria","CHECK_EVENT","UNCHECK_EVENT","_core_aria_attributes__WEBPACK_IMPORTED_MODULE_0__","_core_dom__WEBPACK_IMPORTED_MODULE_3__","onMouseMove","useAriaChecked","menuItemElement","toggleChecked","checked","isCheckable","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_1__","_core_dom__WEBPACK_IMPORTED_MODULE_2__","gridCellElement","attachAll","_core_aria_attributes__WEBPACK_IMPORTED_MODULE_1__","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_2__","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_3__","_item__WEBPACK_IMPORTED_MODULE_4__","_content__WEBPACK_IMPORTED_MODULE_5__","root","listElement","newRole","children","setupAria","ListItem","RovingTabIndex","onDownArrowKey","onUpArrowKey","onTabIndexZeroed","ListContent","onSelectedChangeEvent","onContentFocusEvent","onFocusInteraction","split","interaction","listElementRole","itemElement","defaultPrevented","currentItem","setValue","textfieldElement","input","onInput","updateTextAreaSize","updateInputEmptyState","attrName","previousRowsAttrValue","rows","_window$getComputedSt","getComputedStyle","paddingTop","heightPx","parseInt","paddingTopPx","floor","HTMLTextAreaElement","HTMLSelectElement","Date","hoursStr","getHours","minutesStr","getMinutes","secondsStr","getSeconds","getMilliseconds","valueAsDate","valueAsNumber","getTime","getTimezoneOffset","_cell__WEBPACK_IMPORTED_MODULE_2__","cells","DataTableCell","rowElement","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_0__","_content__WEBPACK_IMPORTED_MODULE_2__","listItemElement","isTreeItem","roleIsNone","activatorContent","parentRole","contentChild","onChildContentActivate","treeitem","activatedElement","SnackbarQueueItem","hideTimeout","SNACKBAR_QUEUE","SHOW_EVENT","snackbarElement","onButtonClick","slice","reverseIndex","clearHideTimeout","findNextQueueItem","q","handleAnimationChange","currentQueueItem","autoHideString","timeInSeconds","parseFloat","timeout","nextQueueItem","update","span","getElementsByTagName","text","buttonInk","autoDestroy","newlyCreated","skipQueue","CELL_TABINDEX_QUERIES","getScroller","_cell__WEBPACK_IMPORTED_MODULE_0__","_columnheader__WEBPACK_IMPORTED_MODULE_1__","_rowheader__WEBPACK_IMPORTED_MODULE_2__","_row__WEBPACK_IMPORTED_MODULE_3__","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_4__","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_5__","_core_dom__WEBPACK_IMPORTED_MODULE_6__","getTable","headerRow","tableElement","thead","table","getHeaderRow","tbody","getTableBody","DataTableColumnHeader","DataTableRowHeader","tableRows","DataTableRow","onItemFocus","onSelectedChange","onSort","onKeyboard","selected","dataTableElement","HTMLTableRowElement","datatableElement","columnIndex","ascending","th","cellIndex","i","deleteRow","sort","a","b","aCell","bCell","aText","bText","dataset","localeCompare","fragment","createDocumentFragment","row","sortColumn","emitter","cell","HTMLTableCellElement","checkNavKeys","searchElements","scroller","footer","HTMLTableElement","SORT_EVENT","_cell__WEBPACK_IMPORTED_MODULE_3__","Cell","columnHeaderElement","ariaSort","_keyboard__WEBPACK_IMPORTED_MODULE_0__","_attributes__WEBPACK_IMPORTED_MODULE_1__","AnyListAdapterRenderer","data","primaryText","s","String","ListAdapter","_possibleConstructorReturn","_getPrototypeOf","render","DomAdapter","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_1__","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_2__","_item__WEBPACK_IMPORTED_MODULE_3__","bottomnavElement","selectedItem","BottomNavItem","onForwardsRequested","onBackwardsRequested","containsTextFilter","toLocaleLowerCase","startsWithTextFilter","defaultItemTextParser","textElement","selectSibling","scrollItemIntoView","listItem","visibility","_rect","next","bottom","getElementVisibility","block","inline","SearchAdapter","textfield","List","textFilter","itemTextParser","onItemSelected","inputValue","suggestedInput","setSelectionRange","hideDropDown","onTextFieldKeydownEvent","handleInputEvent","handleBlurEvent","searchOnFocus","dropdown","filterItems","debounce","suggestionMethod","currentSearchTerm","previousValue","performSearch","resolve","updateList","results","_this2","showDropDown","performDebounce","checkExpired","searchResults","filterListItems","onErrorCallback","error","message","reject","Error","searchTerm","_this3","dropDownElement","suggestion","TextField","selectionStart","selectionEnd","fnFilter","_this4","hasItem","newSelection","isDropDownShown","click","EXPANDED_CHANGE_EVENT","tabPanelElement","setHidden","SCROLL_EVENT","onTabContentScroll","tabContentElement","isPageRtl","scrollPoint","visibleIndex","visibilityPercentage","panel","rightPanel","leftPeekPanel","rightPeekPanel","selectedIndex","leftPanelIndex","isResting","leftSelected","rightSelected","lastIndex","leftPanel","currentTargetIndexString","currentTargetIndex","updateSelected","forceSelection","TabPanel","selectPanel","panelElement","scrollToPanel","currentSelectedIndex","panelIndex","otherPanels","tabListElement","onForwardArrowKey","onBackArrowKey","setIndicatorPosition","percentage","animate","indicatorElement","leftItem","right","nextItem","TabItem","tab_attach","tab_detach","onResize","RESIZE_WAIT_FRAMES","SELECTED_INDEX_CHANGE_EVENT","tabElement","TabList","TabContent","onTabItemSelectedChange","onTabPanelExpandedChange","selectedPanel","panels","tabItemElement","tabItemIndex","updateSelectedIndex","stage","performResize","relatedPanel","relatedItem","dispatchEvents","currentIndex","_item__WEBPACK_IMPORTED_MODULE_1__","ChipItem","_core_ripple_index__WEBPACK_IMPORTED_MODULE_0__","constructTableCheckbox","icon","Selection","DataTableAdapterColumn","innerHTML","sortable","sortIcon","customSortIcon","hasChildNodes","tooltip","wrapper","primaryColumn","rowSelector","checkboxLabel","renderer","defaultCheckboxRenderer","defaultCellRenderer","formatter","circumference","PI","progressCircleElement","dashOffset","pathElements","SECONDARY_ACTION_EVENT","listSecondaryElement","onInteraction","DataTableAdapter","datatable","datasource","sorter","onValueChangeRequested","onValueChanged","DataTable","onElementScrollListener","onElementScroll","onDataTableColumnHeaderSortListener","onDataTableColumnHeaderSort","onCheckedChangeEventListener","onCheckedChangeEvent","onRowSelectedChangeEvent","columns","page","pageLimit","debounceTimeMs","useLazyRendering","updateSortIcons","updateSortColumn","filteredDatasource","forceRefresh","performLazyRender","throttledRenderPending","scheduleThrottledRender","performThrottledRender","debounceTimeout","currentCell","getTableCell","setCheckOnAllRows","setHasSelection","currentRow","getTableRow","object","getDataForTableRow","tableHeaderCell","refresh","tableColumn","direction","valueA","valueB","sortedTableHeaderCell","otherTableHeader","column","selectorColumn","getDatasource","buildScrollListener","destroyScrollListener","min","total","max","paginationDetailsElement","previousPageButton","nextPageButton","getFooter","disabled","needsDraw","optionsElement","rowsPerPageText","limits","limitsElement","select","limit","option","dropdownIcon","updateRowCount","updatePaginator","refreshRows","paginationControls","viewportTop","viewportBottom","offsetHeight","rowTop","rowBottom","visibleRows","firstRowIndex","Infinity","lastRowIndex","sectionRowIndex","_this5","len","minRowCount","screen","foundFirstVisibleRow","startIndex","endIndex","isRowVisible","_this6","getLazyRenderRows","refreshRow","clearNonvisibleRows","refreshFilter","_this7","rowLength","rowsToDisplay","offset","rowDifference","newRows","_this8","datasourceIndex","minIndex","rowIndex","_this9","refreshCell","createdCells","missingColumn","missingCell","insertCell","formattedValue","search","_this10","closer","onCloserClicked","onFabButtonClicked","toggle","_index__WEBPACK_IMPORTED_MODULE_0__","onCheckedChange","radiogroupElement","AnyDomAdapterCreator","AnyDomAdapterRenderer","dataElementMap","Map","elementDataMap","WeakMap","dataBoundsMap","onScrollerScrollListener","onScrollerScroll","setupRecycleOptions","recycle","recycleOptions","position","drawViewport","deferRenderDebounce","deferRender","checkForRemovedItems","unlinkedDataItems","removeItem","clear","refreshItem","maxBottomBounds","idle","itemsToDraw","foundVisibleItem","expectedTop","paddingTopSet","lastBottom","additionalPrerenderSize","preRenderTop","preRenderBottom","dataBounds","getBounds","newBounds","invalidate","storeBoundsCache","isBottomInPrerender","isTopInPrerender","isBottomVisible","isTopVisible","get","removeElement","delete","lastRenderedBounds","renderedElements","newPaddingTop","cachedBounds","lastItem","lastItemBounds","equalSize","indexHint","cached","cache","set","previousBounds","firstBounds","fastMeasure","offsetParentRect","offsetParent","measureElementBounds","dataIndex","elementIndex","bounds","checkPosition","firstElementChild","siblingIndex","previousDataObject","inserted","previousElement","prevClientWidth","prevClientHeight","invalidateItem","currentBounds","j","previousIndex","transitionElement","pxToInteger","px","convertBorderRadius","parsePercentage","numValue","horizontal","vertical","getShapeTransform","targetElement","originElement","originStyle","originRect","targetRect","originCSSStyle","originX","originWidth","originY","originHeight","boxSizing","paddingRight","paddingBottom","paddingLeft","translateX","translateY","scaleX","scaleY","toStyleSyle","toShapeElement","shapeTransform","fromShapeElement","contentTransform","toContentElement","fromContentElement","transitionProperties","oldFromShapeProperties","oldToShapeProperties","oldFromContentProperties","oldToContentProperties","newFromShapeProperties","prop","substring","match","shadow","inset","blurRadius","spreadRadius","color","toLowerCase","numberValue","v","topLeft","topRight","bottomLeft","bottomRight","horizontalRadii","verticalRadii","calculatedDuration","duration","totalDuration","fadeInTime","fadeOutTime","transformTransition","fadeInTransition","fadeOutTransition","property","callback","expectedDuration","hasEnded","revertFrom","transition","onComplete"],"mappings":"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","file":"entire-framework.min.js","sourcesContent":["/** @type {?boolean} */\nlet passiveEventListenerSupported = null;\n\n/** @return {void} */\nfunction testPassiveEventListenerOptionSupport() {\n  try {\n    passiveEventListenerSupported = false;\n    const options = {\n      get passive() {\n        passiveEventListenerSupported = true;\n        return true;\n      },\n    };\n    // @ts-ignore\n    window.addEventListener('test', options, options);\n    // @ts-ignore\n    window.removeEventListener('test', options, options);\n  } catch (err) {\n    passiveEventListenerSupported = false;\n  }\n}\n\n/** @return {Object|boolean} */\nexport function getPassiveEventListenerOption() {\n  if (passiveEventListenerSupported == null) {\n    testPassiveEventListenerOptionSupport();\n  }\n  if (passiveEventListenerSupported) {\n    return { passive: true };\n  }\n  return false;\n}\n\nexport const nextTick = window.requestAnimationFrame || ((cb) => window.setTimeout(cb, 17));\n\nexport const cancelTick = window.cancelAnimationFrame || window.clearTimeout;\n\n/**\n * @param {Element} element\n * @param {string} className\n * @return {Element}\n */\nexport function getChildElementByClass(element, className) {\n  const child = element.getElementsByClassName(className)[0];\n  if (child && child.parentElement !== element) {\n    return null;\n  }\n  return child;\n}\n\n/**\n * @param {Element} element\n * @param {string} className\n * @param {boolean} [includeSelf=true]\n * @return {HTMLElement}\n */\nexport function findElementParentByClassName(element, className, includeSelf) {\n  let el;\n  if (includeSelf === false) {\n    el = element.parentElement;\n  } else {\n    /** @type {HTMLElement} */\n    el = (element);\n  }\n  while (el != null && !el.classList.contains(className)) {\n    el = el.parentElement;\n  }\n  return el;\n}\n\n/** @return {boolean} */\nexport function isRtl() {\n  return document.documentElement.dir === 'rtl';\n}\n\n/**\n * @param {EventTarget} eventTarget\n * @param {string} type\n * @param {Object} [detail]\n * @return {boolean}\n */\nexport function dispatchDomEvent(eventTarget, type, detail) {\n  let event;\n  if (typeof CustomEvent === 'function') {\n    event = new CustomEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      detail,\n    });\n  } else if (detail == null) {\n    if (typeof Event === 'function') {\n      event = new Event(type, {\n        bubbles: true,\n        cancelable: true,\n      });\n    } else {\n      event = document.createEvent('Event');\n      event.initEvent(type, true, true);\n    }\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, detail);\n  }\n  return eventTarget.dispatchEvent(event);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):any} fn\n * @return {void}\n * @template {any} T\n */\nexport function iterateArrayLike(arrayLike, fn) {\n  Array.prototype.forEach.call(arrayLike, fn);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):boolean|void} fn\n * @return {boolean}\n * @template {any} T\n */\nexport function iterateSomeOfArrayLike(arrayLike, fn) {\n  return Array.prototype.some.call(arrayLike, fn);\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.nextElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateSomeOfElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Node} node\n * @param {boolean} [create]\n * @return {Node}\n */\nexport function getTextNode(node, create) {\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (create && !textNode) {\n    textNode = document.createTextNode('');\n    node.appendChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {Node} node\n * @param {string} value\n * @return {Node}\n */\nexport function setTextNode(node, value) {\n  /** @type {ChildNode} */\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (value) {\n    if (!textNode) {\n      textNode = document.createTextNode(value);\n      node.appendChild(textNode);\n    } else {\n      textNode.nodeValue = value;\n    }\n  } else if (textNode) {\n    node.removeChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {HTMLElement} element\n * @param {boolean} [smooth=false]\n * @param {boolean} [rtl=false]\n * @return {void}\n */\nexport function scrollToElement(element, smooth, rtl) {\n  if (!element) {\n    return;\n  }\n  const parent = element.parentElement;\n  if (!parent) {\n    return;\n  }\n\n  let targetScrollLeft = rtl\n    ? parent.scrollWidth + element.offsetLeft - element.offsetWidth\n    : element.offsetLeft;\n\n  const elementRect = element.getBoundingClientRect();\n  const parentRect = parent.getBoundingClientRect();\n  let subPixelScrollPosition = elementRect.left - parentRect.left;\n  if (subPixelScrollPosition < 0) {\n    subPixelScrollPosition = 0;\n  }\n  if (Math.abs(subPixelScrollPosition - targetScrollLeft) < 2) {\n    targetScrollLeft = subPixelScrollPosition;\n  }\n  if (parent.scrollLeft === targetScrollLeft) {\n    return;\n  }\n\n  if (parent.scrollTo) {\n    parent.scrollTo({\n      top: 0,\n      left: targetScrollLeft,\n      behavior: smooth ? 'smooth' : 'auto',\n    });\n    return;\n  }\n  parent.style.setProperty('scroll-behavior', 'auto');\n  parent.scrollLeft = targetScrollLeft;\n  nextTick(() => {\n    parent.style.removeProperty('scroll-behavior');\n  });\n}\n","// Keyboard Navigation\n\nimport { dispatchDomEvent, isRtl } from '../dom';\n\nexport const FORWARD_ARROW_KEY = 'mdw:keyboard-forwardarrowkey';\nexport const BACK_ARROW_KEY = 'mdw:keyboard-backarrowkey';\nexport const UP_ARROW_KEY = 'mdw:keyboard-uparrowkey';\nexport const DOWN_ARROW_KEY = 'mdw:keyboard-downarrowkey';\nexport const HOME_KEY = 'mdw:keyboard-homekey';\nexport const END_KEY = 'mdw:keyboard-endkey';\nexport const PAGEUP_KEY = 'mdw:keyboard-pageupkey';\nexport const PAGEDOWN_KEY = 'mdw:keyboard-pagedownkey';\nexport const SPACEBAR_KEY = 'mdw:keyboard-spacebarkey';\nexport const ENTER_KEY = 'mdw:keyboard-enterkey';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.addEventListener('keydown', onKeyDownHandler);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDownHandler);\n}\n\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDownHandler(event) {\n  /** @type {Element} */\n  const element = (event.currentTarget);\n  const detail = {\n    ctrlKey: event.ctrlKey,\n    shiftKey: event.shiftKey,\n    altKey: event.altKey,\n    metaKey: event.metaKey,\n    repeat: event.repeat,\n  };\n\n  let type;\n  switch (event.key) {\n    case 'Enter':\n      type = ENTER_KEY;\n      break;\n    case ' ':\n    case 'Spacebar':\n      type = SPACEBAR_KEY;\n      break;\n    case 'ArrowDown':\n    case 'Down':\n      type = DOWN_ARROW_KEY;\n      break;\n    case 'ArrowUp':\n    case 'Up':\n      type = UP_ARROW_KEY;\n      break;\n    case 'ArrowLeft':\n    case 'Left':\n      type = isRtl() ? FORWARD_ARROW_KEY : BACK_ARROW_KEY;\n      break;\n    case 'ArrowRight':\n    case 'Right':\n      type = isRtl() ? BACK_ARROW_KEY : FORWARD_ARROW_KEY;\n      break;\n    case 'Home':\n      type = HOME_KEY;\n      break;\n    case 'End':\n      type = END_KEY;\n      break;\n    case 'PageUp':\n      type = PAGEUP_KEY;\n      break;\n    case 'PageDown':\n      type = PAGEDOWN_KEY;\n      break;\n    default:\n      return;\n  }\n\n  if (!dispatchDomEvent(element, type, detail)) {\n    // preventDefault called\n    event.stopPropagation();\n    event.preventDefault();\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#kbd_roving_tabindex\n\nimport {\n  iterateArrayLike,\n  dispatchDomEvent,\n  iterateSomeOfArrayLike,\n} from '../dom';\n\nexport const TABINDEX_ZEROED = 'mdw:rovingtabindex-tabindexzeroed';\n\n/**\n * @param {ArrayLike<Element>} items\n * @param {boolean} [focusableWhenDisabled=true]\n * @return {void}\n */\nexport function setupTabIndexes(items, focusableWhenDisabled = true) {\n  /** @type {Element} */\n  let currentlyFocusedChild = null;\n  /** @type {Element} */\n  let currentTabIndexChild = null;\n  /** @type {Element} */\n  let firstFocusableChild = null;\n  iterateArrayLike(items, (child) => {\n    if (!currentlyFocusedChild && document.activeElement === child) {\n      currentlyFocusedChild = child;\n    } else if (!currentTabIndexChild && child.getAttribute('tabindex') === '0') {\n      currentTabIndexChild = child;\n    } else {\n      if (!firstFocusableChild && child.getAttribute('aria-hidden') !== 'true'\n        && (focusableWhenDisabled || child.getAttribute('aria-disabled') !== 'true')) {\n        firstFocusableChild = child;\n      }\n      child.setAttribute('tabindex', '-1');\n    }\n    attach(child);\n  });\n  if (currentlyFocusedChild) {\n    currentlyFocusedChild.setAttribute('tabindex', '0');\n  } else if (currentTabIndexChild) {\n    if (currentlyFocusedChild) {\n      currentTabIndexChild.setAttribute('tabindex', '-1');\n    }\n  } else if (firstFocusableChild) {\n    firstFocusableChild.setAttribute('tabindex', '0');\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  if (!element.hasAttribute('tabindex')) {\n    element.setAttribute('tabindex', (document.activeElement === element) ? '0' : '-1');\n  }\n  element.addEventListener('focus', onChildFocus);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('focus', onChildFocus);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nfunction onChildFocus(event) {\n  /** @type {Element} */\n  const child = (event.currentTarget);\n  if (child.getAttribute('tabindex') === '0') {\n    return;\n  }\n  child.setAttribute('tabindex', '0');\n  dispatchDomEvent(child, TABINDEX_ZEROED);\n}\n\n/**\n * @param {ArrayLike<Element>} items\n * @param {Element[]} [excludeItems]\n * @return {void}\n */\nexport function removeTabIndex(items, excludeItems = []) {\n  iterateArrayLike(items, (item) => {\n    if (excludeItems.indexOf(item) !== -1) {\n      return;\n    }\n    if (item.hasAttribute('tabindex')) {\n      item.setAttribute('tabindex', '-1');\n    }\n  });\n}\n\n/**\n * @param {HTMLElement} element\n * @return {boolean}\n */\nfunction attemptFocus(element) {\n  try {\n    element.focus();\n  } catch (e) {\n    // Ignore error.\n  }\n  return document.activeElement === element;\n}\n\n/**\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @param {boolean} [loop=true]\n * @param {boolean} [reverse]\n * @return {void}\n */\nexport function selectNext(list, current = null, loop = true, reverse = false) {\n  let foundCurrent = false;\n\n  const iterateResult = iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!foundCurrent) {\n      if (current) {\n        if (candidate === current) {\n          foundCurrent = true;\n        }\n      } else if (candidate.getAttribute('tabindex') === '0') {\n        foundCurrent = true;\n      }\n      return false;\n    }\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    return attemptFocus(candidate);\n  });\n  if (iterateResult) {\n    return;\n  }\n  if (!loop) {\n    if (document.activeElement !== current && current instanceof HTMLElement) {\n      current.focus();\n    }\n    return;\n  }\n  iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    // Abort if we've looped all the way back to original element\n    // Abort if candidate received focus\n    return (attemptFocus(candidate) || candidate === current);\n  });\n}\n\n/**\n * Alias for selectNext(list, current, true);\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @param {boolean} [loop=true]\n * @return {void}\n */\nexport function selectPrevious(list, current, loop = true) {\n  return selectNext(list, current, loop, true);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'button');\n  if (element instanceof HTMLButtonElement === false\n      && !element.hasAttribute('tabindex')) {\n    element.setAttribute('tabindex', '0');\n  }\n  element.setAttribute('mdw-aria-button-js', '');\n  if (element instanceof HTMLButtonElement === false\n    && element instanceof HTMLInputElement === false) {\n    element.addEventListener('keydown', onKeyDown);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-button-js');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (!buttonElement) {\n    return;\n  }\n  if (buttonElement.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  buttonElement.dispatchEvent(newEvent);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\nimport * as Ripple from '../../core/ripple/index';\nimport * as Overlay from '../../core/overlay/index';\nimport * as AriaButton from '../../core/aria/button';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Ripple.attach(element);\n  element.classList.add('mdw-ripple');\n  Overlay.attach(element);\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  AriaButton.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaButton.detach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","import { dispatchDomEvent } from '../dom';\n\n/**\n * @param {string} name Attribute Name\n * @param {Element} element Element\n * @param {string|boolean} value Boolean Attribute Value\n * @param {string} [dispatchEventName] OnChangeEvent\n * @param {boolean} [explicit=true]\n * @param {string} [emptyValue=false] Default empty value\n * @return {boolean} successful\n */\nfunction setAttribute(name, element, value, dispatchEventName, explicit = true, emptyValue = 'false') {\n  const attr = element.getAttribute(name);\n  let stringValue;\n  if (typeof value === 'string') {\n    stringValue = value;\n  } else {\n    stringValue = (value ? 'true' : 'false');\n  }\n  if (attr === stringValue) {\n    // Nothing to change\n    return true;\n  }\n  if (stringValue === emptyValue) {\n    // Set default empty value\n    if (attr == null) {\n      // No attribute set\n      if (explicit) {\n        // Explicitly set attribute\n        element.setAttribute(name, stringValue);\n      }\n      return true;\n    }\n    if (!explicit) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, stringValue);\n    }\n  } else {\n    // Non default value;\n    element.setAttribute(name, stringValue);\n  }\n  if (!dispatchEventName) {\n    return true;\n  }\n  // Alert change\n  if (!dispatchDomEvent(element, dispatchEventName, { value: stringValue })) {\n    // Revert\n    if (attr == null) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, attr);\n    }\n    return false;\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setCurrent(element, value, dispatchEventName) {\n  // Some browsers incorrectly style [aria-current=\"false\"]\n  // Attribute will be removed when false|\"false\"\n  return setAttribute('aria-current', element, value, dispatchEventName, false);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  return setAttribute('aria-selected', element, value, dispatchEventName);\n}\n\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isChecked(element) {\n  return element.getAttribute('aria-checked') === 'true';\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setChecked(element, value, dispatchEventName) {\n  return setAttribute('aria-checked', element, value, dispatchEventName);\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return element.getAttribute('aria-disabled') === 'true';\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setDisabled(element, value, dispatchEventName) {\n  return setAttribute('aria-disabled', element, value, dispatchEventName);\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isExpanded(element) {\n  return element.getAttribute('aria-expanded') === 'true';\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setExpanded(element, value, dispatchEventName) {\n  return setAttribute('aria-expanded', element, value, dispatchEventName);\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isReadonly(element) {\n  return element.getAttribute('aria-readonly') === 'true';\n}\n","import {\n  getChildElementByClass, nextTick, getPassiveEventListenerOption, iterateArrayLike,\n} from '../dom';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-ripple'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  let rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (!rippleContainer) {\n    rippleContainer = document.createElement('div');\n    rippleContainer.classList.add('mdw-ripple__container');\n    rippleContainer.setAttribute('role', 'presentation');\n    if (element.firstChild) {\n      element.insertBefore(rippleContainer, element.firstChild);\n    } else {\n      element.appendChild(rippleContainer);\n    }\n  }\n\n  let rippleInner = getChildElementByClass(rippleContainer, 'mdw-ripple__inner');\n  if (!rippleInner) {\n    rippleInner = document.createElement('div');\n    rippleInner.classList.add('mdw-ripple__inner');\n    rippleInner.setAttribute('role', 'presentation');\n    rippleContainer.appendChild(rippleInner);\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.removeAttribute('mdw-fade-out');\n  element.setAttribute('mdw-ripple-js', '');\n  element.addEventListener('click', onClick, getPassiveEventListenerOption());\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  rippleInner.addEventListener('animationend', onAnimationEnd, getPassiveEventListenerOption());\n}\n\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (!event.pointerType && !event.detail) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = event.pageX - rect.left - window.pageXOffset;\n  const y = event.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'mouse');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  const touch = event.changedTouches[0];\n  if (!touch) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = touch.pageX - rect.left - window.pageXOffset;\n  const y = touch.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'touch');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n\n  nextTick(() => {\n    if (isActive(rippleContainer.parentElement)) {\n      if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n        return;\n      }\n      updateRipplePosition(rippleInner);\n      drawRipple(rippleInner, 'key');\n    }\n  });\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isActive(element) {\n  if (element.matches) {\n    return element.matches(':active');\n  }\n  // @ts-ignore\n  if (element.msMatchesSelector) {\n    // @ts-ignore\n    element.msMatchesSelector(':active');\n  }\n  return false;\n}\n\n/**\n * @param {HTMLElement} rippleInner\n * @param {number} [x]\n * @param {number} [y]\n * @return {void}\n */\nexport function updateRipplePosition(rippleInner, x, y) {\n  let width;\n  let height;\n  let xPos = x;\n  let yPos = y;\n  if (x == null) {\n    xPos = rippleInner.parentElement.clientWidth / 2;\n    width = xPos;\n  } else if (x >= rippleInner.parentElement.clientWidth / 2) {\n    width = x;\n    // furthest horizontal side is left\n  } else {\n    width = rippleInner.parentElement.clientWidth - x;\n    // furthest horizontal side is right\n  }\n  if (y == null) {\n    yPos = rippleInner.parentElement.clientHeight / 2;\n    height = yPos;\n  } else if (y >= rippleInner.parentElement.clientHeight / 2) {\n    height = y;\n    // furthest vertical side is bottom\n  } else {\n    height = rippleInner.parentElement.clientHeight - y;\n    // furthest vertical side is top\n  }\n  const hypotenuse = Math.sqrt((width * width) + (height * height));\n  rippleInner.style.setProperty('height', `${hypotenuse}px`);\n  rippleInner.style.setProperty('width', `${hypotenuse}px`);\n  rippleInner.style.setProperty('left', `${xPos - (hypotenuse / 2)}px`);\n  rippleInner.style.setProperty('top', `${yPos - (hypotenuse / 2)}px`);\n}\n\n/**\n * @param {Element} rippleInner\n * @param {string} initiator\n * @return {void}\n */\nexport function drawRipple(rippleInner, initiator) {\n  const currentInitiator = rippleInner.getAttribute('mdw-fade-in');\n  if (currentInitiator && currentInitiator !== initiator) {\n    // Only allow repeat interactions from same initiator\n    return;\n  }\n  rippleInner.setAttribute('mdw-fade-in', initiator);\n  if (currentInitiator === initiator) {\n    // Repeat the animation\n    if (rippleInner.hasAttribute('mdw-fade-in-repeat')) {\n      rippleInner.removeAttribute('mdw-fade-in-repeat');\n    } else {\n      rippleInner.setAttribute('mdw-fade-in-repeat', '');\n    }\n  }\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  /** @type {HTMLElement} */\n  const rippleInner = (event.currentTarget);\n  if (event.animationName === 'ripple-fade-in' || event.animationName === 'ripple-fade-in-repeat') {\n    rippleInner.setAttribute('mdw-fade-in-complete', '');\n    return;\n  }\n  if (event.animationName === 'ripple-fade-out') {\n    rippleInner.removeAttribute('mdw-fade-in');\n    rippleInner.removeAttribute('mdw-fade-in-repeat');\n    rippleInner.removeAttribute('mdw-fade-in-complete');\n    rippleInner.removeAttribute('mdw-fade-out');\n  }\n}\n\n/**\n * @param {Element} rippleInner\n * @return {void}\n */\nexport function clearRipple(rippleInner) {\n  if (!rippleInner.hasAttribute('mdw-fade-in')) {\n    return;\n  }\n  if (rippleInner.hasAttribute('mdw-keydown') && !rippleInner.hasAttribute('mdw-keyup')) {\n    return;\n  }\n  if (!rippleInner.hasAttribute('mdw-fade-in-complete')) {\n    return;\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.setAttribute('mdw-fade-out', '');\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (event.pointerType || event.detail) {\n    return;\n  }\n  if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n    // Already handled by keydown\n    return;\n  }\n  updateRipplePosition(rippleInner);\n  drawRipple(rippleInner, 'key');\n  nextTick(() => {\n    clearRipple(rippleInner);\n  });\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  const rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (rippleContainer) {\n    element.removeChild(rippleContainer);\n  }\n  element.removeAttribute('mdw-ripple-js');\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousedown', onMouseDown);\n  element.removeEventListener('touchstart', onTouchStart);\n  element.removeEventListener('keydown', onKeyDown);\n}\n","import { getPassiveEventListenerOption, iterateArrayLike } from '../dom';\n\nlet lastInteractionWasTouch = false;\n\nif (window && window.matchMedia) {\n  lastInteractionWasTouch = window.matchMedia('(any-pointer: coarse)').matches;\n}\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-overlay'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-overlay-js', '');\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.addEventListener('blur', onBlur, getPassiveEventListenerOption());\n  element.addEventListener('focus', onFocus, getPassiveEventListenerOption());\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.hasAttribute('mdw-overlay-touch')) {\n    return;\n  }\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'true');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onBlur(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  const value = element.getAttribute('mdw-overlay-touch');\n  if (value == null) {\n    return;\n  }\n  if (value === 'true') {\n    lastInteractionWasTouch = true;\n  } else {\n    lastInteractionWasTouch = false;\n  }\n  element.removeAttribute('mdw-overlay-touch');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element.hasAttribute('mdw-overlay-touch')) {\n    // Element was focused without a mouse or touch event (keyboard or programmatic)\n    if (lastInteractionWasTouch) {\n      element.setAttribute('mdw-overlay-touch', 'true');\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-overlay-js');\n  element.removeAttribute('mdw-overlay-touch');\n  element.removeEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.removeEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.removeEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.removeEventListener('blur', onBlur, getPassiveEventListenerOption());\n}\n","// https://www.w3.org/TR/wai-aria-practices/#dialog_modal\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  findElementParentByClassName,\n  getChildElementByClass,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\nclass DialogStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object} [state]\n   * @param {Object} [previousState]\n   */\n  constructor(element, previousFocus, state, previousState) {\n    this.element = (element);\n    this.previousFocus = (previousFocus);\n    this.state = state;\n    this.previousState = previousState;\n  }\n}\n\n/** @type {DialogStack[]} */\nconst OPEN_DIALOGS = [];\n\nexport const CANCEL_EVENT = 'mdw:dialog-cancel';\n\nexport const CONFIRM_EVENT = 'mdw:dialog-confirm';\n\nexport const CUSTOM_EVENT = 'mdw:dialog-custom';\n\nexport const DISMISS_EVENT = 'mdw:dialog-dismiss';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-dialog-js', '');\n  element.addEventListener('transitionend', onTransitionEnd);\n\n  let dialogCloser = getChildElementByClass(element, 'mdw-dialog__close');\n  if (!dialogCloser) {\n    dialogCloser = document.createElement('div');\n    dialogCloser.className = 'mdw-dialog__close';\n    if (element.firstChild) {\n      element.insertBefore(dialogCloser, element.firstChild);\n    } else {\n      element.appendChild(dialogCloser);\n    }\n  }\n  dialogCloser.addEventListener('click', onCancelClick);\n  const popup = getChildElementByClass(element, 'mdw-dialog__popup');\n  popup.addEventListener('keydown', onKeyDown);\n  const buttons = popup.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  let foundConfirmButton = false;\n  let foundCancelButton = false;\n  iterateArrayLike(buttons, (button) => {\n    Button.attach(button);\n    if (button.hasAttribute('mdw-custom')) {\n      button.addEventListener('click', onCustomButtonClick);\n      return;\n    }\n    if (!foundConfirmButton) {\n      button.addEventListener('click', onConfirmClick);\n      foundConfirmButton = true;\n      return;\n    }\n    if (!foundCancelButton) {\n      button.addEventListener('click', onCancelClick);\n      foundCancelButton = true;\n      return;\n    }\n    button.addEventListener('click', onCustomButtonClick);\n  });\n  setupARIA(element);\n}\n\n/**\n * @param {TransitionEvent} event\n * @return {void}\n */\nexport function onTransitionEnd(event) {\n  if (event.propertyName !== 'opacity') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const dialogElement = (event.currentTarget);\n  if (dialogElement.getAttribute('aria-hidden') !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (!popupElement) {\n    return;\n  }\n  popupElement.style.removeProperty('display');\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function setupARIA(dialogElement) {\n  if (dialogElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  dialogElement.setAttribute('role', 'dialog');\n  dialogElement.setAttribute('aria-modal', 'true');\n  if (!dialogElement.hasAttribute('aria-hidden')) {\n    dialogElement.setAttribute('aria-hidden', 'true');\n  }\n  const popupElement = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n  if (!popupElement) {\n    return;\n  }\n\n  if (!popupElement.hasAttribute('aria-label') && !popupElement.hasAttribute('aria-labelledby')) {\n    const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (titleElement) {\n      // titleElement\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function detach(dialogElement) {\n  dialogElement.removeEventListener('transitionend', onTransitionEnd);\n  dialogElement.removeAttribute('mdw-dialog-js');\n  const dialogCloser = getChildElementByClass(dialogElement, 'mdw-dialog__close');\n  if (dialogCloser) {\n    dialogCloser.removeEventListener('click', onCancelClick);\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (popupElement) {\n    popupElement.removeEventListener('keydown', onKeyDown);\n    popupElement.style.removeProperty('transform-origin');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  const buttons = popupElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button) => {\n    Button.detach(button);\n    button.removeEventListener('click', onConfirmClick);\n    button.removeEventListener('click', onCancelClick);\n    button.removeEventListener('click', onCustomButtonClick);\n  });\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCancelClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const cancelElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(cancelElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onConfirmClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  confirm(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCustomButtonClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  if (dispatchDomEvent(dialogElement, CUSTOM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Tab') {\n    handleTabKeyPress(event);\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    onEscapeKeyDown(event);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onEscapeKeyDown(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const popupElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(popupElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenDialog = OPEN_DIALOGS[OPEN_DIALOGS.length - 1];\n  if (!lastOpenDialog || !lastOpenDialog.previousState) {\n    return;\n  }\n  if ((lastOpenDialog.previousState === event.state) || Object.keys(event.state)\n    .every((key) => event.state[key] === lastOpenDialog.previousState[key])) {\n    if (dispatchDomEvent(lastOpenDialog.element, CANCEL_EVENT)) {\n      hide(lastOpenDialog.element);\n    } else {\n      // Revert pop state by pushing state again\n      const title = getTitleText(lastOpenDialog.element);\n      window.history.pushState(lastOpenDialog.state, title);\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function cancel(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CANCEL_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function confirm(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CONFIRM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {string}\n */\nexport function getTitleText(dialogElement) {\n  let title = 'Dialog';\n  const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (titleElement) {\n    title = titleElement.textContent;\n  } else {\n    const bodyElement = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n    if (bodyElement) {\n      title = bodyElement.textContent;\n    }\n  }\n  return title;\n}\n\n/**\n * @param {Element} dialogElement\n * @return {boolean} handled\n */\nexport function hide(dialogElement) {\n  if (dialogElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(dialogElement, DISMISS_EVENT)) {\n    return false;\n  }\n  dialogElement.setAttribute('aria-hidden', 'true');\n  // .mdw-dialog__popup hidden by transitionEnd event\n  let stackIndex = -1;\n  OPEN_DIALOGS.some((stack, index) => {\n    if (stack.element === dialogElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const stack = OPEN_DIALOGS[stackIndex];\n    if (stack.previousFocus && stack.previousFocus instanceof HTMLElement) {\n      if (findElementParentByClassName(document.activeElement, 'mdw-dialog') === dialogElement) {\n        // Only pop focus back when hiding a dialog with focus within itself.\n        try {\n          stack.previousFocus.focus();\n        } catch (e) {\n          // Failed to focus\n        }\n      }\n    }\n    OPEN_DIALOGS.splice(stackIndex, 1);\n    if (stack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (stack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_DIALOGS.length) {\n    window.removeEventListener('popstate', onPopState);\n  }\n  return true;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {boolean} handled\n */\nexport function show(dialogElement, event) {\n  if (event && event.type === 'click' && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  let changed = false;\n\n  if (dialogElement.getAttribute('aria-hidden') !== 'false') {\n    dialogElement.setAttribute('aria-hidden', 'false');\n    /** @type {HTMLElement} */\n    const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n    popupElement.style.setProperty('display', 'flex');\n    changed = true;\n  }\n\n  updateTransformOrigin(dialogElement, event);\n\n  if (!changed) {\n    return false;\n  }\n  attach(dialogElement);\n  const previousFocus = document.activeElement;\n  const newState = { hash: Math.random().toString(36).substr(2, 16) };\n  let previousState = null;\n  if (window.history && window.history.pushState) {\n    if (!window.history.state) {\n      // Create new previous state\n      window.history.replaceState({\n        hash: Math.random().toString(36).substr(2, 16),\n      }, document.title);\n    }\n    previousState = window.history.state;\n    const title = getTitleText(dialogElement);\n    window.history.pushState(newState, title);\n    window.addEventListener('popstate', onPopState);\n  }\n  const dialogStack = new DialogStack(dialogElement, previousFocus, newState, previousState);\n  OPEN_DIALOGS.push(dialogStack);\n  const focusElement = dialogElement.querySelector('[mdw-autofocus]');\n  try {\n    if (focusElement && focusElement instanceof HTMLElement) {\n      if (focusElement.scrollIntoView) {\n        focusElement.scrollIntoView();\n      }\n      focusElement.focus();\n    } else if (dialogElement instanceof HTMLElement) {\n      dialogElement.focus();\n    }\n  } catch (e) {\n    // Failed to focus\n  }\n  return true;\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function handleTabKeyPress(event) {\n  /** @type {Element} */\n  const popupElement = (event.currentTarget);\n  const focusableElements = popupElement.querySelectorAll([\n    'button:not(:disabled):not([tabindex=\"-1\"])',\n    '[href]:not(:disabled):not([tabindex=\"-1\"])',\n    'input:not(:disabled):not([tabindex=\"-1\"])',\n    'select:not(:disabled):not([tabindex=\"-1\"])',\n    'textarea:not(:disabled):not([tabindex=\"-1\"])',\n    '[tabindex]:not([tabindex=\"-1\"])'].join(', '));\n  let foundTarget = false;\n  let candidate = null;\n  iterateSomeOfArrayLike(focusableElements, (el) => {\n    if (el === event.target) {\n      foundTarget = true;\n      if (event.shiftKey) {\n        return true;\n      }\n    } else if (event.shiftKey) {\n      candidate = el;\n    } else if (foundTarget) {\n      candidate = el;\n      return true;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (event.shiftKey) {\n      // Select last item\n      candidate = focusableElements[focusableElements.length - 1];\n    } else {\n      // Select first item\n      candidate = focusableElements[0];\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  if (candidate && candidate instanceof HTMLElement) {\n    try {\n      candidate.focus();\n    } catch (e) {\n      // Failed to focus\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)} [content]\n * @return {void}\n */\nexport function updateTitle(dialogElement, content) {\n  let title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (!content) {\n    if (!title) {\n      // Nothing to be done\n      return;\n    }\n    title.parentElement.removeChild(title);\n    return;\n  }\n  if (!title) {\n    title = document.createElement('div');\n    title.className = 'mdw-dialog__title';\n    const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n    popup.insertBefore(title, popup.firstChild);\n  }\n  if (content instanceof DocumentFragment) {\n    while (title.lastChild) {\n      title.removeChild(title.lastChild);\n    }\n    title.appendChild(content);\n  } else {\n    title.textContent = content;\n  }\n}\n\n\n/**\n * @param {Element} dialogElement\n * @param {string[]} texts\n * @return {void}\n */\nexport function updateButtonText(dialogElement, texts) {\n  const buttons = dialogElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button, index) => {\n    setTextNode(button, texts[index]);\n  });\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)} [content]\n * @return {void}\n */\nexport function updateBody(dialogElement, content) {\n  let body = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n  if (!content) {\n    if (!body) {\n      // Nothing to be done\n      return;\n    }\n    body.parentElement.removeChild(body);\n    return;\n  }\n  if (!body) {\n    body = document.createElement('div');\n    body.className = 'mdw-dialog__body mdw-theme';\n    body.setAttribute('mdw-ink', 'medium');\n    const title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (title) {\n      title.insertAdjacentElement('afterend', body);\n    } else {\n      const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n      popup.insertBefore(body, popup.firstChild);\n    }\n  }\n  if (content instanceof DocumentFragment) {\n    while (body.lastChild) {\n      body.removeChild(body.lastChild);\n    }\n    body.appendChild(content);\n  } else {\n    body.textContent = content;\n  }\n}\n\n/**\n * @param {Object} options\n * @param {(DocumentFragment|string)} [options.title]\n * @param {(DocumentFragment|string)} [options.body]\n * @param {string[]} [options.buttons]\n * @param {boolean} [options.stacked=false]\n * @param {Element} [options.parent]\n * @param {boolean} [options.custom=false] Use custom button events\n * @param {(string|number)} [options.autofocus=0] Autofocus button by index or text\n * @return {Element}\n */\nexport function create(options) {\n  const element = document.createElement('div');\n  element.className = 'mdw-dialog';\n\n  const popup = document.createElement('div');\n  popup.className = 'mdw-dialog__popup mdw-theme';\n  popup.setAttribute('mdw-surface', 'card');\n  element.appendChild(popup);\n\n  updateTitle(element, options.title);\n  updateBody(element, options.body);\n\n  if (options.buttons) {\n    const buttonArea = document.createElement('div');\n    buttonArea.className = 'mdw-dialog__button-area';\n    let index = 0;\n    options.buttons.forEach((buttonText) => {\n      const button = document.createElement('div');\n      button.className = 'mdw-button mdw-theme';\n      button.setAttribute('tabindex', '0');\n      button.setAttribute('mdw-ink', 'secondary');\n      if (options.custom) {\n        button.setAttribute('mdw-custom', '');\n      }\n      button.textContent = buttonText;\n      buttonArea.appendChild(button);\n      if ((options.autofocus == null && index === 0)\n        || options.autofocus === index || options.autofocus === buttonText) {\n        button.setAttribute('mdw-autofocus', '');\n      }\n      index += 1;\n    });\n    if (options.stacked) {\n      buttonArea.setAttribute('mdw-stacked', '');\n    }\n    popup.appendChild(buttonArea);\n  }\n  if (options.parent) {\n    options.parent.appendChild(element);\n  }\n  attach(element);\n  return element;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {void}\n */\nexport function updateTransformOrigin(dialogElement, event) {\n  /** @type {HTMLElement} */\n  const popup = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  popup.style.removeProperty('transform-origin');\n  if (!event) {\n    return;\n  }\n  const hadLayer = popup.style.getPropertyValue('display') != null;\n  if (!hadLayer) {\n    popup.style.setProperty('display', 'flex');\n  }\n  let pageX;\n  let pageY;\n  const dialogRect = dialogElement.getBoundingClientRect();\n  if ('pageX' in event && 'pageY' in event) {\n    ({ pageX, pageY } = event);\n    pageX -= window.pageXOffset;\n    pageY -= window.pageYOffset;\n  } else {\n    /** @type {Element} */\n    const target = (event.target || event.currentTarget);\n    if (target instanceof Element === false) {\n      return;\n    }\n    const rect = target.getBoundingClientRect();\n    if (!rect.width && !rect.width && !rect.left && !rect.top) {\n      return;\n    }\n    pageX = rect.left + (rect.width / 2);\n    pageY = rect.top + (rect.height / 2);\n  }\n  const transformOriginX = pageX - dialogRect.left - popup.offsetLeft;\n  const transformOriginY = pageY - dialogRect.top - popup.offsetTop;\n  popup.style.setProperty('transform-origin', `${transformOriginX}px ${transformOriginY}px`);\n  if (!hadLayer) {\n    popup.style.removeProperty('display');\n  }\n}\n\n// Aliases\nexport const dismiss = hide;\n","export default class Throttler {\n  /** @param {number} throttleTimeMs */\n  constructor(throttleTimeMs) {\n    this.pending = false;\n    this.queued = false;\n    this.queue = null;\n    this.throttleTimeMs = throttleTimeMs;\n  }\n\n  abort() {\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.pending = false;\n    this.queued = false;\n  }\n\n  /**\n   * @param {function} fn\n   * @return {void}\n   */\n  run(fn) {\n    if (this.pending) {\n      this.queued = true;\n      return;\n    }\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.queued = false;\n    this.pending = true;\n    this.queue = setTimeout(() => {\n      this.pending = false;\n      if (this.queued) {\n        this.run(fn);\n      }\n    }, this.throttleTimeMs);\n    fn();\n  }\n}\n","import { iterateArrayLike } from '../../core/dom';\nimport Throttler from '../../core/throttler';\n\nconst MIN_SCROLL_DELTA = 24; // Avoid finger bounce\n\nconst MOBILE_BREAKPOINT = 600;\nconst TABLET_BREAKPOINT = 1024;\n\n// Throttler will execute at earliest convenience\n// Smoother than using requestAnimationFrame\nconst SCROLL_THROTTLE_TIME_MS = 20;\n\n/** @type {number} */\nlet lastScrollY = null;\n/** @type {number} */\nlet penultimateScrollY = null;\nlet scrolledPastAppBar = false;\n/** @type {HTMLElement} */\nlet appBarElement = null;\n/** @type {HTMLElement} */\nlet layoutContentElement = null;\n/** @type {number} */\nlet lastScrollBottomDistance = null;\n/** @type {Throttler} */\nlet scrollThrottler = null;\n\n/** @return {void} */\nexport function attach() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    // Initialize with scroll up\n    document.body.addEventListener('scroll', onBodyScroll);\n    const contentElement = getContentElement();\n    if (contentElement) {\n      contentElement.addEventListener('scroll', onContentScroll);\n    }\n    resetScroll();\n  }\n\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-toggle'),\n    (el) => el.addEventListener('click', toggleNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-show'),\n    (el) => el.addEventListener('click', showNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-hide'),\n    (el) => el.addEventListener('click', hideNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-toggle'),\n    (el) => el.addEventListener('click', toggleSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-show'),\n    (el) => el.addEventListener('click', showSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-hide'),\n    (el) => el.addEventListener('click', hideSideSheet));\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.addEventListener('click', onScrimClick);\n    scrim.addEventListener('scroll', onScrimScroll);\n    scrim.addEventListener('touchmove', onScrimScroll);\n    scrim.addEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {Throttler} */\nexport function getScrollThrottler() {\n  if (!scrollThrottler) {\n    scrollThrottler = new Throttler(SCROLL_THROTTLE_TIME_MS);\n  }\n  return scrollThrottler;\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onScrimScroll(event) {\n  // JS needed for Safari\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    event.preventDefault();\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/** @return {boolean} */\nexport function isNavDrawerModalShowing() {\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  if (!navDrawer) {\n    return false;\n  }\n  if (window.location.hash !== `#${navDrawer.id}` && navDrawer.getAttribute('aria-hidden') !== 'false') {\n    return false;\n  }\n  return (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-navdrawer-style') === 'modal');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function onScrimClick(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  if (isNavDrawerModalShowing()) {\n    hideNavDrawer();\n  }\n  const sidesheet = document.getElementsByClassName('mdw-layout__sidesheet')[0];\n  if (sidesheet && sidesheet.getAttribute('aria-hidden') === 'false') {\n    if (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-sidesheet-style') === 'modal') {\n      hideSideSheet();\n    }\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__navdrawer')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  navDrawer.setAttribute('aria-hidden', 'true');\n  if (window.location.hash === `#${navDrawer.id}`) {\n    window.location.hash = '';\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleNavDrawer(event) {\n  if (document.getElementsByClassName('mdw-layout__navdrawer')[0].getAttribute('aria-hidden') === 'false') {\n    hideNavDrawer(event);\n  } else {\n    showNavDrawer(event);\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'true');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleSideSheet(event) {\n  if (document.getElementsByClassName('mdw-layout__sidesheet')[0].getAttribute('aria-hidden') === 'false') {\n    hideSideSheet(event);\n  } else {\n    showSideSheet(event);\n  }\n}\n\n/** @return {void} */\nexport function detach() {\n  document.removeEventListener('scroll', onBodyScroll);\n  const content = getContentElement();\n  if (content) {\n    content.removeEventListener('scroll', onContentScroll);\n  }\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.removeEventListener('click', onScrimClick);\n    scrim.removeEventListener('scroll', onScrimScroll);\n    scrim.removeEventListener('touchmove', onScrimScroll);\n    scrim.removeEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {void} */\nexport function onBodyScroll() {\n  // position:sticky scrolling\n  getScrollThrottler().run(() => onScroll(true));\n}\n\n/** @return {boolean} */\nexport function isMobile() {\n  return window.innerWidth < MOBILE_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function isTablet() {\n  return window.innerWidth >= MOBILE_BREAKPOINT\n    && window.innerWidth < TABLET_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function shouldAutoHideAppBar() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return false;\n  }\n  const autoHide = appBar.getAttribute('mdw-autohide');\n  if (autoHide == null) {\n    return false;\n  }\n  if (autoHide === '') {\n    return true;\n  }\n  if (autoHide.indexOf('tablet') !== -1 && isTablet()) {\n    return true;\n  }\n  if (autoHide.indexOf('mobile') !== -1 && isMobile()) {\n    return true;\n  }\n  return false;\n}\n\n/** @return {void} */\nexport function onContentScroll() {\n  getScrollThrottler().run(() => onScroll(false));\n}\n\n/** @return {HTMLElement} */\nexport function getAppBarElement() {\n  if (!appBarElement) {\n    /** @type {HTMLElement} */\n    appBarElement = (document.getElementsByClassName('mdw-layout__appbar')[0]);\n  }\n  return appBarElement;\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function showFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'false');\n  if (changeFabCut !== false) {\n    openAppBarFabCut();\n  }\n}\n\n/** @return {void} */\nexport function openAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (fabCutAttr == null) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') === -1) {\n    appBar.setAttribute('mdw-fab-cut', `open ${fabCutAttr}`.trim());\n  }\n}\n\n/** @return {void} */\nexport function closeAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (!fabCutAttr) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') !== -1) {\n    appBar.setAttribute('mdw-fab-cut', fabCutAttr.replace('open', '').trim());\n  }\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function hideFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'true');\n  if (changeFabCut !== false) {\n    closeAppBarFabCut();\n  }\n}\n\n/** @return {boolean} */\nexport function isFabShown() {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return false;\n  }\n  return fabElement.getAttribute('aria-hidden') !== 'true';\n}\n\n/** @return {HTMLElement} */\nexport function getContentElement() {\n  if (!layoutContentElement) {\n    /** @type {HTMLElement} */\n    layoutContentElement = (document.getElementsByClassName('mdw-layout__content')[0]);\n  }\n  return layoutContentElement;\n}\n\n/** @return {void} */\nexport function resetScroll() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    appBar.removeAttribute('mdw-hide');\n    appBar.removeAttribute('mdw-raise');\n  }\n  scrolledPastAppBar = false;\n  lastScrollY = 0 + MIN_SCROLL_DELTA;\n  penultimateScrollY = lastScrollY;\n  onScroll(true);\n}\n\n/**\n * @param {boolean} isBody\n * @return {void}\n */\nexport function onScroll(isBody) {\n  const contentElement = getContentElement();\n  const scrollElement = isBody ? document.body : contentElement;\n  const currentScrollY = scrollElement.scrollTop;\n  const change = currentScrollY - lastScrollY;\n  const delta = Math.abs(change);\n  if (delta === 0) {\n    // Horizontal scroll?\n    return;\n  }\n  if (currentScrollY < 0 && lastScrollY <= 0) {\n    // Repeated overscroll event\n    return;\n  }\n\n  const scrollBottom = scrollElement.scrollHeight - scrollElement.clientHeight;\n  const scrollBottomDistance = scrollBottom - currentScrollY;\n  const scrollTopChange = currentScrollY <= 0\n    || lastScrollY <= 0;\n  const scrollBottomChange = scrollBottomDistance === 0 && lastScrollBottomDistance !== 0;\n\n  lastScrollBottomDistance = scrollBottomDistance;\n  if (delta < MIN_SCROLL_DELTA && !scrollTopChange && !scrollBottomChange) {\n    return;\n  }\n\n  const didScrollUp = (scrollBottomDistance > 0) && (change < 0);\n  const isAtScrollTop = didScrollUp && currentScrollY <= 0;\n  const newScrollUp = didScrollUp && lastScrollY >= penultimateScrollY;\n  const didScrollDown = (change > 0);\n  const isAtScrollBottom = didScrollDown && (scrollBottomDistance <= 0);\n  const newScrollDown = didScrollDown && lastScrollY <= penultimateScrollY;\n\n  penultimateScrollY = lastScrollY;\n  lastScrollY = currentScrollY;\n\n  // To avoid DOM read, abort if scrolling in same direction and has already past app bar\n  if ((change === 0) || (!isAtScrollTop && !newScrollUp && !isAtScrollBottom && !newScrollDown\n    && scrolledPastAppBar)) {\n    return;\n  }\n\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n\n  const bottomAppBar = appBar.hasAttribute('mdw-bottom');\n\n  const scrolledAway = bottomAppBar ? didScrollUp : didScrollDown;\n  const newScrollAway = scrolledAway && (bottomAppBar ? newScrollUp : newScrollDown);\n\n  // For code readability\n  const scrolledBack = !scrolledAway;\n  const newScrollBack = scrolledBack && (bottomAppBar ? newScrollDown : newScrollUp);\n\n  const isAtRest = (bottomAppBar ? isAtScrollBottom : isAtScrollTop);\n\n  if (scrolledBack) {\n    // scrolledPastAppBar needs to be recalculated\n    scrolledPastAppBar = false;\n  }\n\n  // Don't perform on each scroll back, only on first\n  if (newScrollBack || isAtRest) {\n    if (appBar.hasAttribute('mdw-autohide')) {\n      appBar.removeAttribute('mdw-hide');\n      appBar.style.removeProperty('margin-top');\n    }\n  }\n\n  if (!scrolledPastAppBar) {\n    if (bottomAppBar) {\n      scrolledPastAppBar = currentScrollY <= scrollBottom - appBar.clientHeight;\n    } else {\n      scrolledPastAppBar = currentScrollY > appBar.clientHeight;\n    }\n  }\n\n  if (isAtRest) {\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.setAttribute('mdw-prominent', '');\n    }\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.removeAttribute('mdw-raise');\n    }\n    return;\n  }\n\n  // Not at rest\n  if (scrolledAway && scrolledPastAppBar) {\n    if (shouldAutoHideAppBar()) {\n      appBar.setAttribute('mdw-hide', '');\n      if (!isBody) {\n        appBar.style.setProperty('margin-top', `${-appBar.clientHeight}px`);\n      }\n    }\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.removeAttribute('mdw-prominent');\n    }\n  }\n\n  if (newScrollAway) {\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.setAttribute('mdw-raise', '');\n    }\n  }\n}\n","import { iterateArrayLike, dispatchDomEvent } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\nimport * as Attributes from '../../core/aria/attributes';\nimport * as Keyboard from '../../core/aria/keyboard';\n\nimport * as ListSecondary from './secondary';\n\nexport const ACTIVATE_EVENT = 'mdw:listcontent-activate';\nexport const SELECTED_CHANGE_EVENT = 'mdw:listcontent-selectedchange';\nexport const FOCUS_EVENT = 'mdw:listcontent-focus';\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function attach(listContentElement) {\n  if (!listContentElement.hasAttribute('role')) {\n    if (listContentElement.parentElement.getAttribute('role') === 'none') {\n      listContentElement.setAttribute('role', 'option');\n    }\n  }\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__icon'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__avatar'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  listContentElement.addEventListener('click', onClick);\n\n  if (!listContentElement.hasAttribute('mdw-no-overlay')) {\n    listContentElement.classList.add('mdw-overlay');\n    Overlay.attach(listContentElement);\n  }\n  if (!listContentElement.hasAttribute('mdw-no-ripple')) {\n    listContentElement.classList.add('mdw-ripple');\n    Ripple.attach(listContentElement);\n  }\n  if (listContentElement.getAttribute('role') === 'radio'\n  && listContentElement.getAttribute('aria-checked') === 'true'\n  && listContentElement.getAttribute('tabindex') !== '0') {\n    listContentElement.setAttribute('tabindex', '0');\n  }\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.attach(secondaryElement);\n  }\n  Keyboard.attach(listContentElement);\n  listContentElement.addEventListener(Keyboard.ENTER_KEY, onEnterKey);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onEnterKey(event) {\n  if (event.detail.ctrlKey || event.detail.shiftKey\n    || event.detail.altKey || event.detail.metaKey) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (!listContentElement) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  // Slightly redundant, but performs ripple\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  listContentElement.dispatchEvent(newEvent);\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (Attributes.isDisabled(listContentElement)) {\n    return;\n  }\n  dispatchDomEvent(listContentElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function detach(listContentElement) {\n  Keyboard.detach(listContentElement);\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.detach(secondaryElement);\n  }\n  Ripple.detach(listContentElement);\n  Overlay.detach(listContentElement);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  nextTick,\n  cancelTick,\n} from '../../core/dom';\n\nimport * as MenuItem from './item';\n\nclass MenuStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object} [state]\n   * @param {Object} [previousState]\n   * @param {MouseEvent|PointerEvent} [originalEvent]\n   */\n  constructor(element, previousFocus, state, previousState, originalEvent) {\n    this.element = element;\n    this.previousFocus = previousFocus;\n    this.state = state;\n    this.previousState = previousState;\n    this.originalEvent = originalEvent;\n    this.pendingResizeOperation = null;\n  }\n}\n\n/** @type {MenuStack[]} */\nconst OPEN_MENUS = [];\n\nexport const HIDE_EVENT = 'mdw:menu-hide';\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function attach(menuElement) {\n  menuElement.setAttribute('mdw-menu-js', '');\n  menuElement.addEventListener('click', onMenuClick);\n  menuElement.addEventListener('scroll', onMenuScroll);\n  menuElement.addEventListener('touchmove', onMenuScroll);\n  menuElement.addEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  setupARIA(menuElement);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function setupARIA(menuElement) {\n  if (menuElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  if (!menuElement.hasAttribute('aria-hidden')) {\n    menuElement.setAttribute('aria-hidden', 'true');\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-divider'),\n    (el) => el.setAttribute('role', 'separator'));\n  menuElement.setAttribute('role', 'menu');\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  if (popupElement) {\n    popupElement.setAttribute('role', 'none');\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onMenuScroll(event) {\n  // JS needed for Safari\n  event.preventDefault();\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/**\n * @param {MouseEvent|PointerEvent} event\n * @return {void}\n */\nexport function onMenuClick(event) {\n  if (event.currentTarget === event.target && event.target instanceof HTMLElement) {\n    event.stopPropagation();\n    hide(event.target);\n  }\n}\n\n/**\n * @return {void}\n */\nexport function onWindowResize() {\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.originalEvent) {\n    return;\n  }\n  if (lastOpenMenu.pendingResizeOperation) {\n    cancelTick(lastOpenMenu.pendingResizeOperation);\n  }\n  lastOpenMenu.pendingResizeOperation = nextTick(() => {\n    updateMenuPosition(\n      lastOpenMenu.element,\n      /** @type {HTMLElement} */ (lastOpenMenu.element.getElementsByClassName('mdw-menu__popup')[0]),\n      lastOpenMenu.originalEvent\n    );\n    lastOpenMenu.pendingResizeOperation = null;\n  });\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.previousState) {\n    return;\n  }\n  if ((lastOpenMenu.previousState === event.state) || Object.keys(event.state)\n    .every((key) => event.state[key] === lastOpenMenu.previousState[key])) {\n    hide(lastOpenMenu.element);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuElement = (event.currentTarget);\n  if (!menuElement || menuElement.getAttribute('aria-hidden') === 'true') {\n    return;\n  }\n\n  if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, false);\n    return;\n  }\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, true);\n    return;\n  }\n  if (event.key === 'Tab') {\n    // Hide menu allowing focus to revert to calling element\n    // To then allow browser default Tab interaction\n    // Unless menu hiding is cancelled\n    if (!hide(menuElement)) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    event.stopPropagation();\n    event.preventDefault();\n    hide(menuElement);\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function detach(menuElement) {\n  hide(menuElement);\n  menuElement.removeEventListener('click', onMenuClick);\n  menuElement.removeEventListener('scroll', onMenuScroll);\n  menuElement.removeEventListener('touchmove', onMenuScroll);\n  menuElement.removeEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  menuElement.removeAttribute('mdw-menu-js');\n  /** @type {HTMLElement} */\n  const popupElement = (menuElement.getElementsByClassName('mdw-menu__popup')[0]);\n  if (popupElement) {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), MenuItem.detach);\n}\n\n/**\n * @param {Element} menu\n * @param {boolean} [backwards=false]\n * @return {void}\n */\nexport function selectNextMenuItem(menu, backwards) {\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const menuItems = (menu.getElementsByClassName('mdw-menu__item'));\n  let foundTarget = false;\n  /** @type {HTMLElement} */\n  let candidate = null;\n  /** @type {HTMLElement} */\n  let firstFocusableItem = null;\n  let lastFocusableElement = null;\n  const target = document.activeElement;\n\n  // Hidden elements cannot be focused\n  // Disabled elements cannot be focused on IE11\n  // Skip elements that fail to receive focus\n  iterateSomeOfArrayLike(menuItems, (el) => {\n    el.focus();\n    const focusable = (document.activeElement === el);\n    if (focusable) {\n      if (!firstFocusableItem) {\n        firstFocusableItem = el;\n      }\n      lastFocusableElement = el;\n    }\n    if (el === target) {\n      foundTarget = true;\n      if (backwards && candidate) {\n        return true;\n      }\n      return false;\n    }\n    if (backwards) {\n      if (focusable) {\n        candidate = el;\n      }\n      return false;\n    }\n    if (foundTarget) {\n      if (focusable) {\n        candidate = el;\n        return true;\n      }\n      return false;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (backwards) {\n      candidate = lastFocusableElement;\n    } else {\n      candidate = firstFocusableItem;\n    }\n  }\n  if (candidate && document.activeElement !== candidate) {\n    candidate.focus();\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @param {HTMLElement} popupElement\n * @param {MouseEvent|PointerEvent} [event]\n * @param {boolean} [alignTarget=true]\n * @return {void}\n */\nexport function updateMenuPosition(menuElement, popupElement, event, alignTarget) {\n  let top = 'auto';\n  let left = 'auto';\n  let transformOrigin = '';\n  const useAlignTarget = (alignTarget !== false);\n  const margin = useAlignTarget ? '0' : '';\n  const mdwPosition = menuElement.getAttribute('mdw-position') || '';\n  const mdwDirection = menuElement.getAttribute('mdw-direction') || '';\n  let alignTop = mdwPosition.indexOf('top') !== -1;\n  let alignBottom = mdwPosition.indexOf('bottom') !== -1;\n  let alignVCenter = mdwPosition.indexOf('vcenter') !== -1;\n\n  const alignStart = mdwPosition.indexOf('start') !== -1;\n  const alignEnd = mdwPosition.indexOf('end') !== -1;\n  let alignLeft = mdwPosition.indexOf('left') !== -1;\n  let alignRight = mdwPosition.indexOf('right') !== -1;\n  let alignHCenter = mdwPosition.indexOf('hcenter') !== -1;\n\n  let openUp = mdwDirection.indexOf('up') !== -1;\n  let openDown = mdwDirection.indexOf('down') !== -1;\n  const openNormal = mdwDirection.indexOf('normal') !== -1;\n  const openReverse = mdwDirection.indexOf('reverse') !== -1;\n  let openVCenter = mdwDirection.indexOf('vcenter') !== -1;\n  let openHCenter = mdwDirection.indexOf('hcenter') !== -1;\n  let openLtr = mdwDirection.indexOf('ltr') !== -1;\n  let openRtl = mdwDirection.indexOf('rtl') !== -1;\n\n  /** @type {HTMLElement} */\n  const target = (event.currentTarget || event.target);\n\n  let isPageRTL = null;\n  if (alignStart || alignEnd || openNormal || openReverse) {\n    // Using page-direction based values\n    isPageRTL = isRtl();\n    if (alignStart || alignEnd) {\n      if (alignStart) {\n        if (isPageRTL) {\n          alignRight = true;\n        } else {\n          alignLeft = true;\n        }\n      } else if (isPageRTL) {\n        alignLeft = true;\n      } else {\n        alignRight = true;\n      }\n    }\n    if (openNormal || openReverse) {\n      if (openNormal) {\n        if (isPageRTL) {\n          openRtl = true;\n        } else {\n          openLtr = true;\n        }\n      } else if (isPageRTL) {\n        openLtr = true;\n      } else {\n        openRtl = true;\n      }\n    }\n  }\n  const offsetTop = useAlignTarget ? 0 : -event.offsetY;\n  const offsetBottom = useAlignTarget ? target.clientHeight : event.offsetY;\n  const offsetLeft = useAlignTarget ? 0 : -event.offsetX;\n  const offsetRight = useAlignTarget ? target.clientWidth : event.offsetX;\n  const rect = target.getBoundingClientRect();\n  const pageX = rect.left;\n  const pageY = rect.top;\n\n  /* Automatic Positioning\n    *\n    * 9 Positions\n    *   3      7      4\n    *     ┌─────────┐\n    *     │         │\n    *   5 │    9    │ 6\n    *     │         │\n    *     └─────────┘\n    *   1      8      2\n    *\n    * 1: Bottom Left\n    * 2: Bottom Right\n    * 3: Top Left\n    * 4: Top Right\n    * 5: VCenter Left\n    * 6: VCenter Right\n    * 7: HCenter Top\n    * 8: HCenter Bottom\n    * 9: VCenter HCenter\n    *\n    * 9 Directions:\n    * a - Down LTR\n    * b - Down RTL\n    * c - Up LTR\n    * d - Up RTL\n    * e - LTR\n    * f - RTL\n    * g - Down\n    * h - Up\n    * i - Center\n    *\n    *\n    * 16 total combos\n    * 1a 1b 1c 1d  └↘ └↙ └↗ └↖\n    * 2a 2b 2c 2d  ┘↘ ┘↙ ┘↗ ┘↖\n    * 3a 3b 3c 3d  ┌↘ ┌↙ ┌↗ ┌↖\n    * 4a 4b 4c 4d  ┐↘ ┐↙ ┐↗ ┐↖\n    *\n    * Avoid using opposite angle\n    *\n    * 1a XX 1c 1d  └↘ ██ └↗ └↖\n    * XX 2b 2c 2d  ██ ┘↙ ┘↗ ┘↖\n    * 1a 3b 3c XX  ┌↘ ┌↙ ┌↗ ██\n    * 4a 4b XX 4d  ┐↘ ┐↙ ██ ┐↖\n    *\n    *\n    * Preference Order:\n    * - Flow from corner           1a 2b 3c 4d    └↘ ┘↙ ┌↗ ┐↖\n    * - Open adjacent to target    4a 3b 2c 1d    ┐↘ ┌↙ ┘↗ └↖\n    * - Overlay target             3a 4b 1c 2d    ┌↘ ┐↙ └↗ ┘↖\n    * - Open from horizontal side  5e 6f          │→ │←\n    * - Open from center           9i             █·\n    */\n\n  popupElement.style.setProperty('max-height', 'none');\n  const popupElementHeight = popupElement.clientHeight;\n  const popupElementWidth = popupElement.clientWidth;\n  const canOpenDownwardsFromBottom = !alignTop && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetBottom) <= window.innerHeight;\n  const canOpenDownwardsFromTop = !alignBottom && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetTop) <= window.innerHeight;\n  const canOpenUpwardsFromTop = !alignBottom && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetTop >= popupElementHeight;\n  const canOpenUpwardsFromBottom = !alignTop && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetBottom >= popupElementHeight;\n  const canOpenRightwardsFromLeft = !alignRight && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetLeft) <= window.innerWidth;\n  const canOpenRightwardsFromRight = !alignLeft && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetRight) <= window.innerWidth;\n  const canOpenLeftwardsFromRight = !alignLeft && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetRight >= popupElementWidth;\n  const canOpenLeftwardsFromLeft = !alignRight && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetLeft >= popupElementWidth;\n  const canOpenFromCenter = !alignLeft && !alignRight && !alignTop && !alignBottom\n    && !openUp && !openDown\n    && ((pageX + offsetLeft) / 2) >= (popupElementWidth / 2)\n    && (popupElementWidth / 2) + ((pageX + offsetLeft) / 2) <= window.innerWidth;\n  popupElement.style.removeProperty('max-height');\n  const candidates = [\n    canOpenDownwardsFromBottom && canOpenRightwardsFromLeft, // 1a └↘\n    canOpenDownwardsFromBottom && canOpenLeftwardsFromRight, // 2b ┘↙\n    canOpenUpwardsFromTop && canOpenRightwardsFromLeft, // 3c ┌↗\n    canOpenUpwardsFromTop && canOpenLeftwardsFromLeft, // 4d ┐↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromRight, // 4a ┐↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromLeft, // 3b ┌↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2c ┘↗\n    canOpenUpwardsFromBottom && canOpenLeftwardsFromLeft, // 1d └↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromLeft, // 3a ┌↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromRight, // 4b ┐↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromLeft, // 1c └↗\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2d ┘↖\n    canOpenRightwardsFromLeft, // 5e │→\n    canOpenLeftwardsFromRight, // 6f │←\n    canOpenFromCenter, // 9i █·\n  ].map((value, index) => {\n    if (value) {\n      return index + 1;\n    }\n    return 0;\n  }).filter((value) => value !== 0);\n  if (candidates.length) {\n    let candidateNumber;\n    if (isPageRTL === null) {\n      isPageRTL = isRtl();\n    }\n    if (isPageRTL) {\n      candidateNumber = [2, 1, 4, 3, 6, 5, 8, 7, 10, 9, 12, 11, 14, 13, 15]\n        .filter((number) => candidates.indexOf(number) !== -1)[0];\n    } else {\n      candidateNumber = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\n        .filter((number) => candidates.indexOf(number) !== -1)[0];\n    }\n    if (candidateNumber == null) {\n      candidateNumber = isPageRTL ? 2 : 1;\n    }\n    switch (candidateNumber) {\n      // Position\n      default:\n      case 1:\n      case 8:\n      case 11:\n        alignBottom = true; alignLeft = true;\n        break;\n      case 2:\n      case 7:\n      case 12:\n        alignBottom = true; alignRight = true;\n        break;\n      case 3:\n      case 6:\n      case 9:\n        alignTop = true; alignLeft = true;\n        break;\n      case 4:\n      case 5:\n      case 10:\n        alignTop = true; alignRight = true;\n        break;\n      case 13:\n        alignVCenter = true; alignLeft = true;\n        break;\n      case 14:\n        alignVCenter = true; alignRight = true;\n        break;\n      case 15:\n        alignVCenter = true; alignHCenter = true;\n    }\n    switch (candidateNumber) {\n      // Direction\n      default:\n      case 1:\n      case 5:\n      case 9:\n        openDown = true; openLtr = true;\n        break;\n      case 2:\n      case 6:\n      case 10:\n        openDown = true; openRtl = true;\n        break;\n      case 3:\n      case 7:\n      case 11:\n        openUp = true; openLtr = true;\n        break;\n      case 4:\n      case 8:\n      case 12:\n        openUp = true; openRtl = true;\n        break;\n      case 13:\n        openLtr = true; openVCenter = true;\n        break;\n      case 14:\n        openRtl = true; openVCenter = true;\n        break;\n      case 15:\n        openHCenter = true; openVCenter = true;\n        break;\n    }\n  }\n\n  if (openLtr) {\n    if (alignRight) {\n      left = `${pageX + offsetRight}px`;\n    } else if (alignHCenter) {\n      left = `${pageX + ((offsetLeft + offsetRight) / 2)}px`;\n    } else {\n      left = `${pageX + offsetLeft}px`;\n    }\n    transformOrigin = 'left';\n  } else if (openHCenter) {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - (popupElementWidth / 2)}px`;\n    } else if (alignRight) {\n      left = `${(pageX + offsetRight) - (popupElementWidth / 2)}px`;\n    } else {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - (popupElementWidth / 2)}px`;\n    }\n    transformOrigin = 'center';\n  } else {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - popupElementWidth}px`;\n    } else if (alignHCenter) {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - popupElementWidth}px`;\n    } else {\n      left = `${(pageX + offsetRight) - popupElementWidth}px`;\n    }\n    transformOrigin = 'right';\n  }\n\n  if (openUp) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - popupElement.clientHeight}px`;\n    } else if (alignVCenter) {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - popupElement.clientHeight}px`;\n    } else {\n      top = `${(pageY + offsetTop) - popupElement.clientHeight}px`;\n    }\n    transformOrigin += ' bottom';\n  } else if (openVCenter) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - (popupElement.clientHeight / 2)}px`;\n    } else if (alignTop) {\n      top = `${(pageY + offsetTop) - (popupElement.clientHeight / 2)}px`;\n    } else {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - (popupElement.clientHeight / 2)}px`;\n    }\n    transformOrigin += ' center';\n  } else {\n    if (alignTop) {\n      top = `${pageY + offsetTop}px`;\n    } else if (alignVCenter) {\n      top = `${pageY + ((offsetTop + offsetBottom) / 2)}px`;\n    } else {\n      top = `${pageY + offsetBottom}px`;\n    }\n    transformOrigin += ' top';\n  }\n\n  popupElement.style.setProperty('top', top);\n  popupElement.style.setProperty('left', left);\n  popupElement.style.setProperty('right', 'auto');\n  popupElement.style.setProperty('bottom', 'auto');\n  popupElement.style.setProperty('margin', margin);\n  popupElement.style.setProperty('transform-origin', transformOrigin);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function refreshMenuItems(menuElement) {\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), (menuItem) => {\n    menuItem.setAttribute('tabindex', '-1');\n    MenuItem.attach(menuItem);\n  });\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  popupElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {Element} menuElement\n * @param {MouseEvent|PointerEvent} [event]\n * @param {boolean} [alignTarget=true]\n * @return {boolean} handled\n */\nexport function show(menuElement, event, alignTarget) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (menuElement.getElementsByClassName('mdw-menu__popup')[0]);\n  let changed = false;\n  if (event) {\n    updateMenuPosition(menuElement, popupElement, event, alignTarget);\n  } else {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  if (menuElement.getAttribute('aria-hidden') !== 'false') {\n    menuElement.setAttribute('aria-hidden', 'false');\n    changed = true;\n  }\n  if (changed) {\n    attach(menuElement);\n    const previousFocus = document.activeElement;\n    const newState = { hash: Math.random().toString(36).substr(2, 16) };\n    let previousState = null;\n    if (window.history && window.history.pushState) {\n      if (!window.history.state) {\n        // Create new previous state\n        window.history.replaceState({\n          hash: Math.random().toString(36).substr(2, 16),\n        }, document.title);\n      }\n      previousState = window.history.state;\n      window.history.pushState(newState, document.title);\n      window.addEventListener('popstate', onPopState);\n      window.addEventListener('resize', onWindowResize);\n    }\n    const menuStack = new MenuStack(menuElement, previousFocus, newState, previousState, event);\n    OPEN_MENUS.push(menuStack);\n    refreshMenuItems(menuElement);\n    if (event && !event.detail && ('pointerType' in event) && !event.pointerType) {\n      // Triggered with keyboard event\n      selectNextMenuItem(menuElement);\n    } else {\n      popupElement.focus();\n    }\n  }\n  return changed;\n}\n\n/**\n * @param {Element} menuElement\n * @return {boolean} handled\n */\nexport function hide(menuElement) {\n  if (menuElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  menuElement.setAttribute('aria-hidden', 'true');\n  let stackIndex = -1;\n  OPEN_MENUS.some((stack, index) => {\n    if (stack.element === menuElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const menuStack = OPEN_MENUS[stackIndex];\n    if (menuStack.previousFocus && menuStack.previousFocus instanceof HTMLElement) {\n      menuStack.previousFocus.focus();\n    }\n    OPEN_MENUS.splice(stackIndex, 1);\n    if (menuStack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (menuStack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_MENUS.length) {\n    window.removeEventListener('popstate', onPopState);\n    window.removeEventListener('resize', onWindowResize);\n  }\n  dispatchDomEvent(menuElement, HIDE_EVENT);\n  return true;\n}\n","import { dispatchDomEvent } from '../../core/dom';\n\nexport const CLICK_EVENT = 'mdw:selectioninput-click';\nexport const FOCUS_EVENT = 'mdw:selectioninput-focus';\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function attach(element) {\n  element.addEventListener('keydown', onKeyDown);\n  element.addEventListener('click', onClick);\n  element.addEventListener('focus', onFocus);\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.target instanceof HTMLInputElement) {\n    if (event.key === ' ' || event.key === 'Spacebar') {\n      // Don't pass up Spacebar on native input elements\n      event.stopPropagation();\n    }\n  }\n}\n\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  event.stopPropagation();\n  dispatchDomEvent(/** @type {HTMLElement} */(event.target), CLICK_EVENT);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nfunction onFocus(event) {\n  dispatchDomEvent(/** @type {HTMLElement} */(event.target), FOCUS_EVENT);\n}\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('focus', onFocus);\n}\n","import * as Keyboard from '../../core/aria/keyboard';\nimport * as Attributes from '../../core/aria/attributes';\nimport * as SelectionInput from './input';\n\nexport const CHECKED_CHANGE_EVENT = 'mdw:selection-checkedchange';\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function attach(element) {\n  /** @type {HTMLElement} */\n  const inputElement = (element.getElementsByClassName('mdw-selection__input')[0]);\n  if (inputElement) {\n    SelectionInput.attach(inputElement);\n  }\n  Keyboard.attach(element);\n  element.addEventListener('focus', onActivateEvent);\n  element.addEventListener('click', onActivateEvent);\n  element.addEventListener(Keyboard.SPACEBAR_KEY, onActivateEvent);\n  element.addEventListener(SelectionInput.FOCUS_EVENT, onActivateEvent);\n  element.addEventListener(SelectionInput.CLICK_EVENT, onActivateEvent);\n}\n\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onActivateEvent(event) {\n  if (event.target instanceof HTMLInputElement) {\n    return;\n  }\n  if (event.type === Keyboard.SPACEBAR_KEY) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const selectionElement = (event.currentTarget);\n  if (Attributes.isDisabled(selectionElement)) {\n    return;\n  }\n  if (Attributes.isReadonly(selectionElement)) {\n    return;\n  }\n  if (!selectionElement.hasAttribute('aria-checked')) {\n    return;\n  }\n  if (event.type === 'click' || event.type === SelectionInput.CLICK_EVENT) {\n    if (selectionElement.hasAttribute('mdw-no-autocheck')) {\n      return;\n    }\n  }\n  const role = selectionElement.getAttribute('role');\n  if (event.type === 'focus' || event.type === SelectionInput.FOCUS_EVENT) {\n    if (role !== 'radio') {\n      return;\n    }\n  }\n  const newValue = (role === 'radio' ? true : !Attributes.isChecked(selectionElement));\n  setChecked(selectionElement, newValue, true);\n}\n\n\n/**\n * @param {Element} selectionElement\n * @param {boolean|string} newValue\n * @param {boolean} [dispatchEvent=false]\n * @return {boolean} successful\n */\nexport function setChecked(selectionElement, newValue, dispatchEvent) {\n  return Attributes.setChecked(\n    selectionElement,\n    newValue,\n    dispatchEvent ? CHECKED_CHANGE_EVENT : null\n  );\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:tabitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-tab__icon'),\n    (el) => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport * as Attributes from '../../core/aria/attributes';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateElementSiblings,\n} from '../../core/dom';\n\nexport const ACTIVATE_EVENT = 'mdw:menuitem-activate';\nexport const CHECK_EVENT = 'mdw:menuitem-check';\nexport const UNCHECK_EVENT = 'mdw:menuitem-uncheck';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  // If mouseover is used, an item can still lose focus via keyboard navigation.\n  // An extra event listener would need to be created to catch blur but the cursor\n  // would still remain over the element, thus needing another mousemove event.\n  // Prioritization is given to less event listeners rather than operations per second.\n  element.addEventListener('mousemove', onMouseMove);\n  element.addEventListener('click', onClick);\n  element.addEventListener('keydown', onKeyDown);\n  setupARIA(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function setupARIA(element) {\n  if (element.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  const role = element.getAttribute('role');\n  let useAriaChecked = false;\n  if (role === 'menuitemcheckbox' || role === 'menuitemradio') {\n    useAriaChecked = true;\n  } else if (role !== 'menuitem') {\n    if (element.getElementsByClassName('mdw-menu__check').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemcheckbox');\n    } else if (element.getElementsByClassName('mdw-menu__radio').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemradio');\n    } else {\n      element.setAttribute('role', 'menuitem');\n    }\n  }\n  if (useAriaChecked && !element.hasAttribute('aria-checked')) {\n    element.setAttribute('aria-checked', 'false');\n  }\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__icon'),\n    (el) => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__text'),\n    (el) => el.setAttribute('role', 'text'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__check'),\n    (el) => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__info'),\n    (el) => el.setAttribute('role', 'note'));\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n  if (Attributes.isDisabled(menuItemElement)) {\n    return;\n  }\n  const role = menuItemElement.getAttribute('role');\n  if (role === 'menuitemcheckbox') {\n    toggleChecked(menuItemElement);\n  } else if (role === 'menuitemradio') {\n    setChecked(menuItemElement, true);\n  }\n  dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onMouseMove(event) {\n  /** @type {HTMLElement} */\n  const el = (event.currentTarget);\n  if (!el) {\n    return;\n  }\n  const previousFocus = document.activeElement;\n  if (previousFocus === el) {\n    // Already focused\n    return;\n  }\n  if (el.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  el.focus();\n  if (document.activeElement !== el) {\n    if (document.activeElement !== previousFocus && previousFocus instanceof HTMLElement) {\n      previousFocus.focus();\n    }\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n\n  if (event.key === 'Enter') {\n    event.stopPropagation();\n    event.preventDefault();\n    if (Attributes.isDisabled(menuItemElement)) {\n      return;\n    }\n    onClick(event);\n    return;\n  }\n\n  if (event.key === 'Spacebar' || (event.key === ' ')) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (Attributes.isDisabled(menuItemElement)) {\n      return;\n    }\n    const role = menuItemElement.getAttribute('role');\n    if (role === 'menuitemcheckbox') {\n      toggleChecked(menuItemElement);\n    } else if (role === 'menuitemradio') {\n      setChecked(menuItemElement, true);\n    } else {\n      dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n * @return {boolean} uiChanged\n */\nexport function setChecked(element, checked) {\n  const role = element.getAttribute('role');\n  let isCheckable = false;\n  if (role === 'menuitemcheckbox') {\n    isCheckable = true;\n    if (!dispatchDomEvent(element, checked ? CHECK_EVENT : UNCHECK_EVENT)) {\n      return false;\n    }\n  }\n  if (role === 'menuitemradio') {\n    isCheckable = true;\n    if (checked) {\n      if (!dispatchDomEvent(element, CHECK_EVENT)) {\n        return false;\n      }\n      iterateElementSiblings(element, (sibling) => {\n        if (sibling.getAttribute('role') === 'menuitemradio') {\n          sibling.setAttribute('aria-checked', 'false');\n        }\n      });\n    }\n  }\n  if (!isCheckable) {\n    return false;\n  }\n  element.setAttribute('aria-checked', checked ? 'true' : 'false');\n  return true;\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function toggleChecked(element) {\n  const checked = !Attributes.isChecked(element);\n  return setChecked(element, checked);\n}\n\n/**\n * @param {Element} element\n * @return {boolean} handled\n */\nexport function openSubMenu(element) {\n  const hasPopup = element.getAttribute('aria-haspopup');\n  if (hasPopup !== 'menu' && hasPopup !== 'true') {\n    return false;\n  }\n\n  // TODO: Open new menu\n  return false;\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousemove', onMouseMove);\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-js');\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","\nimport * as Attributes from '../../core/aria/attributes';\nimport * as Keyboard from '../../core/aria/keyboard';\nimport { dispatchDomEvent } from '../../core/dom';\n\nexport const FOCUS_EVENT = 'mdw:datatablecell-focus';\nexport const CHECKED_CHANGE_EVENT = 'mdw:datatablecell-checkedchange';\nexport const SELECTED_CHANGE_EVENT = 'mdw:datatablecell-selectedchange';\n\n/**\n * @param {HTMLTableCellElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.addEventListener('focus', onFocus);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const gridCellElement = (event.currentTarget);\n  dispatchDomEvent(gridCellElement, FOCUS_EVENT);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n\n/**\n * @param {HTMLTableCellElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('focus', onFocus);\n  Keyboard.detach(element);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n// https://www.w3.org/TR/wai-aria-practices/#TreeView\n// https://www.w3.org/TR/wai-aria-practices/examples/landmarks/navigation.html\n\nimport { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\nimport * as Attributes from '../../core/aria/attributes';\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Keyboard from '../../core/aria/keyboard';\n\nimport * as ListItem from './item';\nimport * as ListContent from './content';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-list'), attach);\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function attach(listElement) {\n  let role = listElement.getAttribute('role');\n  if (!role) {\n    let newRole = 'listbox';\n    const parentRole = listElement.parentElement && listElement.parentElement.getAttribute('role');\n    if (parentRole === 'treeitem') {\n      newRole = 'group';\n    } else if (iterateSomeOfArrayLike(listElement.children,\n      (child) => child.hasAttribute('aria-expanded') && child.classList.contains('mdw-list__item'))) {\n      newRole = 'tree';\n    }\n    listElement.setAttribute('role', newRole);\n    role = newRole;\n  }\n\n  setupAria(listElement, role);\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.attach(child);\n    }\n  });\n  iterateArrayLike(listElement.getElementsByClassName('mdw-list'), attach);\n  if (listElement.hasAttribute('mdw-list-js')) {\n    return;\n  }\n  if (role !== 'listbox' && role !== 'tree' && role !== 'radiogroup') {\n    return;\n  }\n\n  switch (role) {\n    case 'tree':\n      RovingTabIndex.setupTabIndexes(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.setupTabIndexes(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.setupTabIndexes(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n      return;\n  }\n\n  listElement.addEventListener(Keyboard.DOWN_ARROW_KEY, onDownArrowKey);\n  listElement.addEventListener(Keyboard.UP_ARROW_KEY, onUpArrowKey);\n  listElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.addEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.addEventListener(ListContent.FOCUS_EVENT, onContentFocusEvent);\n  listElement.setAttribute('mdw-list-js', '');\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onContentFocusEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  const onFocusInteraction = listElement.getAttribute('mdw-on-focus');\n  if (!onFocusInteraction) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.target);\n  if (Attributes.isDisabled(listContentElement)) {\n    return;\n  }\n  onFocusInteraction.split(' ').forEach((interaction) => {\n    switch (interaction) {\n      case 'select':\n        ListContent.setSelected(listContentElement, true);\n        break;\n      default:\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  // List is readonly\n  if (listElement.getAttribute('aria-readonly') === 'true') {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  const listElementRole = listElement.getAttribute('role');\n  if (listElementRole !== 'listbox' && listElementRole !== 'tree') {\n    // Bubble up\n    return;\n  }\n  const { detail } = event;\n  if (detail.value === 'false') {\n    // Item is radio-like and cannot be unselected\n    if (listElement.getAttribute('aria-required') === 'true'\n      && listElement.getAttribute('aria-multiselectable') !== 'true') {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (listElement.getAttribute('aria-multiselectable') !== 'true') {\n    // Item is radio-like and must uncheck others\n    setTimeout(() => {\n      // Wait to see if event is cancelled\n      if (event.defaultPrevented) {\n        return;\n      }\n      const role = itemElement.getAttribute('role');\n      iterateArrayLike(listElement.querySelectorAll(`[role=\"${role}\"][aria-selected=\"true\"]`),\n        (item) => {\n          if (item === itemElement) {\n            return;\n          }\n          item.setAttribute('aria-selected', 'false');\n        });\n    });\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"treeitem\"]'), [currentItem]);\n      break;\n    case 'listbox':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"option\"]'), [currentItem]);\n      break;\n    case 'radiogroup':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"radio\"]'), [currentItem]);\n      break;\n    default:\n  }\n}\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onDownArrowKey(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onUpArrowKey(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {Element} listElement\n * @param {string} role\n * @return {void}\n */\nexport function setupAria(listElement, role = 'tree') {\n  if (!listElement.hasAttribute('role')) {\n    listElement.setAttribute('role', role);\n  }\n  listElement.setAttribute('aria-orientation', 'vertical');\n  if (!listElement.hasAttribute('aria-multiselectable')) {\n    listElement.setAttribute('aria-multiselectable', 'false');\n  }\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function detach(listElement) {\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.detach(child);\n    }\n  });\n  iterateArrayLike(listElement.querySelectorAll(`[role=\"${listElement.getAttribute('role') === 'tree' ? 'treeitem' : 'option'}\"]`),\n    RovingTabIndex.detach);\n  listElement.removeEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.removeEventListener(Keyboard.DOWN_ARROW_KEY, onDownArrowKey);\n  listElement.removeEventListener(Keyboard.UP_ARROW_KEY, onUpArrowKey);\n  listElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.removeAttribute('mdw-list-js');\n}\n","import { getPassiveEventListenerOption } from '../../core/dom';\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function attach(textfieldElement) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.addEventListener('input', onInput, getPassiveEventListenerOption());\n    onInput({ currentTarget: input });\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function detach(textfieldElement) {\n  textfieldElement.removeAttribute('mdw-value-empty');\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.removeEventListener('input', onInput);\n  }\n}\n\n/**\n * @param {Event|{currentTarget:HTMLElement}} event\n * @return {void}\n */\nexport function onInput(event) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement} */\n  const inputElement = (event.currentTarget);\n  if (inputElement.parentElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(/** @type {HTMLTextAreaElement} */ (inputElement));\n  }\n  updateInputEmptyState(inputElement);\n}\n\n/**\n * @param {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} inputElement\n * @return {void} */\nexport function updateInputEmptyState(inputElement) {\n  const attrName = 'mdw-value-empty';\n  const textfieldElement = inputElement.parentElement;\n  if (inputElement.value) {\n    if (textfieldElement.hasAttribute(attrName)) {\n      textfieldElement.removeAttribute(attrName);\n    }\n  } else if (!textfieldElement.hasAttribute(attrName)) {\n    textfieldElement.setAttribute(attrName, '');\n  }\n}\n\n/**\n * @param {HTMLTextAreaElement} inputElement\n * @return {number} Single row height */\nexport function updateTextAreaSize(inputElement) {\n  const previousRowsAttrValue = inputElement.getAttribute('rows');\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = 1;\n  const { height, paddingTop } = window.getComputedStyle(inputElement);\n  if (!height || height === 'auto') {\n    if (previousRowsAttrValue == null) {\n      inputElement.removeAttribute('rows');\n    } else {\n      inputElement.setAttribute('rows', previousRowsAttrValue);\n    }\n    return -1;\n  }\n  const heightPx = parseInt(height.replace('px', ''), 10);\n  const paddingTopPx = parseInt(paddingTop.replace('px', ''), 10);\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = Math.floor((inputElement.scrollHeight - paddingTopPx) / heightPx);\n  return heightPx;\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {string|Date|number}\n */\nexport function getValue(textfieldElement) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if ((input instanceof HTMLTextAreaElement) || (input instanceof HTMLSelectElement)) {\n    return input.value;\n  }\n  switch (input.type) {\n    case 'number':\n    case 'range':\n      return Number.isNaN(input.valueAsNumber) ? null : input.valueAsNumber;\n    case 'date':\n    case 'datetime-local':\n    case 'time':\n      if (input.value == null) {\n        return null;\n      }\n      return new Date(\n        (new Date(input.valueAsNumber).getTimezoneOffset() * 60 * 1000) + input.valueAsNumber\n      );\n    default:\n      return input.value;\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @param {string|Date|number} [value]\n * @return {void}\n */\nexport function setValue(textfieldElement, value) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (value == null) {\n    input.value = null;\n  } else if (input instanceof HTMLTextAreaElement || input instanceof HTMLSelectElement) {\n    if (value instanceof Date) {\n      input.value = value.toString();\n    } else if (typeof value === 'string') {\n      input.value = value;\n    } else {\n      input.value = value.toString(10);\n    }\n  } else if (value instanceof Date) {\n    if (input.type === 'time') {\n      const hoursStr = `${value.getHours() < 10 ? '0' : ''}${value.getHours()}`;\n      const minutesStr = `${value.getMinutes() < 10 ? '0' : ''}${value.getMinutes()}`;\n      const secondsStr = `${value.getSeconds() < 10 ? '0' : ''}${value.getSeconds()}`;\n      input.value = `${hoursStr}:${minutesStr}:${secondsStr}.${value.getMilliseconds()}`;\n    } else {\n      switch (input.type) {\n        case 'date':\n          input.valueAsDate = value;\n          break;\n        case 'datetime-local':\n          input.valueAsNumber = value.getTime() - (value.getTimezoneOffset() * 60 * 1000);\n          break;\n        case 'number':\n        case 'range':\n          input.valueAsNumber = value.getTime();\n          break;\n        default:\n          input.value = value.toString();\n      }\n    }\n  } else if (typeof value === 'string') {\n    input.value = value;\n  } else {\n    switch (input.type) {\n      case 'date':\n      case 'time':\n      case 'datetime-local':\n      case 'number':\n      case 'range':\n        input.valueAsNumber = value;\n        break;\n      default:\n        input.value = value.toString();\n    }\n  }\n  updateInputEmptyState(input);\n  if (input instanceof HTMLTextAreaElement && textfieldElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(input);\n  }\n}\n","\nimport * as Attributes from '../../core/aria/attributes';\nimport * as Keyboard from '../../core/aria/keyboard';\nimport * as DataTableCell from './cell';\nimport { dispatchDomEvent, iterateArrayLike } from '../../core/dom';\n\nexport const FOCUS_EVENT = 'mdw:datatablerow-focus';\nexport const SELECTED_CHANGE_EVENT = 'mdw:datatablerow-selectedchange';\n\n/**\n * @param {HTMLTableRowElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.setAttribute('role', 'row');\n  element.addEventListener('focus', onFocus);\n  iterateArrayLike(element.cells, DataTableCell.attach);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLTableRowElement} */\n  const rowElement = (event.currentTarget);\n  dispatchDomEvent(rowElement, FOCUS_EVENT);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n\n/**\n * @param {HTMLTableRowElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('focus', onFocus);\n  Keyboard.detach(element);\n  iterateArrayLike(element.cells, DataTableCell.detach);\n}\n","import * as Keyboard from '../../core/aria/keyboard';\nimport { iterateArrayLike, getChildElementByClass } from '../../core/dom';\nimport * as ListContent from './content';\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attach(listItemElement) {\n  attachCore(listItemElement);\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.attach);\n  if (listItemElement.hasAttribute('aria-expanded')) {\n    if (!listItemElement.hasAttribute('mdw-expander-js')) {\n      listItemElement.setAttribute('mdw-pre-expander-js', '');\n      setTimeout(() => {\n        if (listItemElement.hasAttribute('mdw-pre-expander-js')) {\n          listItemElement.removeAttribute('mdw-pre-expander-js');\n          listItemElement.setAttribute('mdw-expander-js', '');\n        }\n      }, 500);\n    }\n    setExpanded(listItemElement, isExpanded(listItemElement));\n  }\n  listItemElement.addEventListener(ListContent.ACTIVATE_EVENT, onChildContentActivate);\n  listItemElement.addEventListener('keydown', onKeyDown);\n  Keyboard.attach(listItemElement);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attachCore(listItemElement) {\n  setupAria(listItemElement);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {boolean}\n */\nexport function isExpanded(listItemElement) {\n  return (listItemElement.getAttribute('aria-expanded') === 'true');\n}\n\n/**\n * @param {Element} listItemElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(listItemElement, value) {\n  listItemElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n  iterateArrayLike(listItemElement.querySelectorAll('[role=\"treeitem\"]'), (treeitem) => {\n    treeitem.setAttribute('mdw-skip-tab', value ? 'false' : 'true');\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onChildContentActivate(event) {\n  /** @type {HTMLElement} */\n  const activatedElement = (event.target);\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!activatedElement || activatedElement.parentElement !== element) {\n    return;\n  }\n  if (element.hasAttribute('aria-expanded')) {\n    event.stopPropagation();\n    setExpanded(element, !isExpanded(element));\n  }\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function setupAria(listItemElement) {\n  let isTreeItem = null;\n  let roleIsNone = false;\n  if (!listItemElement.hasAttribute('role')) {\n    if (listItemElement.hasAttribute('aria-expanded')) {\n      listItemElement.setAttribute('role', 'treeitem');\n      isTreeItem = true;\n      roleIsNone = false;\n    } else {\n      listItemElement.setAttribute('role', 'none');\n      isTreeItem = false;\n      roleIsNone = true;\n    }\n  }\n  if (isTreeItem !== false || listItemElement.getAttribute('role') === 'treeitem') {\n    const activatorContent = getChildElementByClass(listItemElement, 'mdw-list__content');\n    if (activatorContent && !activatorContent.hasAttribute('role')) {\n      activatorContent.setAttribute('role', 'none');\n    }\n  }\n  if (!roleIsNone) {\n    return;\n  }\n  const parentRole = listItemElement.parentElement && listItemElement.parentElement.getAttribute('role');\n  if (!parentRole) {\n    return;\n  }\n  const contentChild = getChildElementByClass(listItemElement, 'mdw-list__content');\n  if (!contentChild) {\n    return;\n  }\n  if (contentChild.hasAttribute('role')) {\n    return;\n  }\n  switch (parentRole) {\n    case 'listbox':\n      contentChild.setAttribute('role', 'option');\n      break;\n    case 'radiogroup':\n      contentChild.setAttribute('role', 'radio');\n      break;\n    case 'group':\n    case 'tree':\n    case 'treeitem':\n      contentChild.setAttribute('role', 'treeitem');\n      break;\n    default:\n    case 'list':\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  if (document.activeElement !== event.currentTarget) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  if (!element.hasAttribute('aria-expanded')) {\n    return;\n  }\n  const activatorContent = getChildElementByClass(element, 'mdw-list__content');\n  if (!activatorContent) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  activatorContent.dispatchEvent(newEvent);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function detach(listItemElement) {\n  Keyboard.detach(listItemElement);\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.detach);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:bottomnavitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-bottomnav__icon'),\n    (el) => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#alert\n// https://www.w3.org/TR/wai-aria-practices/#alert\n\nimport {\n  dispatchDomEvent,\n  findElementParentByClassName,\n  nextTick,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\n/**\n * @typedef SnackbarCreateOptions\n * @prop {!string} text\n * @prop {!string} [buttonText]\n * @prop {string} [buttonInk='primary']\n * @prop {boolean} [stacked=false]\n * @prop {number|boolean} [autoHide=4] Auto hide time in seconds\n * @prop {boolean} [autoDestroy=true] Destroy element after hide\n * @prop {Element} [parent] Parent element to which to append\n * @prop {boolean} [show=true] Show element after creation\n * @prop {boolean} [skipQueue=false] Skip queue\n */\n\nclass SnackbarQueueItem {\n  /**\n   * @param {Element} element\n   * @param {SnackbarCreateOptions} [options]\n   */\n  constructor(element, options) {\n    this.element = element;\n    this.options = options;\n    this.hideTimeout = null;\n  }\n\n  /** @return {void} */\n  clearHideTimeout() {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n      this.hideTimeout = null;\n    }\n  }\n}\n\n/** @type {SnackbarQueueItem[]} */\nconst SNACKBAR_QUEUE = [];\n\nexport const HIDE_EVENT = 'mdw:snackbar-hide';\nexport const SHOW_EVENT = 'mdw:snackbar-show';\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function attach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.attach(button);\n    button.addEventListener('click', onButtonClick);\n  }\n  snackbarElement.setAttribute('mdw-js', '');\n  snackbarElement.addEventListener('animationend', onAnimationEnd);\n  snackbarElement.addEventListener('keydown', onKeyDown);\n  setupARIA(snackbarElement);\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function setupARIA(snackbarElement) {\n  if (snackbarElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  snackbarElement.setAttribute('role', 'alert');\n  snackbarElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    // Allow users to close snackbar with escape, for accessibilty reasons\n    event.stopPropagation();\n    event.preventDefault();\n    /** @type {Element} */\n    const snackbarElement = (event.currentTarget);\n    hide(snackbarElement);\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function detach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.detach(button);\n    button.removeEventListener('click', onButtonClick);\n  }\n  // Remove timeouts and stacks\n  SNACKBAR_QUEUE.slice().reverse().forEach((queue, reverseIndex, array) => {\n    if (queue.element === snackbarElement) {\n      queue.clearHideTimeout();\n      const index = array.length - reverseIndex - 1;\n      SNACKBAR_QUEUE.splice(index, 1);\n    }\n  });\n  snackbarElement.removeAttribute('mdw-js');\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onButtonClick(event) {\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (buttonElement instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const snackbarElement = findElementParentByClassName(buttonElement, 'mdw-snackbar');\n  hide(snackbarElement);\n}\n\n/**\n * @param {Element} element\n * @return {SnackbarQueueItem}\n */\nexport function findNextQueueItem(element) {\n  let queue = null;\n  SNACKBAR_QUEUE.some((q) => {\n    if (q.element === element) {\n      queue = q;\n      return true;\n    }\n    return false;\n  });\n  return queue;\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  handleAnimationChange(/** @type {Element} */ (event.currentTarget));\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function handleAnimationChange(snackbarElement) {\n  const showing = snackbarElement.getAttribute('aria-hidden') === 'false';\n  if (showing) {\n    const currentQueueItem = findNextQueueItem(snackbarElement);\n    if (currentQueueItem && currentQueueItem.hideTimeout) {\n      return;\n    }\n    const autoHideString = snackbarElement.getAttribute('mdw-autohide');\n    if (autoHideString == null) {\n      return;\n    }\n    const timeInSeconds = parseFloat(autoHideString) || 4;\n    if (timeInSeconds < 0) {\n      return;\n    }\n    const timeout = setTimeout(() => {\n      hide(snackbarElement);\n    }, timeInSeconds * 1000);\n    if (currentQueueItem) {\n      currentQueueItem.hideTimeout = timeout;\n    }\n    return;\n  }\n\n  const nextQueueItem = findNextQueueItem(snackbarElement);\n  if (nextQueueItem) {\n    update(snackbarElement, nextQueueItem.options);\n    show(snackbarElement);\n    return;\n  }\n  if (snackbarElement.hasAttribute('mdw-autodestroy')) {\n    if (snackbarElement.parentElement) {\n      snackbarElement.parentElement.removeChild(snackbarElement);\n    }\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {boolean} changed\n */\nexport function hide(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, HIDE_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'true');\n  const currentQueueItem = findNextQueueItem(snackbarElement);\n  if (currentQueueItem) {\n    SNACKBAR_QUEUE.splice(SNACKBAR_QUEUE.indexOf(currentQueueItem), 1);\n  }\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {?Element} snackbarElement\n * @return {boolean} changed\n */\nexport function show(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'false') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, SHOW_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'false');\n  attach(snackbarElement);\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {SnackbarCreateOptions} options\n * @return {void}\n */\nexport function update(element, options) {\n  element.classList.add('mdw-snackbar');\n  if (!element.classList.contains('mdw-theme')) {\n    // Guidelines conflict stating a background should be fully opaque\n    // But says spec says to use #000000 with 87% opacity\n    // Calculated against white, opaque value is #212121 (Gray-900)\n    element.classList.add('mdw-theme');\n    element.setAttribute('mdw-surface', 'background 900');\n    element.setAttribute('mdw-dark', '');\n  }\n  let span = element.getElementsByTagName('span')[0];\n  if (span) {\n    // To trigger screen readers, we destroy and create a new span and textnode\n    span.parentElement.removeChild(span);\n  }\n  span = document.createElement('span');\n  if (element.firstChild) {\n    element.insertBefore(span, element.firstChild);\n  } else {\n    element.appendChild(span);\n  }\n  const textNode = document.createTextNode(options.text);\n  span.appendChild(textNode);\n  let button = element.getElementsByClassName('mdw-button')[0];\n  if (options.buttonText) {\n    if (!button) {\n      button = document.createElement('a');\n      element.appendChild(button);\n    }\n    setTextNode(button, options.buttonText);\n    button.classList.add('mdw-button');\n    if (typeof options.buttonInk === 'undefined') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', 'secondary');\n    } else if (typeof options.buttonInk === 'string') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', options.buttonInk);\n    } else {\n      // Don't set attribute if null is passed\n    }\n  } else if (button && button.parentElement) {\n    button.parentElement.removeChild(button);\n  }\n  if (options.stacked) {\n    element.setAttribute('mdw-stacked', '');\n  }\n  if (options.autoHide !== false) {\n    let timeInSeconds;\n    if (options.autoHide === true) {\n      timeInSeconds = 4;\n    } else if (options.autoHide == null) {\n      timeInSeconds = 4;\n    } else {\n      timeInSeconds = options.autoHide;\n    }\n    if (timeInSeconds > 0) {\n      element.setAttribute('mdw-autohide', timeInSeconds.toString());\n    }\n  }\n  if (options.autoDestroy !== false) {\n    element.setAttribute('mdw-autodestroy', '');\n  }\n}\n\n/**\n * Creates a Snackbar element if required and adds to show queue\n * @param {SnackbarCreateOptions} options\n * @return {HTMLElement}\n */\nexport function create(options) {\n  let element;\n  let newlyCreated = false;\n  if (options.parent) {\n    /** @type {HTMLElement} */\n    element = (options.parent.getElementsByClassName('mdw-snackbar')[0]);\n  }\n  if (!element) {\n    element = document.createElement('div');\n    if (options.parent) {\n      options.parent.appendChild(element);\n    }\n    newlyCreated = true;\n  }\n  const queue = new SnackbarQueueItem(element, options);\n  if (options.skipQueue) {\n    SNACKBAR_QUEUE.splice(0, 0, queue);\n  } else {\n    SNACKBAR_QUEUE.push(queue);\n  }\n\n  if (options.show !== false) {\n    if (newlyCreated) {\n      // Update after show to trigger a text change\n      update(element, options);\n      show(element);\n      update(element, options);\n    } else {\n      show(element);\n    }\n  }\n  return element;\n}\n","// https://www.w3.org/TR/wai-aria-practices/#grid\n\nimport * as DataTableCell from './cell';\nimport * as DataTableColumnHeader from './columnheader';\nimport * as DataTableRowHeader from './rowheader';\nimport * as DataTableRow from './row';\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Keyboard from '../../core/aria/keyboard';\n\nimport { iterateArrayLike } from '../../core/dom';\n\nexport const CELL_TABINDEX_QUERIES = [\n  'td:not([mdw-autofocus-widget])',\n  'th:not([mdw-autofocus-widget])',\n  'td[mdw-autofocus-widget] .mdw-datatable__widget',\n  'th[mdw-autofocus-widget] .mdw-datatable__widget',\n];\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-datatable-js', '');\n\n  const table = getTable(element);\n  table.setAttribute('role', 'grid');\n  const headerRow = getHeaderRow(element);\n  const tbody = getTableBody(element);\n\n  iterateArrayLike(headerRow.getElementsByTagName('th'), DataTableColumnHeader.attach);\n  iterateArrayLike(tbody.getElementsByTagName('th'), DataTableRowHeader.attach);\n\n  const tableRows = tbody.getElementsByTagName('tr');\n  iterateArrayLike(tableRows, DataTableRow.attach);\n\n  const rowFocusable = element.hasAttribute('mdw-row-focusable');\n  if (rowFocusable) {\n    RovingTabIndex.setupTabIndexes(tableRows);\n  }\n  const cellFocusable = element.hasAttribute('mdw-cell-focusable');\n  if (cellFocusable) {\n    RovingTabIndex.setupTabIndexes(tbody.querySelectorAll(CELL_TABINDEX_QUERIES.join(',')));\n  }\n\n  element.addEventListener(DataTableRow.FOCUS_EVENT, onItemFocus);\n  element.addEventListener(DataTableRow.SELECTED_CHANGE_EVENT, onSelectedChange);\n  element.addEventListener(DataTableCell.FOCUS_EVENT, onItemFocus);\n  element.addEventListener(DataTableCell.SELECTED_CHANGE_EVENT, onSelectedChange);\n  element.addEventListener(DataTableColumnHeader.SORT_EVENT, onSort);\n  element.addEventListener(Keyboard.SPACEBAR_KEY, onKeyboard);\n  element.addEventListener(Keyboard.UP_ARROW_KEY, onKeyboard);\n  element.addEventListener(Keyboard.DOWN_ARROW_KEY, onKeyboard);\n  element.addEventListener(Keyboard.FORWARD_ARROW_KEY, onKeyboard);\n  element.addEventListener(Keyboard.BACK_ARROW_KEY, onKeyboard);\n  element.addEventListener(Keyboard.HOME_KEY, onKeyboard);\n  element.addEventListener(Keyboard.END_KEY, onKeyboard);\n  element.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChange(event) {\n  const selected = event.detail.value === 'true';\n  /** @type {HTMLElement} */\n  const dataTableElement = (event.currentTarget);\n  const hasSelection = selected || dataTableElement.querySelector('td[aria-selected=\"true\"],tr[aria-selected=\"true\"]');\n  if (hasSelection) {\n    dataTableElement.setAttribute('mdw-has-selection', '');\n  } else {\n    dataTableElement.removeAttribute('mdw-has-selection');\n  }\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onItemFocus(event) {\n  /** @type {HTMLElement} */\n  const datatableElement = (event.currentTarget);\n  const onFocusInteraction = datatableElement.getAttribute('mdw-on-focus');\n  if (!onFocusInteraction) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (itemElement.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  onFocusInteraction.split(' ').forEach((interaction) => {\n    switch (interaction) {\n      case 'select':\n        if (itemElement instanceof HTMLTableRowElement) {\n          DataTableRow.setSelected(itemElement, true);\n        } else {\n          DataTableCell.setSelected(itemElement, true);\n        }\n        break;\n      default:\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSort(event) {\n  /** @type {HTMLElement} */\n  const datatableElement = (event.currentTarget);\n  /** @type {HTMLTableHeaderCellElement} */\n  const cell = (event.target);\n  sortColumn(datatableElement, cell.cellIndex, event.detail.sort === 'ascending');\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onRowHeaderCheckedChange(event) {\n  /** @type {HTMLTableHeaderCellElement} */\n  const cell = (event.target);\n  const row = cell.parentElement;\n  DataTableRow.setSelected(row, event.detail.value);\n}\n\n/**\n * @param {Element} datatableElement\n * @param {number} columnIndex\n * @param {boolean} ascending\n * @return {void}\n */\nexport function sortColumn(datatableElement, columnIndex, ascending = true) {\n  if (datatableElement.hasAttribute('mdw-datatable-adapter')) {\n    return;\n  }\n  iterateArrayLike(datatableElement.getElementsByTagName('th'), (th) => {\n    if (th.cellIndex === columnIndex) {\n      th.setAttribute('aria-sort', ascending ? 'ascending' : 'descending');\n    } else if (th.hasAttribute('aria-sort')) {\n      th.setAttribute('aria-sort', 'none');\n    }\n  });\n\n  /** @type {HTMLTableSectionElement} */\n  const tbody = getTableBody(datatableElement);\n  const rows = [];\n  for (let i = tbody.rows.length - 1; i >= 0; i -= 1) {\n    rows.push(tbody.rows.item(i));\n    tbody.deleteRow(i);\n  }\n  rows.sort((a, b) => {\n    const aCell = a.cells.item(columnIndex);\n    const bCell = b.cells.item(columnIndex);\n    const aText = aCell.textContent;\n    const bText = bCell.textContent;\n    if (aCell.dataset.type === 'number') {\n      return parseFloat(bText) - parseFloat(aText);\n    }\n    return bText.localeCompare(aText);\n  });\n  if (ascending) {\n    rows.reverse();\n  }\n  const fragment = document.createDocumentFragment();\n  rows.forEach((row) => {\n    fragment.appendChild(row);\n  });\n  tbody.appendChild(fragment);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  /** @type {HTMLElement} */\n  const dataTableElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const emitter = (event.target);\n\n  const row = (emitter instanceof HTMLTableRowElement && emitter);\n  const cell = (!row && emitter instanceof HTMLTableCellElement && emitter);\n  if (!row && !cell) {\n    return;\n  }\n  event.stopPropagation();\n  RovingTabIndex.removeTabIndex(dataTableElement.querySelectorAll(row ? 'tr' : CELL_TABINDEX_QUERIES.join(',')), [emitter]);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onKeyboard(event) {\n  /** @type {HTMLElement} */\n  const dataTableElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const emitter = (event.target);\n  let current = document.activeElement;\n\n  let row = (emitter instanceof HTMLTableRowElement && emitter);\n  const cell = (!row && emitter instanceof HTMLTableCellElement && emitter);\n  if (!row && !cell) {\n    return;\n  }\n  if (!row) {\n    /** @type {HTMLTableRowElement} */\n    row = (cell.parentElement);\n  }\n\n  let checkNavKeys = false;\n  switch (event.type) {\n    case Keyboard.SPACEBAR_KEY:\n      if (event.detail.ctrlKey || event.detail.altKey || event.detail.metaKey) {\n        return;\n      }\n      if (!event.detail.shiftKey) {\n        return;\n      }\n      if (!row.hasAttribute('aria-selected')) {\n        return;\n      }\n      DataTableRow.setSelected(row, row.getAttribute('aria-selected') !== 'true', true);\n      break;\n    default:\n      checkNavKeys = true;\n  }\n\n  if (checkNavKeys) {\n    // Keyboard Navigation\n    /** @type {ArrayLike<HTMLElement>} */\n    let searchElements;\n    let reverse = false;\n    let loop = false;\n    switch (event.type) {\n      case Keyboard.UP_ARROW_KEY:\n        reverse = true;\n        // eslint-disable-next-line no-fallthrough\n      case Keyboard.DOWN_ARROW_KEY:\n        if (event.detail.ctrlKey || event.detail.altKey || event.detail.metaKey) {\n          return;\n        }\n        if (cell) {\n          searchElements = getTableBody(dataTableElement).querySelectorAll(\n            CELL_TABINDEX_QUERIES.map((q) => `${q}:nth-child(${cell.cellIndex + 1})`).join(',')\n          );\n        } else {\n          searchElements = getTableBody(dataTableElement).getElementsByTagName('tr');\n        }\n        break;\n      case Keyboard.BACK_ARROW_KEY:\n        reverse = true;\n        // eslint-disable-next-line no-fallthrough\n      case Keyboard.FORWARD_ARROW_KEY:\n        if (event.detail.ctrlKey || event.detail.altKey || event.detail.metaKey) {\n          return;\n        }\n        if (!cell) {\n          return;\n        }\n        searchElements = cell.parentElement.querySelectorAll(CELL_TABINDEX_QUERIES.join(','));\n        break;\n      case Keyboard.END_KEY:\n        reverse = true;\n        // eslint-disable-next-line no-fallthrough\n      case Keyboard.HOME_KEY:\n        if (event.detail.altKey || event.detail.metaKey) {\n          return;\n        }\n        if (!cell) {\n          return;\n        }\n        if (event.detail.ctrlKey) {\n          searchElements = getTableBody(dataTableElement).querySelectorAll(CELL_TABINDEX_QUERIES.join(','));\n        } else {\n          searchElements = cell.parentElement.querySelectorAll(CELL_TABINDEX_QUERIES.join(','));\n        }\n        cell.setAttribute('tabindex', '-1');\n        current = null;\n        loop = true;\n        break;\n      default:\n        return;\n    }\n    RovingTabIndex.selectNext(searchElements, current, loop, reverse);\n  }\n\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-datatable-js');\n  element.removeEventListener(DataTableRow.FOCUS_EVENT, onItemFocus);\n  element.removeEventListener(DataTableCell.FOCUS_EVENT, onItemFocus);\n  element.removeEventListener(DataTableColumnHeader.SORT_EVENT, onSort);\n  element.removeEventListener(Keyboard.UP_ARROW_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.DOWN_ARROW_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.FORWARD_ARROW_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.BACK_ARROW_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.HOME_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.END_KEY, onKeyboard);\n  element.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLElement}\n */\nexport function getScroller(datatableElement) {\n  /** @type {HTMLElement} */\n  let scroller = (datatableElement.getElementsByClassName('mdw-datatable__scroller')[0]);\n  if (!scroller) {\n    scroller = document.createElement('div');\n    scroller.classList.add('mdw-datatable__scroller');\n    const footer = datatableElement.getElementsByClassName('mdw-datatable__footer')[0];\n    if (footer) {\n      datatableElement.insertBefore(scroller, footer);\n    } else {\n      datatableElement.appendChild(scroller);\n    }\n    // Move table into scroller if it exists\n    const table = datatableElement.getElementsByTagName('table')[0];\n    if (table) {\n      table.parentElement.removeChild(table);\n      scroller.appendChild(table);\n    }\n  }\n  return scroller;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableElement}\n */\nexport function getTable(datatableElement) {\n  if (datatableElement instanceof HTMLTableElement) {\n    return datatableElement;\n  }\n  let table = datatableElement.getElementsByTagName('table')[0];\n  if (!table) {\n    const scroller = getScroller(datatableElement);\n    table = document.createElement('table');\n    scroller.appendChild(table);\n  }\n  return table;\n}\n\n/**\n * @param {Element} tableElement\n * @return {HTMLTableRowElement}\n */\nexport function getHeaderRow(tableElement) {\n  let thead = tableElement.getElementsByTagName('thead')[0];\n  if (!thead) {\n    const table = getTable(tableElement);\n    thead = document.createElement('thead');\n    table.appendChild(thead);\n  }\n  let headerRow = thead.getElementsByTagName('tr')[0];\n  if (!headerRow) {\n    headerRow = document.createElement('tr');\n    thead.appendChild(headerRow);\n  }\n  return headerRow;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableSectionElement}\n */\nexport function getTableBody(datatableElement) {\n  let tbody = datatableElement.getElementsByTagName('tbody')[0];\n  if (!tbody) {\n    const table = getTable(datatableElement);\n    tbody = document.createElement('tbody');\n    table.appendChild(tbody);\n  }\n  return tbody;\n}\n","import * as Keyboard from '../../core/aria/keyboard';\nimport * as Attributes from '../../core/aria/attributes';\nimport { dispatchDomEvent } from '../../core/dom';\nimport * as Cell from './cell';\n\nexport const SORT_EVENT = 'mdw:datatablecolumnheader-sort';\n\n/**\n * @param {HTMLTableHeaderCellElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.setAttribute('role', 'columnheader');\n  element.addEventListener('click', onClick);\n  Cell.attach(element);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  /** @type {HTMLElement} */\n  const columnHeaderElement = (event.currentTarget);\n  if (Attributes.isDisabled(columnHeaderElement)) {\n    return;\n  }\n  const ariaSort = columnHeaderElement.getAttribute('aria-sort');\n  if (!ariaSort) {\n    return;\n  }\n  const sort = (ariaSort === 'ascending' ? 'descending' : 'ascending');\n  const detail = { sort };\n  dispatchDomEvent(columnHeaderElement, SORT_EVENT, detail);\n}\n\n\n/**\n * @param {HTMLTableHeaderCellElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('click', onClick);\n  Keyboard.detach(element);\n  Cell.detach(element);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as Keyboard from './keyboard';\nimport * as Attributes from './attributes';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'tab');\n  element.setAttribute('mdw-aria-tab-js', '');\n  element.addEventListener('keydown', onKeyDown);\n  Keyboard.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  Keyboard.detach(element);\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-tab-js');\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  if (Attributes.setSelected(element, value, dispatchEventName)) {\n    Attributes.setCurrent(element, value);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Remap Space and Enter as Click\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  element.dispatchEvent(newEvent);\n}\n","import DomAdapter from '../dom/index';\nimport * as ListItem from '../../components/list/item';\n\n/**\n * @template T1\n * @template T2\n * @typedef {import('../dom/index').DomAdapterCreateOptions<T1,T2>} DomAdapterCreateOptions<T1,T2>\n */\n\n/**\n * @param {HTMLLIElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyListAdapterRenderer(element, data) {\n  let primaryText = element.getElementsByClassName('mdw-list__text')[0];\n  if (!primaryText) {\n    let contentElement = element.getElementsByClassName('mdw-list__content')[0];\n    if (!contentElement) {\n      contentElement = document.createElement('div');\n      contentElement.className = 'mdw-list__content';\n      element.appendChild(contentElement);\n    }\n    primaryText = document.createElement('div');\n    primaryText.className = 'mdw-list__text';\n    contentElement.appendChild(primaryText);\n    ListItem.attach(element);\n  }\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      s = new String(data).toString(); // eslint-disable-line no-new-wrappers\n    }\n  }\n  if (primaryText.textContent !== s) {\n    primaryText.textContent = s;\n  }\n}\n\n/**\n * @template T\n * @typedef {Object} ListAdapterCreateOptions\n * @prop {HTMLElement} element\n * @prop {Array<T>} datasource\n * @prop {function(HTMLLIElement, T):void} [render={function(HTMLIElement,T):void}]\n */\n\n/**\n * @template T\n * @extends {DomAdapter<T, HTMLLIElement>}\n * */\nexport default class ListAdapter extends DomAdapter {\n  /** @param {ListAdapterCreateOptions<T>} options */\n  constructor(options) {\n    super(options);\n    if (!options.render) {\n      this.render = AnyListAdapterRenderer;\n    }\n    this.create = ListAdapter.create;\n  }\n\n  static create() {\n    const element = document.createElement('li');\n    element.classList.add('mdw-list__item');\n    return element;\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport { iterateArrayLike } from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Keyboard from '../../core/aria/keyboard';\nimport * as BottomNavItem from './item';\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function attach(bottomnavElement) {\n  setupARIA(bottomnavElement);\n  /** @type {Element} */\n  let selectedItem;\n  const items = bottomnavElement.getElementsByClassName('mdw-bottomnav__item');\n\n  iterateArrayLike(items, (item) => {\n    BottomNavItem.attach(item);\n    if (!selectedItem && item.getAttribute('aria-selected') === 'true') {\n      selectedItem = item;\n    }\n  });\n  if (!selectedItem) {\n    selectedItem = items[0];\n  }\n  if (selectedItem) {\n    BottomNavItem.setSelected(selectedItem, true, true);\n  }\n  RovingTabIndex.setupTabIndexes(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n  bottomnavElement.addEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.addEventListener(Keyboard.FORWARD_ARROW_KEY, onForwardsRequested);\n  bottomnavElement.addEventListener(Keyboard.BACK_ARROW_KEY, onBackwardsRequested);\n  bottomnavElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(bottomnavElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectNext(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function setupARIA(bottomnavElement) {\n  bottomnavElement.setAttribute('role', 'tablist');\n  bottomnavElement.setAttribute('aria-multiselectable', 'false');\n  bottomnavElement.setAttribute('aria-orientation', 'horizontal');\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function detach(bottomnavElement) {\n  bottomnavElement.removeEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.removeEventListener(Keyboard.FORWARD_ARROW_KEY, onForwardsRequested);\n  bottomnavElement.removeEventListener(Keyboard.BACK_ARROW_KEY, onBackwardsRequested);\n  bottomnavElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  iterateArrayLike(bottomnavElement.getElementsByClassName('mdw-bottomnav__item'), BottomNavItem.detach);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  iterateArrayLike(bottomnavElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      BottomNavItem.setSelected(item, false);\n    }\n  });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#combobox\n\nimport { iterateSomeOfArrayLike, iterateArrayLike, getTextNode } from '../../core/dom';\n\nimport * as List from '../../components/list/index';\nimport * as ListContent from '../../components/list/content';\nimport * as TextField from '../../components/textfield/index';\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction containsTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) !== -1;\n}\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction startsWithTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) === 0;\n}\n\n/**\n * @param {Element} item\n * @return {string}\n */\nfunction defaultItemTextParser(item) {\n  if (item.hasAttribute('data-mdw-search-text')) {\n    return item.getAttribute('data-mdw-search-text');\n  }\n  let textElement;\n  [\n    'mdw-list__text-line',\n    'mdw-list__text',\n    'mdw-list__content',\n  ].some((className) => {\n    textElement = item.getElementsByClassName(className)[0];\n    return textElement != null;\n  });\n\n  const textNode = textElement ? getTextNode(textElement) : getTextNode(item);\n  if (textNode) {\n    return textNode.textContent || '';\n  }\n  return '';\n}\n\n/**\n * @param {Element} list\n * @param {boolean} [backwards=false]\n * @return {Element} sibling\n */\nfunction selectSibling(list, backwards) {\n  const current = list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n  const items = list.querySelectorAll('[role=\"option\"]:not([aria-hidden=\"true\"]):not([disabled])');\n  let sibling;\n  if (current && current.getAttribute('aria-hidden') !== 'true') {\n    iterateSomeOfArrayLike(items, (item, index) => {\n      if (item !== current) {\n        return false;\n      }\n      if (backwards) {\n        sibling = items[index - 1];\n      } else {\n        sibling = items[index + 1];\n      }\n      return true;\n    });\n  } else if (backwards) {\n    sibling = items[items.length - 1];\n  } else {\n    sibling = items[0];\n  }\n  if (sibling && sibling !== current) {\n    if (current) {\n      current.setAttribute('aria-selected', 'false');\n    }\n    sibling.setAttribute('aria-selected', 'true');\n    return sibling;\n  }\n  return null;\n}\n\n/**\n * @param {Element} listItem\n * @return {void}\n */\nfunction scrollItemIntoView(listItem) {\n  /**\n   * @param {Element} el\n   * @return {number}\n   */\n  function getElementVisibility(el) {\n    let rect = el.getBoundingClientRect();\n    const { top, height } = rect;\n    let next = el.parentElement;\n    do {\n      rect = next.getBoundingClientRect();\n      if ((top + height) > rect.bottom) {\n        // bottom clipped\n        return 1;\n      }\n      if (top < rect.top) {\n        // top clipped\n        return -1;\n      }\n      next = next.parentElement;\n    } while (next !== document.body);\n    if (top < 0) {\n      return -1;\n    }\n    if ((top + height) > document.documentElement.clientHeight) {\n      return 1;\n    }\n    return 0;\n  }\n  const visibility = getElementVisibility(listItem);\n  if (visibility < 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  } else if (visibility > 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  }\n}\n\n/**\n * @callback SearchAdapterTextFilter\n * @param {string} input\n * @param {string} content\n * @return {boolean} passes\n */\n\n/**\n * @template T\n * @typedef SearchAdapterOptions\n * @prop {Element} textfield\n * @prop {Element} list\n * @prop {('contains'|'startsWith'|SearchAdapterTextFilter)} [textFilter='contains']\n * @prop {function(Element):string} [itemTextParser]\n * @prop {boolean} [dropdown=false]\n * @prop {boolean} [filterItems=true]\n * @prop {('replace'|'append'|'none')} [suggestionMethod='replace']\n * @prop {function(string, function(T[]=), function(Error=)=):void} [performSearch]\n * @prop {function(T[], function(), function(Error=)):void} [updateList]\n * @prop {boolean} [searchOnFocus=true]\n * @prop {number} [debounce=null] Debounce time in milliseconds\n */\n\n/** @template T */\nexport default class SearchAdapter {\n  /** @param {SearchAdapterOptions<T>} options */\n  constructor(options) {\n    this.textfield = options.textfield;\n    this.list = options.list;\n    this.list.setAttribute('role', 'listbox');\n    List.attach(this.list);\n    if (typeof options.textFilter === 'function') {\n      this.filter = options.textFilter;\n    } else if (options.textFilter === 'startsWith') {\n      this.filter = startsWithTextFilter;\n    } else {\n      this.filter = containsTextFilter;\n    }\n    this.itemTextParser = defaultItemTextParser || options.itemTextParser;\n    /** @type {HTMLInputElement} */\n    const input = (this.textfield.getElementsByClassName('mdw-textfield__input')[0]);\n    this.input = input;\n    this.list.addEventListener(ListContent.ACTIVATE_EVENT, (event) => {\n      /** @type {HTMLElement} */\n      const item = (event.target);\n      this.onItemSelected(item);\n      const inputValue = this.input.value || '';\n      this.suggestedInput = inputValue;\n      this.input.setSelectionRange(inputValue.length, inputValue.length);\n      this.input.focus();\n      this.hideDropDown();\n    });\n    this.input.addEventListener('keydown', (event) => {\n      this.onTextFieldKeydownEvent(event);\n    });\n    this.input.addEventListener('input', (event) => {\n      if (this.handleInputEvent) {\n        this.handleInputEvent(event);\n      }\n    });\n    this.input.addEventListener('blur', (event) => {\n      if (this.handleBlurEvent) {\n        this.handleBlurEvent(event);\n      }\n    });\n    this.input.addEventListener('focus', (event) => {\n      if (this.searchOnFocus) {\n        this.handleInputEvent(event);\n      }\n    });\n\n    this.dropdown = options.dropdown;\n    if (options.filterItems !== false) {\n      this.filterItems = true;\n    }\n    if (options.searchOnFocus !== false) {\n      this.searchOnFocus = true;\n    }\n    this.debounce = options.debounce;\n    this.suggestionMethod = options.suggestionMethod || 'replace';\n    this.currentSearchTerm = this.input.value || '';\n    /** @type {string} */\n    this.suggestedInput = null;\n    /** @type {string} */\n    this.previousValue = null;\n    this.performSearch = options.performSearch || ((value, resolve = () => {}) => resolve());\n    this.updateList = options.updateList || ((results, resolve = () => {}) => resolve());\n  }\n\n  /**\n   * Default input handler\n   * @param {Event} [event]\n   * @return {void}\n   */\n  handleInputEvent(event) { // eslint-disable-line no-unused-vars\n    if (document.activeElement !== this.input) {\n      return;\n    }\n    const inputValue = this.input.value || '';\n    if (inputValue === this.suggestedInput) {\n      return;\n    }\n    this.showDropDown();\n    if (inputValue === this.previousValue) {\n      return;\n    }\n    this.previousValue = inputValue;\n    this.currentSearchTerm = inputValue;\n\n    /**\n     * @param {Error} error\n     * @return {void}\n     */\n    function onErrorCallback(error) {\n      if (error.message === 'debounced') {\n        return;\n      }\n      if (error.message === 'expired') {\n        return;\n      }\n      throw error;\n    }\n\n    // IE does not support ES6 Promises\n    // Using resolve/reject callbacks instead.\n    // Syntactically ugly, but removes need for a polyfill.\n    this.performDebounce(inputValue,\n      () => this.checkExpired(inputValue,\n        () => this.performSearch(inputValue,\n          (searchResults) => this.checkExpired(inputValue,\n            () => this.updateList(searchResults,\n              () => this.filterListItems(),\n              onErrorCallback),\n            onErrorCallback),\n          onErrorCallback),\n        onErrorCallback),\n      onErrorCallback);\n\n    /**\n     * Promise.resolve()\n     *   .then(() => this.performDebounce(inputValue))\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.performSearch(inputValue))\n     *   .then((searchResults) => {\n     *     results = searchResults;\n     *   })\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.updateList(results))\n     *   .then(() => this.filterListItems())\n     *   .catch((error) => {\n     *     if (error.message === 'debounced') {\n     *       return;\n     *     }\n     *     if (error.message === 'expired') {\n     *       return;\n     *     }\n     *     throw error;\n     *   });\n     */\n  }\n\n  /**\n   * @param {string} inputValue\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  checkExpired(inputValue, resolve, reject) {\n    if (inputValue === this.currentSearchTerm) {\n      resolve();\n    } else {\n      reject(new Error('expired'));\n    }\n  }\n\n  /**\n   * @param {string} searchTerm\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  performDebounce(searchTerm, resolve, reject) {\n    if (!this.debounce) {\n      resolve();\n      return;\n    }\n    setTimeout(() => {\n      if (searchTerm !== this.currentSearchTerm) {\n        reject(new Error('debounced'));\n        return;\n      }\n      resolve();\n    }, this.debounce);\n  }\n\n  /** @return {boolean} handled */\n  showDropDown() {\n    if (!this.dropdown) {\n      return false;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    let changed = false;\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.removeAttribute('mdw-hide');\n      changed = true;\n    }\n    if (!dropDownElement.hasAttribute('mdw-show')) {\n      dropDownElement.setAttribute('mdw-show', '');\n      changed = true;\n    }\n    return changed;\n  }\n\n  /** @return {boolean} handled */\n  isDropDownShown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      return false;\n    }\n    if (this.input === document.activeElement) {\n      return true;\n    }\n    if (dropDownElement.hasAttribute('mdw-show')) {\n      return true;\n    }\n    return false;\n  }\n\n  /** @return {boolean} handled */\n  hideDropDown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (!dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.setAttribute('mdw-hide', '');\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {Event|FocusEvent} event\n   * @return {void}\n   */\n  handleBlurEvent(event) { // eslint-disable-line no-unused-vars\n    if (this.dropdown) {\n      const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n      if (dropDownElement.hasAttribute('mdw-show')) {\n        dropDownElement.removeAttribute('mdw-show');\n      }\n    }\n  }\n\n  /**\n   * @param {Element} item\n   * @return {void}\n   */\n  onItemSelected(item) {\n    if (this.suggestionMethod === 'none') {\n      return;\n    }\n    let suggestion = this.itemTextParser(item);\n    if (suggestion) {\n      suggestion = suggestion.trim();\n    }\n    if (!suggestion) {\n      return;\n    }\n    this.suggestedInput = suggestion;\n    if (this.suggestionMethod === 'replace') {\n      TextField.setValue(this.textfield, suggestion);\n    } else if (this.suggestionMethod === 'append') {\n      const selectionStart = (this.previousValue || '').length;\n      const selectionEnd = suggestion.length;\n      TextField.setValue(this.textfield, suggestion);\n      this.input.setSelectionRange(selectionStart, selectionEnd);\n    }\n  }\n\n  /**\n   * @param {SearchAdapterTextFilter} [fnFilter]\n   * @return {void}\n   */\n  filterListItems(fnFilter) {\n    if (!this.filterItems) {\n      return;\n    }\n    const input = this.input.value;\n    const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n    const items = this.list.querySelectorAll('[role=\"option\"]');\n    let hasItem = false;\n    iterateArrayLike(items, (item) => {\n      const content = this.itemTextParser(item);\n      const fn = fnFilter || this.filter;\n      if (fn(input, content)) {\n        hasItem = true;\n        item.setAttribute('aria-hidden', 'false');\n      } else {\n        item.setAttribute('aria-hidden', 'true');\n      }\n    });\n    if (current && current.getAttribute('aria-hidden') === 'true') {\n      const newSelection = selectSibling(this.list);\n      if (newSelection) {\n        this.onItemSelected(newSelection);\n      }\n    }\n    if (!hasItem) {\n      this.hideDropDown();\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event\n   * @return {void}\n   */\n  onTextFieldKeydownEvent(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    if (event.ctrlKey || event.altKey) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowUp':\n      case 'Up': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, true);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'ArrowDown':\n      case 'Down': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, false);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'Esc':\n      case 'Escape': {\n        if (this.hideDropDown()) {\n          this.suggestedInput = this.previousValue;\n          TextField.setValue(this.textfield, this.previousValue);\n          event.stopPropagation();\n          event.preventDefault();\n        }\n        break;\n      }\n      case 'Enter': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n            event.preventDefault();\n          }\n        }\n        break;\n      }\n      case 'Tab': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n          }\n        }\n        break;\n      }\n      default:\n    }\n  }\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tabpanel\n\nimport * as Attributes from '../../core/aria/attributes';\n\nexport const EXPANDED_CHANGE_EVENT = 'mdw:tabpanel-expandedchange';\n\nexport const { isExpanded } = Attributes;\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function attach(tabPanelElement) {\n  tabPanelElement.setAttribute('role', 'tabpanel');\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function detach(tabPanelElement) {\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setExpanded(element, value, dispatchEvent = true) {\n  return Attributes.setExpanded(element, value, dispatchEvent ? EXPANDED_CHANGE_EVENT : null);\n}\n\n/**\n * Hide element to avoid tabbing into next panel\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setHidden(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-hidden', value ? 'true' : 'false');\n}\n","import {\n  iterateArrayLike,\n  scrollToElement,\n  dispatchDomEvent,\n  isRtl,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\nimport * as TabPanel from './panel';\n\nexport const SCROLL_EVENT = 'mdw:tabcontent-scroll';\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function attach(tabContentElement) {\n  tabContentElement.addEventListener('scroll', onTabContentScroll);\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.attach);\n  tabContentElement.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function detach(tabContentElement) {\n  tabContentElement.removeEventListener('keydown', onKeyDown);\n  tabContentElement.removeEventListener('scroll', onTabContentScroll);\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.detach);\n}\n\n/**\n * Prevent scrolling with keyboard\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      event.preventDefault();\n      break;\n    default:\n  }\n}\n\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabContentElement = (event.currentTarget);\n  const isPageRtl = isRtl();\n  const scrollPoint = tabContentElement.scrollLeft / tabContentElement.clientWidth;\n  let visibleIndex = Math.floor(scrollPoint);\n  let visibilityPercentage = scrollPoint - visibleIndex;\n\n  // Percentage may be incorrect due to floating point rounding errors\n  // Compare integer values provided by browser to check if within 1px\n  iterateSomeOfArrayLike(tabContentElement.children, ((/** @type {HTMLElement} */ panel, index) => {\n    if (Math.abs(tabContentElement.scrollLeft - panel.offsetLeft) <= 1) {\n      visibleIndex = index;\n      visibilityPercentage = 0;\n      return true;\n    }\n    return false;\n  }));\n\n  const isResting = visibilityPercentage === 0;\n  let rightPanel;\n  let leftPeekPanel;\n  let rightPeekPanel;\n  let leftSelected = false;\n  let rightSelected = false;\n  let selectedIndex;\n  let leftPanelIndex;\n  if (isPageRtl) {\n    const lastIndex = tabContentElement.children.length - 1;\n    leftPanelIndex = lastIndex - visibleIndex;\n    leftPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex - 1));\n    rightPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 1));\n    rightPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 2));\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = lastIndex - visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = lastIndex - (visibleIndex + 1);\n    }\n  } else {\n    leftPanelIndex = visibleIndex;\n    rightPanel = tabContentElement.children.item(visibleIndex + 1);\n    leftPeekPanel = tabContentElement.children.item(visibleIndex - 1);\n    rightPeekPanel = tabContentElement.children.item(visibleIndex + 2);\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = visibleIndex + 1;\n    }\n  }\n  /** @type {HTMLElement} */\n  const leftPanel = (tabContentElement.children.item(leftPanelIndex));\n\n  const currentTargetIndexString = tabContentElement.getAttribute('mdw-target-index');\n  const currentTargetIndex = currentTargetIndexString == null\n    ? null : parseInt(currentTargetIndexString, 10);\n\n  let updateSelected = false;\n  let forceSelection = false;\n  if (currentTargetIndex == null) {\n    TabPanel.setExpanded(leftPanel, leftSelected);\n    if (rightPanel) {\n      TabPanel.setExpanded(rightPanel, rightSelected);\n    }\n    updateSelected = visibilityPercentage === 0;\n  } else if (currentTargetIndex === selectedIndex) {\n    if (visibilityPercentage === 0) {\n      updateSelected = true;\n      forceSelection = true;\n      tabContentElement.removeAttribute('mdw-target-index');\n    }\n  }\n\n  TabPanel.setHidden(leftPanel, false);\n  if (leftPeekPanel) {\n    TabPanel.setHidden(leftPeekPanel, isResting || !leftSelected);\n  }\n  if (rightPanel) {\n    TabPanel.setHidden(rightPanel, isResting);\n  }\n  if (rightPeekPanel) {\n    TabPanel.setHidden(rightPeekPanel, isResting || !rightSelected);\n  }\n\n  dispatchDomEvent(tabContentElement, SCROLL_EVENT, {\n    leftPanelIndex,\n    visibilityPercentage,\n    updateSelected,\n    forceSelection,\n  });\n}\n\n/**\n * @param {HTMLElement} tabContentElement\n * @param {HTMLElement|number} panel element or index\n * @param {true|false|'smooth'} [scrollToPanel='smooth']\n * @return {void}\n */\nexport function selectPanel(tabContentElement, panel, scrollToPanel = 'smooth') {\n  /** @type {HTMLElement} */\n  let panelElement;\n  /** @type {number} */\n  let currentSelectedIndex = null;\n  /** @type {number} */\n  let panelIndex = null;\n  /** @type {Element[]} */\n  const otherPanels = [];\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), (el, index) => {\n    if (currentSelectedIndex == null && TabPanel.isExpanded(el)) {\n      currentSelectedIndex = index;\n    }\n    if (panel === el || panel === index) {\n      TabPanel.setExpanded(el, true);\n      TabPanel.setHidden(el, false);\n      /** @type {HTMLElement} */\n      panelElement = (el);\n      panelIndex = index;\n    } else {\n      otherPanels.push(el);\n    }\n  });\n  if (!panelElement) {\n    // Invalid index or panel not in tabcontent\n    return;\n  }\n  otherPanels.forEach((sibling) => TabPanel.setExpanded(sibling, false));\n\n  const isPageRtl = isRtl();\n  const targetScrollLeft = isPageRtl\n    ? panelElement.parentElement.scrollWidth + panelElement.offsetLeft - panelElement.offsetWidth\n    : panelElement.offsetLeft;\n  if (!scrollToPanel || panelElement.parentElement.scrollLeft === targetScrollLeft) {\n    // No scrolling, hide others\n    otherPanels.forEach((sibling) => TabPanel.setHidden(sibling, true));\n    return;\n  }\n  if (scrollToPanel && panelElement) {\n    if (panelIndex == null) {\n      tabContentElement.removeAttribute('mdw-target-index');\n    } else {\n      tabContentElement.setAttribute('mdw-target-index', panelIndex.toString(10));\n    }\n    scrollToElement(panelElement, scrollToPanel === 'smooth', isPageRtl);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport {\n  iterateArrayLike, getPassiveEventListenerOption, scrollToElement, iterateSomeOfArrayLike,\n} from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Keyboard from '../../core/aria/keyboard';\nimport * as TabItem from './item';\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function attach(tabListElement) {\n  let indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (!indicatorElement) {\n    indicatorElement = document.createElement('div');\n    indicatorElement.classList.add('mdw-tab__indicator');\n    tabListElement.appendChild(indicatorElement);\n  }\n\n  setupARIA(tabListElement);\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.attach);\n  RovingTabIndex.setupTabIndexes(tabListElement.querySelectorAll('[role=\"tab\"]'));\n  tabListElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent,\n    getPassiveEventListenerOption());\n  tabListElement.addEventListener(Keyboard.FORWARD_ARROW_KEY, onForwardArrowKey);\n  tabListElement.addEventListener(Keyboard.BACK_ARROW_KEY, onBackArrowKey);\n  tabListElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(tabListElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onForwardArrowKey(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectNext(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onBackArrowKey(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function setupARIA(tabListElement) {\n  if (tabListElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  tabListElement.setAttribute('role', 'tablist');\n  tabListElement.setAttribute('aria-multiselectable', 'false');\n  tabListElement.setAttribute('aria-orientation', 'horizontal');\n  const indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (indicatorElement) {\n    indicatorElement.setAttribute('role', 'presentation');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function detach(tabListElement) {\n  tabListElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  tabListElement.removeEventListener(Keyboard.FORWARD_ARROW_KEY, onForwardArrowKey);\n  tabListElement.removeEventListener(Keyboard.BACK_ARROW_KEY, onBackArrowKey);\n  iterateArrayLike(tabListElement.querySelectorAll('[role=\"tab\"]'), RovingTabIndex.detach);\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.detach);\n}\n\n/**\n * @param {Element} tabListElement\n * @param {Element|number} item element or index\n * @param {number} [percentage=0]\n * @param {boolean} [animate=false]\n * @return {void}\n */\nexport function setIndicatorPosition(tabListElement, item, percentage, animate = false) {\n  /** @type {HTMLElement} */\n  const indicatorElement = (tabListElement.getElementsByClassName('mdw-tab__indicator')[0]);\n  if (!indicatorElement) {\n    return;\n  }\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  /** @type {HTMLElement} */\n  const leftItem = (item instanceof Element ? item : items.item(item));\n  let left = leftItem.offsetLeft;\n  let right = left + leftItem.offsetWidth;\n\n  if (percentage > 0) {\n    left += (percentage * leftItem.offsetWidth);\n    /** @type {HTMLElement} */\n    let nextItem = (leftItem.nextElementSibling);\n    if (!nextItem.classList.contains('mdw-tab__item')) {\n      // RTL\n      /** @type {HTMLElement} */\n      nextItem = (leftItem.previousElementSibling);\n    }\n    right = nextItem.offsetLeft + (percentage * nextItem.offsetWidth);\n  }\n\n  // RTL is inversed\n  const width = Math.abs(right - left);\n  indicatorElement.style.setProperty('transform', `translateX(${left}px) scaleX(${width / 1000})`);\n  if (animate) {\n    indicatorElement.setAttribute('mdw-animate', '');\n  } else {\n    indicatorElement.removeAttribute('mdw-animate');\n  }\n}\n\n/**\n * @param {HTMLElement} tabListElement\n * @param {HTMLElement} tabItemElement\n * @return {number}\n */\nexport function getTabItemIndex(tabListElement, tabItemElement) {\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  let tabItemIndex = -1;\n  iterateSomeOfArrayLike(items, (el, index) => {\n    if (el === tabItemElement) {\n      tabItemIndex = index;\n      return true;\n    }\n    return false;\n  });\n  return tabItemIndex;\n}\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @param {boolean} [dispatchEvents=false]\n * @return {void}\n */\nexport function selectItemAtIndex(tabListElement, tabItemIndex, dispatchEvents = false) {\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  if (dispatchEvents) {\n    const item = items.item(tabItemIndex);\n    if (item) {\n      TabItem.setSelected(item, true, true);\n    }\n    return;\n  }\n  iterateArrayLike(items, (el, index) => {\n    if (tabItemIndex === index) {\n      TabItem.setSelected(el, true, false);\n      if (tabListElement.hasAttribute('mdw-scrollable')) {\n        scrollToElement(el, true);\n      }\n    } else {\n      TabItem.setSelected(el, false, false);\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  iterateArrayLike(tabListElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      TabItem.setSelected(item, false, false);\n    }\n  });\n}\n","import {\n  nextTick,\n  getPassiveEventListenerOption,\n  dispatchDomEvent,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\nimport * as TabContent from './content';\nimport * as TabList from './list';\nimport * as TabPanel from './panel';\nimport * as TabItem from './item';\n\nconst RESIZE_WAIT_FRAMES = 5;\n\nexport const SELECTED_INDEX_CHANGE_EVENT = 'mdw:tab-selectedindexchange';\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function attach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.attach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.attach(tabContentElement);\n  }\n\n  tabElement.addEventListener(TabContent.SCROLL_EVENT, onTabContentScroll,\n    getPassiveEventListenerOption());\n  tabElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange,\n    getPassiveEventListenerOption());\n  tabElement.addEventListener(TabPanel.EXPANDED_CHANGE_EVENT, onTabPanelExpandedChange,\n    getPassiveEventListenerOption());\n\n  /** @type {ArrayLike<Element>} */\n  const items = (tabListElement && tabListElement.getElementsByClassName('mdw-tab__item')) || [];\n  /** @type {ArrayLike<Element>} */\n  const panels = (tabContentElement && tabContentElement.getElementsByClassName('mdw-tab__panel')) || [];\n\n  let selectedItem;\n  let selectedPanel;\n  let selectedIndex;\n  iterateSomeOfArrayLike(items, (itemElement, index) => {\n    if (itemElement.getAttribute('aria-selected') === 'true') {\n      selectedItem = itemElement;\n      selectedPanel = panels[index];\n      selectedIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (selectedIndex == null) {\n    iterateSomeOfArrayLike(panels, (panelElement, index) => {\n      if (panelElement.getAttribute('aria-expanded') === 'true') {\n        selectedPanel = panelElement;\n        selectedItem = items[index];\n        selectedIndex = index;\n        return true;\n      }\n      return false;\n    });\n  }\n  if (!selectedItem && items.length) {\n    selectedItem = items[0];\n    selectedIndex = 0;\n  }\n  if (!selectedPanel && panels.length) {\n    selectedPanel = panels[0];\n    selectedIndex = 0;\n  }\n  if (selectedItem) {\n    TabItem.setSelected(selectedItem, true);\n  }\n  if (selectedPanel) {\n    TabPanel.setHidden(selectedPanel, false);\n    TabPanel.setExpanded(selectedPanel, true);\n  }\n  if (selectedIndex != null) {\n    tabElement.setAttribute('mdw-selected-index', selectedIndex.toString());\n  }\n  onResize(tabElement);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabItemSelectedChange(event) {\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const tabItemElement = (event.target);\n  /** @type {HTMLElement} */\n  const tabListElement = (tabElement.getElementsByClassName('mdw-tab__list')[0]);\n  if (!tabListElement) {\n    return;\n  }\n\n  /** @type {HTMLElement} */\n  const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n  const tabItemIndex = TabList.getTabItemIndex(tabListElement, tabItemElement);\n  if (tabItemIndex === -1) {\n    return;\n  }\n  if (tabContentElement) {\n    const hasNoScroll = tabContentElement.hasAttribute('mdw-no-scroll');\n    if (!hasNoScroll) {\n      TabContent.selectPanel(tabContentElement, tabItemIndex, 'smooth');\n      return;\n    }\n    TabContent.selectPanel(tabContentElement, tabItemIndex, true);\n  }\n  TabList.setIndicatorPosition(tabListElement, tabItemElement, 0, true);\n  if (!tabContentElement) {\n    updateSelectedIndex(tabElement, tabItemIndex);\n  }\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function detach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.detach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.detach(tabContentElement);\n  }\n\n  tabElement.removeEventListener(TabPanel.EXPANDED_CHANGE_EVENT, onTabPanelExpandedChange);\n  tabElement.removeEventListener(TabContent.SCROLL_EVENT, onTabContentScroll);\n  tabElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange);\n  tabElement.removeAttribute('mdw-resize-stage');\n  tabElement.removeAttribute('mdw-selected-index');\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function onResize(tabElement) {\n  let stage = 0;\n  tabElement.setAttribute('mdw-resize-stage', stage.toString());\n  /** @return {void} */\n  function performResize() {\n    if (!tabElement.hasAttribute('mdw-resize-stage')) {\n      // Skip resize\n      return;\n    }\n    const attrStage = tabElement.getAttribute('mdw-resize-stage');\n    if (attrStage !== stage.toString()) {\n      // Off-sync due to another resize event\n      return;\n    }\n    stage += 1;\n    tabElement.setAttribute('mdw-resize-stage', stage.toString());\n    if (stage === RESIZE_WAIT_FRAMES) {\n      /** @type {HTMLElement} */\n      const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n      if (tabContentElement) {\n        /** @type {HTMLElement} */\n        const relatedPanel = (tabContentElement.querySelector('.mdw-tab__panel[aria-expanded=\"true\"]'));\n        if (relatedPanel) {\n          TabContent.selectPanel(tabContentElement, relatedPanel, true);\n        }\n      }\n    } else if (stage === RESIZE_WAIT_FRAMES * 2) {\n      /** @type {HTMLElement} */\n      const tabListElement = (tabElement.getElementsByClassName('mdw-tab__list')[0]);\n      if (tabListElement) {\n        /** @type {HTMLElement} */\n        const relatedItem = (tabListElement.querySelector('.mdw-tab__item[aria-selected=\"true\"]'));\n        if (relatedItem) {\n          TabList.setIndicatorPosition(tabListElement, relatedItem, 0);\n        }\n      }\n      tabElement.removeAttribute('mdw-resize-stage');\n      return;\n    }\n\n    nextTick(performResize);\n  }\n  nextTick(performResize);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  const { detail } = event;\n  if (!detail.forceSelection && tabElement.hasAttribute('mdw-resize-stage')) {\n    return;\n  }\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.setIndicatorPosition(\n      tabListElement,\n      detail.leftPanelIndex,\n      detail.visibilityPercentage\n    );\n  }\n  if (detail.updateSelected) {\n    updateSelectedIndex(tabElement, detail.leftPanelIndex);\n  }\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabPanelExpandedChange(event) {\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  if (tabElement.hasAttribute('mdw-resize-stage')) {\n    return;\n  }\n  let index = 0;\n  /** @type {HTMLElement} */\n  const tabPanelElement = (event.target);\n  let sibling = tabPanelElement.previousElementSibling;\n  while (sibling) {\n    index += 1;\n    sibling = sibling.previousElementSibling;\n  }\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.selectItemAtIndex(tabListElement, index, false);\n  }\n}\n\n/**\n * @param {HTMLElement} tabElement\n * @param {number} index\n * @return {void}\n */\nfunction updateSelectedIndex(tabElement, index) {\n  const currentIndex = tabElement.getAttribute('mdw-selected-index');\n  if (currentIndex == null || currentIndex === index.toString()) {\n    return;\n  }\n  tabElement.setAttribute('mdw-selected-index', index.toString());\n  dispatchDomEvent(tabElement, SELECTED_INDEX_CHANGE_EVENT, { value: index });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport { iterateArrayLike } from '../../core/dom';\nimport * as ChipItem from './item';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.detach);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport * as Ripple from '../../core/ripple/index';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  Ripple.detach(element);\n}\n","import * as Attributes from '../../core/aria/attributes';\nimport * as DataTableColumnHeader from '../../components/datatable/columnheader';\nimport * as Selection from '../../components/selection/index';\nimport { setTextNode } from '../../core/dom';\n\n/**\n * @callback DataTableAdapterColumnFormatter<T>\n * @param {any} value\n * @param {T} [object]\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterColumnRenderer<T>\n * @param {HTMLTableCellElement} cell,\n * @param {any} value\n * @param {T} data\n * @return {void}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapterColumn\n * @typedef DataTableAdapterColumnOptions<T>\n * @prop {string} key\n * @prop {(string|DocumentFragment)} [name='']\n * @prop {'checkbox'|'text'|'number'} [type]\n * @prop {boolean} [rowSelector]\n * @prop {string} [tooltip]\n * @prop {boolean} [sortable]\n * @prop {boolean} [primaryColumn]\n * @prop {HTMLElement} [customSortIcon]\n * @prop {string} [innerHTML]\n * @prop {DocumentFragment} [fragment]\n * @prop {DataTableAdapterColumnRenderer<T>} [renderer]\n * @prop {DataTableAdapterColumnFormatter<T>} [formatter]\n * @template T\n */\n\n/** @return {HTMLElement} */\nfunction constructTableCheckbox() {\n  const element = document.createElement('div');\n  element.className = 'mdw-selection';\n  element.setAttribute('aria-checked', 'false');\n  const input = document.createElement('div');\n  input.className = 'mdw-selection__input mdw-datatable__widget';\n  const icon = document.createElement('div');\n  icon.className = 'mdw-selection__icon';\n  icon.setAttribute('mdw-checkbox', '');\n  element.appendChild(input);\n  element.appendChild(icon);\n  Selection.attach(element);\n  return element;\n}\n\n/**\n * @template T\n */\nexport default class DataTableAdapterColumn {\n  /** @param {DataTableAdapterColumnOptions<T>} options */\n  constructor(options) {\n    this.element = document.createElement('th');\n    if (options.innerHTML != null) {\n      this.element.innerHTML = options.innerHTML;\n    } else if (options.fragment) {\n      this.element.appendChild(options.fragment);\n    }\n    this.key = options.key;\n    this.element.dataset.key = options.key;\n\n    if (options.sortable) {\n      this.element.setAttribute('aria-sort', 'none');\n      let sortIcon = options.customSortIcon;\n      if (!sortIcon) {\n        sortIcon = document.createElement('div');\n        sortIcon.classList.add('mdw-datatable__sort-icon');\n        sortIcon.classList.add('material-icons');\n        sortIcon.textContent = 'arrow_downward';\n      }\n      if (this.element.hasChildNodes()) {\n        this.element.insertBefore(this.element.firstChild, options.customSortIcon);\n      } else {\n        this.element.appendChild(sortIcon);\n      }\n    }\n    if (options.tooltip) {\n      const wrapper = document.createElement('span');\n      wrapper.classList.add('mdw-tooltip__wrapper');\n      const target = document.createElement('span');\n      target.classList.add('mdw-tooltip__target');\n      if (!options.name) {\n        target.textContent = '';\n      } else if (typeof options.name === 'string') {\n        target.textContent = options.name;\n      } else {\n        target.appendChild(options.name);\n      }\n      const tooltip = document.createElement('div');\n      tooltip.className = 'mdw-tooltip mdw-theme';\n      tooltip.setAttribute('mdw-surface', 'background 700');\n      tooltip.setAttribute('mdw-dark', '');\n      tooltip.textContent = options.tooltip;\n      wrapper.appendChild(target);\n      wrapper.appendChild(tooltip);\n      this.element.appendChild(wrapper);\n    } else if (options.name) {\n      let node;\n      if (typeof options.name === 'string') {\n        node = document.createTextNode(options.name);\n      } else {\n        node = options.name;\n      }\n      this.element.appendChild(node);\n    }\n\n    this.primaryColumn = options.primaryColumn;\n    if (options.primaryColumn) {\n      this.element.setAttribute('mdw-primary-column', '');\n    }\n\n    this.rowSelector = options.rowSelector;\n\n    if (this.rowSelector) {\n      this.element.setAttribute('mdw-selector', '');\n    }\n\n    this.type = options.type;\n    switch (options.type) {\n      case 'number':\n        this.element.setAttribute('mdw-number', '');\n        break;\n      case 'text':\n        this.element.setAttribute('mdw-text', '');\n        break;\n      case 'checkbox':\n      default:\n    }\n\n    if (this.rowSelector && this.type === 'checkbox') {\n      const checkboxLabel = constructTableCheckbox();\n      this.element.appendChild(checkboxLabel);\n      this.element.classList.add('mdw-autofocus-widget');\n    }\n\n    if (options.renderer) {\n      this.renderer = options.renderer;\n    } else if (options.type === 'checkbox') {\n      this.renderer = DataTableAdapterColumn.defaultCheckboxRenderer;\n    } else {\n      this.renderer = DataTableAdapterColumn.defaultCellRenderer;\n    }\n    this.formatter = options.formatter || ((value) => value);\n    DataTableColumnHeader.attach(this.element);\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCheckboxRenderer(cell, value) {\n    if (!cell.classList.contains('mdw-autofocus-widget')) {\n      cell.classList.add('mdw-autofocus-widget');\n    }\n    let selectionElement = cell.getElementsByClassName('mdw-selection')[0];\n    const checked = !!value;\n    if (!selectionElement) {\n      selectionElement = constructTableCheckbox();\n      cell.appendChild(selectionElement);\n    }\n    Attributes.setChecked(selectionElement, checked);\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCellRenderer(cell, value) {\n    let stringValue;\n    if (value == null) {\n      stringValue = '';\n    } else {\n      stringValue = value.toString();\n    }\n    setTextNode(cell, stringValue);\n  }\n}\n","const radius = 8.75;\nconst circumference = 2 * Math.PI * radius;\n\n// TODO: Upgrade IE/Edge browsers to animate with rAF\n\n/**\n * @param {Element} progressCircleElement\n * @return {void}\n */\nexport function attach(progressCircleElement) {\n  /** @type {Element} */\n  let svg = (progressCircleElement.getElementsByTagName('svg')[0]);\n  if (!svg) {\n    svg = (document.createElement('svg'));\n    svg.setAttribute('viewbox', '0 0 24 24');\n    progressCircleElement.appendChild(svg);\n  }\n  const paths = svg.getElementsByTagName('path');\n  if (paths.length !== 2) {\n    svg.innerHTML = `\n      <path d=\"M12 3.25A8.75 8.75 0 1 1 3.25 12\"/>\n      <path d=\"M12 3.25A8.75 8.75 0 1 1 3.25 12 A 8.75 8.75 0 0 1 12 3.25\"/>\n    `;\n  }\n}\n\n/**\n * @param {Element} progressCircleElement\n * @param {number} value Percentage value (0-100);\n * @return {void}\n */\nexport function setValue(progressCircleElement, value) {\n  const dashOffset = circumference * (3 - (value / 100));\n  const pathElements = progressCircleElement.getElementsByTagName('path');\n  pathElements[pathElements.length - 1].style.setProperty('stroke-dashoffset', dashOffset.toString());\n}\n","import { dispatchDomEvent, getPassiveEventListenerOption } from '../../core/dom';\n\nexport const SECONDARY_ACTION_EVENT = 'mdw:listsecondary-action';\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function attach(listSecondaryElement) {\n  if (!listSecondaryElement.hasAttribute('mdw-action')) {\n    return;\n  }\n  listSecondaryElement.addEventListener('click', onClick);\n  listSecondaryElement.addEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onInteraction(event) {\n  event.stopPropagation();\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listSecondaryElement = (event.currentTarget);\n  dispatchDomEvent(listSecondaryElement, SECONDARY_ACTION_EVENT);\n}\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function detach(listSecondaryElement) {\n  listSecondaryElement.removeEventListener('click', onClick);\n  listSecondaryElement.removeEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n","import { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Button from '../../components/button/index';\nimport * as DataTable from '../../components/datatable/index';\nimport * as DataTableColumnHeader from '../../components/datatable/columnheader';\nimport * as DataTableRow from '../../components/datatable/row';\nimport * as DataTableRowHeader from '../../components/datatable/rowheader';\nimport * as DataTableCell from '../../components/datatable/cell';\nimport * as Selection from '../../components/selection/index';\nimport DataTableAdapterColumn from './column';\n\n/**\n * @typedef {import('./column').DataTableAdapterColumnOptions<T>} DataTableAdapterColumnOptions<T>\n * @template T\n */\n\n/**\n * Callback fired when value change is requested\n * Return truthy value to cancel updating object\n * @callback DataTableAdapterOnValueChangeRequestedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {boolean} cancel\n * @template T\n */\n\n/**\n * Callback fired when value is changed\n * @callback DataTableAdapterOnValueChangedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {void}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterFilter<T>\n * @param {T} element\n * @param {number} [index]\n * @param {T[]} array\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterSorter<T>\n * @param {T} a\n * @param {T} b\n * @return {number}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapter\n * @typedef DataTableAdapterOptions<T>\n * @prop {HTMLElement} options.datatable\n * @prop {T[]} options.datasource Object array\n * @prop {DataTableAdapterFilter<T>} [options.filter]\n * @prop {DataTableAdapterOnValueChangeRequestedCallback<T>} [options.onValueChangeRequested]\n * @prop {DataTableAdapterOnValueChangedCallback<T>} [options.onValueChanged]\n * @prop {DataTableAdapterSorter<T>} [options.sorter]\n * @template T\n */\n\n/** @template {Object} T */\nexport default class DataTableAdapter {\n  /** @param {DataTableAdapterOptions<T>} options */\n  constructor(options) {\n    this.element = options.datatable;\n    this.datasource = options.datasource;\n    this.filter = options.filter;\n    this.sorter = options.sorter;\n    this.onValueChangeRequested = options.onValueChangeRequested || (() => false);\n    this.onValueChanged = options.onValueChanged || (() => {});\n    DataTable.attach(this.element);\n\n    this.onElementScrollListener = () => this.onElementScroll();\n\n    /**\n     * @param {CustomEvent} event\n     * @return {void}\n     */\n    this.onDataTableColumnHeaderSortListener = (event) => this.onDataTableColumnHeaderSort(event);\n    /**\n     * @param {CustomEvent} event\n     * @return {void}\n     */\n    this.onCheckedChangeEventListener = (event) => this.onCheckedChangeEvent(event);\n\n    this.element.addEventListener(\n      DataTableColumnHeader.SORT_EVENT,\n      this.onDataTableColumnHeaderSortListener\n    );\n    this.element.addEventListener(\n      Selection.CHECKED_CHANGE_EVENT,\n      this.onCheckedChangeEventListener\n    );\n    this.element.addEventListener(\n      DataTableRow.SELECTED_CHANGE_EVENT,\n      DataTableAdapter.onRowSelectedChangeEvent\n    );\n\n    this.scroller = DataTable.getScroller(this.element);\n    this.element.setAttribute('mdw-datatable-adapter', '');\n    /** @type {DataTableAdapterColumn<T>[]} */\n    this.columns = [];\n    this.page = 0;\n    this.pageLimit = 0;\n    this.debounceTimeMs = 0;\n    this.throttleTimeMs = 0;\n    this.useLazyRendering = false;\n  }\n\n  /**\n   * @param {CustomEvent} event\n   * @return {void}\n   */\n  onDataTableColumnHeaderSort(event) {\n    /** @type {HTMLTableHeaderCellElement} */\n    const cell = (event.target);\n    const ascending = event.detail.sort === 'ascending';\n    this.updateSortIcons(cell, ascending);\n    if (this.updateSortColumn) {\n      this.updateSortColumn(cell, ascending);\n    }\n  }\n\n  detach() {\n    this.element.removeAttribute('mdw-datatable-adapter');\n    this.element = null;\n    this.datasource = null;\n    this.filteredDatasource = null;\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  performThrottledRender(forceRefresh = false) {\n    this.performLazyRender(forceRefresh);\n    if (this.throttledRenderPending) {\n      this.throttledRenderPending = false;\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  scheduleThrottledRender(forceRefresh = false) {\n    if (this.throttleTimeMs < 17) {\n      window.requestAnimationFrame(() => this.performThrottledRender(forceRefresh));\n    } else {\n      setTimeout(() => this.performThrottledRender(forceRefresh), this.throttleTimeMs);\n    }\n  }\n\n  /**\n   * @param {CustomEvent} event\n   * @return {void}\n   */\n  static onRowSelectedChangeEvent(event) {\n    /** @type {HTMLTableRowElement} */\n    const row = (event.target);\n    const selectionElement = row.querySelector('[mdw-selector] .mdw-selection[aria-checked]');\n    if (!selectionElement) {\n      return;\n    }\n    Selection.setChecked(selectionElement, event.detail.value, true);\n  }\n\n  onElementScroll() {\n    if (this.debounceTimeout) {\n      clearTimeout(this.debounceTimeout);\n      this.debounceTimeout = null;\n    }\n    if (this.throttledRenderPending) {\n      // Will perform in the future\n      return;\n    }\n    if (this.debounceTimeMs) {\n      this.debounceTimeout = setTimeout(() => {\n        this.scheduleThrottledRender();\n        this.throttledRenderPending = true;\n      }, this.debounceTimeMs);\n    } else {\n      this.scheduleThrottledRender();\n      this.throttledRenderPending = true;\n    }\n  }\n\n  buildScrollListener() {\n    this.scroller.addEventListener('scroll', this.onElementScrollListener);\n  }\n\n  destroyScrollListener() {\n    this.scroller.removeEventListener('scroll', this.onElementScrollListener);\n  }\n\n  /**\n   * @param {CustomEvent} event\n   * @return {void}\n   */\n  onCheckedChangeEvent(event) {\n    /** @type {HTMLElement} */\n    const selectionElement = (event.target);\n    const checked = event.detail.value === 'true';\n    const currentCell = this.getTableCell(selectionElement);\n    if (currentCell.getAttribute('role') === 'columnheader') {\n      this.setCheckOnAllRows(checked, currentCell.cellIndex);\n      this.setHasSelection(checked);\n      return;\n    }\n    const currentRow = this.getTableRow(selectionElement);\n    const object = this.getDataForTableRow(currentRow);\n    if (this.onValueChangeRequested(object, currentCell.dataset.key, checked)) {\n      event.preventDefault();\n      return;\n    }\n    object[currentCell.dataset.key] = checked;\n    this.onValueChanged(object, currentCell.dataset.key, checked);\n    if (currentCell.hasAttribute('mdw-selector')) {\n      DataTableRow.setSelected(currentRow, event.detail.value, true);\n    }\n  }\n\n  /**\n   * Overridable sorting method\n   * @param {HTMLTableHeaderCellElement} [tableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortColumn(tableHeaderCell, ascending) {\n    if (!tableHeaderCell) {\n      this.sorter = null;\n      this.refresh();\n      return;\n    }\n    if (tableHeaderCell.cellIndex === -1) {\n      // Header not attached to row!\n      return;\n    }\n    const index = tableHeaderCell.cellIndex;\n    const tableColumn = this.columns[index];\n    const direction = ascending ? 1 : -1;\n    this.sorter = ((/** @type {T} */ a, /** @type {T} */ b) => {\n      const valueA = a[tableColumn.key];\n      const valueB = b[tableColumn.key];\n      if (valueA == null) {\n        if (valueB == null) {\n          return 0;\n        }\n        return -1 * direction;\n      }\n      if (valueB == null) {\n        return direction;\n      }\n      if (tableColumn.type === 'number') {\n        return (parseFloat(valueA) - parseFloat(valueB)) * direction;\n      }\n      if (tableColumn.type === 'checkbox') {\n        return ((valueA ? 1 : 0) - (valueB ? 1 : 0)) * direction;\n      }\n      if (valueA.localeCompare) {\n        return valueA.localeCompare(valueB) * direction;\n      }\n      // eslint-disable-next-line eqeqeq\n      if (valueA == valueB) {\n        return 0;\n      }\n      return (valueA - valueB) * direction;\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLTableHeaderCellElement} [sortedTableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortIcons(sortedTableHeaderCell, ascending) {\n    if (sortedTableHeaderCell) {\n      if (ascending) {\n        sortedTableHeaderCell.setAttribute('aria-sort', 'ascending');\n      } else {\n        sortedTableHeaderCell.setAttribute('aria-sort', 'descending');\n      }\n    }\n    iterateArrayLike(this.getHeaderRow().getElementsByTagName('th'), (otherTableHeader) => {\n      if (otherTableHeader !== sortedTableHeaderCell && otherTableHeader.hasAttribute('aria-sort')) {\n        otherTableHeader.setAttribute('aria-sort', 'none');\n      }\n    });\n  }\n\n  /**\n   * @param {boolean} value\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  setCheckOnAllRows(value, columnIndex) {\n    const column = this.columns[columnIndex];\n    this.datasource.forEach((object) => {\n      object[column.key] = value; // eslint-disable-line no-param-reassign\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableRowElement}\n   */\n  getTableRow(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableRowElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableRow(element.parentElement);\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableCellElement}\n   */\n  getTableCell(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableCellElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableCell(element.parentElement);\n  }\n\n  /** @return {T[]} */\n  getSelectedRows() {\n    const selectorColumn = this.columns.filter((column) => column.rowSelector)[0];\n    if (!selectorColumn) {\n      return [];\n    }\n    return this.getDatasource().filter((row) => row[selectorColumn.key]);\n  }\n\n  /**\n   * @param {boolean} value\n   * @return {void}\n   */\n  setHasSelection(value) {\n    if (value) {\n      this.element.setAttribute('mdw-has-selection', '');\n      return;\n    }\n    this.element.removeAttribute('mdw-has-selection');\n  }\n\n  /**\n   * @param {T[]} datasource Object array\n   * @return {void}\n   */\n  setDatasource(datasource) {\n    this.datasource = datasource;\n  }\n\n  /**\n   * Toggle lazy rending for datasources\n   * @param {boolean} value\n   * @return {void}\n   */\n  setUseLazyRendering(value) {\n    this.useLazyRendering = value;\n    if (value) {\n      this.buildScrollListener();\n    } else {\n      this.destroyScrollListener();\n    }\n  }\n\n  /**\n   * @param {DataTableAdapterColumnOptions<T>} options\n   * @return {DataTableAdapterColumn<T>}\n   */\n  addColumn(options) {\n    const tableColumn = new DataTableAdapterColumn(options);\n    const headerRow = this.getHeaderRow();\n    headerRow.appendChild(tableColumn.element);\n    this.columns.push(tableColumn);\n    return tableColumn;\n  }\n\n  updatePaginator() {\n    if (!this.pageLimit) {\n      return;\n    }\n    const min = this.page * this.pageLimit;\n    const total = this.getDatasource().length;\n    let max = this.pageLimit + min;\n    if (max > total) {\n      max = total;\n    }\n    this.paginationDetailsElement.textContent = `${min + 1}-${max} of ${total}`;\n    this.previousPageButton.setAttribute('aria-disabled', (min === 0 ? 'true' : 'false'));\n    this.nextPageButton.setAttribute('aria-disabled', (max === total ? 'true' : 'false'));\n  }\n\n  /**\n   * @param {Object} options\n   * @param {boolean} [options.disabled=false]\n   * @param {number} [options.limit=10]\n   * @param {number[]} [options.limits=[10,25,50,100]]\n   * @return {void}\n   */\n  setPagination(options = {}) {\n    const footer = this.getFooter(!options.disabled);\n    if (options.disabled) {\n      this.pageLimit = 0;\n      this.page = 0;\n      if (footer) {\n        footer.style.setProperty('display', 'none');\n      }\n      this.needsDraw = true;\n      return;\n    }\n    footer.style.removeProperty('display');\n    let optionsElement = footer.getElementsByClassName('mdw-datatable__footer-options')[0];\n    if (!optionsElement) {\n      optionsElement = document.createElement('div');\n      optionsElement.classList.add('mdw-datatable__footer-options');\n      const rowsPerPageText = document.createElement('span');\n      rowsPerPageText.textContent = 'Rows per page';\n      const limits = options.limits || [10, 25, 50, 100];\n      const limitsElement = document.createElement('label');\n      limitsElement.classList.add('mdw-textfield');\n      limitsElement.setAttribute('mdw-solo', '');\n      const select = document.createElement('select');\n      select.classList.add('mdw-textfield__input');\n      limits.forEach((limit) => {\n        const option = document.createElement('option');\n        option.value = limit.toString();\n        option.textContent = limit.toString();\n        select.appendChild(option);\n      });\n      select.value = (options.limit && options.limit.toString()) || '10';\n      const dropdownIcon = document.createElement('div');\n      dropdownIcon.classList.add('mdw-textfield__icon');\n      dropdownIcon.setAttribute('mdw-dropdown', '');\n      limitsElement.appendChild(select);\n      limitsElement.appendChild(dropdownIcon);\n      optionsElement.appendChild(rowsPerPageText);\n      optionsElement.appendChild(limitsElement);\n      footer.appendChild(optionsElement);\n      select.addEventListener('input', () => {\n        this.pageLimit = parseInt(select.value, 10);\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = footer.getElementsByClassName('mdw-datatable__footer-details')[0];\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = document.createElement('div');\n      this.paginationDetailsElement.classList.add('mdw-datatable__footer-details');\n      footer.appendChild(this.paginationDetailsElement);\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = footer.getElementsByClassName('mdw-datatable__footer-controls')[0];\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = document.createElement('div');\n      this.paginationControls.classList.add('mdw-datatable__footer-controls');\n      footer.appendChild(this.paginationControls);\n    }\n    if (!this.previousPageButton || !this.nextPageButton) {\n      const buttons = this.paginationControls.getElementsByClassName('mdw-button');\n      if (buttons.length !== 2) {\n        this.previousPageButton = document.createElement('a');\n        this.previousPageButton.classList.add('mdw-button');\n        this.previousPageButton.classList.add('material-icons');\n        this.previousPageButton.setAttribute('mdw-icon', '');\n        this.previousPageButton.textContent = 'chevron_left';\n        this.paginationControls.appendChild(this.previousPageButton);\n        Button.attach(this.previousPageButton);\n\n        this.nextPageButton = document.createElement('a');\n        this.nextPageButton.classList.add('mdw-button');\n        this.nextPageButton.classList.add('material-icons');\n        this.nextPageButton.setAttribute('mdw-icon', '');\n        this.nextPageButton.textContent = 'chevron_right';\n        this.paginationControls.appendChild(this.nextPageButton);\n        Button.attach(this.nextPageButton);\n      } else {\n        this.previousPageButton = buttons[0];\n        this.nextPageButton = buttons[1];\n      }\n      this.previousPageButton.addEventListener('click', () => {\n        if (this.previousPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page -= 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n      this.nextPageButton.addEventListener('click', () => {\n        if (this.nextPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page += 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    this.pageLimit = options.limit || 10;\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {boolean} create\n   * @return {HTMLElement}\n   */\n  getFooter(create) {\n    /** @type {HTMLElement} */\n    let footer = (this.element.getElementsByClassName('mdw-datatable__footer')[0]);\n    if (!footer && create) {\n      footer = document.createElement('div');\n      footer.classList.add('mdw-datatable__footer');\n      this.element.appendChild(footer);\n    }\n    return footer;\n  }\n\n  /**\n   * @param {HTMLTableRowElement} el\n   * @param {?number} viewportTop\n   * @param {?number} viewportBottom\n   * @return {boolean}\n   */\n  isRowVisible(\n    el,\n    viewportTop = this.scroller.scrollTop,\n    viewportBottom = this.scroller.scrollTop + this.scroller.offsetHeight\n  ) {\n    const rowTop = el.offsetTop;\n    const rowBottom = rowTop + el.offsetHeight;\n    if (rowTop > viewportTop && rowTop < viewportBottom) {\n      // Top of row is visible\n      return true;\n    }\n    if (rowBottom > viewportTop && rowBottom < viewportBottom) {\n      // Bottom of row is visible\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {(HTMLTableRowElement[])} visibleRows\n   * @return {void}\n   */\n  clearNonvisibleRows(visibleRows) {\n    const tbody = this.getTableBody();\n    if (visibleRows.length === tbody.rows.length) {\n      return;\n    }\n    let firstRowIndex = Infinity;\n    let lastRowIndex = -Infinity;\n    if (visibleRows.length) {\n      firstRowIndex = visibleRows[0].sectionRowIndex;\n      lastRowIndex = visibleRows[visibleRows.length - 1].sectionRowIndex;\n    }\n    iterateArrayLike(tbody.rows, (row, index) => {\n      if (index >= firstRowIndex && index <= lastRowIndex) {\n        return;\n      }\n      if (row.lastChild) {\n        // Store row height to prevent layout shifting\n        row.style.setProperty('height', `${row.offsetHeight || 0}px`);\n      }\n      while (row.lastChild) {\n        row.removeChild(row.lastChild);\n      }\n    });\n  }\n\n  /**\n   * @return {HTMLTableRowElement[]}\n   */\n  getLazyRenderRows() {\n    const tbody = this.getTableBody();\n    const len = tbody.rows.length;\n    /** @type {HTMLTableRowElement[]} */\n    const rows = [];\n    const minRowCount = window.screen.height / 48;\n    if (len <= minRowCount) {\n      iterateArrayLike(tbody.rows, (row) => {\n        rows.push(row);\n      });\n      return rows;\n    }\n    let foundFirstVisibleRow = false;\n    let startIndex = 0;\n    let endIndex = 0;\n    const viewportTop = this.scroller.scrollTop;\n    const viewportBottom = viewportTop + this.scroller.offsetHeight;\n    iterateSomeOfArrayLike(tbody.rows, (row, index) => {\n      if (this.isRowVisible(row, viewportTop, viewportBottom)) {\n        if (!foundFirstVisibleRow) {\n          foundFirstVisibleRow = true;\n          startIndex = index;\n        }\n        endIndex = index;\n      } else if (foundFirstVisibleRow) {\n        return true;\n      }\n      return false;\n    });\n\n    while ((endIndex - startIndex) + 1 < minRowCount) {\n      if (startIndex === 0) {\n        endIndex += 1;\n      } else if (endIndex === len - 1) {\n        startIndex -= 1;\n      } else {\n        startIndex -= 1;\n        endIndex += 1;\n      }\n    }\n    for (let i = startIndex; i <= endIndex; i += 1) {\n      rows.push(tbody.rows.item(i));\n    }\n\n    return rows;\n  }\n\n  /**\n   * @param {boolean} forceRefresh\n   * @return {void}\n   */\n  performLazyRender(forceRefresh = false) {\n    const visibleRows = this.getLazyRenderRows();\n    visibleRows.forEach((row) => {\n      if (forceRefresh || !row.cells.length) {\n        this.refreshRow(row.sectionRowIndex);\n      }\n    });\n    this.clearNonvisibleRows(visibleRows);\n  }\n\n  /**\n   * @param {DataTableAdapterFilter<T>} filter\n   * @return {void}\n   */\n  setFilter(filter) {\n    this.filter = filter;\n    this.refreshFilter();\n  }\n\n  /**\n   * @param {DataTableAdapterSorter<T>} sorter\n   * @return {void}\n   */\n  setSorter(sorter) {\n    this.sorter = sorter;\n    this.refreshFilter();\n  }\n\n  refreshFilter() {\n    if (this.filter && this.sorter) {\n      this.filteredDatasource = this.datasource.filter(this.filter).sort(this.sorter);\n    } else if (this.filter) {\n      this.filteredDatasource = this.datasource.filter(this.filter);\n    } else if (this.sorter) {\n      this.filteredDatasource = this.datasource.slice(0).sort(this.sorter);\n    } else {\n      this.filteredDatasource = null;\n    }\n  }\n\n  /**\n   * Get filtered datasource\n   * @return {T[]}\n   */\n  getDatasource() {\n    if (this.filter || this.sorter) {\n      if (this.filteredDatasource == null) {\n        this.refreshFilter();\n      }\n      return this.filteredDatasource;\n    }\n    return this.datasource;\n  }\n\n  /**\n   * Update number of rows in table\n   * @param {boolean} [refresh=false] Refresh new rows\n   * @return {void}\n   */\n  updateRowCount(refresh) {\n    const tbody = this.getTableBody();\n    const rowLength = tbody.rows.length;\n\n    const datasource = this.getDatasource();\n    let rowsToDisplay = datasource.length;\n    if (this.pageLimit) {\n      let offset = this.page * this.pageLimit;\n      if (offset > rowsToDisplay) {\n        // Datasource or filter likely changed\n        // Reset to page 0\n        this.page = 0;\n        offset = 0;\n      }\n      rowsToDisplay -= offset;\n      if (rowsToDisplay > this.pageLimit) {\n        rowsToDisplay = this.pageLimit;\n      }\n    }\n\n    const rowDifference = rowsToDisplay - rowLength;\n    const newRows = [];\n\n    if (rowDifference < 0) {\n      // too many rows\n      for (let i = rowLength - 1; i >= rowsToDisplay; i -= 1) {\n        const row = tbody.rows.item(i);\n        tbody.removeChild(row);\n      }\n    }\n    if (rowDifference > 0) {\n      const fragment = document.createDocumentFragment();\n      for (let i = 0; i < rowDifference; i += 1) {\n        const row = document.createElement('tr');\n        DataTableRow.attach(row);\n        newRows.push(row);\n        fragment.appendChild(row);\n      }\n      if (this.element.hasAttribute('mdw-row-focusable')) {\n        RovingTabIndex.setupTabIndexes(newRows);\n      }\n      tbody.appendChild(fragment);\n    }\n    if (refresh && rowDifference !== 0) {\n      if (this.useLazyRendering) {\n        this.scheduleThrottledRender(true);\n      } else {\n        newRows.forEach((row) => {\n          this.refreshRow(row.sectionRowIndex);\n        });\n      }\n    }\n  }\n\n  /** @return {void} */\n  refreshRows() {\n    if (this.useLazyRendering) {\n      this.performLazyRender(true);\n    } else {\n      const tbody = this.getTableBody();\n      iterateArrayLike(tbody.rows, (row, index) => {\n        this.refreshRow(index);\n      });\n    }\n    if (this.useLazyRendering) {\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /** @return {void} */\n  refresh() {\n    this.refreshFilter();\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {HTMLTableRowElement} row\n   * @return {T}\n   */\n  getDataForTableRow(row) {\n    const index = (row.sectionRowIndex) + (this.page * this.pageLimit);\n    return this.getDatasource()[index];\n  }\n\n  /**\n   * @param {T} data\n   * @return {HTMLTableRowElement} row\n   */\n  getTableRowForData(data) {\n    const datasourceIndex = this.getDatasource().indexOf(data);\n    if (datasourceIndex === -1) {\n      return null;\n    }\n    const minIndex = this.page * this.pageLimit;\n    return this.getTableBody().rows.item(datasourceIndex - minIndex);\n  }\n\n  /**\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshRow(rowIndex) {\n    const row = this.getTableBody().rows.item(rowIndex);\n    row.style.removeProperty('height');\n    this.columns.forEach((column, columnIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshCell(columnIndex, rowIndex) {\n    const tableColumn = this.columns[columnIndex];\n    const row = this.getTableBody().rows.item(rowIndex);\n    let len = row.cells.length;\n    let createdCells = false;\n    while (len <= columnIndex) {\n      createdCells = true;\n      // Generate cells\n      const missingColumn = this.columns[len];\n      let missingCell;\n      if (missingColumn.rowSelector) {\n        missingCell = document.createElement('th');\n        row.appendChild(missingCell);\n        DataTableRowHeader.attach(missingCell);\n      } else {\n        missingCell = row.insertCell();\n        DataTableCell.attach(missingCell);\n      }\n      switch (missingColumn.type) {\n        case 'checkbox':\n          missingCell.setAttribute('mdw-checkbox', '');\n          break;\n        case 'number':\n          missingCell.setAttribute('mdw-number', '');\n          break;\n        case 'text':\n          missingCell.setAttribute('mdw-text', '');\n          break;\n        default:\n      }\n      missingCell.dataset.key = missingColumn.key;\n      if (missingColumn.rowSelector) {\n        missingCell.setAttribute('mdw-selector', '');\n      }\n      if (missingColumn.primaryColumn) {\n        missingCell.setAttribute('mdw-primary-column', '');\n      }\n      len += 1;\n    }\n    if (createdCells) {\n      if (this.element.hasAttribute('mdw-cell-focusable')) {\n        RovingTabIndex.setupTabIndexes(row.querySelectorAll(DataTable.CELL_TABINDEX_QUERIES.join(',')));\n      }\n    }\n    const cell = row.cells.item(columnIndex);\n    const data = this.getDataForTableRow(row);\n    const value = data[tableColumn.key];\n    if (tableColumn.rowSelector) {\n      if (row.getAttribute('aria-selected') !== (value ? 'true' : 'false')) {\n        row.setAttribute('aria-selected', (value ? 'true' : 'false'));\n      }\n    }\n    const formattedValue = tableColumn.formatter(value, data);\n    tableColumn.renderer(cell, formattedValue, data);\n  }\n\n  /**\n   * @param {HTMLTableCellElement|DataTableAdapterColumn<T>|number|string} search\n   * @return {DataTableAdapterColumn<T>}\n   */\n  getColumn(search) {\n    if (search instanceof DataTableAdapterColumn) {\n      return search;\n    }\n    if (search instanceof HTMLTableCellElement) {\n      return this.columns.filter((column) => column.element === search)[0];\n    }\n    if (typeof search === 'string') {\n      return this.columns.filter((column) => column.element.dataset.key === search)[0];\n    }\n    return this.columns[search];\n  }\n\n  /** @return {HTMLTableElement} */\n  getTable() {\n    let table = this.element.getElementsByTagName('table')[0];\n    if (!table) {\n      table = document.createElement('table');\n      const footer = this.element.getElementsByClassName('mdw-datatable__footer')[0];\n      if (footer) {\n        this.element.insertBefore(table, footer);\n      } else {\n        this.element.appendChild(table);\n      }\n    }\n    return table;\n  }\n\n  /** @return {HTMLTableRowElement} */\n  getHeaderRow() {\n    let thead = this.element.getElementsByTagName('thead')[0];\n    if (!thead) {\n      const table = this.getTable();\n      thead = document.createElement('thead');\n      table.appendChild(thead);\n    }\n    let headerRow = thead.getElementsByTagName('tr')[0];\n    if (!headerRow) {\n      headerRow = document.createElement('tr');\n      thead.appendChild(headerRow);\n    }\n    return headerRow;\n  }\n\n  /** @return {HTMLTableSectionElement} */\n  getTableBody() {\n    if (this.tbody) {\n      return this.tbody;\n    }\n    this.tbody = this.element.getElementsByTagName('tbody')[0];\n    if (!this.tbody) {\n      const table = this.getTable();\n      this.tbody = document.createElement('tbody');\n      table.appendChild(this.tbody);\n    }\n    return this.tbody;\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  refreshColumn(columnIndex) {\n    const tbody = this.getTableBody();\n    iterateArrayLike(tbody.rows, (row, rowIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n}\n","import { findElementParentByClassName } from '../../core/dom';\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function attach(fabElement) {\n  let closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (!closer) {\n    closer = document.createElement('div');\n    closer.classList.add('mdw-fab__close');\n    fabElement.appendChild(closer);\n  }\n  closer.addEventListener('click', onCloserClicked);\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.addEventListener('click', onFabButtonClicked);\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function detach(fabElement) {\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.removeEventListener('click', onFabButtonClicked);\n  const closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (closer) {\n    closer.removeEventListener('click', onCloserClicked);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCloserClicked(event) {\n  /** @type {HTMLElement} */\n  const closer = (event.currentTarget);\n  const fabElement = findElementParentByClassName(closer, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  hide(fabElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onFabButtonClicked(event) {\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const fabElement = findElementParentByClassName(button, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  toggle(fabElement);\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function show(fabElement) {\n  let changed = false;\n  if (fabElement.hasAttribute('mdw-hide')) {\n    fabElement.removeAttribute('mdw-hide');\n    changed = true;\n  }\n  if (!fabElement.hasAttribute('mdw-show')) {\n    fabElement.setAttribute('mdw-show', '');\n    changed = true;\n  }\n  return changed;\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function hide(fabElement) {\n  if (!fabElement.hasAttribute('mdw-hide')) {\n    fabElement.setAttribute('mdw-hide', '');\n  } else {\n    return false;\n  }\n  if (fabElement.hasAttribute('mdw-show')) {\n    fabElement.removeAttribute('mdw-show');\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function toggle(fabElement) {\n  if (hide(fabElement)) {\n    return;\n  }\n  show(fabElement);\n}\n","import * as Selection from './index';\nimport { iterateArrayLike } from '../../core/dom';\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function attach(element) {\n  element.addEventListener(Selection.CHECKED_CHANGE_EVENT, onCheckedChange);\n}\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener(Selection.CHECKED_CHANGE_EVENT, onCheckedChange);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onCheckedChange(event) {\n  const { detail } = event;\n  if (detail.value === 'false') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const radiogroupElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  setTimeout(() => {\n    // Wait to see if event is cancelled\n    if (event.defaultPrevented) {\n      return;\n    }\n    iterateArrayLike(radiogroupElement.querySelectorAll('[role=\"radio\"][aria-checked=\"true\"]'),\n      (item) => {\n        if (item === itemElement) {\n          return;\n        }\n        item.setAttribute('aria-checked', 'false');\n      });\n  });\n}\n","import * as Keyboard from '../../core/aria/keyboard';\n\n/**\n * @param {HTMLTableHeaderCellElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.setAttribute('role', 'rowheader');\n}\n\n/**\n * @param {HTMLTableHeaderCellElement} element\n * @return {void}\n */\nexport function detach(element) {\n  Keyboard.detach(element);\n}\n","/** @return {HTMLElement} */\nfunction AnyDomAdapterCreator() {\n  return document.createElement('div');\n}\n\n/**\n * @param {HTMLElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyDomAdapterRenderer(element, data) {\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      // eslint-disable-next-line no-new-wrappers\n      s = new String(data).toString();\n    }\n  }\n  if (element.textContent !== s) {\n    // eslint-disable-next-line no-param-reassign\n    element.textContent = s;\n  }\n}\n\n/**\n * @typedef {Object} DomAdapterRecycleOptions\n * @prop {HTMLElement} scroller Scrolling container element\n * @prop {boolean} [equalSize=false] All elements are equally sized\n * @prop {boolean} [block=false] All elements are block-like\n * @prop {boolean} [fastMeasure=false] Use integer precision for layout\n * @prop {boolean} [deferRender=false] Render on scroll idle\n */\n\n/**\n * @template T1\n * @template {HTMLElement} T2\n * @typedef {Object} DomAdapterCreateOptions\n * @prop {HTMLElement} element\n * @prop {Array<T1>} datasource\n * @prop {DomAdapterRecycleOptions} [recycle]\n * @prop {function(T1):T2} [create={function(T1):HTMLElement}]\n * @prop {function(T2, T1, number):void} [render={function(HTMLElement,T1):void}]\n */\n\n/**\n * @typedef {Object} DomAdapterBounds\n * @prop {number} top\n * @prop {number=} right\n * @prop {number=} bottom\n * @prop {number=} left\n * @prop {number=} height\n * @prop {number=} width\n */\n\n/**\n * @template T1\n * @template {HTMLElement} T2\n */\nexport default class DomAdapter {\n  /** @param {DomAdapterCreateOptions<T1, T2>} options */\n  constructor(options) {\n    this.element = options.element;\n    this.datasource = options.datasource;\n    /** @type {Map<T1, T2>} */\n    this.dataElementMap = new Map();\n    /** @type {WeakMap<T2, T1>} */\n    this.elementDataMap = new WeakMap();\n    /** @type {WeakMap<any, DomAdapterBounds>} */\n    this.dataBoundsMap = new WeakMap();\n    this.create = options.create || AnyDomAdapterCreator;\n    this.render = options.render || AnyDomAdapterRenderer;\n    this.onScrollerScrollListener = () => this.onScrollerScroll();\n    this.setupRecycleOptions(options.recycle);\n  }\n\n  /**\n   * @param {DomAdapterRecycleOptions} recycleOptions\n   * @return {void}\n   */\n  setupRecycleOptions(recycleOptions) {\n    this.recycle = recycleOptions;\n    if (!this.recycle) {\n      return;\n    }\n    this.recycle.scroller.addEventListener('scroll', this.onScrollerScrollListener);\n    const scrollerStyle = window.getComputedStyle(this.recycle.scroller);\n    if (scrollerStyle.position === 'static') {\n      this.recycle.scroller.style.setProperty('position', 'relative');\n    }\n  }\n\n  onScrollerScroll() {\n    this.drawViewport(false);\n    if (this.deferRenderDebounce) {\n      clearTimeout(this.deferRenderDebounce);\n      this.deferRenderDebounce = null;\n    }\n    if (this.recycle && this.recycle.deferRender) {\n      this.deferRenderDebounce = setTimeout(() => {\n        this.drawViewport(true);\n      }, 50);\n    }\n  }\n\n  /**\n   * @param {boolean} [checkForRemovedItems=true]\n   * @return {void}\n   */\n  refresh(checkForRemovedItems = true) {\n    if (checkForRemovedItems) {\n      /** @type {T1[]} */\n      const unlinkedDataItems = [];\n      this.dataElementMap.forEach((element, data) => {\n        if (this.datasource.indexOf(data) === -1) {\n          unlinkedDataItems.push(data);\n        }\n      });\n      unlinkedDataItems.forEach((data) => {\n        this.removeItem(data);\n      });\n    }\n    if (this.recycle) {\n      this.element.style.removeProperty('box-sizing');\n      this.element.style.removeProperty('padding-top');\n      this.element.style.removeProperty('padding-bottom');\n      this.element.style.removeProperty('height');\n      this.clear();\n      this.drawViewport(true);\n    } else {\n      this.datasource.forEach((data) => {\n        this.refreshItem(data);\n      });\n    }\n  }\n\n  /** @return {void} */\n  clear() {\n    this.maxBottomBounds = 0;\n    this.dataElementMap.clear();\n    this.dataBoundsMap = new WeakMap();\n    this.elementDataMap = new WeakMap();\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild);\n    }\n  }\n\n\n  /**\n   * @param {boolean} [idle=true]\n   * @return {void}\n   */\n  drawViewport(idle = true) {\n    if (!this.recycle || !this.recycle.scroller) {\n      return;\n    }\n    const itemsToDraw = [];\n    let foundVisibleItem = false;\n    let expectedTop = null;\n    let paddingTopSet = false;\n    let lastBottom = 0;\n    const additionalPrerenderSize = (window.screen.height - this.recycle.scroller.clientHeight) / 2;\n    const viewportTop = this.recycle.scroller.scrollTop;\n    const viewportBottom = (this.recycle.scroller.scrollTop + this.recycle.scroller.offsetHeight);\n    const preRenderTop = viewportTop - additionalPrerenderSize;\n    const preRenderBottom = viewportBottom + additionalPrerenderSize;\n    for (let i = 0; i < this.datasource.length; i += 1) {\n      const data = this.datasource[i];\n      let dataBounds = this.getBounds(data, i);\n      let newBounds = false;\n      let element = null;\n      if (!dataBounds || dataBounds.top == null || dataBounds.bottom == null) {\n        if (!this.recycle.block && !paddingTopSet) {\n          if (expectedTop != null) {\n            this.element.style.setProperty('padding-top', `${expectedTop}px`);\n          } else {\n            this.element.style.setProperty('padding-top', `${lastBottom}px`);\n          }\n          paddingTopSet = true;\n        }\n        element = this.refreshItem(data, {\n          create: true,\n          render: !this.recycle.deferRender,\n          invalidate: false,\n        });\n        dataBounds = this.storeBoundsCache(data, element);\n        newBounds = true;\n      }\n      lastBottom = dataBounds.bottom;\n      const isBottomInPrerender = (dataBounds.bottom >= preRenderTop\n        && dataBounds.bottom <= preRenderBottom);\n      const isTopInPrerender = (dataBounds.top >= preRenderTop\n          && dataBounds.top <= preRenderBottom);\n      if (isBottomInPrerender || isTopInPrerender) {\n        if (expectedTop == null) {\n          expectedTop = dataBounds.top;\n        }\n        itemsToDraw.push({\n          data,\n          index: i,\n        });\n        if (!foundVisibleItem) {\n          const isBottomVisible = (dataBounds.bottom >= viewportTop\n            && dataBounds.bottom <= viewportBottom);\n          const isTopVisible = (dataBounds.top >= viewportTop\n            && dataBounds.top <= viewportBottom);\n          foundVisibleItem = (isBottomVisible || isTopVisible);\n        }\n      } else {\n        if (!element && !paddingTopSet) {\n          element = this.dataElementMap.get(data);\n          if (element && element.parentElement) {\n            this.removeElement(element);\n          }\n        }\n        if (foundVisibleItem) {\n          if (newBounds) {\n            this.dataBoundsMap.delete(data);\n          }\n          break;\n        }\n      }\n    }\n    const renderedElements = [];\n    let newPaddingTop = 0;\n    let lastRenderedBounds;\n    for (let i = 0; i < itemsToDraw.length; i += 1) {\n      const item = itemsToDraw[i];\n      let element = this.dataElementMap.get(item.data);\n\n      if (!element) {\n        element = this.refreshItem(item.data, {\n          create: true,\n          render: (this.recycle.deferRender ? idle : true),\n          invalidate: false,\n        });\n      } else if (this.recycle.deferRender && idle) {\n        this.render(element, item.data, item.index);\n      }\n      const cachedBounds = this.getBounds(item.data);\n      if (i === 0 && !this.recycle.block) {\n        newPaddingTop = cachedBounds.top;\n      }\n      if (i === itemsToDraw.length - 1) {\n        lastRenderedBounds = cachedBounds;\n      }\n      renderedElements.push(element);\n    }\n    for (let i = this.element.children.length - 1; i >= 0; i -= 1) {\n      const child = this.element.children.item(i);\n      if (renderedElements.indexOf(child) === -1) {\n        this.removeElement(child);\n      }\n    }\n    this.element.style.setProperty('padding-top', `${newPaddingTop}px`);\n    const lastItem = this.datasource[this.datasource.length - 1];\n    const lastItemBounds = this.dataBoundsMap.get(lastItem);\n\n    if (lastItemBounds) {\n      this.element.style.setProperty('box-sizing', 'border-box');\n      this.element.style.setProperty('height', `${lastItemBounds.bottom}px`);\n      this.element.style.removeProperty('padding-bottom');\n    } else if (this.recycle.equalSize) {\n      this.element.style.setProperty('box-sizing', 'border-box');\n      this.element.style.setProperty('height', `${lastRenderedBounds.height * this.datasource.length}px`);\n      this.element.style.removeProperty('padding-bottom');\n    } else {\n      if (!this.maxBottomBounds || lastRenderedBounds.bottom > this.maxBottomBounds) {\n        this.maxBottomBounds = lastRenderedBounds.bottom;\n      }\n      const height = this.maxBottomBounds - newPaddingTop;\n      this.element.style.setProperty('box-sizing', 'content-box');\n      this.element.style.setProperty('height', `${height}px`);\n      this.element.style.setProperty('padding-bottom', `${64}px`);\n    }\n  }\n\n  /**\n   * @param {T1} data\n   * @param {number} [indexHint]\n   * @return {DomAdapterBounds}\n   */\n  getBounds(data, indexHint) {\n    const cached = this.dataBoundsMap.get(data);\n    if (cached) {\n      return cached;\n    }\n    let index = -1;\n    if (indexHint === -1 || indexHint == null) {\n      index = this.datasource.indexOf(data);\n    } else {\n      index = indexHint;\n    }\n    if (index === -1) {\n      return null;\n    }\n    let top = null;\n    if (index === 0) {\n      const cache = {\n        top: 0,\n      };\n      this.dataBoundsMap.set(data, cache);\n      return cache;\n    }\n    if (!this.recycle.block) {\n      return null;\n    }\n    let height = null;\n    const previousBounds = this.dataBoundsMap.get(this.datasource[index - 1]);\n    if (previousBounds && previousBounds.bottom) {\n      top = previousBounds.bottom;\n    } else if (this.recycle.equalSize) {\n      const firstBounds = this.dataBoundsMap.get(this.datasource[0]);\n      if (firstBounds && firstBounds.height) {\n        top = firstBounds.height * index;\n        // eslint-disable-next-line prefer-destructuring\n        height = firstBounds.height;\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n    if (height == null) {\n      const cache = {\n        top,\n      };\n      this.dataBoundsMap.set(data, cache);\n      return cache;\n    }\n    const cache = {\n      top,\n      height,\n      bottom: top + height,\n    };\n    this.dataBoundsMap.set(data, cache);\n    return cache;\n  }\n\n  /**\n   * @param {T2} element\n   * @return {DomAdapterBounds} bounds\n   */\n  measureElementBounds(element) {\n    if (this.recycle.fastMeasure) {\n      return {\n        top: element.offsetTop,\n        right: element.offsetWidth + element.offsetLeft,\n        bottom: element.offsetHeight + element.offsetTop,\n        left: element.offsetLeft,\n        height: element.clientHeight,\n        width: element.clientWidth,\n      };\n    }\n    const offsetParentRect = element.offsetParent.getBoundingClientRect();\n    const elementRect = element.getBoundingClientRect();\n    const top = elementRect.top - offsetParentRect.top + element.offsetParent.scrollTop;\n    const left = elementRect.left - offsetParentRect.left + element.offsetParent.scrollLeft;\n    return {\n      top,\n      right: elementRect.width + left,\n      bottom: elementRect.height + top,\n      left,\n      height: elementRect.height,\n      width: elementRect.width,\n    };\n  }\n\n  /**\n   * @param {T1} data\n   * @param {T2} element\n   * @return {DomAdapterBounds} bounds\n   */\n  storeBoundsCache(data, element) {\n    if (!this.recycle) {\n      return null;\n    }\n    const cache = this.measureElementBounds(element);\n    this.dataBoundsMap.set(data, cache);\n    return cache;\n  }\n\n  invalidateAll() {\n    /** @type {WeakMap<any, DomAdapterBounds>} */\n    this.dataBoundsMap = new WeakMap();\n  }\n\n\n  /**\n   * @param {T1} data\n   * @param {Object} [options]\n   * @param {boolean} [options.checkPosition=true]\n   * @param {boolean} [options.create] Automatic\n   * @param {boolean} [options.render] Automatic based on deferRender\n   * @param {boolean} [options.invalidate] Automatic\n   * @return {T2} element\n   */\n  refreshItem(data, options = {}) {\n    const dataIndex = this.datasource.indexOf(data);\n    if (dataIndex === -1) {\n      // Item has been removed\n      this.removeItem(data);\n      return null;\n    }\n    let elementIndex = -1;\n    let element = this.dataElementMap.get(data);\n    let invalidate = false;\n    if (element && this.recycle && this.recycle.deferRender && options.invalidate === true) {\n      // Deferred Render has a forced invalidation\n      // Item should be recreated\n      this.removeElement(element);\n      element = null;\n    }\n    if (!element) {\n      // Element does not exist, assume size changed\n      invalidate = true;\n      /** @type {T2} */\n      element = (this.create(data));\n      this.dataElementMap.set(data, element);\n      this.elementDataMap.set(element, data);\n    }\n    if (element && this.recycle && this.recycle.block) {\n      const bounds = this.getBounds(data, dataIndex);\n      element.style.setProperty('position', 'absolute');\n      element.style.setProperty('left', '0');\n      element.style.setProperty('right', '0');\n      if (bounds) {\n        element.style.setProperty('top', `${bounds.top}px`);\n      } else {\n        this.removeElement(element);\n        element = null;\n        invalidate = true;\n      }\n    }\n    if (element && options.checkPosition === false) {\n      if (!element.parentElement) {\n        this.element.appendChild(element);\n      }\n    } else if (element) {\n      if (element.parentElement === this.element) {\n        // Element is in DOM\n        let sibling = this.element.firstElementChild;\n        let siblingIndex = -1;\n        while (sibling) {\n          siblingIndex += 1;\n          if (sibling === element) {\n            elementIndex = siblingIndex;\n            break;\n          }\n          sibling = sibling.nextElementSibling;\n        }\n      }\n      if (elementIndex !== dataIndex) {\n        if (!this.element.children.length) {\n          if (element.parentElement) {\n            element.parentElement.removeChild(element);\n          }\n          this.element.appendChild(element);\n        } else {\n          // Iterate through datasource to previous sibling element\n          let siblingIndex = dataIndex - 1;\n          let inserted = false;\n          let previousDataObject;\n          do {\n            previousDataObject = this.datasource[siblingIndex];\n            const previousElement = this.dataElementMap.get(previousDataObject);\n            if (previousElement) {\n              if (element.previousElementSibling !== previousElement) {\n                if (element.parentElement) {\n                  element.parentElement.removeChild(element);\n                }\n                previousElement.insertAdjacentElement('afterend', element);\n              }\n              inserted = true;\n            } else {\n              siblingIndex -= 1;\n            }\n          } while (previousDataObject && !inserted);\n          if (!inserted) {\n            if (element.parentElement) {\n              element.parentElement.removeChild(element);\n            }\n            this.element.insertBefore(element, this.element.firstElementChild);\n          }\n        }\n      }\n    }\n    if ((options.render === false)\n        || (options.render !== true && this.recycle && this.recycle.deferRender)) {\n      invalidate = true;\n    } else if (element\n      && (options.render === true || (!this.recycle || !this.recycle.deferRender))) {\n      let prevClientWidth;\n      let prevClientHeight;\n      if (!invalidate && options.invalidate !== false) {\n        // Store width and height for later comparison\n        prevClientWidth = element.clientWidth;\n        prevClientHeight = element.clientHeight;\n      }\n      this.render(element, data, dataIndex);\n      if (!invalidate && options.invalidate !== false) {\n        if (element.clientWidth !== prevClientWidth || element.clientHeight !== prevClientHeight) {\n          // Element width or height has changed\n          invalidate = true;\n        }\n      }\n    }\n    if (options.invalidate === true || (invalidate && options.invalidate !== false)) {\n      this.invalidateItem(data, dataIndex);\n    }\n    return element;\n  }\n\n  /**\n   * @param {T2} element\n   * @return {void}\n   */\n  removeElement(element) {\n    if (element.parentElement) {\n      element.parentElement.removeChild(element);\n    }\n    const data = this.elementDataMap.get(element);\n    if (data) {\n      this.dataElementMap.delete(data);\n    }\n    this.elementDataMap.delete(element);\n  }\n\n  /**\n   * @param {T1} data\n   * @param {number} [indexHint]\n   * @return {boolean} change\n   */\n  invalidateItem(data, indexHint) {\n    if (!this.recycle || this.recycle.equalSize) {\n      return false;\n    }\n    // Don't auto-create on non-block layouts\n    // Invalidate in case of size change\n    const currentBounds = this.dataBoundsMap.get(data);\n    if (!currentBounds) {\n      return false;\n    }\n    this.dataBoundsMap.delete(data);\n    const dataIndex = (indexHint != null ? indexHint : this.datasource.indexOf(data));\n    if (dataIndex === -1) {\n      // Item was removed\n      return true;\n    }\n    // Invalidate previous items at same Y position\n    for (let j = dataIndex - 1; j >= 0; j -= 1) {\n      const previousBounds = this.dataBoundsMap.get(this.datasource[j]);\n      if (!previousBounds || previousBounds.top < currentBounds.top) {\n        break;\n      }\n      this.dataBoundsMap.delete(this.datasource[j]);\n    }\n    // Invalidate next items\n    for (let j = dataIndex + 1; j < this.datasource.length; j += 1) {\n      if (!this.dataBoundsMap.delete(this.datasource[j])) {\n        break;\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * @param {T1} data\n   * @param {number} [previousIndex]\n   * @return {void}\n   */\n  removeItem(data, previousIndex) {\n    this.invalidateItem(data, previousIndex);\n    this.dataElementMap.delete(data);\n    const element = this.dataElementMap.get(data);\n    if (element) {\n      this.removeElement(element);\n    }\n  }\n\n  detach() {\n    this.element = null;\n    this.datasource = null;\n  }\n}\n","// https://material.io/design/navigation/navigation-transitions.html\n\nimport { nextTick } from '../dom';\n\n/**\n * @param {string} px\n * @return {number}\n */\nfunction pxToInteger(px) {\n  if (!px) {\n    return 0;\n  }\n  return parseInt(px, 10);\n}\n\n/**\n * @param {string} stringValue\n * @param {number} scaleX\n * @param {number} scaleY\n * @return {string}\n */\nfunction convertBoxShadow(stringValue, scaleX, scaleY) {\n  /**\n   * @param {string} shadow\n   * @return {string}\n   */\n  function convertShadow(shadow) {\n    let inset = '';\n    let offsetX = '';\n    let offsetY = '';\n    let blurRadius = '';\n    let spreadRadius = '';\n    let color = '';\n    shadow.split(' ').forEach((value) => {\n      if (value.toLowerCase() === 'inset') {\n        inset = value;\n        return;\n      }\n      if (value.indexOf('(') !== -1 || !value.match(/\\d/).length) {\n        color = value;\n        return;\n      }\n      const numberValue = pxToInteger(value);\n      if (!offsetX) {\n        offsetX = `${numberValue / scaleX}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!offsetY) {\n        offsetY = `${numberValue / scaleY}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!blurRadius) {\n        blurRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      } else {\n        spreadRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      }\n    });\n    return [\n      inset,\n      offsetX,\n      offsetY,\n      blurRadius,\n      spreadRadius,\n      color,\n    ].filter((v) => v).join(' ');\n  }\n\n  if (!stringValue) {\n    return '';\n  }\n  return stringValue\n    // Strip spaces from anything parenthesized\n    .replace(/\\([^)]+\\)/g, (substring) => substring.replace(/ /g, ''))\n    // Split shadows by commas no inside parentheses\n    .match(/[^,(]+\\([^)]+\\)?[^,]*(|$)/g)\n    // Trim empty spaces\n    .map((shadow) => shadow.trim())\n    // Convert values\n    .map(convertShadow)\n    // Rejoin shadows\n    .join(', ');\n}\n\n/**\n * @param {string} stringValue\n * @param {number} width\n * @param {number} height\n * @return {{horizontal:number, vertical:number}}\n */\nfunction convertBorderRadius(stringValue, width, height) {\n  /**\n   * @param {string} value\n   * @param {number} length\n   * @return {number}\n   */\n  function parsePercentage(value, length) {\n    const numValue = pxToInteger(value);\n    if (value.indexOf('%') === -1) {\n      return numValue;\n    }\n    return ((numValue * length) / 100.0);\n  }\n\n  if (!stringValue) {\n    return {\n      horizontal: 0,\n      vertical: 0,\n    };\n  }\n\n  const split = stringValue.split(' ');\n  if (split.length === 1) {\n    return {\n      horizontal: parsePercentage(stringValue, width),\n      vertical: parsePercentage(stringValue, height),\n    };\n  }\n  return {\n    horizontal: parsePercentage(split[0], width),\n    vertical: parsePercentage(split[1], height),\n  };\n}\n\n/**\n * @param {HTMLElement} targetElement\n * @param {HTMLElement} originElement\n * @param {CSSStyleDeclaration} [originStyle]\n * @return {Object}\n */\nexport function getShapeTransform(targetElement, originElement, originStyle) {\n  const originRect = originElement.getBoundingClientRect();\n  const targetRect = targetElement.getBoundingClientRect();\n  const originCSSStyle = originStyle || window.getComputedStyle(originElement);\n\n  let originX = originRect.left;\n  let originWidth = originRect.width;\n  let originY = originRect.top;\n  let originHeight = originRect.height;\n  if (originCSSStyle.boxSizing === 'border-box') {\n    const paddingTop = pxToInteger(originCSSStyle.paddingTop);\n    const paddingRight = pxToInteger(originCSSStyle.paddingRight);\n    const paddingBottom = pxToInteger(originCSSStyle.paddingBottom);\n    const paddingLeft = pxToInteger(originCSSStyle.paddingLeft);\n    originX += paddingLeft;\n    originWidth -= (paddingLeft + paddingRight);\n    originY += paddingTop;\n    originHeight -= (paddingTop + paddingBottom);\n  }\n\n  return {\n    originWidth,\n    originHeight,\n    translateX: originX - targetRect.left,\n    translateY: originY - targetRect.top,\n    scaleX: originWidth / targetRect.width,\n    scaleY: originHeight / targetRect.height,\n    toString() {\n      return [\n        `translateX(${this.translateX}px)`,\n        `translateY(${this.translateY}px)`,\n        `scaleX(${this.scaleX})`,\n        `scaleY(${this.scaleY})`,\n      ].join(' ');\n    },\n  };\n}\n\n/**\n * @param {HTMLElement} element\n * @param {string} property\n * @param {function(TransitionEvent):void} callback\n * @param {number} [expectedDuration]\n * @return {function} removeListener\n */\nfunction buildTransitionEndListener(element, property, callback, expectedDuration) {\n  let hasEnded = false;\n  const onTransitionEnd = (/** @type {TransitionEvent} */ event) => {\n    if (event.propertyName !== property) {\n      return;\n    }\n    hasEnded = true;\n    element.removeEventListener('transitionend', onTransitionEnd);\n    callback(event);\n  };\n  element.addEventListener('transitionend', onTransitionEnd);\n  if (expectedDuration) {\n    setTimeout(() => {\n      element.removeEventListener('transitionend', onTransitionEnd);\n      if (!hasEnded) {\n        callback(null);\n      }\n    }, expectedDuration + 500);\n  }\n  return () => {\n    element.removeEventListener('transitionend', onTransitionEnd);\n  };\n}\n\n/**\n * @typedef {Object} TransitionElementOptions\n * @prop {HTMLElement} fromShapeElement\n * @prop {HTMLElement} toShapeElement\n * @prop {HTMLElement} fromContentElement\n * @prop {HTMLElement} toContentElement\n * @prop {number} [duration=250|300] (250ms collapse or 300ms expand)\n * @prop {boolean} [revertFrom=false] Revert from elements on completion\n * @prop {function(TransitionElementOptions)} [onTransitionEnd]\n * @prop {function(TransitionElementOptions)} [onComplete]\n */\n\n/**\n * @param {TransitionElementOptions} options\n * @return {function():void} revertAllElements()\n */\nexport function transitionElement(options) {\n  const toStyleSyle = window.getComputedStyle(options.toShapeElement);\n\n  const shapeTransform = getShapeTransform(\n    options.fromShapeElement, options.toShapeElement, toStyleSyle\n  );\n  const contentTransform = getShapeTransform(options.toContentElement, options.fromContentElement);\n\n  const transitionProperties = [\n    'transition',\n    'transform-origin',\n    'transform',\n    'background-color',\n    'border-radius',\n    'box-shadow',\n    'z-index',\n    'filter',\n    'opacity',\n    'visibility',\n  ];\n\n  /** @type {Object.<string,string>} */\n  const oldFromShapeProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldToShapeProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldFromContentProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldToContentProperties = {};\n  /** @type {Object.<string,string>} */\n  const newFromShapeProperties = {};\n  transitionProperties.forEach((prop) => {\n    oldFromShapeProperties[prop] = options.fromShapeElement.style.getPropertyValue(prop);\n    oldToShapeProperties[prop] = options.toShapeElement.style.getPropertyValue(prop);\n    oldFromContentProperties[prop] = options.fromContentElement.style.getPropertyValue(prop);\n    oldToContentProperties[prop] = options.toContentElement.style.getPropertyValue(prop);\n    if (prop === 'box-shadow') {\n      newFromShapeProperties[prop] = convertBoxShadow(\n        toStyleSyle.getPropertyValue(prop),\n        shapeTransform.scaleX,\n        shapeTransform.scaleY\n      );\n    } else if (prop === 'border-radius') {\n      const topLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const topRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const horizontalRadii = [\n        `${topLeft.horizontal / shapeTransform.scaleX}px`,\n        `${topRight.horizontal / shapeTransform.scaleX}px`,\n        `${bottomLeft.horizontal / shapeTransform.scaleX}px`,\n        `${bottomRight.horizontal / shapeTransform.scaleX}px`,\n      ].join(' ');\n      const verticalRadii = [\n        `${topLeft.vertical / shapeTransform.scaleY}px`,\n        `${topRight.vertical / shapeTransform.scaleY}px`,\n        `${bottomLeft.vertical / shapeTransform.scaleY}px`,\n        `${bottomRight.vertical / shapeTransform.scaleY}px`,\n      ].join(' ');\n      newFromShapeProperties[prop] = `${horizontalRadii} / ${verticalRadii}`;\n    } else {\n      newFromShapeProperties[prop] = toStyleSyle.getPropertyValue(prop);\n    }\n  });\n\n  options.fromShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toContentElement.setAttribute('mdw-transition-busy', '');\n  options.fromContentElement.setAttribute('mdw-transition-busy', '');\n\n  // Hide toContentElement and overlay over fromContentElement immediately\n  options.toContentElement.style.setProperty('opacity', '0');\n  options.toContentElement.style.setProperty('transition', 'none');\n  options.toContentElement.style.setProperty('transform-origin', '0 0 0');\n  options.toContentElement.style.setProperty('transform', contentTransform);\n  options.toContentElement.style.setProperty('z-index', '9');\n  options.toContentElement.style.setProperty('visibility', 'visible');\n\n  options.fromContentElement.style.setProperty('opacity', '1');\n\n  options.fromShapeElement.style.setProperty('transition', 'none');\n  options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n  options.fromShapeElement.style.setProperty('transform', 'none');\n  options.fromShapeElement.style.setProperty('z-index', '8');\n\n  options.toShapeElement.style.setProperty('background-color', 'transparent');\n  options.toShapeElement.style.setProperty('filter', 'none');\n  options.toShapeElement.style.setProperty('box-shadow', 'none');\n  options.toShapeElement.style.setProperty('visibility', 'visible');\n\n  const revertFunction = () => {\n    transitionProperties.forEach((prop) => {\n      if (oldFromShapeProperties[prop] == null) {\n        options.fromShapeElement.style.removeProperty(prop);\n      } else {\n        options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n      }\n      if (oldToShapeProperties[prop] == null) {\n        options.toShapeElement.style.removeProperty(prop);\n      } else {\n        options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n      }\n      if (oldFromContentProperties[prop] == null) {\n        options.fromContentElement.style.removeProperty(prop);\n      } else {\n        options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n      }\n      if (oldToContentProperties[prop] == null) {\n        options.toContentElement.style.removeProperty(prop);\n      } else {\n        options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n      }\n    });\n  };\n\n  nextTick(() => {\n    nextTick(() => {\n      let calculatedDuration = options.duration;\n      if (calculatedDuration == null) {\n        if (shapeTransform.scaleX * shapeTransform.scaleY >= 1) {\n          calculatedDuration = 300; // expand\n        } else {\n          calculatedDuration = 250; // collapse\n        }\n      }\n      const totalDuration = calculatedDuration.toString(10);\n      const fadeInTime = (calculatedDuration * 0.70).toString(10);\n      const fadeOutTime = (calculatedDuration * 0.30).toString(10);\n      const transformTransition = transitionProperties\n        .filter((prop) => prop !== 'transform-origin' && prop !== 'opacity' && prop !== 'transition')\n        .map((prop) => `${prop} ${totalDuration}ms cubic-bezier(0.4, 0.0, 0.2, 1) 0s`)\n        .join(', ');\n      const fadeInTransition = `opacity ${fadeInTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) ${fadeOutTime}ms`;\n      const fadeOutTransition = [\n        `opacity ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n        `visibility ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n      ].join(', ');\n\n      options.fromShapeElement.style.setProperty('transition', transformTransition);\n      transitionProperties.forEach((prop) => {\n        if (prop === 'transform') {\n          options.fromShapeElement.style.setProperty('transform', shapeTransform);\n        } else if (prop === 'transition') {\n          // noop;\n        } else if (prop === 'transform-origin') {\n          options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n        } else if (prop === 'z-index') {\n          options.fromShapeElement.style.setProperty('z-index', '8');\n        } else if (prop === 'visibility') {\n          options.fromShapeElement.style.setProperty('visibility', 'hidden');\n        } else if (newFromShapeProperties[prop] == null) {\n          options.fromShapeElement.style.removeProperty(prop);\n        } else {\n          options.fromShapeElement.style.setProperty(prop, newFromShapeProperties[prop]);\n        }\n      });\n\n      nextTick(() => {\n        buildTransitionEndListener(options.fromShapeElement, 'transform', () => {\n          transitionProperties.forEach((prop) => {\n            if (prop === 'transition') {\n              options.toShapeElement.style.setProperty('transition', 'none');\n              options.toContentElement.style.setProperty('transition', 'none');\n            } else {\n              if (oldToShapeProperties[prop] == null) {\n                options.toShapeElement.style.removeProperty(prop);\n              } else {\n                options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n              }\n              if (oldToContentProperties[prop] == null) {\n                options.toContentElement.style.removeProperty(prop);\n              } else {\n                options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n              }\n            }\n\n            if (prop === 'visibility' && !options.revertFrom) {\n              return;\n            }\n            if (oldFromContentProperties[prop] == null) {\n              options.fromContentElement.style.removeProperty(prop);\n            } else {\n              options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n            }\n            if (oldFromShapeProperties[prop] == null) {\n              options.fromShapeElement.style.removeProperty(prop);\n            } else {\n              options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n            }\n          });\n          if (options.onTransitionEnd) {\n            options.onTransitionEnd(options);\n          }\n          nextTick(() => {\n            if (oldToShapeProperties.transition == null) {\n              options.toShapeElement.style.removeProperty('transition');\n            } else {\n              options.toShapeElement.style.setProperty('transition', oldToShapeProperties.transition);\n            }\n            if (oldToContentProperties.transition == null) {\n              options.toContentElement.style.removeProperty('transition');\n            } else {\n              options.toContentElement.style.setProperty('transition', oldToContentProperties.transition);\n            }\n            options.fromShapeElement.removeAttribute('mdw-transition-busy');\n            options.toShapeElement.removeAttribute('mdw-transition-busy');\n            options.toContentElement.removeAttribute('mdw-transition-busy');\n            options.fromContentElement.removeAttribute('mdw-transition-busy');\n            if (options.onComplete) {\n              options.onComplete(options);\n            }\n          });\n        }, calculatedDuration);\n      });\n\n      // Fade out fromContent while shaping into new content\n      options.fromContentElement.style.setProperty('transition', fadeOutTransition);\n      options.fromContentElement.style.setProperty('opacity', '0');\n      options.fromContentElement.style.setProperty('visibility', 'hidden');\n\n      options.toContentElement.style.setProperty('transition', [\n        transformTransition,\n        fadeInTransition,\n      ].join(', '));\n      options.toContentElement.style.setProperty('opacity', '1');\n      options.toContentElement.style.setProperty('transform', 'none');\n    });\n  });\n\n  return revertFunction;\n}\n"],"sourceRoot":""}