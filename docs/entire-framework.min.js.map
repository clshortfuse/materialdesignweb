{"version":3,"sources":["webpack:///../core/dom.js","webpack:///../core/aria/rovingtabindex.js","webpack:///../core/aria/button.js","webpack:///../components/button/index.js","webpack:///../core/ripple/index.js","webpack:///../core/overlay/index.js","webpack:///../components/dialog/index.js","webpack:///../components/list/secondary.js","webpack:///../components/list/content.js","webpack:///../core/throttler.js","webpack:///../components/layout/index.js","webpack:///../components/menu/index.js","webpack:///../components/tab/item.js","webpack:///../components/menu/item.js","webpack:///../components/list/index.js","webpack:///../components/textfield/index.js","webpack:///../components/bottomnav/item.js","webpack:///../components/snackbar/index.js","webpack:///../components/list/item.js","webpack:///../components/datatable/index.js","webpack:///../core/aria/attributes.js","webpack:///../core/aria/tab.js","webpack:///../adapters/dom/index.js","webpack:///../adapters/list/index.js","webpack:///../components/bottomnav/index.js","webpack:///../adapters/search/index.js","webpack:///../components/tab/panel.js","webpack:///../components/tab/content.js","webpack:///../components/tab/list.js","webpack:///../components/tab/index.js","webpack:///../components/chip/index.js","webpack:///../components/chip/item.js","webpack:///../adapters/datatable/column.js","webpack:///../components/progress/index.js","webpack:///../adapters/datatable/index.js","webpack:///../components/fab/index.js","webpack:///../core/transition/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getPassiveEventListenerOption","nextTick","cancelTick","getChildElementByClass","findElementParentByClassName","isRtl","dispatchDomEvent","iterateArrayLike","iterateSomeOfArrayLike","iterateElementSiblings","getTextNode","setTextNode","scrollToElement","passiveEventListenerSupported","options","passive","window","addEventListener","removeEventListener","err","testPassiveEventListenerOptionSupport","requestAnimationFrame","cb","setTimeout","cancelAnimationFrame","clearTimeout","element","className","child","getElementsByClassName","parentElement","includeSelf","el","classList","contains","document","documentElement","dir","type","detail","event","CustomEvent","bubbles","cancelable","Event","createEvent","initEvent","initCustomEvent","dispatchEvent","arrayLike","fn","Array","prototype","forEach","call","some","distance","sibling","previousElementSibling","nextElementSibling","node","create","textNode","childNodes","childNode","nodeType","Node","TEXT_NODE","createTextNode","appendChild","value","nodeValue","removeChild","smooth","rtl","parent","targetScrollLeft","scrollWidth","offsetLeft","offsetWidth","elementRect","getBoundingClientRect","parentRect","subPixelScrollPosition","left","Math","abs","scrollLeft","scrollTo","top","behavior","style","setProperty","removeProperty","TABINDEX_ZEROED","FORWARDS_REQUESTED","BACKWARDS_REQUESTED","setupTabIndexes","detach","removeTabIndex","selectNext","selectPrevious","_dom__WEBPACK_IMPORTED_MODULE_0__","items","focusableWhenDisabled","arguments","length","undefined","currentlyFocusedChild","currentTabIndexChild","firstFocusableChild","activeElement","getAttribute","setAttribute","onChildFocus","onKeyDownHandler","currentTarget","excludeItems","item","indexOf","hasAttribute","ctrlKey","altKey","shiftKey","metaKey","childElement","target","moveHorizontal","moveVertical","key","verticalOrientation","ariaOrientation","moveForwards","isPageRTL","stopPropagation","preventDefault","attemptFocus","focus","e","list","current","reverse","foundCurrent","index","array","candidate","onKeyDown","buttonElement","newEvent","attach","add","Ripple","Overlay","attachCore","HTMLButtonElement","HTMLInputElement","AriaButton","detachCore","removeAttribute","button_attach","button_detach","rippleContainer","createElement","firstChild","insertBefore","rippleInner","onClick","onMouseDown","onTouchStart","onAnimationEnd","pointerType","rect","updateRipplePosition","pageX","pageXOffset","pageY","pageYOffset","drawRipple","touch","changedTouches","matches","msMatchesSelector","isActive","x","y","width","height","xPos","yPos","clientWidth","clientHeight","hypotenuse","sqrt","concat","initiator","currentInitiator","animationName","clearRipple","lastInteractionWasTouch","onBlur","onFocus","matchMedia","DialogStack","previousFocus","state","previousState","_classCallCheck","this","OPEN_DIALOGS","CANCEL_EVENT","CONFIRM_EVENT","CUSTOM_EVENT","DISMISS_EVENT","dialogCloser","onCancelClick","popup","buttons","querySelectorAll","foundConfirmButton","foundCancelButton","button","Button","onCustomButtonClick","onConfirmClick","dialogElement","popupElement","setupARIA","HTMLAnchorElement","cancelElement","cancel","hide","confirm","onEscapeKeyDown","focusableElements","join","foundTarget","handleTabKeyPress","onPopState","lastOpenDialog","Object","keys","every","title","getTitleText","history","pushState","titleElement","textContent","bodyElement","stackIndex","stack","splice","hash","back","show","changed","dialogRect","Element","transformOriginX","transformOriginY","offsetTop","updateTransformOrigin","newState","random","toString","substr","replaceState","dialogStack","push","focusElement","querySelector","console","error","updateButtonText","texts","updateBody","content","body","insertAdjacentElement","DocumentFragment","lastChild","updateTitle","buttonArea","buttonText","custom","autofocus","stacked","SECONDARY_ACTION_EVENT","onInteraction","listSecondaryElement","ACTIVATE_EVENT","SELECTED_CHANGE_EVENT","CHECKED_CHANGE_EVENT","FOCUS_EVENT","content_attach","onSecondaryAction","content_onClick","isDisabled","content_detach","setSelected","setChecked","setCurrent","listContentElement","secondaryElement","ListSecondary","onCheckToggleRequest","currentValue","newValue","Attributes","Throttler","throttleTimeMs","pending","queued","queue","_this","run","hideNavDrawer","getAppBarElement","showFab","hideFab","resetScroll","MIN_SCROLL_DELTA","MOBILE_BREAKPOINT","TABLET_BREAKPOINT","SCROLL_THROTTLE_TIME_MS","lastScrollY","penultimateScrollY","scrolledPastAppBar","appBarElement","layoutContentElement","lastScrollBottomDistance","scrollThrottler","onBodyScroll","contentElement","getContentElement","onContentScroll","toggleNavDrawer","showNavDrawer","toggleSideSheet","showSideSheet","hideSideSheet","scrim","onScrimClick","onScrimScroll","getScrollThrottler","scrollTop","scrollHeight","navDrawer","location","id","innerWidth","sidesheet","onScroll","shouldAutoHideAppBar","appBar","autoHide","changeFabCut","fabElement","fabCutAttr","trim","openAppBarFabCut","replace","closeAppBarFabCut","isBody","scrollElement","currentScrollY","change","delta","scrollBottom","scrollBottomDistance","scrollBottomChange","didScrollUp","isAtScrollTop","newScrollUp","didScrollDown","isAtScrollBottom","newScrollDown","bottomAppBar","scrolledAway","newScrollAway","scrolledBack","isAtRest","MenuStack","originalEvent","pendingResizeOperation","OPEN_MENUS","HIDE_EVENT","menuElement","onMenuClick","onMenuScroll","onWindowResize","lastOpenMenu","updateMenuPosition","selectNextMenuItem","MenuItem","menu","backwards","menuItems","firstFocusableItem","lastFocusableElement","focusable","alignTarget","transformOrigin","useAlignTarget","margin","mdwPosition","mdwDirection","alignTop","alignBottom","alignVCenter","alignStart","alignEnd","alignLeft","alignRight","alignHCenter","openUp","openDown","openNormal","openReverse","openVCenter","openHCenter","openLtr","openRtl","offsetY","offsetBottom","offsetX","offsetRight","popupElementHeight","popupElementWidth","canOpenDownwardsFromBottom","innerHeight","canOpenDownwardsFromTop","canOpenUpwardsFromTop","canOpenUpwardsFromBottom","canOpenRightwardsFromLeft","canOpenRightwardsFromRight","canOpenLeftwardsFromRight","canOpenLeftwardsFromLeft","canOpenFromCenter","candidates","map","filter","candidateNumber","number","menuStack","menuItem","refreshMenuItems","_core_aria_tab__WEBPACK_IMPORTED_MODULE_0__","_core_dom__WEBPACK_IMPORTED_MODULE_1__","_core_overlay_index__WEBPACK_IMPORTED_MODULE_2__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_3__","AriaTab","attachAria","CHECK_EVENT","UNCHECK_EVENT","_core_overlay_index__WEBPACK_IMPORTED_MODULE_0__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_1__","_core_dom__WEBPACK_IMPORTED_MODULE_2__","onMouseMove","role","useAriaChecked","menuItemElement","toggleChecked","checked","isCheckable","isChecked","attachAll","_core_dom__WEBPACK_IMPORTED_MODULE_0__","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_1__","_item__WEBPACK_IMPORTED_MODULE_2__","_content__WEBPACK_IMPORTED_MODULE_3__","root","listElement","newRole","children","setupAria","ListItem","RovingTabIndex","onForwardsRequested","onBackwardsRequested","onTabIndexZeroed","ListContent","onSelectedChangeEvent","onCheckedChangeEvent","onContentFocusEvent","onFocusInteraction","split","interaction","listElementRole","itemElement","defaultPrevented","currentItem","setValue","textfieldElement","input","onInput","inputElement","updateTextAreaSize","updateInputEmptyState","attrName","previousRowsAttrValue","rows","_window$getComputedSt","getComputedStyle","paddingTop","heightPx","parseInt","paddingTopPx","floor","HTMLTextAreaElement","HTMLSelectElement","Date","hoursStr","getHours","minutesStr","getMinutes","secondsStr","getSeconds","getMilliseconds","valueAsDate","valueAsNumber","getTime","getTimezoneOffset","SnackbarQueueItem","hideTimeout","SNACKBAR_QUEUE","SHOW_EVENT","snackbarElement","onButtonClick","slice","reverseIndex","clearHideTimeout","findNextQueueItem","q","handleAnimationChange","currentQueueItem","autoHideString","timeInSeconds","parseFloat","timeout","nextQueueItem","update","span","getElementsByTagName","text","buttonInk","autoDestroy","newlyCreated","skipQueue","_content__WEBPACK_IMPORTED_MODULE_0__","listItemElement","isTreeItem","roleIsNone","activatorContent","parentRole","contentChild","setExpanded","isExpanded","onChildContentActivate","treeitem","activatedElement","updateTabIndex","getScroller","headerRow","getHeaderRow","tbody","getTableBody","cellFocusable","rowFocusable","onHeaderRowClick","onTableBodyKeyDown","onTableBodyClick","firstRow","foundTabbableRow","firstCell","foundTabbableCell","row","cells","cell","mdwDataTable","findParentCell","hasSelection","checkboxes","checkbox","HTMLTableRowElement","HTMLTableCellElement","removeOtherTabIndexes","HTMLTableSectionElement","td","tr","HTMLTableElement","cellIndex","mdwTable","ascending","th","i","deleteRow","sort","a","b","aCell","bCell","aText","bText","dataset","localeCompare","fragment","createDocumentFragment","currentSelection","isRow","nextSelection","sectionRowIndex","newRow","newIndex","newRowIndex","newCellIndex","isRtlEnabled","isLeft","isRight","datatableElement","scroller","footer","table","getTable","tableElement","thead","name","dispatchEventName","stringValue","explicit","emptyValue","attr","_attributes__WEBPACK_IMPORTED_MODULE_0__","AnyDomAdapterCreatorFn","AnyDomAdapterRendererFn","data","s","String","DomAdapter","datasource","renderFn","createFn","Map","elementMap","render","unlinkedDataItems","removeItem","refreshItem","clear","WeakMap","checkPosition","elementIndex","get","siblingIndex","nextSibling","set","delete","idx","nextDataObject","nextElement","AnyListAdapterRendererFn","primaryText","ListAdapter","list_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","bottomnavElement","selectedItem","BottomNavItem","containsTextFilter","toLocaleLowerCase","startsWithTextFilter","defaultItemTextParser","textElement","selectSibling","scrollItemIntoView","listItem","visibility","_rect","next","bottom","getElementVisibility","scrollIntoView","block","inline","SearchAdapter","textfield","List","textFilter","itemTextParser","onItemSelected","inputValue","suggestedInput","setSelectionRange","hideDropDown","onTextFieldKeydownEvent","handleInputEvent","handleBlurEvent","searchOnFocus","dropdown","filterItems","debounce","suggestionMethod","currentSearchTerm","previousValue","performSearch","updateList","results","_this2","showDropDown","performDebounce","checkExpired","searchResults","filterListItems","onErrorCallback","message","resolve","reject","Error","searchTerm","_this3","dropDownElement","suggestion","TextField","selectionStart","selectionEnd","fnFilter","_this4","hasItem","newSelection","isDropDownShown","click","tabPanelElement","setHidden","SCROLL_EVENT","onTabContentScroll","tabContentElement","isPageRtl","scrollPoint","visibleIndex","visibilityPercentage","panel","rightPanel","leftPeekPanel","rightPeekPanel","selectedIndex","leftPanelIndex","isResting","leftSelected","rightSelected","lastIndex","leftPanel","currentTargetIndexString","currentTargetIndex","newSelectedIndex","TabPanel","selectPanel","panelElement","scrollToPanel","currentSelectedIndex","panelIndex","otherPanels","tabListElement","setIndicatorPosition","percentage","animate","indicatorElement","leftItem","right","nextItem","TabItem","tab_attach","tab_detach","onResize","RESIZE_WAIT_FRAMES","tabElement","TabList","TabContent","onTabItemSelectedChange","selectedPanel","panels","tabItemElement","tabItemIndex","tabItems","stage","performResize","relatedPanel","relatedItem","dispatchEvents","_item__WEBPACK_IMPORTED_MODULE_1__","ChipItem","_core_ripple_index__WEBPACK_IMPORTED_MODULE_0__","DataTableAdapterColumn","innerHTML","sortable","sortIcon","customSortIcon","hasChildNodes","tooltip","wrapper","primaryColumn","rowSelector","checkboxLabel","icon","constructTableCheckbox","renderer","defaultCheckboxRenderer","defaultCellRenderer","formatter","foundTextNode","circumference","PI","progressCircleElement","dashOffset","pathElements","DataTableAdapter","datatable","sorter","onValueChangeRequested","onValueChanged","onElementClickListener","handleClickInteraction","onElementScrollListener","onElementScroll","tabindexRow","tabindexRowData","getDataForTableRow","DataTable","columns","page","pageLimit","debounceTimeMs","useLazyRendering","filteredDatasource","forceRefresh","performLazyRender","throttledRenderPending","scheduleThrottledRender","performThrottledRender","debounceTimeout","currentCell","getTableCell","tagName","toLowerCase","setCheckOnAllRows","setHasSelection","currentRow","getTableRow","object","selectedRows","getSelectedRows","updateSortIcons","updateSortColumn","tableHeaderCell","refresh","tableColumn","direction","valueA","valueB","sortedTableHeaderCell","otherTableHeader","columnIndex","column","selectorColumn","getDatasource","buildScrollListener","destroyScrollListener","min","total","max","paginationDetailsElement","previousPageButton","nextPageButton","getFooter","disabled","display","needsDraw","optionsElement","rowsPerPageText","limits","limitsElement","select","limit","option","dropdownIcon","updateRowCount","updatePaginator","refreshRows","paginationControls","viewportTop","viewportBottom","offsetHeight","rowTop","rowBottom","visibleRows","firstRowIndex","Infinity","lastRowIndex","_this5","len","minRowCount","screen","foundFirstVisibleRow","startIndex","endIndex","isRowVisible","_this6","getLazyRenderRows","refreshRow","clearNonvisibleRows","refreshFilter","_this7","rowLength","rowsToDisplay","offset","rowDifference","newRows","_this8","getTableRowForData","datasourceIndex","minIndex","rowIndex","_this9","refreshCell","missingColumn","missingCell","insertCell","formattedValue","search","_this10","closer","onCloserClicked","onFabButtonClicked","toggle","transitionElement","pxToInteger","px","convertBorderRadius","parsePercentage","numValue","horizontal","vertical","getShapeTransform","targetElement","originElement","originStyle","originRect","targetRect","originCSSStyle","originX","originWidth","originY","originHeight","boxSizing","paddingRight","paddingBottom","paddingLeft","translateX","translateY","scaleX","scaleY","toStyleSyle","toShapeElement","shapeTransform","fromShapeElement","contentTransform","toContentElement","fromContentElement","transitionProperties","oldFromShapeProperties","oldToShapeProperties","oldFromContentProperties","oldToContentProperties","newFromShapeProperties","prop","getPropertyValue","substring","match","shadow","inset","blurRadius","spreadRadius","color","numberValue","v","topLeft","topRight","bottomLeft","bottomRight","horizontalRadii","verticalRadii","calculatedDuration","duration","totalDuration","fadeInTime","fadeOutTime","transformTransition","fadeInTransition","fadeOutTransition","property","callback","expectedDuration","hasEnded","onTransitionEnd","revertFrom","transition","onComplete","propertyName"],"mappings":"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","file":"entire-framework.min.js","sourcesContent":["let passiveEventListenerSupported = null;\n\n/** @return {void} */\nfunction testPassiveEventListenerOptionSupport() {\n  try {\n    passiveEventListenerSupported = false;\n    const options = {\n      get passive() {\n        passiveEventListenerSupported = true;\n        return true;\n      },\n    };\n    // @ts-ignore\n    window.addEventListener('test', options, options);\n    // @ts-ignore\n    window.removeEventListener('test', options, options);\n  } catch (err) {\n    passiveEventListenerSupported = false;\n  }\n}\n\n/** @return {Object|boolean} */\nexport function getPassiveEventListenerOption() {\n  if (passiveEventListenerSupported == null) {\n    testPassiveEventListenerOptionSupport();\n  }\n  if (passiveEventListenerSupported) {\n    return { passive: true };\n  }\n  return false;\n}\n\nexport const nextTick = window.requestAnimationFrame || (cb => window.setTimeout(cb, 17));\n\nexport const cancelTick = window.cancelAnimationFrame || window.clearTimeout;\n\n/**\n * @param {Element} element\n * @param {string} className\n * @return {Element}\n */\nexport function getChildElementByClass(element, className) {\n  const child = element.getElementsByClassName(className)[0];\n  if (child && child.parentElement !== element) {\n    return null;\n  }\n  return child;\n}\n\n/**\n * @param {HTMLElement} element\n * @param {string} className\n * @param {boolean} [includeSelf=true]\n * @return {HTMLElement}\n */\nexport function findElementParentByClassName(element, className, includeSelf) {\n  /** @type {HTMLElement} */\n  let el;\n  if (includeSelf === false) {\n    el = element.parentElement;\n  } else {\n    el = element;\n  }\n  while (el != null && !el.classList.contains(className)) {\n    el = el.parentElement;\n  }\n  return el;\n}\n\n/** @return {boolean} */\nexport function isRtl() {\n  return document.documentElement.dir === 'rtl';\n}\n\n/**\n * @param {Element} element\n * @param {string} type\n * @param {Object} [detail]\n * @return {boolean}\n */\nexport function dispatchDomEvent(element, type, detail) {\n  let event;\n  if (typeof CustomEvent === 'function') {\n    event = new CustomEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      detail,\n    });\n  } else if (detail == null) {\n    if (typeof Event === 'function') {\n      event = new Event(type, {\n        bubbles: true,\n        cancelable: true,\n      });\n    } else {\n      event = document.createEvent('Event');\n      event.initEvent(type, true, true);\n    }\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, detail);\n  }\n  return element.dispatchEvent(event);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):any} fn\n * @return {void}\n * @template {any} T\n */\nexport function iterateArrayLike(arrayLike, fn) {\n  Array.prototype.forEach.call(arrayLike, fn);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):boolean|void} fn\n * @return {boolean}\n * @template {any} T\n */\nexport function iterateSomeOfArrayLike(arrayLike, fn) {\n  return Array.prototype.some.call(arrayLike, fn);\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.nextElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateSomeOfElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Node} node\n * @param {boolean} [create]\n * @return {Node}\n */\nexport function getTextNode(node, create) {\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (create && !textNode) {\n    textNode = document.createTextNode('');\n    node.appendChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {Node} node\n * @param {string} value\n * @return {Node}\n */\nexport function setTextNode(node, value) {\n  /** @type {ChildNode} */\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (value) {\n    if (!textNode) {\n      textNode = document.createTextNode(value);\n      node.appendChild(textNode);\n    } else {\n      textNode.nodeValue = value;\n    }\n  } else if (textNode) {\n    node.removeChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {HTMLElement} element\n * @param {boolean} [smooth=false]\n * @param {boolean} [rtl=false]\n * @return {void}\n */\nexport function scrollToElement(element, smooth, rtl) {\n  if (!element) {\n    return;\n  }\n  const parent = element.parentElement;\n  if (!parent) {\n    return;\n  }\n\n  let targetScrollLeft = rtl\n    ? parent.scrollWidth + element.offsetLeft - element.offsetWidth\n    : element.offsetLeft;\n\n  const elementRect = element.getBoundingClientRect();\n  const parentRect = parent.getBoundingClientRect();\n  let subPixelScrollPosition = elementRect.left - parentRect.left;\n  if (subPixelScrollPosition < 0) {\n    subPixelScrollPosition = 0;\n  }\n  if (Math.abs(subPixelScrollPosition - targetScrollLeft) < 2) {\n    targetScrollLeft = subPixelScrollPosition;\n  }\n  if (parent.scrollLeft === targetScrollLeft) {\n    return;\n  }\n\n  if (parent.scrollTo) {\n    parent.scrollTo({\n      top: 0,\n      left: targetScrollLeft,\n      behavior: smooth ? 'smooth' : 'auto',\n    });\n    return;\n  }\n  parent.style.setProperty('scroll-behavior', 'auto');\n  parent.scrollLeft = targetScrollLeft;\n  nextTick(() => {\n    parent.style.removeProperty('scroll-behavior');\n  });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#kbd_roving_tabindex\n\nimport {\n  iterateArrayLike,\n  isRtl,\n  dispatchDomEvent,\n  iterateSomeOfArrayLike,\n} from '../dom';\n\nexport const TABINDEX_ZEROED = 'mdw:rovingtabindex-tabindexzeroed';\nexport const FORWARDS_REQUESTED = 'mdw:rovingtabindex-forwardsrequested';\nexport const BACKWARDS_REQUESTED = 'mdw:rovingtabindex-backwardsrequested';\n\n/**\n * @param {Element} parentElement\n * @param {ArrayLike<Element>} items\n * @param {boolean} [focusableWhenDisabled=true]\n * @return {void}\n */\nexport function setupTabIndexes(parentElement, items, focusableWhenDisabled = true) {\n  /** @type {Element} */\n  let currentlyFocusedChild = null;\n  /** @type {Element} */\n  let currentTabIndexChild = null;\n  /** @type {Element} */\n  let firstFocusableChild = null;\n  iterateArrayLike(items, (child) => {\n    if (!currentlyFocusedChild && document.activeElement === child) {\n      currentlyFocusedChild = child;\n    } else if (!currentTabIndexChild && child.getAttribute('tabindex') === '0') {\n      currentTabIndexChild = child;\n    } else {\n      if (!firstFocusableChild && child.getAttribute('aria-hidden') !== 'true'\n        && (focusableWhenDisabled || child.getAttribute('aria-disabled') !== 'true')) {\n        firstFocusableChild = child;\n      }\n      child.setAttribute('tabindex', '-1');\n    }\n    child.addEventListener('focus', onChildFocus);\n  });\n  if (currentlyFocusedChild) {\n    currentlyFocusedChild.setAttribute('tabindex', '0');\n  } else if (currentTabIndexChild) {\n    if (currentlyFocusedChild) {\n      currentTabIndexChild.setAttribute('tabindex', '-1');\n    }\n  } else if (firstFocusableChild) {\n    firstFocusableChild.setAttribute('tabindex', '0');\n  }\n  parentElement.addEventListener('keydown', onKeyDownHandler);\n}\n\n\n/**\n * @param {Element} parentElement\n * @param {ArrayLike<Element>} items\n * @return {void}\n */\nexport function detach(parentElement, items) {\n  iterateArrayLike(items, (child) => {\n    child.removeEventListener('focus', onChildFocus);\n  });\n  parentElement.removeEventListener('keydown', onKeyDownHandler);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nfunction onChildFocus(event) {\n  /** @type {Element} */\n  const child = (event.currentTarget);\n  if (child.getAttribute('tabindex') === '0') {\n    return;\n  }\n  child.setAttribute('tabindex', '0');\n  dispatchDomEvent(child, TABINDEX_ZEROED);\n}\n\n/**\n * @param {ArrayLike<Element>} items\n * @param {Element[]} [excludeItems]\n * @return {void}\n */\nexport function removeTabIndex(items, excludeItems = []) {\n  iterateArrayLike(items, (item) => {\n    if (excludeItems.indexOf(item) !== -1) {\n      return;\n    }\n    if (item.hasAttribute('tabindex')) {\n      item.setAttribute('tabindex', '-1');\n    }\n  });\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDownHandler(event) {\n  if (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\n    return;\n  }\n\n  /** @type {Element} */\n  const parentElement = (event.currentTarget);\n  /** @type {Element} */\n  const childElement = (event.target);\n\n  let moveHorizontal = false;\n  let moveVertical = false;\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      moveHorizontal = true;\n      break;\n    case 'ArrowDown':\n    case 'ArrowUp':\n    case 'Down':\n    case 'Up':\n      moveVertical = true;\n      break;\n    default:\n      return;\n  }\n\n  let verticalOrientation = true;\n  // DOM Read\n  const ariaOrientation = parentElement.getAttribute('aria-orientation');\n  if (ariaOrientation === 'horizontal') {\n    verticalOrientation = false;\n  } else if (ariaOrientation !== 'vertical') {\n    switch (parentElement.getAttribute('role')) {\n      case 'listbox':\n      case 'tablist':\n      case 'tree':\n        verticalOrientation = true;\n        break;\n      default:\n        verticalOrientation = false;\n    }\n  }\n  let moveForwards = false;\n  if (verticalOrientation) {\n    if (!moveVertical) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Down':\n        moveForwards = true;\n        break;\n      case 'ArrowUp':\n      case 'Up':\n        // moveForwards = false;\n        break;\n      default:\n        return;\n    }\n  } else {\n    if (!moveHorizontal) {\n      return;\n    }\n    const isPageRTL = isRtl();\n    switch (event.key) {\n      case 'ArrowLeft':\n      case 'Left':\n        moveForwards = isPageRTL;\n        break;\n      case 'ArrowRight':\n      case 'Right':\n        moveForwards = !isPageRTL;\n        break;\n      default:\n        return;\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  if (moveForwards) {\n    dispatchDomEvent(childElement, FORWARDS_REQUESTED);\n  } else {\n    dispatchDomEvent(childElement, BACKWARDS_REQUESTED);\n  }\n}\n\n/**\n * @param {HTMLElement} element\n * @return {boolean}\n */\nfunction attemptFocus(element) {\n  try {\n    element.focus();\n  } catch (e) {\n    // Ignore error.\n  }\n  return document.activeElement === element;\n}\n\n/**\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @param {boolean} [reverse]\n * @return {void}\n */\nexport function selectNext(list, current = null, reverse = false) {\n  let foundCurrent = false;\n\n  const iterateResult = iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!foundCurrent) {\n      if (current) {\n        if (candidate === current) {\n          foundCurrent = true;\n        }\n      } else if (candidate.getAttribute('tabindex') === '0') {\n        foundCurrent = true;\n      }\n      return false;\n    }\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    return attemptFocus(candidate);\n  });\n  if (iterateResult) {\n    return;\n  }\n  iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    // Abort if we've looped all the way back to original element\n    // Abort if candidate received focus\n    return (attemptFocus(candidate) || candidate === current);\n  });\n}\n\n/**\n * Alias for selectNext(list, current, true);\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @return {void}\n */\nexport function selectPrevious(list, current) {\n  return selectNext(list, current, true);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'button');\n  if (element instanceof HTMLButtonElement === false\n      && !element.hasAttribute('tabindex')) {\n    element.setAttribute('tabindex', '0');\n  }\n  element.setAttribute('mdw-aria-button-js', '');\n  if (element instanceof HTMLButtonElement === false\n    && element instanceof HTMLInputElement === false) {\n    element.addEventListener('keydown', onKeyDown);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-button-js');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (!buttonElement) {\n    return;\n  }\n  if (buttonElement.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  buttonElement.dispatchEvent(newEvent);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\nimport * as Ripple from '../../core/ripple/index';\nimport * as Overlay from '../../core/overlay/index';\nimport * as AriaButton from '../../core/aria/button';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Ripple.attach(element);\n  element.classList.add('mdw-ripple');\n  Overlay.attach(element);\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  AriaButton.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaButton.detach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","import { getChildElementByClass, nextTick, getPassiveEventListenerOption, iterateArrayLike } from '../dom';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-ripple'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  let rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (!rippleContainer) {\n    rippleContainer = document.createElement('div');\n    rippleContainer.classList.add('mdw-ripple__container');\n    rippleContainer.setAttribute('role', 'presentation');\n    if (element.firstChild) {\n      element.insertBefore(rippleContainer, element.firstChild);\n    } else {\n      element.appendChild(rippleContainer);\n    }\n  }\n\n  let rippleInner = getChildElementByClass(rippleContainer, 'mdw-ripple__inner');\n  if (!rippleInner) {\n    rippleInner = document.createElement('div');\n    rippleInner.classList.add('mdw-ripple__inner');\n    rippleInner.setAttribute('role', 'presentation');\n    rippleContainer.appendChild(rippleInner);\n  }\n  element.setAttribute('mdw-ripple-js', '');\n  element.addEventListener('click', onClick, getPassiveEventListenerOption());\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  rippleInner.addEventListener('animationend', onAnimationEnd, getPassiveEventListenerOption());\n}\n\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (!event.pointerType && !event.detail) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = event.pageX - rect.left - window.pageXOffset;\n  const y = event.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'mouse');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  const touch = event.changedTouches[0];\n  if (!touch) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = touch.pageX - rect.left - window.pageXOffset;\n  const y = touch.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'touch');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n\n  nextTick(() => {\n    if (isActive(rippleContainer.parentElement)) {\n      if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n        return;\n      }\n      updateRipplePosition(rippleInner);\n      drawRipple(rippleInner, 'key');\n    }\n  });\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isActive(element) {\n  if (element.matches) {\n    return element.matches(':active');\n  }\n  // @ts-ignore\n  if (element.msMatchesSelector) {\n    // @ts-ignore\n    element.msMatchesSelector(':active');\n  }\n  return false;\n}\n\n/**\n * @param {HTMLElement} rippleInner\n * @param {number=} x\n * @param {number=} y\n * @return {void}\n */\nexport function updateRipplePosition(rippleInner, x, y) {\n  let width;\n  let height;\n  let xPos = x;\n  let yPos = y;\n  if (x == null) {\n    xPos = rippleInner.parentElement.clientWidth / 2;\n    width = xPos;\n  } else if (x >= rippleInner.parentElement.clientWidth / 2) {\n    width = x;\n    // furthest horizontal side is left\n  } else {\n    width = rippleInner.parentElement.clientWidth - x;\n    // furthest horizontal side is right\n  }\n  if (y == null) {\n    yPos = rippleInner.parentElement.clientHeight / 2;\n    height = yPos;\n  } else if (y >= rippleInner.parentElement.clientHeight / 2) {\n    height = y;\n    // furthest vertical side is bottom\n  } else {\n    height = rippleInner.parentElement.clientHeight - y;\n    // furthest vertical side is top\n  }\n  const hypotenuse = Math.sqrt((width * width) + (height * height));\n  rippleInner.style.setProperty('height', `${hypotenuse}px`);\n  rippleInner.style.setProperty('width', `${hypotenuse}px`);\n  rippleInner.style.setProperty('left', `${xPos - (hypotenuse / 2)}px`);\n  rippleInner.style.setProperty('top', `${yPos - (hypotenuse / 2)}px`);\n}\n\n/**\n * @param {Element} rippleInner\n * @param {string} initiator\n * @return {void}\n */\nexport function drawRipple(rippleInner, initiator) {\n  const currentInitiator = rippleInner.getAttribute('mdw-fade-in');\n  if (currentInitiator && currentInitiator !== initiator) {\n    // Only allow repeat interactions from same initiator\n    return;\n  }\n  rippleInner.setAttribute('mdw-fade-in', initiator);\n  if (currentInitiator === initiator) {\n    // Repeat the animation\n    if (rippleInner.hasAttribute('mdw-fade-in-repeat')) {\n      rippleInner.removeAttribute('mdw-fade-in-repeat');\n    } else {\n      rippleInner.setAttribute('mdw-fade-in-repeat', '');\n    }\n  }\n  rippleInner.removeAttribute('mdw-fade-in-out');\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  /** @type {HTMLElement} */\n  const rippleInner = (event.currentTarget);\n  if (event.animationName === 'ripple-fade-in' || event.animationName === 'ripple-fade-in-repeat') {\n    rippleInner.setAttribute('mdw-fade-in-complete', '');\n    return;\n  }\n  if (event.animationName === 'ripple-fade-out') {\n    rippleInner.removeAttribute('mdw-fade-in');\n    rippleInner.removeAttribute('mdw-fade-in-repeat');\n    rippleInner.removeAttribute('mdw-fade-in-complete');\n    rippleInner.removeAttribute('mdw-fade-out');\n  }\n}\n\n/**\n * @param {Element} rippleInner\n * @return {void}\n */\nexport function clearRipple(rippleInner) {\n  if (!rippleInner.hasAttribute('mdw-fade-in')) {\n    return;\n  }\n  if (rippleInner.hasAttribute('mdw-keydown') && !rippleInner.hasAttribute('mdw-keyup')) {\n    return;\n  }\n  if (!rippleInner.hasAttribute('mdw-fade-in-complete')) {\n    return;\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.setAttribute('mdw-fade-out', '');\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (event.pointerType || event.detail) {\n    return;\n  }\n  if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n    // Already handled by keydown\n    return;\n  }\n  updateRipplePosition(rippleInner);\n  drawRipple(rippleInner, 'key');\n  nextTick(() => {\n    clearRipple(rippleInner);\n  });\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  const rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (rippleContainer) {\n    element.removeChild(rippleContainer);\n  }\n  element.removeAttribute('mdw-ripple-js');\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousedown', onMouseDown);\n  element.removeEventListener('touchstart', onTouchStart);\n  element.removeEventListener('keydown', onKeyDown);\n}\n","import { getPassiveEventListenerOption, iterateArrayLike } from '../dom';\n\nlet lastInteractionWasTouch = false;\n\nif (window && window.matchMedia) {\n  lastInteractionWasTouch = window.matchMedia('(any-pointer: coarse)').matches;\n}\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-overlay'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-overlay-js', '');\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.addEventListener('blur', onBlur, getPassiveEventListenerOption());\n  element.addEventListener('focus', onFocus, getPassiveEventListenerOption());\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.hasAttribute('mdw-overlay-touch')) {\n    return;\n  }\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'true');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onBlur(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  const value = element.getAttribute('mdw-overlay-touch');\n  if (value == null) {\n    return;\n  }\n  if (value === 'true') {\n    lastInteractionWasTouch = true;\n  } else {\n    lastInteractionWasTouch = false;\n  }\n  element.removeAttribute('mdw-overlay-touch');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element.hasAttribute('mdw-overlay-touch')) {\n    // Element was focused without a mouse or touch event (keyboard or programmatic)\n    if (lastInteractionWasTouch) {\n      element.setAttribute('mdw-overlay-touch', 'true');\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-overlay-js');\n  element.removeAttribute('mdw-overlay-touch');\n  element.removeEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.removeEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.removeEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.removeEventListener('blur', onBlur, getPassiveEventListenerOption());\n}\n","// https://www.w3.org/TR/wai-aria-practices/#dialog_modal\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  findElementParentByClassName,\n  getChildElementByClass,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\nclass DialogStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object=} state\n   * @param {Object=} previousState\n   */\n  constructor(element, previousFocus, state, previousState) {\n    this.element = element;\n    this.previousFocus = previousFocus;\n    this.state = state;\n    this.previousState = previousState;\n  }\n}\n\n/** @type {DialogStack[]} */\nconst OPEN_DIALOGS = [];\n\nexport const CANCEL_EVENT = 'mdw:dialog-cancel';\n\nexport const CONFIRM_EVENT = 'mdw:dialog-confirm';\n\nexport const CUSTOM_EVENT = 'mdw:dialog-custom';\n\nexport const DISMISS_EVENT = 'mdw:dialog-dismiss';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-js', '');\n\n  let dialogCloser = getChildElementByClass(element, 'mdw-dialog__close');\n  if (!dialogCloser) {\n    dialogCloser = document.createElement('div');\n    dialogCloser.className = 'mdw-dialog__close';\n    if (element.firstChild) {\n      element.insertBefore(dialogCloser, element.firstChild);\n    } else {\n      element.appendChild(dialogCloser);\n    }\n  }\n  dialogCloser.addEventListener('click', onCancelClick);\n  const popup = getChildElementByClass(element, 'mdw-dialog__popup');\n  popup.addEventListener('keydown', onKeyDown);\n  const buttons = popup.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  let foundConfirmButton = false;\n  let foundCancelButton = false;\n  iterateArrayLike(buttons, (button) => {\n    Button.attach(button);\n    if (button.hasAttribute('mdw-custom')) {\n      button.addEventListener('click', onCustomButtonClick);\n      return;\n    }\n    if (!foundConfirmButton) {\n      button.addEventListener('click', onConfirmClick);\n      foundConfirmButton = true;\n      return;\n    }\n    if (!foundCancelButton) {\n      button.addEventListener('click', onCancelClick);\n      foundCancelButton = true;\n      return;\n    }\n    button.addEventListener('click', onCustomButtonClick);\n  });\n  setupARIA(element);\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function setupARIA(dialogElement) {\n  if (dialogElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  dialogElement.setAttribute('role', 'dialog');\n  dialogElement.setAttribute('aria-modal', 'true');\n  if (!dialogElement.hasAttribute('aria-hidden')) {\n    dialogElement.setAttribute('aria-hidden', 'true');\n  }\n  const popupElement = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n  if (!popupElement) {\n    return;\n  }\n\n  if (!popupElement.hasAttribute('aria-label') && !popupElement.hasAttribute('aria-labelledby')) {\n    const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (titleElement) {\n      // titleElement\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function detach(dialogElement) {\n  dialogElement.removeAttribute('mdw-js');\n  const dialogCloser = getChildElementByClass(dialogElement, 'mdw-dialog__close');\n  if (dialogCloser) {\n    dialogCloser.removeEventListener('click', onCancelClick);\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (popupElement) {\n    popupElement.removeEventListener('keydown', onKeyDown);\n    popupElement.style.removeProperty('transform-origin');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  const buttons = popupElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button) => {\n    Button.detach(button);\n    button.removeEventListener('click', onConfirmClick);\n    button.removeEventListener('click', onCancelClick);\n    button.removeEventListener('click', onCustomButtonClick);\n  });\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCancelClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const cancelElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(cancelElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onConfirmClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  confirm(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCustomButtonClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  if (dispatchDomEvent(dialogElement, CUSTOM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Tab') {\n    handleTabKeyPress(event);\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    onEscapeKeyDown(event);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onEscapeKeyDown(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const popupElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(popupElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenDialog = OPEN_DIALOGS[OPEN_DIALOGS.length - 1];\n  if (!lastOpenDialog || !lastOpenDialog.previousState) {\n    return;\n  }\n  if ((lastOpenDialog.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenDialog.previousState[key])) {\n    if (dispatchDomEvent(lastOpenDialog.element, CANCEL_EVENT)) {\n      hide(lastOpenDialog.element);\n    } else {\n      // Revert pop state by pushing state again\n      const title = getTitleText(lastOpenDialog.element);\n      window.history.pushState(lastOpenDialog.state, title);\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function cancel(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CANCEL_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function confirm(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CONFIRM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {string}\n */\nexport function getTitleText(dialogElement) {\n  let title = 'Dialog';\n  const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (titleElement) {\n    title = titleElement.textContent;\n  } else {\n    const bodyElement = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n    if (bodyElement) {\n      title = bodyElement.textContent;\n    }\n  }\n  return title;\n}\n\n/**\n * @param {Element} dialogElement\n * @return {boolean} handled\n */\nexport function hide(dialogElement) {\n  if (dialogElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(dialogElement, DISMISS_EVENT)) {\n    return false;\n  }\n  dialogElement.setAttribute('aria-hidden', 'true');\n  let stackIndex = -1;\n  OPEN_DIALOGS.some((stack, index) => {\n    if (stack.element === dialogElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const stack = OPEN_DIALOGS[stackIndex];\n    if (stack.previousFocus) {\n      if (findElementParentByClassName(document.activeElement, 'mdw-dialog') === dialogElement) {\n        // Only pop focus back when hiding a dialog with focus within itself.\n        try {\n          stack.previousFocus.focus();\n        } catch (e) {\n          // Failed to focus\n        }\n      }\n    }\n    OPEN_DIALOGS.splice(stackIndex, 1);\n    if (stack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (stack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_DIALOGS.length) {\n    window.removeEventListener('popstate', onPopState);\n  }\n  return true;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} event\n * @return {boolean} handled\n */\nexport function show(dialogElement, event) {\n  if (event && event.type === 'click' && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  let changed = false;\n\n  updateTransformOrigin(dialogElement, event);\n  if (dialogElement.getAttribute('aria-hidden') !== 'false') {\n    dialogElement.setAttribute('aria-hidden', 'false');\n    changed = true;\n  }\n  if (changed) {\n    attach(dialogElement);\n    const previousFocus = document.activeElement;\n    const newState = { hash: Math.random().toString(36).substr(2, 16) };\n    let previousState = null;\n    if (window.history && window.history.pushState) {\n      if (!window.history.state) {\n        // Create new previous state\n        window.history.replaceState({\n          hash: Math.random().toString(36).substr(2, 16),\n        }, document.title);\n      }\n      previousState = window.history.state;\n      const title = getTitleText(dialogElement);\n      window.history.pushState(newState, title);\n      window.addEventListener('popstate', onPopState);\n    }\n    const dialogStack = new DialogStack(dialogElement, previousFocus, newState, previousState);\n    OPEN_DIALOGS.push(dialogStack);\n    const focusElement = dialogElement.querySelector('[mdw-autofocus]');\n    try {\n      if (focusElement) {\n        focusElement.focus();\n      } else {\n        dialogElement.focus();\n      }\n    } catch (e) {\n      console.error(e);\n      // Failed to focus\n    }\n  }\n  return changed;\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function handleTabKeyPress(event) {\n  /** @type {Element} */\n  const popupElement = (event.currentTarget);\n  const focusableElements = popupElement.querySelectorAll([\n    'button:not(:disabled):not([tabindex=\"-1\"])',\n    '[href]:not(:disabled):not([tabindex=\"-1\"])',\n    'input:not(:disabled):not([tabindex=\"-1\"])',\n    'select:not(:disabled):not([tabindex=\"-1\"])',\n    'textarea:not(:disabled):not([tabindex=\"-1\"])',\n    '[tabindex]:not([tabindex=\"-1\"])'].join(', '));\n  let foundTarget = false;\n  let candidate = null;\n  iterateSomeOfArrayLike(focusableElements, (el) => {\n    if (el === event.target) {\n      foundTarget = true;\n      if (event.shiftKey) {\n        return true;\n      }\n    } else if (event.shiftKey) {\n      candidate = el;\n    } else if (foundTarget) {\n      candidate = el;\n      return true;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (event.shiftKey) {\n      // Select last item\n      candidate = focusableElements[focusableElements.length - 1];\n    } else {\n      // Select first item\n      candidate = focusableElements[0];\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  if (candidate) {\n    try {\n      candidate.focus();\n    } catch (e) {\n      // Failed to focus\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)=} content\n * @return {void}\n */\nexport function updateTitle(dialogElement, content) {\n  let title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (!content) {\n    if (!title) {\n      // Nothing to be done\n      return;\n    }\n    title.parentElement.removeChild(title);\n    return;\n  }\n  if (!title) {\n    title = document.createElement('div');\n    title.className = 'mdw-dialog__title';\n    const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n    popup.insertBefore(title, popup.firstChild);\n  }\n  if (content instanceof DocumentFragment) {\n    while (title.lastChild) {\n      title.removeChild(title.lastChild);\n    }\n    title.appendChild(content);\n  } else {\n    title.textContent = content;\n  }\n}\n\n\n/**\n * @param {Element} dialogElement\n * @param {string[]} texts\n * @return {void}\n */\nexport function updateButtonText(dialogElement, texts) {\n  const buttons = dialogElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button, index) => {\n    setTextNode(button, texts[index]);\n  });\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)=} content\n * @return {void}\n */\nexport function updateBody(dialogElement, content) {\n  let body = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n  if (!content) {\n    if (!body) {\n      // Nothing to be done\n      return;\n    }\n    body.parentElement.removeChild(body);\n    return;\n  }\n  if (!body) {\n    body = document.createElement('div');\n    body.className = 'mdw-dialog__body mdw-theme';\n    body.setAttribute('mdw-ink', 'medium');\n    const title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (title) {\n      title.insertAdjacentElement('afterend', body);\n    } else {\n      const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n      popup.insertBefore(body, popup.firstChild);\n    }\n  }\n  if (content instanceof DocumentFragment) {\n    while (body.lastChild) {\n      body.removeChild(body.lastChild);\n    }\n    body.appendChild(content);\n  } else {\n    body.textContent = content;\n  }\n}\n\n/**\n * @param {Object} options\n * @param {(DocumentFragment|string)=} options.title\n * @param {(DocumentFragment|string)=} options.body\n * @param {string[]=} options.buttons\n * @param {boolean=} options.stacked\n * @param {Element=} options.parent\n * @param {boolean} [options.custom=false] Use custom button events\n * @param {(string|number)=} [options.autofocus=0] Autofocus button by index or text\n * @return {Element}\n */\nexport function create(options) {\n  const element = document.createElement('div');\n  element.className = 'mdw-dialog';\n\n  const popup = document.createElement('div');\n  popup.className = 'mdw-dialog__popup mdw-theme';\n  popup.setAttribute('mdw-surface', 'card');\n  element.appendChild(popup);\n\n  updateTitle(element, options.title);\n  updateBody(element, options.body);\n\n  if (options.buttons) {\n    const buttonArea = document.createElement('div');\n    buttonArea.className = 'mdw-dialog__button-area';\n    let index = 0;\n    options.buttons.forEach((buttonText) => {\n      const button = document.createElement('div');\n      button.className = 'mdw-button mdw-theme';\n      button.setAttribute('tabindex', '0');\n      button.setAttribute('mdw-ink', 'secondary');\n      if (options.custom) {\n        button.setAttribute('mdw-custom', '');\n      }\n      button.textContent = buttonText;\n      buttonArea.appendChild(button);\n      if ((options.autofocus == null && index === 0)\n        || options.autofocus === index || options.autofocus === buttonText) {\n        button.setAttribute('mdw-autofocus', '');\n      }\n      index += 1;\n    });\n    if (options.stacked) {\n      buttonArea.setAttribute('mdw-stacked', '');\n    }\n    popup.appendChild(buttonArea);\n  }\n  if (options.parent) {\n    options.parent.appendChild(element);\n  }\n  attach(element);\n  return element;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {void}\n */\nexport function updateTransformOrigin(dialogElement, event) {\n  /** @type {HTMLElement} */\n  const popup = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  popup.style.removeProperty('transform-origin');\n  if (!event) {\n    return;\n  }\n  let pageX;\n  let pageY;\n  const dialogRect = dialogElement.getBoundingClientRect();\n  if ('pageX' in event && 'pageY' in event) {\n    ({ pageX, pageY } = event);\n    pageX -= window.pageXOffset;\n    pageY -= window.pageYOffset;\n  } else {\n    /** @type {Element} */\n    const target = (event.target || event.currentTarget);\n    if (target instanceof Element === false) {\n      return;\n    }\n    const rect = target.getBoundingClientRect();\n    if (!rect.width && !rect.width && !rect.left && !rect.top) {\n      return;\n    }\n    pageX = rect.left + (rect.width / 2);\n    pageY = rect.top + (rect.height / 2);\n  }\n  const transformOriginX = pageX - dialogRect.left - popup.offsetLeft;\n  const transformOriginY = pageY - dialogRect.top - popup.offsetTop;\n  popup.style.setProperty('transform-origin', `${transformOriginX}px ${transformOriginY}px`);\n}\n\n// Aliases\nexport const dismiss = hide;\n","import { dispatchDomEvent, getPassiveEventListenerOption } from '../../core/dom';\n\nexport const SECONDARY_ACTION_EVENT = 'mdw:listsecondary-action';\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function attach(listSecondaryElement) {\n  if (!listSecondaryElement.hasAttribute('mdw-action')) {\n    return;\n  }\n  listSecondaryElement.addEventListener('click', onClick);\n  listSecondaryElement.addEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onInteraction(event) {\n  event.stopPropagation();\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listSecondaryElement = (event.currentTarget);\n  dispatchDomEvent(listSecondaryElement, SECONDARY_ACTION_EVENT);\n}\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function detach(listSecondaryElement) {\n  listSecondaryElement.removeEventListener('click', onClick);\n  listSecondaryElement.removeEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n","import { iterateArrayLike, dispatchDomEvent } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\nimport * as Attributes from '../../core/aria/attributes';\n\nimport * as ListSecondary from './secondary';\n\nexport const ACTIVATE_EVENT = 'mdw:listcontent-activate';\nexport const SELECTED_CHANGE_EVENT = 'mdw:listcontent-selectedchange';\nexport const CHECKED_CHANGE_EVENT = 'mdw:listcontent-checkedchange';\nexport const FOCUS_EVENT = 'mdw:listcontent-focus';\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function attach(listContentElement) {\n  attachCore(listContentElement);\n  if (!listContentElement.hasAttribute('mdw-no-overlay')) {\n    listContentElement.classList.add('mdw-overlay');\n    Overlay.attach(listContentElement);\n  }\n  if (!listContentElement.hasAttribute('mdw-no-ripple')) {\n    listContentElement.classList.add('mdw-ripple');\n    Ripple.attach(listContentElement);\n  }\n  if (listContentElement.getAttribute('role') === 'radio'\n  && listContentElement.getAttribute('aria-checked') === 'true'\n  && listContentElement.getAttribute('tabindex') !== '0') {\n    listContentElement.setAttribute('tabindex', '0');\n  }\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.attach(secondaryElement);\n  }\n  listContentElement.addEventListener(ListSecondary.SECONDARY_ACTION_EVENT, onSecondaryAction);\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  if (document.activeElement !== event.currentTarget) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (!listContentElement) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  if (isDisabled(listContentElement)) {\n    return;\n  }\n\n  if (event.key === 'Spacebar' || event.key === ' ') {\n    if (onCheckToggleRequest(listContentElement)) {\n      return;\n    }\n  }\n\n  // Slightly redundant, but performs ripple\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  listContentElement.dispatchEvent(newEvent);\n}\n\n/**\n * @param {Element} listContentElement\n * @return {boolean} handled\n */\nfunction onCheckToggleRequest(listContentElement) {\n  const currentValue = listContentElement.getAttribute('aria-checked');\n  if (currentValue == null) {\n    // Attribute does not exist\n    return false;\n  }\n  let newValue = currentValue === 'true' ? 'false' : 'true';\n  if (newValue === 'false' && listContentElement.getAttribute('role') === 'radio') {\n    newValue = 'true';\n  }\n  Attributes.setChecked(listContentElement, newValue, CHECKED_CHANGE_EVENT);\n  return true;\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function attachCore(listContentElement) {\n  if (!listContentElement.hasAttribute('role')) {\n    if (listContentElement.parentElement.getAttribute('role') === 'none') {\n      listContentElement.setAttribute('role', 'option');\n    }\n  }\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__icon'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__avatar'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  listContentElement.addEventListener('click', onClick);\n  listContentElement.addEventListener('keydown', onKeyDown);\n  listContentElement.addEventListener('focus', onFocus);\n}\n\n/**\n * Sets [aria-checked=\"true\"] on Focus if [role=\"radio\"]\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  dispatchDomEvent(listContentElement, FOCUS_EVENT);\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onSecondaryAction(event) {\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (isDisabled(listContentElement)) {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  onCheckToggleRequest(listContentElement);\n\n  // Regardless if checkable, event is propagated up\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (isDisabled(listContentElement)) {\n    return;\n  }\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (!secondaryElement || !secondaryElement.hasAttribute('mdw-action')) {\n    if (onCheckToggleRequest(listContentElement)) {\n      return;\n    }\n  }\n  dispatchDomEvent(listContentElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return (element.getAttribute('aria-disabled') === 'true');\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function detachCore(listContentElement) {\n  listContentElement.removeEventListener('click', onClick);\n  listContentElement.removeEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function detach(listContentElement) {\n  detachCore(listContentElement);\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.detach(secondaryElement);\n  }\n  listContentElement.removeEventListener(ListSecondary.SECONDARY_ACTION_EVENT, onSecondaryAction);\n  Ripple.detach(listContentElement);\n  Overlay.detach(listContentElement);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setChecked(element, value, dispatchEvent = true) {\n  return Attributes.setChecked(element, value, dispatchEvent ? CHECKED_CHANGE_EVENT : null);\n}\n\n// Alias\nexport const { setCurrent } = Attributes;\n","export default class Throttler {\n  /** @param {number} throttleTimeMs */\n  constructor(throttleTimeMs) {\n    this.pending = false;\n    this.queued = false;\n    this.queue = null;\n    this.throttleTimeMs = throttleTimeMs;\n  }\n\n  abort() {\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.pending = false;\n    this.queued = false;\n  }\n\n  /**\n   * @param {function} fn\n   * @return {void}\n   */\n  run(fn) {\n    if (this.pending) {\n      this.queued = true;\n      return;\n    }\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.queued = false;\n    this.pending = true;\n    this.queue = setTimeout(() => {\n      this.pending = false;\n      if (this.queued) {\n        this.run(fn);\n      }\n    }, this.throttleTimeMs);\n    fn();\n  }\n}\n","import { iterateArrayLike, getPassiveEventListenerOption } from '../../core/dom';\nimport Throttler from '../../core/throttler';\n\nconst MIN_SCROLL_DELTA = 24; // Avoid finger bounce\n\nconst MOBILE_BREAKPOINT = 600;\nconst TABLET_BREAKPOINT = 1024;\n\n// Throttler will execute at earliest convenience\n// Smoother than using requestAnimationFrame\nconst SCROLL_THROTTLE_TIME_MS = 20;\n\nlet lastScrollY = null;\nlet penultimateScrollY = null;\nlet scrolledPastAppBar = false;\nlet appBarElement = null;\nlet layoutContentElement = null;\nlet lastScrollBottomDistance = null;\nlet scrollThrottler = null;\n\n/** @return {void} */\nexport function attach() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    // Initialize with scroll up\n    document.body.addEventListener('scroll', onBodyScroll, getPassiveEventListenerOption());\n    const contentElement = getContentElement();\n    if (contentElement) {\n      contentElement.addEventListener('scroll', onContentScroll, getPassiveEventListenerOption());\n    }\n    resetScroll();\n  }\n\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-toggle'),\n    el => el.addEventListener('click', toggleNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-show'),\n    el => el.addEventListener('click', showNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-hide'),\n    el => el.addEventListener('click', hideNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-toggle'),\n    el => el.addEventListener('click', toggleSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-show'),\n    el => el.addEventListener('click', showSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-hide'),\n    el => el.addEventListener('click', hideSideSheet));\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.addEventListener('click', onScrimClick);\n    scrim.addEventListener('scroll', onScrimScroll);\n    scrim.addEventListener('touchmove', onScrimScroll);\n    scrim.addEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {Throttler} */\nexport function getScrollThrottler() {\n  if (!scrollThrottler) {\n    scrollThrottler = new Throttler(SCROLL_THROTTLE_TIME_MS);\n  }\n  return scrollThrottler;\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onScrimScroll(event) {\n  // JS needed for Safari\n  event.preventDefault();\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function onScrimClick(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  if (navDrawer && (window.location.hash === `#${navDrawer.id}` || navDrawer.getAttribute('aria-hidden') === 'false')) {\n    if (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-navdrawer-style') === 'modal') {\n      hideNavDrawer();\n    }\n  }\n  const sidesheet = document.getElementsByClassName('mdw-layout__sidesheet')[0];\n  if (sidesheet && sidesheet.getAttribute('aria-hidden') === 'false') {\n    if (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-sidesheet-style') === 'modal') {\n      hideSideSheet();\n    }\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__navdrawer')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  navDrawer.setAttribute('aria-hidden', 'true');\n  if (window.location.hash === `#${navDrawer.id}`) {\n    window.location.hash = '';\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleNavDrawer(event) {\n  if (document.getElementsByClassName('mdw-layout__navdrawer')[0].getAttribute('aria-hidden') === 'false') {\n    hideNavDrawer(event);\n  } else {\n    showNavDrawer(event);\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'true');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleSideSheet(event) {\n  if (document.getElementsByClassName('mdw-layout__sidesheet')[0].getAttribute('aria-hidden') === 'false') {\n    hideSideSheet(event);\n  } else {\n    showSideSheet(event);\n  }\n}\n\n/** @return {void} */\nexport function detach() {\n  document.removeEventListener('scroll', onBodyScroll);\n  const content = getContentElement();\n  if (content) {\n    content.removeEventListener('scroll', onContentScroll);\n  }\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.removeEventListener('click', onScrimClick);\n    scrim.removeEventListener('scroll', onScrimScroll);\n    scrim.removeEventListener('touchmove', onScrimScroll);\n    scrim.removeEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {void} */\nexport function onBodyScroll() {\n  // position:sticky scrolling\n  getScrollThrottler().run(() => onScroll(true));\n}\n\n/** @return {boolean} */\nexport function isMobile() {\n  return window.innerWidth < MOBILE_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function isTablet() {\n  return window.innerWidth >= MOBILE_BREAKPOINT\n    && window.innerWidth < TABLET_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function shouldAutoHideAppBar() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return false;\n  }\n  const autoHide = appBar.getAttribute('mdw-autohide');\n  if (autoHide == null) {\n    return false;\n  }\n  if (autoHide === '') {\n    return true;\n  }\n  if (autoHide.indexOf('tablet') !== -1 && isTablet()) {\n    return true;\n  }\n  if (autoHide.indexOf('mobile') !== -1 && isMobile()) {\n    return true;\n  }\n  return false;\n}\n\n/** @return {void} */\nexport function onContentScroll() {\n  getScrollThrottler().run(() => onScroll(false));\n}\n\n/** @return {HTMLElement} */\nexport function getAppBarElement() {\n  if (!appBarElement) {\n    appBarElement = document.getElementsByClassName('mdw-layout__appbar')[0];\n  }\n  return appBarElement;\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function showFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'false');\n  if (changeFabCut !== false) {\n    openAppBarFabCut();\n  }\n}\n\n/** @return {void} */\nexport function openAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (fabCutAttr == null) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') === -1) {\n    appBar.setAttribute('mdw-fab-cut', `open ${fabCutAttr}`.trim());\n  }\n}\n\n/** @return {void} */\nexport function closeAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (!fabCutAttr) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') !== -1) {\n    appBar.setAttribute('mdw-fab-cut', fabCutAttr.replace('open', '').trim());\n  }\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function hideFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'true');\n  if (changeFabCut !== false) {\n    closeAppBarFabCut();\n  }\n}\n\n/** @return {boolean} */\nexport function isFabShown() {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return false;\n  }\n  return fabElement.getAttribute('aria-hidden') !== 'true';\n}\n\n/** @return {HTMLElement} */\nexport function getContentElement() {\n  if (!layoutContentElement) {\n    layoutContentElement = document.getElementsByClassName('mdw-layout__content')[0];\n  }\n  return layoutContentElement;\n}\n\n/** @return {void} */\nexport function resetScroll() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    appBar.removeAttribute('mdw-hide');\n    appBar.removeAttribute('mdw-raise');\n  }\n  scrolledPastAppBar = false;\n  lastScrollY = 0 + MIN_SCROLL_DELTA;\n  penultimateScrollY = lastScrollY;\n  onScroll(true);\n}\n\n/**\n * @param {boolean} isBody\n * @return {void}\n */\nexport function onScroll(isBody) {\n  const contentElement = getContentElement();\n  const scrollElement = isBody ? document.body : contentElement;\n  const currentScrollY = scrollElement.scrollTop;\n  const change = currentScrollY - lastScrollY;\n  const delta = Math.abs(change);\n  if (delta === 0) {\n    // Horizontal scroll?\n    return;\n  }\n  if (currentScrollY < 0 && lastScrollY <= 0) {\n    // Repeated overscroll event\n    return;\n  }\n\n  const scrollBottom = scrollElement.scrollHeight - scrollElement.clientHeight;\n  const scrollBottomDistance = scrollBottom - currentScrollY;\n  const scrollTopChange = currentScrollY <= 0\n    || lastScrollY <= 0;\n  const scrollBottomChange = scrollBottomDistance === 0 && lastScrollBottomDistance !== 0;\n\n  lastScrollBottomDistance = scrollBottomDistance;\n  if (delta < MIN_SCROLL_DELTA && !scrollTopChange && !scrollBottomChange) {\n    return;\n  }\n\n  const didScrollUp = (scrollBottomDistance > 0) && (change < 0);\n  const isAtScrollTop = didScrollUp && currentScrollY <= 0;\n  const newScrollUp = didScrollUp && lastScrollY >= penultimateScrollY;\n  const didScrollDown = (change > 0);\n  const isAtScrollBottom = didScrollDown && (scrollBottomDistance <= 0);\n  const newScrollDown = didScrollDown && lastScrollY <= penultimateScrollY;\n\n  penultimateScrollY = lastScrollY;\n  lastScrollY = currentScrollY;\n\n  // To avoid DOM read, abort if scrolling in same direction and has already past app bar\n  if ((change === 0) || (!isAtScrollTop && !newScrollUp && !isAtScrollBottom && !newScrollDown\n    && scrolledPastAppBar)) {\n    return;\n  }\n\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n\n  const bottomAppBar = appBar.hasAttribute('mdw-bottom');\n\n  const scrolledAway = bottomAppBar ? didScrollUp : didScrollDown;\n  const newScrollAway = scrolledAway && (bottomAppBar ? newScrollUp : newScrollDown);\n\n  // For code readability\n  const scrolledBack = !scrolledAway;\n  const newScrollBack = scrolledBack && (bottomAppBar ? newScrollDown : newScrollUp);\n\n  const isAtRest = (bottomAppBar ? isAtScrollBottom : isAtScrollTop);\n\n  if (scrolledBack) {\n    // scrolledPastAppBar needs to be recalculated\n    scrolledPastAppBar = false;\n  }\n\n  // Don't perform on each scroll back, only on first\n  if (newScrollBack || isAtRest) {\n    if (appBar.hasAttribute('mdw-autohide')) {\n      appBar.removeAttribute('mdw-hide');\n      appBar.style.removeProperty('margin-top');\n    }\n  }\n\n  if (!scrolledPastAppBar) {\n    if (bottomAppBar) {\n      scrolledPastAppBar = currentScrollY <= scrollBottom - appBar.clientHeight;\n    } else {\n      scrolledPastAppBar = currentScrollY > appBar.clientHeight;\n    }\n  }\n\n  if (isAtRest) {\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.setAttribute('mdw-prominent', '');\n    }\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.removeAttribute('mdw-raise');\n    }\n    return;\n  }\n\n  // Not at rest\n  if (scrolledAway && scrolledPastAppBar) {\n    if (shouldAutoHideAppBar()) {\n      appBar.setAttribute('mdw-hide', '');\n      if (!isBody) {\n        appBar.style.setProperty('margin-top', `${-appBar.clientHeight}px`);\n      }\n    }\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.removeAttribute('mdw-prominent');\n    }\n  }\n\n  if (newScrollAway) {\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.setAttribute('mdw-raise', '');\n    }\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  nextTick,\n  cancelTick,\n} from '../../core/dom';\n\nimport * as MenuItem from './item';\n\nclass MenuStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object=} state\n   * @param {Object=} previousState\n   * @param {MouseEvent=} originalEvent\n   */\n  constructor(element, previousFocus, state, previousState, originalEvent) {\n    this.element = element;\n    this.previousFocus = previousFocus;\n    this.state = state;\n    this.previousState = previousState;\n    this.originalEvent = originalEvent;\n    this.pendingResizeOperation = null;\n  }\n}\n\n/** @type {MenuStack[]} */\nconst OPEN_MENUS = [];\n\nexport const HIDE_EVENT = 'mdw:menu-hide';\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function attach(menuElement) {\n  menuElement.setAttribute('mdw-menu-js', '');\n  menuElement.addEventListener('click', onMenuClick);\n  menuElement.addEventListener('scroll', onMenuScroll);\n  menuElement.addEventListener('touchmove', onMenuScroll);\n  menuElement.addEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  setupARIA(menuElement);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function setupARIA(menuElement) {\n  if (menuElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  if (!menuElement.hasAttribute('aria-hidden')) {\n    menuElement.setAttribute('aria-hidden', 'true');\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-divider'),\n    el => el.setAttribute('role', 'separator'));\n  menuElement.setAttribute('role', 'menu');\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  if (popupElement) {\n    popupElement.setAttribute('role', 'none');\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onMenuScroll(event) {\n  // JS needed for Safari\n  event.preventDefault();\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\nexport function onMenuClick(event) {\n  if (event.currentTarget === event.target) {\n    event.stopPropagation();\n    hide(event.currentTarget);\n  }\n}\n\n/**\n * @return {void}\n */\nexport function onWindowResize() {\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.originalEvent) {\n    return;\n  }\n  if (lastOpenMenu.pendingResizeOperation) {\n    cancelTick(lastOpenMenu.pendingResizeOperation);\n  }\n  lastOpenMenu.pendingResizeOperation = nextTick(() => {\n    updateMenuPosition(\n      lastOpenMenu.element,\n      lastOpenMenu.element.getElementsByClassName('mdw-menu__popup')[0],\n      lastOpenMenu.originalEvent\n    );\n    lastOpenMenu.pendingResizeOperation = null;\n  });\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.previousState) {\n    return;\n  }\n  if ((lastOpenMenu.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenMenu.previousState[key])) {\n    hide(lastOpenMenu.element);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuElement = (event.currentTarget);\n  if (!menuElement || menuElement.getAttribute('aria-hidden') === 'true') {\n    return;\n  }\n\n  if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, false);\n    return;\n  }\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, true);\n    return;\n  }\n  if (event.key === 'Tab') {\n    // Hide menu allowing focus to revert to calling element\n    // To then allow browser default Tab interaction\n    // Unless menu hiding is cancelled\n    if (!hide(menuElement)) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    event.stopPropagation();\n    event.preventDefault();\n    hide(menuElement);\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function detach(menuElement) {\n  hide(menuElement);\n  menuElement.removeEventListener('click', onMenuClick);\n  menuElement.removeEventListener('scroll', onMenuScroll);\n  menuElement.removeEventListener('touchmove', onMenuScroll);\n  menuElement.removeEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  menuElement.removeAttribute('mdw-menu-js');\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  if (popupElement) {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), MenuItem.detach);\n}\n\n/**\n * @param {Element} menu\n * @param {boolean} [backwards=false]\n * @return {void}\n */\nexport function selectNextMenuItem(menu, backwards) {\n  const menuItems = menu.getElementsByClassName('mdw-menu__item');\n  let foundTarget = false;\n  let candidate = null;\n  let firstFocusableItem = null;\n  let lastFocusableElement = null;\n  const target = document.activeElement;\n\n  // Hidden elements cannot be focused\n  // Disabled elements cannot be focused on IE11\n  // Skip elements that fail to receive focus\n  iterateSomeOfArrayLike(menuItems, (el) => {\n    el.focus();\n    const focusable = (document.activeElement === el);\n    if (focusable) {\n      if (!firstFocusableItem) {\n        firstFocusableItem = el;\n      }\n      lastFocusableElement = el;\n    }\n    if (el === target) {\n      foundTarget = true;\n      if (backwards && candidate) {\n        return true;\n      }\n      return false;\n    }\n    if (backwards) {\n      if (focusable) {\n        candidate = el;\n      }\n      return false;\n    }\n    if (foundTarget) {\n      if (focusable) {\n        candidate = el;\n        return true;\n      }\n      return false;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (backwards) {\n      candidate = lastFocusableElement;\n    } else {\n      candidate = firstFocusableItem;\n    }\n  }\n  if (candidate && document.activeElement !== candidate) {\n    candidate.focus();\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @param {Element} popupElement\n * @param {MouseEvent=} event\n * @param {boolean=} [alignTarget=true]\n * @return {void}\n */\nexport function updateMenuPosition(menuElement, popupElement, event, alignTarget) {\n  let top = 'auto';\n  let left = 'auto';\n  let transformOrigin = '';\n  const useAlignTarget = (alignTarget !== false);\n  const margin = useAlignTarget ? '0' : '';\n  const mdwPosition = menuElement.getAttribute('mdw-position') || '';\n  const mdwDirection = menuElement.getAttribute('mdw-direction') || '';\n  let alignTop = mdwPosition.indexOf('top') !== -1;\n  let alignBottom = mdwPosition.indexOf('bottom') !== -1;\n  let alignVCenter = mdwPosition.indexOf('vcenter') !== -1;\n\n  const alignStart = mdwPosition.indexOf('start') !== -1;\n  const alignEnd = mdwPosition.indexOf('end') !== -1;\n  let alignLeft = mdwPosition.indexOf('left') !== -1;\n  let alignRight = mdwPosition.indexOf('right') !== -1;\n  let alignHCenter = mdwPosition.indexOf('hcenter') !== -1;\n\n  let openUp = mdwDirection.indexOf('up') !== -1;\n  let openDown = mdwDirection.indexOf('down') !== -1;\n  const openNormal = mdwDirection.indexOf('normal') !== -1;\n  const openReverse = mdwDirection.indexOf('reverse') !== -1;\n  let openVCenter = mdwDirection.indexOf('vcenter') !== -1;\n  let openHCenter = mdwDirection.indexOf('hcenter') !== -1;\n  let openLtr = mdwDirection.indexOf('ltr') !== -1;\n  let openRtl = mdwDirection.indexOf('rtl') !== -1;\n\n  /** @type {HTMLElement} */\n  const target = (event.currentTarget || event.target);\n\n  let isPageRTL = null;\n  if (alignStart || alignEnd || openNormal || openReverse) {\n    // Using page-direction based values\n    isPageRTL = isRtl();\n    if (alignStart || alignEnd) {\n      if (alignStart) {\n        if (isPageRTL) {\n          alignRight = true;\n        } else {\n          alignLeft = true;\n        }\n      } else if (isPageRTL) {\n        alignLeft = true;\n      } else {\n        alignRight = true;\n      }\n    }\n    if (openNormal || openReverse) {\n      if (openNormal) {\n        if (isPageRTL) {\n          openRtl = true;\n        } else {\n          openLtr = true;\n        }\n      } else if (isPageRTL) {\n        openLtr = true;\n      } else {\n        openRtl = true;\n      }\n    }\n  }\n  const offsetTop = useAlignTarget ? 0 : -event.offsetY;\n  const offsetBottom = useAlignTarget ? target.clientHeight : event.offsetY;\n  const offsetLeft = useAlignTarget ? 0 : -event.offsetX;\n  const offsetRight = useAlignTarget ? target.clientWidth : event.offsetX;\n  const rect = target.getBoundingClientRect();\n  const pageX = rect.left;\n  const pageY = rect.top;\n\n  /* Automatic Positioning\n    *\n    * 9 Positions\n    *   3      7      4\n    *     ┌─────────┐\n    *     │         │\n    *   5 │    9    │ 6\n    *     │         │\n    *     └─────────┘\n    *   1      8      2\n    *\n    * 1: Bottom Left\n    * 2: Bottom Right\n    * 3: Top Left\n    * 4: Top Right\n    * 5: VCenter Left\n    * 6: VCenter Right\n    * 7: HCenter Top\n    * 8: HCenter Bottom\n    * 9: VCenter HCenter\n    *\n    * 9 Directions:\n    * a - Down LTR\n    * b - Down RTL\n    * c - Up LTR\n    * d - Up RTL\n    * e - LTR\n    * f - RTL\n    * g - Down\n    * h - Up\n    * i - Center\n    *\n    *\n    * 16 total combos\n    * 1a 1b 1c 1d  └↘ └↙ └↗ └↖\n    * 2a 2b 2c 2d  ┘↘ ┘↙ ┘↗ ┘↖\n    * 3a 3b 3c 3d  ┌↘ ┌↙ ┌↗ ┌↖\n    * 4a 4b 4c 4d  ┐↘ ┐↙ ┐↗ ┐↖\n    *\n    * Avoid using opposite angle\n    *\n    * 1a XX 1c 1d  └↘ ██ └↗ └↖\n    * XX 2b 2c 2d  ██ ┘↙ ┘↗ ┘↖\n    * 1a 3b 3c XX  ┌↘ ┌↙ ┌↗ ██\n    * 4a 4b XX 4d  ┐↘ ┐↙ ██ ┐↖\n    *\n    *\n    * Preference Order:\n    * - Flow from corner           1a 2b 3c 4d    └↘ ┘↙ ┌↗ ┐↖\n    * - Open adjacent to target    4a 3b 2c 1d    ┐↘ ┌↙ ┘↗ └↖\n    * - Overlay target             3a 4b 1c 2d    ┌↘ ┐↙ └↗ ┘↖\n    * - Open from horizontal side  5e 6f          │→ │←\n    * - Open from center           9i             █·\n    */\n\n  popupElement.style.setProperty('max-height', 'none');\n  const popupElementHeight = popupElement.clientHeight;\n  const popupElementWidth = popupElement.clientWidth;\n  const canOpenDownwardsFromBottom = !alignTop && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetBottom) <= window.innerHeight;\n  const canOpenDownwardsFromTop = !alignBottom && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetTop) <= window.innerHeight;\n  const canOpenUpwardsFromTop = !alignBottom && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetTop >= popupElementHeight;\n  const canOpenUpwardsFromBottom = !alignTop && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetBottom >= popupElementHeight;\n  const canOpenRightwardsFromLeft = !alignRight && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetLeft) <= window.innerWidth;\n  const canOpenRightwardsFromRight = !alignLeft && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetRight) <= window.innerWidth;\n  const canOpenLeftwardsFromRight = !alignLeft && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetRight >= popupElementWidth;\n  const canOpenLeftwardsFromLeft = !alignRight && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetLeft >= popupElementWidth;\n  const canOpenFromCenter = !alignLeft && !alignRight && !alignTop && !alignBottom\n    && !openUp && !openDown\n    && ((pageX + offsetLeft) / 2) >= (popupElementWidth / 2)\n    && (popupElementWidth / 2) + ((pageX + offsetLeft) / 2) <= window.innerWidth;\n  popupElement.style.removeProperty('max-height');\n  const candidates = [\n    canOpenDownwardsFromBottom && canOpenRightwardsFromLeft, // 1a └↘\n    canOpenDownwardsFromBottom && canOpenLeftwardsFromRight, // 2b ┘↙\n    canOpenUpwardsFromTop && canOpenRightwardsFromLeft, // 3c ┌↗\n    canOpenUpwardsFromTop && canOpenLeftwardsFromLeft, // 4d ┐↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromRight, // 4a ┐↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromLeft, // 3b ┌↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2c ┘↗\n    canOpenUpwardsFromBottom && canOpenLeftwardsFromLeft, // 1d └↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromLeft, // 3a ┌↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromRight, // 4b ┐↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromLeft, // 1c └↗\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2d ┘↖\n    canOpenRightwardsFromLeft, // 5e │→\n    canOpenLeftwardsFromRight, // 6f │←\n    canOpenFromCenter, // 9i █·\n  ].map((value, index) => {\n    if (value) {\n      return index + 1;\n    }\n    return 0;\n  }).filter(value => value !== 0);\n  if (candidates.length) {\n    let candidateNumber;\n    if (isPageRTL === null) {\n      isPageRTL = isRtl();\n    }\n    if (isPageRTL) {\n      candidateNumber = [2, 1, 4, 3, 6, 5, 8, 7, 10, 9, 12, 11, 14, 13, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    } else {\n      candidateNumber = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    }\n    if (candidateNumber == null) {\n      candidateNumber = isPageRTL ? 2 : 1;\n    }\n    switch (candidateNumber) {\n      // Position\n      default:\n      case 1:\n      case 8:\n      case 11:\n        alignBottom = true; alignLeft = true;\n        break;\n      case 2:\n      case 7:\n      case 12:\n        alignBottom = true; alignRight = true;\n        break;\n      case 3:\n      case 6:\n      case 9:\n        alignTop = true; alignLeft = true;\n        break;\n      case 4:\n      case 5:\n      case 10:\n        alignTop = true; alignRight = true;\n        break;\n      case 13:\n        alignVCenter = true; alignLeft = true;\n        break;\n      case 14:\n        alignVCenter = true; alignRight = true;\n        break;\n      case 15:\n        alignVCenter = true; alignHCenter = true;\n    }\n    switch (candidateNumber) {\n      // Direction\n      default:\n      case 1:\n      case 5:\n      case 9:\n        openDown = true; openLtr = true;\n        break;\n      case 2:\n      case 6:\n      case 10:\n        openDown = true; openRtl = true;\n        break;\n      case 3:\n      case 7:\n      case 11:\n        openUp = true; openLtr = true;\n        break;\n      case 4:\n      case 8:\n      case 12:\n        openUp = true; openRtl = true;\n        break;\n      case 13:\n        openLtr = true; openVCenter = true;\n        break;\n      case 14:\n        openRtl = true; openVCenter = true;\n        break;\n      case 15:\n        openHCenter = true; openVCenter = true;\n        break;\n    }\n  }\n\n  if (openLtr) {\n    if (alignRight) {\n      left = `${pageX + offsetRight}px`;\n    } else if (alignHCenter) {\n      left = `${pageX + ((offsetLeft + offsetRight) / 2)}px`;\n    } else {\n      left = `${pageX + offsetLeft}px`;\n    }\n    transformOrigin = 'left';\n  } else if (openHCenter) {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - (popupElementWidth / 2)}px`;\n    } else if (alignRight) {\n      left = `${(pageX + offsetRight) - (popupElementWidth / 2)}px`;\n    } else {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - (popupElementWidth / 2)}px`;\n    }\n    transformOrigin = 'center';\n  } else {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - popupElementWidth}px`;\n    } else if (alignHCenter) {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - popupElementWidth}px`;\n    } else {\n      left = `${(pageX + offsetRight) - popupElementWidth}px`;\n    }\n    transformOrigin = 'right';\n  }\n\n  if (openUp) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - popupElement.clientHeight}px`;\n    } else if (alignVCenter) {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - popupElement.clientHeight}px`;\n    } else {\n      top = `${(pageY + offsetTop) - popupElement.clientHeight}px`;\n    }\n    transformOrigin += ' bottom';\n  } else if (openVCenter) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - (popupElement.clientHeight / 2)}px`;\n    } else if (alignTop) {\n      top = `${(pageY + offsetTop) - (popupElement.clientHeight / 2)}px`;\n    } else {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - (popupElement.clientHeight / 2)}px`;\n    }\n    transformOrigin += ' center';\n  } else {\n    if (alignTop) {\n      top = `${pageY + offsetTop}px`;\n    } else if (alignVCenter) {\n      top = `${pageY + ((offsetTop + offsetBottom) / 2)}px`;\n    } else {\n      top = `${pageY + offsetBottom}px`;\n    }\n    transformOrigin += ' top';\n  }\n\n  popupElement.style.setProperty('top', top);\n  popupElement.style.setProperty('left', left);\n  popupElement.style.setProperty('right', 'auto');\n  popupElement.style.setProperty('bottom', 'auto');\n  popupElement.style.setProperty('margin', margin);\n  popupElement.style.setProperty('transform-origin', transformOrigin);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function refreshMenuItems(menuElement) {\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), (menuItem) => {\n    menuItem.setAttribute('tabindex', '-1');\n    MenuItem.attach(menuItem);\n  });\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  popupElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {Element} menuElement\n * @param {MouseEvent=} event\n * @param {boolean=} [alignTarget=true]\n * @return {boolean} handled\n */\nexport function show(menuElement, event, alignTarget) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  let changed = false;\n  if (event) {\n    updateMenuPosition(menuElement, popupElement, event, alignTarget);\n  } else {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  if (menuElement.getAttribute('aria-hidden') !== 'false') {\n    menuElement.setAttribute('aria-hidden', 'false');\n    changed = true;\n  }\n  if (changed) {\n    attach(menuElement);\n    const previousFocus = document.activeElement;\n    const newState = { hash: Math.random().toString(36).substr(2, 16) };\n    let previousState = null;\n    if (window.history && window.history.pushState) {\n      if (!window.history.state) {\n        // Create new previous state\n        window.history.replaceState({\n          hash: Math.random().toString(36).substr(2, 16),\n        }, document.title);\n      }\n      previousState = window.history.state;\n      window.history.pushState(newState, document.title);\n      window.addEventListener('popstate', onPopState);\n      window.addEventListener('resize', onWindowResize);\n    }\n    const menuStack = new MenuStack(menuElement, previousFocus, newState, previousState, event);\n    OPEN_MENUS.push(menuStack);\n    refreshMenuItems(menuElement);\n    if (event && !event.pointerType && !event.detail) {\n      // Triggered with keyboard event\n      selectNextMenuItem(menuElement);\n    } else {\n      popupElement.focus();\n    }\n  }\n  return changed;\n}\n\n/**\n * @param {Element} menuElement\n * @return {boolean} handled\n */\nexport function hide(menuElement) {\n  if (menuElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  menuElement.setAttribute('aria-hidden', 'true');\n  let stackIndex = -1;\n  OPEN_MENUS.some((stack, index) => {\n    if (stack.element === menuElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const menuStack = OPEN_MENUS[stackIndex];\n    if (menuStack.previousFocus) {\n      menuStack.previousFocus.focus();\n    }\n    OPEN_MENUS.splice(stackIndex, 1);\n    if (menuStack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (menuStack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_MENUS.length) {\n    window.removeEventListener('popstate', onPopState);\n    window.removeEventListener('resize', onWindowResize);\n  }\n  dispatchDomEvent(menuElement, HIDE_EVENT);\n  return true;\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:tabitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-tab__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateElementSiblings,\n} from '../../core/dom';\n\nexport const ACTIVATE_EVENT = 'mdw:menuitem-activate';\nexport const CHECK_EVENT = 'mdw:menuitem-check';\nexport const UNCHECK_EVENT = 'mdw:menuitem-uncheck';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  // If mouseover is used, an item can still lose focus via keyboard navigation.\n  // An extra event listener would need to be created to catch blur but the cursor\n  // would still remain over the element, thus needing another mousemove event.\n  // Prioritization is given to less event listeners rather than operations per second.\n  element.addEventListener('mousemove', onMouseMove);\n  element.addEventListener('click', onClick);\n  element.addEventListener('keydown', onKeyDown);\n  setupARIA(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function setupARIA(element) {\n  if (element.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  const role = element.getAttribute('role');\n  let useAriaChecked = false;\n  if (role === 'menuitemcheckbox' || role === 'menuitemradio') {\n    useAriaChecked = true;\n  } else if (role !== 'menuitem') {\n    if (element.getElementsByClassName('mdw-menu__check').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemcheckbox');\n    } else if (element.getElementsByClassName('mdw-menu__radio').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemradio');\n    } else {\n      element.setAttribute('role', 'menuitem');\n    }\n  }\n  if (useAriaChecked && !element.hasAttribute('aria-checked')) {\n    element.setAttribute('aria-checked', 'false');\n  }\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__text'),\n    el => el.setAttribute('role', 'text'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__check'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__info'),\n    el => el.setAttribute('role', 'note'));\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n  if (isDisabled(menuItemElement)) {\n    return;\n  }\n  const role = menuItemElement.getAttribute('role');\n  if (role === 'menuitemcheckbox') {\n    toggleChecked(menuItemElement);\n  } else if (role === 'menuitemradio') {\n    setChecked(menuItemElement, true);\n  }\n  dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onMouseMove(event) {\n  /** @type {HTMLElement} */\n  const el = (event.currentTarget);\n  if (!el) {\n    return;\n  }\n  const previousFocus = document.activeElement;\n  if (previousFocus === el) {\n    // Already focused\n    return;\n  }\n  if (el.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  el.focus();\n  if (document.activeElement !== el) {\n    if (previousFocus && document.activeElement !== previousFocus) {\n      previousFocus.focus();\n    }\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n\n  if (event.key === 'Enter') {\n    event.stopPropagation();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    onClick(event);\n    return;\n  }\n\n  if (event.key === 'Spacebar' || (event.key === ' ')) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    const role = menuItemElement.getAttribute('role');\n    if (role === 'menuitemcheckbox') {\n      toggleChecked(menuItemElement);\n    } else if (role === 'menuitemradio') {\n      setChecked(menuItemElement, true);\n    } else {\n      dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isChecked(element) {\n  return (element.getAttribute('aria-checked') === 'true');\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return (element.getAttribute('aria-disabled') === 'true');\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n * @return {boolean} uiChanged\n */\nexport function setChecked(element, checked) {\n  const role = element.getAttribute('role');\n  let isCheckable = false;\n  if (role === 'menuitemcheckbox') {\n    isCheckable = true;\n    if (!dispatchDomEvent(element, checked ? CHECK_EVENT : UNCHECK_EVENT)) {\n      return false;\n    }\n  }\n  if (role === 'menuitemradio') {\n    isCheckable = true;\n    if (checked) {\n      if (!dispatchDomEvent(element, CHECK_EVENT)) {\n        return false;\n      }\n      iterateElementSiblings(element, (sibling) => {\n        if (sibling.getAttribute('role') === 'menuitemradio') {\n          sibling.setAttribute('aria-checked', 'false');\n        }\n      });\n    }\n  }\n  if (!isCheckable) {\n    return false;\n  }\n  element.setAttribute('aria-checked', checked ? 'true' : 'false');\n  return true;\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function toggleChecked(element) {\n  const checked = !isChecked(element);\n  return setChecked(element, checked);\n}\n\n/**\n * @param {Element} element\n * @return {boolean} handled\n */\nexport function openSubMenu(element) {\n  const hasPopup = element.getAttribute('aria-haspopup');\n  if (hasPopup !== 'menu' && hasPopup !== 'true') {\n    return false;\n  }\n\n  // TODO: Open new menu\n  return false;\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousemove', onMouseMove);\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-js');\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n// https://www.w3.org/TR/wai-aria-practices/#TreeView\n// https://www.w3.org/TR/wai-aria-practices/examples/landmarks/navigation.html\n\nimport { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\n\nimport * as ListItem from './item';\nimport * as ListContent from './content';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-list'), attach);\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function attach(listElement) {\n  let role = listElement.getAttribute('role');\n  if (!role) {\n    let newRole = 'listbox';\n    const parentRole = listElement.parentElement && listElement.parentElement.getAttribute('role');\n    if (parentRole === 'treeitem') {\n      newRole = 'group';\n    } else if (iterateSomeOfArrayLike(listElement.children,\n      child => child.hasAttribute('aria-expanded') && child.classList.contains('mdw-list__item'))) {\n      newRole = 'tree';\n    }\n    listElement.setAttribute('role', newRole);\n    role = newRole;\n  }\n\n  setupAria(listElement, role);\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.attach(child);\n    }\n  });\n  if (role === 'radiogroup') {\n    if (!listElement.hasAttribute('mdw-on-focus')) {\n      listElement.setAttribute('mdw-on-focus', 'check');\n    }\n  }\n  iterateArrayLike(listElement.getElementsByClassName('mdw-list'), attach);\n  if (listElement.hasAttribute('mdw-list-js')) {\n    return;\n  }\n  if (role !== 'listbox' && role !== 'tree' && role !== 'radiogroup') {\n    return;\n  }\n\n  switch (role) {\n    case 'tree':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n      return;\n  }\n\n  listElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  listElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  listElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.addEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.addEventListener(ListContent.CHECKED_CHANGE_EVENT, onCheckedChangeEvent);\n  listElement.addEventListener(ListContent.FOCUS_EVENT, onContentFocusEvent);\n  listElement.setAttribute('mdw-list-js', '');\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onContentFocusEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  const onFocusInteraction = listElement.getAttribute('mdw-on-focus');\n  if (!onFocusInteraction) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.target);\n  if (ListContent.isDisabled(listContentElement)) {\n    return;\n  }\n  onFocusInteraction.split(' ').forEach((interaction) => {\n    switch (interaction) {\n      case 'select':\n        ListContent.setSelected(listContentElement, true);\n        break;\n      case 'check':\n        ListContent.setChecked(listContentElement, true);\n        break;\n      default:\n    }\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  // List is readonly\n  if (listElement.getAttribute('aria-readonly') === 'true') {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  const listElementRole = listElement.getAttribute('role');\n  if (listElementRole !== 'listbox' && listElementRole !== 'tree') {\n    // Bubble up\n    return;\n  }\n  const { detail } = event;\n  if (detail.value === 'false') {\n    // Item is radio-like and cannot be unselected\n    if (listElement.getAttribute('aria-required') === 'true'\n      && listElement.getAttribute('aria-multiselectable') !== 'true') {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (listElement.getAttribute('aria-multiselectable') !== 'true') {\n    // Item is radio-like and must uncheck others\n    setTimeout(() => {\n      // Wait to see if event is cancelled\n      if (event.defaultPrevented) {\n        return;\n      }\n      const role = itemElement.getAttribute('role');\n      iterateArrayLike(listElement.querySelectorAll(`[role=\"${role}\"][aria-selected=\"true\"]`),\n        (item) => {\n          if (item === itemElement) {\n            return;\n          }\n          item.setAttribute('aria-selected', 'false');\n        });\n    });\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onCheckedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  if (listElement.getAttribute('aria-readonly') === 'true') {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  const listElementRole = listElement.getAttribute('role');\n  if (listElementRole !== 'radiogroup') {\n    // Bubble up\n    return;\n  }\n\n  const { detail } = event;\n  if (detail.value === 'false') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  setTimeout(() => {\n    // Wait to see if event is cancelled\n    if (event.defaultPrevented) {\n      return;\n    }\n    iterateArrayLike(listElement.querySelectorAll('[role=\"radio\"][aria-checked=\"true\"]'),\n      (item) => {\n        if (item === itemElement) {\n          return;\n        }\n        item.setAttribute('aria-checked', 'false');\n      });\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"treeitem\"]'), [currentItem]);\n      break;\n    case 'listbox':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"option\"]'), [currentItem]);\n      break;\n    case 'radiogroup':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"radio\"]'), [currentItem]);\n      break;\n    default:\n  }\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {Element} listElement\n * @param {'listbox'|'tree'|'list'} role\n * @return {void}\n */\nexport function setupAria(listElement, role = 'tree') {\n  if (!listElement.hasAttribute('role')) {\n    listElement.setAttribute('role', role);\n  }\n  listElement.setAttribute('aria-orientation', 'vertical');\n  if (!listElement.hasAttribute('aria-multiselectable')) {\n    listElement.setAttribute('aria-multiselectable', 'false');\n  }\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function detach(listElement) {\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.detach(child);\n    }\n  });\n  RovingTabIndex.detach(\n    listElement,\n    listElement.querySelectorAll(`[role=\"${listElement.getAttribute('role') === 'tree' ? 'treeitem' : 'option'}\"]`)\n  );\n  listElement.removeEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.removeEventListener(ListContent.CHECKED_CHANGE_EVENT, onCheckedChangeEvent);\n  listElement.removeEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  listElement.removeEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  listElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.removeAttribute('mdw-list-js');\n}\n","import { getPassiveEventListenerOption } from '../../core/dom';\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function attach(textfieldElement) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.addEventListener('input', onInput, getPassiveEventListenerOption());\n    onInput({ currentTarget: input });\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function detach(textfieldElement) {\n  textfieldElement.removeAttribute('mdw-value-empty');\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.removeEventListener('input', onInput);\n  }\n}\n\n/**\n * @param {Event|{currentTarget}} event\n * @return {void}\n */\nexport function onInput(event) {\n  const inputElement = event.currentTarget;\n  if (inputElement.parentElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(inputElement);\n  }\n  updateInputEmptyState(inputElement);\n}\n\n/**\n * @param {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} inputElement\n * @return {void} */\nexport function updateInputEmptyState(inputElement) {\n  const attrName = 'mdw-value-empty';\n  const textfieldElement = inputElement.parentElement;\n  if (inputElement.value) {\n    if (textfieldElement.hasAttribute(attrName)) {\n      textfieldElement.removeAttribute(attrName);\n    }\n  } else if (!textfieldElement.hasAttribute(attrName)) {\n    textfieldElement.setAttribute(attrName, '');\n  }\n}\n\n/**\n * @param {HTMLTextAreaElement} inputElement\n * @return {number} Single row height */\nexport function updateTextAreaSize(inputElement) {\n  const previousRowsAttrValue = inputElement.getAttribute('rows');\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = 1;\n  const { height, paddingTop } = window.getComputedStyle(inputElement);\n  if (!height || height === 'auto') {\n    if (previousRowsAttrValue == null) {\n      inputElement.removeAttribute('rows');\n    } else {\n      inputElement.setAttribute('rows', previousRowsAttrValue);\n    }\n    return -1;\n  }\n  const heightPx = parseInt(height.replace('px', ''), 10);\n  const paddingTopPx = parseInt(paddingTop.replace('px', ''), 10);\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = Math.floor((inputElement.scrollHeight - paddingTopPx) / heightPx);\n  return heightPx;\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {string|Date|number}\n */\nexport function getValue(textfieldElement) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if ((input instanceof HTMLTextAreaElement) || (input instanceof HTMLSelectElement)) {\n    return input.value;\n  }\n  switch (input.type) {\n    case 'number':\n    case 'range':\n      return Number.isNaN(input.valueAsNumber) ? null : input.valueAsNumber;\n    case 'date':\n    case 'datetime-local':\n    case 'time':\n      if (input.value == null) {\n        return null;\n      }\n      return new Date(\n        (new Date(input.valueAsNumber).getTimezoneOffset() * 60 * 1000) + input.valueAsNumber\n      );\n    default:\n      return input.value;\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @param {(string|Date|number)=} value\n * @return {void}\n */\nexport function setValue(textfieldElement, value) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (value == null) {\n    input.value = null;\n  } else if (input instanceof HTMLTextAreaElement || input instanceof HTMLSelectElement) {\n    if (value instanceof Date) {\n      input.value = value.toString();\n    } else if (typeof value === 'string') {\n      input.value = value;\n    } else {\n      input.value = value.toString(10);\n    }\n  } else if (value instanceof Date) {\n    if (input.type === 'time') {\n      const hoursStr = `${value.getHours() < 10 ? '0' : ''}${value.getHours()}`;\n      const minutesStr = `${value.getMinutes() < 10 ? '0' : ''}${value.getMinutes()}`;\n      const secondsStr = `${value.getSeconds() < 10 ? '0' : ''}${value.getSeconds()}`;\n      input.value = `${hoursStr}:${minutesStr}:${secondsStr}.${value.getMilliseconds()}`;\n    } else {\n      switch (input.type) {\n        case 'date':\n          input.valueAsDate = value;\n          break;\n        case 'datetime-local':\n          input.valueAsNumber = value.getTime() - (value.getTimezoneOffset() * 60 * 1000);\n          break;\n        case 'number':\n        case 'range':\n          input.valueAsNumber = value.getTime();\n          break;\n        default:\n          input.value = value.toString();\n      }\n    }\n  } else if (typeof value === 'string') {\n    input.value = value;\n  } else {\n    switch (input.type) {\n      case 'date':\n      case 'time':\n      case 'datetime-local':\n      case 'number':\n      case 'range':\n        input.valueAsNumber = value;\n        break;\n      default:\n        input.value = value.toString();\n    }\n  }\n  updateInputEmptyState(input);\n  if (input instanceof HTMLTextAreaElement && textfieldElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(input);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:bottomnavitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-bottomnav__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#alert\n// https://www.w3.org/TR/wai-aria-practices/#alert\n\nimport {\n  dispatchDomEvent,\n  findElementParentByClassName,\n  nextTick,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\n/**\n * @typedef SnackbarCreateOptions\n * @property {!string} text\n * @property {!string=} buttonText\n * @property {string=} [buttonInk='primary']\n * @property {boolean} [stacked=false]\n * @property {number|boolean} [autoHide=4] Auto hide time in seconds\n * @property {boolean} [autoDestroy=true] Destroy element after hide\n * @property {Element=} parent Parent element to which to append\n * @property {boolean=} [show=true] Show element after creation\n * @property {boolean=} [skipQueue=false] Skip queue\n */\n\nclass SnackbarQueueItem {\n  /**\n   * @param {Element} element\n   * @param {SnackbarCreateOptions=} options\n   */\n  constructor(element, options) {\n    this.element = element;\n    this.options = options;\n    this.hideTimeout = null;\n  }\n\n  /** @return {void} */\n  clearHideTimeout() {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n      this.hideTimeout = null;\n    }\n  }\n}\n\n/** @type {SnackbarQueueItem[]} */\nconst SNACKBAR_QUEUE = [];\n\nexport const HIDE_EVENT = 'mdw:snackbar-hide';\nexport const SHOW_EVENT = 'mdw:snackbar-show';\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function attach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.attach(button);\n    button.addEventListener('click', onButtonClick);\n  }\n  snackbarElement.setAttribute('mdw-js', '');\n  snackbarElement.addEventListener('animationend', onAnimationEnd);\n  snackbarElement.addEventListener('keydown', onKeyDown);\n  setupARIA(snackbarElement);\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function setupARIA(snackbarElement) {\n  if (snackbarElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  snackbarElement.setAttribute('role', 'alert');\n  snackbarElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    // Allow users to close snackbar with escape, for accessibilty reasons\n    event.stopPropagation();\n    event.preventDefault();\n    /** @type {Element} */\n    const snackbarElement = (event.currentTarget);\n    hide(snackbarElement);\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function detach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.detach(button);\n    button.removeEventListener('click', onButtonClick);\n  }\n  // Remove timeouts and stacks\n  SNACKBAR_QUEUE.slice().reverse().forEach((queue, reverseIndex, array) => {\n    if (queue.element === snackbarElement) {\n      queue.clearHideTimeout();\n      const index = array.length - reverseIndex - 1;\n      SNACKBAR_QUEUE.splice(index, 1);\n    }\n  });\n  snackbarElement.removeAttribute('mdw-js');\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onButtonClick(event) {\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (buttonElement instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const snackbarElement = findElementParentByClassName(buttonElement, 'mdw-snackbar');\n  hide(snackbarElement);\n}\n\n/** @return {SnackbarQueueItem} */\nexport function getNextSnackbarQueueItem() {\n  const nextSnackbar = SnackbarQueueItem[0];\n  if (nextSnackbar && (!nextSnackbar.element || !nextSnackbar.element.parentElement)) {\n    // Item was removed from DOM externally\n    SNACKBAR_QUEUE.splice(0, 1);\n    return getNextSnackbarQueueItem();\n  }\n  return nextSnackbar;\n}\n\n/**\n * @param {Element} element\n * @return {SnackbarQueueItem}\n */\nexport function findNextQueueItem(element) {\n  let queue = null;\n  SNACKBAR_QUEUE.some((q) => {\n    if (q.element === element) {\n      queue = q;\n      return true;\n    }\n    return false;\n  });\n  return queue;\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  handleAnimationChange(/** @type {Element} */ (event.currentTarget));\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function handleAnimationChange(snackbarElement) {\n  const showing = snackbarElement.getAttribute('aria-hidden') === 'false';\n  if (showing) {\n    const currentQueueItem = findNextQueueItem(snackbarElement);\n    if (currentQueueItem && currentQueueItem.hideTimeout) {\n      return;\n    }\n    const autoHideString = snackbarElement.getAttribute('mdw-autohide');\n    if (autoHideString == null) {\n      return;\n    }\n    const timeInSeconds = parseFloat(autoHideString) || 4;\n    if (timeInSeconds < 0) {\n      return;\n    }\n    const timeout = setTimeout(() => {\n      hide(snackbarElement);\n    }, timeInSeconds * 1000);\n    if (currentQueueItem) {\n      currentQueueItem.hideTimeout = timeout;\n    }\n    return;\n  }\n\n  const nextQueueItem = findNextQueueItem(snackbarElement);\n  if (nextQueueItem) {\n    update(snackbarElement, nextQueueItem.options);\n    show(snackbarElement);\n    return;\n  }\n  if (snackbarElement.hasAttribute('mdw-autodestroy')) {\n    if (snackbarElement.parentElement) {\n      snackbarElement.parentElement.removeChild(snackbarElement);\n    }\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {boolean} changed\n */\nexport function hide(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, HIDE_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'true');\n  const currentQueueItem = findNextQueueItem(snackbarElement);\n  if (currentQueueItem) {\n    SNACKBAR_QUEUE.splice(SNACKBAR_QUEUE.indexOf(currentQueueItem), 1);\n  }\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {?Element} snackbarElement\n * @return {boolean} changed\n */\nexport function show(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'false') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, SHOW_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'false');\n  attach(snackbarElement);\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {SnackbarCreateOptions} options\n * @return {void}\n */\nexport function update(element, options) {\n  element.classList.add('mdw-snackbar');\n  if (!element.classList.contains('mdw-theme')) {\n    // Guidelines conflict stating a background should be fully opaque\n    // But says spec says to use #000000 with 87% opacity\n    // Calculated against white, opaque value is #212121 (Gray-900)\n    element.classList.add('mdw-theme');\n    element.setAttribute('mdw-surface', 'background 900');\n    element.setAttribute('mdw-dark', '');\n  }\n  let span = element.getElementsByTagName('span')[0];\n  if (span) {\n    // To trigger screen readers, we destroy and create a new span and textnode\n    span.parentElement.removeChild(span);\n  }\n  span = document.createElement('span');\n  if (element.firstChild) {\n    element.insertBefore(span, element.firstChild);\n  } else {\n    element.appendChild(span);\n  }\n  const textNode = document.createTextNode(options.text);\n  span.appendChild(textNode);\n  let button = element.getElementsByClassName('mdw-button')[0];\n  if (options.buttonText) {\n    if (!button) {\n      button = document.createElement('a');\n      element.appendChild(button);\n    }\n    setTextNode(button, options.buttonText);\n    button.classList.add('mdw-button');\n    if (typeof options.buttonInk === 'undefined') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', 'secondary');\n    } else if (typeof options.buttonInk === 'string') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', options.buttonInk);\n    } else {\n      // Don't set attribute if null is passed\n    }\n  } else if (button && button.parentElement) {\n    button.parentElement.removeChild(button);\n  }\n  if (options.stacked) {\n    element.setAttribute('mdw-stacked', '');\n  }\n  if (options.autoHide !== false) {\n    let timeInSeconds;\n    if (options.autoHide === true) {\n      timeInSeconds = 4;\n    } else if (options.autoHide == null) {\n      timeInSeconds = 4;\n    } else {\n      timeInSeconds = options.autoHide;\n    }\n    if (timeInSeconds > 0) {\n      element.setAttribute('mdw-autohide', timeInSeconds.toString());\n    }\n  }\n  if (options.autoDestroy !== false) {\n    element.setAttribute('mdw-autodestroy', '');\n  }\n}\n\n/**\n * Creates a Snackbar element if required and adds to show queue\n * @param {SnackbarCreateOptions} options\n * @return {HTMLElement}\n */\nexport function create(options) {\n  let element;\n  let newlyCreated = false;\n  if (options.parent) {\n    /** @type {HTMLElement} */\n    element = (options.parent.getElementsByClassName('mdw-snackbar')[0]);\n  }\n  if (!element) {\n    element = document.createElement('div');\n    if (options.parent) {\n      options.parent.appendChild(element);\n    }\n    newlyCreated = true;\n  }\n  const queue = new SnackbarQueueItem(element, options);\n  if (options.skipQueue) {\n    SNACKBAR_QUEUE.splice(0, 0, queue);\n  } else {\n    SNACKBAR_QUEUE.push(queue);\n  }\n\n  if (options.show !== false) {\n    if (newlyCreated) {\n      // Update after show to trigger a text change\n      update(element, options);\n      show(element);\n      update(element, options);\n    } else {\n      show(element);\n    }\n  }\n  return element;\n}\n","import * as ListContent from './content';\nimport { iterateArrayLike, getChildElementByClass } from '../../core/dom';\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attach(listItemElement) {\n  attachCore(listItemElement);\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.attach);\n  if (listItemElement.hasAttribute('aria-expanded')) {\n    if (!listItemElement.hasAttribute('mdw-expander-js')) {\n      listItemElement.setAttribute('mdw-pre-expander-js', '');\n      setTimeout(() => {\n        if (listItemElement.hasAttribute('mdw-pre-expander-js')) {\n          listItemElement.removeAttribute('mdw-pre-expander-js');\n          listItemElement.setAttribute('mdw-expander-js', '');\n        }\n      }, 500);\n    }\n    setExpanded(listItemElement, isExpanded(listItemElement));\n  }\n  listItemElement.addEventListener(ListContent.ACTIVATE_EVENT, onChildContentActivate);\n  listItemElement.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attachCore(listItemElement) {\n  setupAria(listItemElement);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {boolean}\n */\nexport function isExpanded(listItemElement) {\n  return (listItemElement.getAttribute('aria-expanded') === 'true');\n}\n\n/**\n * @param {Element} listItemElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(listItemElement, value) {\n  listItemElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n  iterateArrayLike(listItemElement.querySelectorAll('[role=\"treeitem\"]'), (treeitem) => {\n    treeitem.setAttribute('mdw-skip-tab', value ? 'false' : 'true');\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onChildContentActivate(event) {\n  /** @type {HTMLElement} */\n  const activatedElement = (event.target);\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!activatedElement || activatedElement.parentElement !== element) {\n    return;\n  }\n  if (element.hasAttribute('aria-expanded')) {\n    event.stopPropagation();\n    setExpanded(element, !isExpanded(element));\n  }\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function setupAria(listItemElement) {\n  let isTreeItem = null;\n  let roleIsNone = false;\n  if (!listItemElement.hasAttribute('role')) {\n    if (listItemElement.hasAttribute('aria-expanded')) {\n      listItemElement.setAttribute('role', 'treeitem');\n      isTreeItem = true;\n      roleIsNone = false;\n    } else {\n      listItemElement.setAttribute('role', 'none');\n      isTreeItem = false;\n      roleIsNone = true;\n    }\n  }\n  if (isTreeItem !== false || listItemElement.getAttribute('role') === 'treeitem') {\n    const activatorContent = getChildElementByClass(listItemElement, 'mdw-list__content');\n    if (activatorContent && !activatorContent.hasAttribute('role')) {\n      activatorContent.setAttribute('role', 'none');\n    }\n  }\n  if (!roleIsNone) {\n    return;\n  }\n  const parentRole = listItemElement.parentElement && listItemElement.parentElement.getAttribute('role');\n  if (!parentRole) {\n    return;\n  }\n  const contentChild = getChildElementByClass(listItemElement, 'mdw-list__content');\n  if (!contentChild) {\n    return;\n  }\n  if (contentChild.hasAttribute('role')) {\n    return;\n  }\n  switch (parentRole) {\n    case 'listbox':\n      contentChild.setAttribute('role', 'option');\n      break;\n    case 'radiogroup':\n      contentChild.setAttribute('role', 'radio');\n      break;\n    case 'group':\n    case 'tree':\n    case 'treeitem':\n      contentChild.setAttribute('role', 'treeitem');\n      break;\n    default:\n    case 'list':\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  if (document.activeElement !== event.currentTarget) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  if (!element.hasAttribute('aria-expanded')) {\n    return;\n  }\n  const activatorContent = getChildElementByClass(element, 'mdw-list__content');\n  if (!activatorContent) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  activatorContent.dispatchEvent(newEvent);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function detachCore(listItemElement) {\n}\n\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function detach(listItemElement) {\n  detachCore(listItemElement);\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.detach);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#grid\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  findElementParentByClassName,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  if (!element.hasAttribute('role')) {\n    element.setAttribute('role', 'grid');\n  }\n  element.setAttribute('mdw-js', '');\n  const headerRow = getHeaderRow(element);\n  const tbody = getTableBody(element);\n  const cellFocusable = element.hasAttribute('mdw-cell-focusable');\n  const rowFocusable = element.hasAttribute('mdw-row-focusable');\n\n  headerRow.addEventListener('click', onHeaderRowClick);\n  tbody.addEventListener('keydown', onTableBodyKeyDown);\n  tbody.addEventListener('click', onTableBodyClick);\n  let firstRow = null;\n  let foundTabbableRow = false;\n  let firstCell = null;\n  let foundTabbableCell = false;\n  iterateArrayLike(tbody.rows, (row) => {\n    if (rowFocusable) {\n      if (!firstRow) {\n        firstRow = row;\n      }\n      if (!foundTabbableRow && row.getAttribute('tabindex') === '0') {\n        foundTabbableRow = true;\n      } else {\n        row.setAttribute('tabindex', '-1');\n      }\n    } else {\n      row.removeAttribute('tabindex');\n    }\n    iterateArrayLike(row.cells, (cell) => {\n      if (cellFocusable && !rowFocusable) {\n        if (!firstCell) {\n          firstCell = cell;\n        }\n        if (!foundTabbableCell && cell.getAttribute('tabindex') === '0') {\n          foundTabbableCell = true;\n        } else {\n          cell.setAttribute('tabindex', '-1');\n        }\n      } else {\n        cell.removeAttribute('tabindex');\n      }\n    });\n  });\n  if (rowFocusable && !foundTabbableRow && firstRow) {\n    updateTabIndex(firstRow, false);\n  } else if (cellFocusable && !foundTabbableCell && firstCell) {\n    updateTabIndex(firstCell, false);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onTableBodyClick(event) {\n  /** @type {HTMLTableSectionElement} */\n  const tbody = (event.currentTarget);\n  const mdwDataTable = findElementParentByClassName(tbody, 'mdw-datatable');\n  const { target } = event;\n  let cell = null;\n  /** @type {HTMLTableRowElement} */\n  let row = null;\n\n  if (target instanceof HTMLInputElement && target.type === 'checkbox') {\n    if (mdwDataTable.hasAttribute('mdw-datatable-adapter')) {\n      return;\n    }\n    // Checkbox clicked\n    cell = findParentCell(target);\n    if (!cell.hasAttribute('mdw-selector')) {\n      return;\n    }\n    event.stopPropagation();\n    /** @type {HTMLTableRowElement} */\n    row = (cell.parentElement);\n    let hasSelection = false;\n    if (target.checked) {\n      row.setAttribute('aria-selected', 'true');\n      hasSelection = true;\n    } else {\n      row.setAttribute('aria-selected', 'false');\n      /** @type {NodeListOf<HTMLInputElement>} */\n      const checkboxes = (mdwDataTable.querySelectorAll('td[mdw-selector] input[type=checkbox]'));\n      hasSelection = iterateSomeOfArrayLike(checkboxes, checkbox => checkbox.checked);\n    }\n    if (hasSelection) {\n      mdwDataTable.setAttribute('mdw-has-selection', '');\n    } else {\n      mdwDataTable.removeAttribute('mdw-has-selection');\n    }\n    return;\n  }\n  if (target instanceof HTMLTableRowElement) {\n    row = target;\n  } else if (target instanceof HTMLTableCellElement) {\n    cell = target;\n  } else {\n    cell = findParentCell(/** @type {Element} */ (target));\n  }\n\n  if (cell) {\n    /** @type {HTMLTableRowElement} */\n    row = (cell.parentElement);\n    const cellFocusable = mdwDataTable.hasAttribute('mdw-cell-focusable');\n    if (cellFocusable) {\n      updateTabIndex(cell);\n      return;\n    }\n  }\n  if (row) {\n    const rowFocusable = mdwDataTable.hasAttribute('mdw-row-focusable');\n    if (rowFocusable) {\n      updateTabIndex(row);\n    }\n  }\n}\n\n/**\n * @param {HTMLTableRowElement|HTMLTableCellElement} element\n * @param {boolean} [removeOtherTabIndexes=true]\n * @return {void}\n */\nexport function updateTabIndex(element, removeOtherTabIndexes) {\n  if (removeOtherTabIndexes !== false) {\n    /** @type {HTMLElement} */\n    let tbody = element;\n    while (tbody != null && tbody instanceof HTMLTableSectionElement === false) {\n      tbody = tbody.parentElement;\n    }\n    if (element instanceof HTMLTableCellElement) {\n      iterateArrayLike(tbody.querySelectorAll('td[tabindex=\"0\"]'), (td) => {\n        if (td !== element) {\n          td.setAttribute('tabindex', '-1');\n        }\n      });\n    }\n    if (element instanceof HTMLTableRowElement) {\n      iterateArrayLike(tbody.querySelectorAll('tr[tabindex=\"0\"]'), (tr) => {\n        if (tr !== element) {\n          tr.setAttribute('tabindex', '-1');\n        }\n      });\n    }\n  }\n  if (element.getAttribute('tabindex') !== '0') {\n    element.setAttribute('tabindex', '0');\n    dispatchDomEvent(element, 'mdw:tabindexchanged');\n  }\n}\n\n/**\n * @param {Element} element\n * @return {HTMLTableCellElement}\n */\nexport function findParentCell(element) {\n  let el = element;\n  while (el != null) {\n    if (el instanceof HTMLTableElement) {\n      return null;\n    }\n    if (el instanceof HTMLTableCellElement) {\n      return el;\n    }\n    el = el.parentElement;\n  }\n  return null;\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onHeaderRowClick(event) {\n  /** @type {HTMLElement} */\n  const targetElement = (event.target);\n  const cell = findParentCell(targetElement);\n  if (!cell) {\n    return;\n  }\n  if (cell.cellIndex === -1) {\n    return;\n  }\n  if (!cell.hasAttribute('mdw-sortable')) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const headerRow = (event.currentTarget);\n  const mdwTable = findElementParentByClassName(headerRow, 'mdw-datatable');\n  if (!mdwTable) {\n    return;\n  }\n  if (mdwTable.hasAttribute('mdw-datatable-adapter')) {\n    return;\n  }\n  let ascending = true;\n  if (cell.hasAttribute('mdw-sorted') && !cell.getAttribute('mdw-sorted')) {\n    ascending = false;\n  }\n  if (ascending) {\n    cell.setAttribute('mdw-sorted', '');\n  } else {\n    cell.setAttribute('mdw-sorted', 'desc');\n  }\n  iterateArrayLike(cell.parentElement.getElementsByTagName('th'), (th) => {\n    if (th !== cell) {\n      th.removeAttribute('mdw-sorted');\n    }\n  });\n\n  /** @type {HTMLTableSectionElement} */\n  const tbody = getTableBody(mdwTable);\n  const rows = [];\n  for (let i = tbody.rows.length - 1; i >= 0; i -= 1) {\n    rows.push(tbody.rows.item(i));\n    tbody.deleteRow(i);\n  }\n  rows.sort((a, b) => {\n    const aCell = a.cells.item(cell.cellIndex);\n    const bCell = b.cells.item(cell.cellIndex);\n    const aText = aCell.textContent;\n    const bText = bCell.textContent;\n    if (aCell.dataset.type === 'number') {\n      return parseFloat(bText) - parseFloat(aText);\n    }\n    return bText.localeCompare(aText);\n  });\n  if (ascending) {\n    rows.reverse();\n  }\n  const fragment = document.createDocumentFragment();\n  rows.forEach((row) => {\n    fragment.appendChild(row);\n  });\n  tbody.appendChild(fragment);\n  event.stopPropagation();\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onTableBodyKeyDown(event) {\n  const currentSelection = document.activeElement;\n  let cellIndex = 0;\n  /** @type {HTMLTableRowElement} */\n  let row = null;\n  let isRow = false;\n  /** @type {HTMLTableRowElement|HTMLTableCellElement} */\n  let nextSelection = null;\n  if (currentSelection instanceof HTMLTableCellElement) {\n    ({ cellIndex } = currentSelection);\n    /** @type {HTMLTableRowElement} */\n    row = (currentSelection.parentElement);\n  } else if (currentSelection instanceof HTMLTableRowElement) {\n    isRow = true;\n    row = currentSelection;\n  }\n  if (!row) {\n    return;\n  }\n  /** @type {HTMLTableSectionElement} */\n  const tbody = (event.currentTarget);\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    if (row.sectionRowIndex === 0) {\n      return;\n    }\n    const newRow = tbody.rows.item(row.sectionRowIndex - 1);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(cellIndex);\n    }\n  } else if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    const newIndex = row.sectionRowIndex + 1;\n    if (newIndex >= tbody.rows.length) {\n      return;\n    }\n    const newRow = tbody.rows.item(newIndex);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(cellIndex);\n    }\n  } else if (event.ctrlKey && event.key === 'Home') {\n    if (row.sectionRowIndex === 0 && cellIndex === 0) {\n      return;\n    }\n    const newRow = tbody.rows.item(0);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(0);\n    }\n  } else if (event.ctrlKey && event.key === 'End') {\n    const newRowIndex = tbody.rows.length - 1;\n    let newCellIndex = 0;\n    if (!isRow) {\n      newCellIndex = row.cells.length - 1;\n    }\n    if (row.sectionRowIndex === newRowIndex && cellIndex === newCellIndex) {\n      return;\n    }\n    const newRow = tbody.rows.item(newRowIndex);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(newCellIndex);\n    }\n  } else if (event.key === 'Home') {\n    if (isRow) {\n      return;\n    }\n    if (cellIndex === 0) {\n      return;\n    }\n    nextSelection = row.cells.item(0);\n  } else if (event.key === 'End') {\n    if (isRow) {\n      return;\n    }\n    const newIndex = row.cells.length - 1;\n    if (newIndex === cellIndex) {\n      return;\n    }\n    nextSelection = row.cells.item(newIndex);\n  } else {\n    const isRtlEnabled = isRtl();\n    let isLeft = false;\n    let isRight = false;\n    if (event.key === 'ArrowLeft' || (event.key === 'Left')) {\n      if (isRtlEnabled) {\n        isRight = true;\n      } else {\n        isLeft = true;\n      }\n    }\n    if (event.key === 'ArrowRight' || (event.key === 'Right')) {\n      if (isRtlEnabled) {\n        isLeft = true;\n      } else {\n        isRight = true;\n      }\n    }\n    if (isLeft) {\n      if (isRow) {\n        return;\n      }\n      if (cellIndex === 0) {\n        return;\n      }\n      nextSelection = row.cells.item(cellIndex - 1);\n    } else if (isRight) {\n      if (isRow) {\n        return;\n      }\n      const newIndex = cellIndex + 1;\n      if (newIndex >= row.cells.length) {\n        return;\n      }\n      nextSelection = row.cells.item(newIndex);\n    }\n  }\n  if (nextSelection) {\n    event.stopPropagation();\n    event.preventDefault();\n    currentSelection.setAttribute('tabindex', '-1');\n    nextSelection.focus();\n    updateTabIndex(nextSelection, false);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-js');\n  const headerRow = getHeaderRow(element);\n  const tbody = getTableBody(element);\n  headerRow.removeEventListener('click', onHeaderRowClick);\n  tbody.removeEventListener('keydown', onTableBodyKeyDown);\n  tbody.removeEventListener('click', onTableBodyClick);\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLElement}\n */\nexport function getScroller(datatableElement) {\n  /** @type {HTMLElement} */\n  let scroller = (datatableElement.getElementsByClassName('mdw-datatable__scroller')[0]);\n  if (!scroller) {\n    scroller = document.createElement('div');\n    scroller.classList.add('mdw-datatable__scroller');\n    const footer = datatableElement.getElementsByClassName('mdw-datatable__footer')[0];\n    if (footer) {\n      datatableElement.insertBefore(scroller, footer);\n    } else {\n      datatableElement.appendChild(scroller);\n    }\n    // Move table into scroller if it exists\n    const table = datatableElement.getElementsByTagName('table')[0];\n    if (table) {\n      table.parentElement.removeChild(table);\n      scroller.appendChild(table);\n    }\n  }\n  return scroller;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableElement}\n */\nexport function getTable(datatableElement) {\n  if (datatableElement instanceof HTMLTableElement) {\n    return datatableElement;\n  }\n  let table = datatableElement.getElementsByTagName('table')[0];\n  if (!table) {\n    const scroller = getScroller(datatableElement);\n    table = document.createElement('table');\n    scroller.appendChild(table);\n  }\n  return table;\n}\n\n/**\n * @param {Element} tableElement\n * @return {HTMLTableRowElement}\n */\nexport function getHeaderRow(tableElement) {\n  let thead = tableElement.getElementsByTagName('thead')[0];\n  if (!thead) {\n    const table = getTable(tableElement);\n    thead = document.createElement('thead');\n    table.appendChild(thead);\n  }\n  let headerRow = thead.getElementsByTagName('tr')[0];\n  if (!headerRow) {\n    headerRow = document.createElement('tr');\n    thead.appendChild(headerRow);\n  }\n  return headerRow;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableSectionElement}\n */\nexport function getTableBody(datatableElement) {\n  let tbody = datatableElement.getElementsByTagName('tbody')[0];\n  if (!tbody) {\n    const table = getTable(datatableElement);\n    tbody = document.createElement('tbody');\n    table.appendChild(tbody);\n  }\n  return tbody;\n}\n","import { dispatchDomEvent } from '../dom';\n\n/**\n * @param {string} name Attribute Name\n * @param {Element} element Element\n * @param {string|boolean} value Boolean Attribute Value\n * @param {string} [dispatchEventName] OnChangeEvent\n * @param {boolean} [explicit=true]\n * @param {string} [emptyValue=false] Default empty value\n * @return {boolean} successful\n */\nfunction setAttribute(name, element, value, dispatchEventName, explicit = true, emptyValue = 'false') {\n  const attr = element.getAttribute(name);\n  let stringValue;\n  if (typeof value === 'string') {\n    stringValue = value;\n  } else {\n    stringValue = (value ? 'true' : 'false');\n  }\n  if (attr === stringValue) {\n    // Nothing to change\n    return true;\n  }\n  if (stringValue === emptyValue) {\n    // Set default empty value\n    if (attr == null) {\n      // No attribute set\n      if (explicit) {\n        // Explicitly set attribute\n        element.setAttribute(name, stringValue);\n      }\n      return true;\n    }\n    if (!explicit) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, stringValue);\n    }\n  } else {\n    // Non default value;\n    element.setAttribute(name, stringValue);\n  }\n  if (!dispatchEventName) {\n    return true;\n  }\n  // Alert change\n  if (!dispatchDomEvent(element, dispatchEventName, { value: stringValue })) {\n    // Revert\n    if (attr == null) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, attr);\n    }\n    return false;\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setCurrent(element, value, dispatchEventName) {\n  // Some browsers incorrectly style [aria-current=\"false\"]\n  // Attribute will be removed when false|\"false\"\n  return setAttribute('aria-current', element, value, dispatchEventName, false);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  return setAttribute('aria-selected', element, value, dispatchEventName);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setChecked(element, value, dispatchEventName) {\n  return setAttribute('aria-checked', element, value, dispatchEventName);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as Attributes from './attributes';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'tab');\n  element.setAttribute('mdw-aria-tab-js', '');\n  element.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-tab-js');\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  if (Attributes.setSelected(element, value, dispatchEventName)) {\n    Attributes.setCurrent(element, value);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Remap Space and Enter as Click\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  element.dispatchEvent(newEvent);\n}\n","/** @return {HTMLElement} */\nfunction AnyDomAdapterCreatorFn() {\n  return document.createElement('div');\n}\n\n/**\n * @param {HTMLElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyDomAdapterRendererFn(element, data) {\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      // eslint-disable-next-line no-new-wrappers\n      s = new String(data).toString();\n    }\n  }\n  if (element.textContent !== s) {\n    // eslint-disable-next-line no-param-reassign\n    element.textContent = s;\n  }\n}\n\n/**\n * @template T1\n * @template {HTMLElement} T2\n */\nexport default class DomAdapter {\n  /**\n   * @param {HTMLElement} element\n   * @param {Array<T1>} datasource\n   * @param {function(T2, T1)=} renderFn\n   * @param {function():T2=} createFn\n   */\n  constructor(element, datasource, renderFn, createFn) {\n    this.element = element;\n    this.datasource = datasource;\n    /** @type {Map<T1, T2>} */\n    this.map = new Map();\n    /** @type {WeakMap<T2, T1>} */\n    this.elementMap = new Map();\n    this.render = renderFn || AnyDomAdapterRendererFn;\n    this.create = createFn || AnyDomAdapterCreatorFn;\n  }\n\n  /** @return {void} */\n  refresh() {\n    const unlinkedDataItems = [];\n    this.map.forEach((element, data) => {\n      if (this.datasource.indexOf(data) === -1) {\n        unlinkedDataItems.push(data);\n      }\n    });\n    unlinkedDataItems.forEach((data) => {\n      this.removeItem(data);\n    });\n    this.datasource.forEach((data) => {\n      this.refreshItem(data);\n    });\n  }\n\n  /** @return {void} */\n  clear() {\n    this.map.clear();\n    this.elementMap = new WeakMap();\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild);\n    }\n  }\n\n  /**\n   * @param {T1} data\n   * @param {boolean} [checkPosition=true]\n   * @return {void}\n   */\n  refreshItem(data, checkPosition = true) {\n    const index = this.datasource.indexOf(data);\n    if (index === -1) {\n      this.removeItem(data);\n      return;\n    }\n    let elementIndex = -1;\n    let element = this.map.get(data);\n    if (!element) {\n      element = this.create();\n      this.map.set(data, element);\n      this.elementMap.set(element, data);\n    } else if (checkPosition) {\n      elementIndex = index;\n    } else {\n      let sibling = this.element.firstChild;\n      let siblingIndex = -1;\n      while (sibling) {\n        siblingIndex += 1;\n        if (sibling === element) {\n          elementIndex = siblingIndex;\n          break;\n        }\n        sibling = sibling.nextSibling;\n      }\n    }\n    this.render(element, data);\n    if (elementIndex === index) {\n      return;\n    }\n    if (elementIndex !== -1 && element.parentElement) {\n      element.parentElement.removeChild(element);\n      this.elementMap.delete(element);\n    }\n    let idx = index;\n    let nextDataObject = this.datasource[idx + 1];\n    while (nextDataObject) {\n      const nextElement = this.map.get(nextDataObject);\n      if (nextElement) {\n        this.element.insertBefore(element, nextElement);\n        return;\n      }\n      idx += 1;\n      nextDataObject = this.datasource[idx + 1];\n    }\n    this.element.appendChild(element);\n  }\n\n  /**\n   * @param {T1} data\n   * @return {void}\n   */\n  removeItem(data) {\n    const element = this.map.get(data);\n    if (!element) {\n      return;\n    }\n    if (element.parentElement) {\n      element.parentElement.removeChild(element);\n    }\n    this.map.delete(data);\n    this.elementMap.delete(element);\n  }\n\n  detach() {\n    this.element = null;\n    this.datasource = null;\n  }\n}\n","import DomAdapter from '../dom/index';\nimport * as ListItem from '../../components/list/item';\n\n/**\n * @param {HTMLLIElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyListAdapterRendererFn(element, data) {\n  let primaryText = element.getElementsByClassName('mdw-list__text')[0];\n  if (!primaryText) {\n    let contentElement = element.getElementsByClassName('mdw-list__content')[0];\n    if (!contentElement) {\n      contentElement = document.createElement('div');\n      contentElement.className = 'mdw-list__content';\n      element.appendChild(contentElement);\n    }\n    primaryText = document.createElement('div');\n    primaryText.className = 'mdw-list__text';\n    contentElement.appendChild(primaryText);\n    ListItem.attach(element);\n  }\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      s = new String(data).toString(); // eslint-disable-line no-new-wrappers\n    }\n  }\n  if (primaryText.textContent !== s) {\n    primaryText.textContent = s;\n  }\n}\n\n/**\n * @template T\n * @extends {DomAdapter<T, HTMLLIElement>}\n * */\nexport default class ListAdapter extends DomAdapter {\n  /**\n   * @param {HTMLElement} element\n   * @param {Array<T>} datasource\n   * @param {function(HTMLLIElement, T)=} renderFn\n   */\n  constructor(element, datasource, renderFn) {\n    super(element, datasource, renderFn, ListAdapter.create);\n    this.render = renderFn || AnyListAdapterRendererFn;\n  }\n\n  static create() {\n    const element = document.createElement('li');\n    element.classList.add('mdw-list__item');\n    return element;\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport { iterateArrayLike } from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as BottomNavItem from './item';\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function attach(bottomnavElement) {\n  setupARIA(bottomnavElement);\n  let selectedItem;\n  const items = bottomnavElement.getElementsByClassName('mdw-bottomnav__item');\n\n  iterateArrayLike(items, (item) => {\n    BottomNavItem.attach(item);\n    if (!selectedItem && item.getAttribute('aria-selected') === 'true') {\n      selectedItem = item;\n    }\n  });\n  if (!selectedItem) {\n    selectedItem = items[0];\n  }\n  if (selectedItem) {\n    BottomNavItem.setSelected(selectedItem, true, true);\n  }\n  bottomnavElement.addEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  bottomnavElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  bottomnavElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(bottomnavElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectNext(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function setupARIA(bottomnavElement) {\n  bottomnavElement.setAttribute('role', 'tablist');\n  bottomnavElement.setAttribute('aria-multiselectable', 'false');\n  bottomnavElement.setAttribute('aria-orientation', 'horizontal');\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function detach(bottomnavElement) {\n  bottomnavElement.removeEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.removeEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  bottomnavElement.removeEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  bottomnavElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  iterateArrayLike(bottomnavElement.getElementsByClassName('mdw-bottomnav__item'), BottomNavItem.detach);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  iterateArrayLike(bottomnavElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      BottomNavItem.setSelected(item, false);\n    }\n  });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#combobox\n\nimport { iterateSomeOfArrayLike, iterateArrayLike, getTextNode } from '../../core/dom';\n\nimport * as List from '../../components/list/index';\nimport * as ListContent from '../../components/list/content';\nimport * as TextField from '../../components/textfield/index';\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction containsTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) !== -1;\n}\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction startsWithTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) === 0;\n}\n\n/**\n * @param {Element} item\n * @return {string}\n */\nfunction defaultItemTextParser(item) {\n  if (item.hasAttribute('data-mdw-search-text')) {\n    return item.getAttribute('data-mdw-search-text');\n  }\n  let textElement;\n  [\n    'mdw-list__text-line',\n    'mdw-list__text',\n    'mdw-list__content',\n  ].some((className) => {\n    textElement = item.getElementsByClassName(className)[0];\n    return textElement != null;\n  });\n\n  const textNode = textElement ? getTextNode(textElement) : getTextNode(item);\n  if (textNode) {\n    return textNode.textContent || '';\n  }\n  return '';\n}\n\n/**\n * @param {Element} list\n * @param {boolean} [backwards=false]\n * @return {Element} sibling\n */\nfunction selectSibling(list, backwards) {\n  const current = list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n  const items = list.querySelectorAll('[role=\"option\"]:not([aria-hidden=\"true\"]):not([disabled])');\n  let sibling;\n  if (current && current.getAttribute('aria-hidden') !== 'true') {\n    iterateSomeOfArrayLike(items, (item, index) => {\n      if (item !== current) {\n        return false;\n      }\n      if (backwards) {\n        sibling = items[index - 1];\n      } else {\n        sibling = items[index + 1];\n      }\n      return true;\n    });\n  } else if (backwards) {\n    sibling = items[items.length - 1];\n  } else {\n    sibling = items[0];\n  }\n  if (sibling && sibling !== current) {\n    if (current) {\n      current.setAttribute('aria-selected', 'false');\n    }\n    sibling.setAttribute('aria-selected', 'true');\n    return sibling;\n  }\n  return null;\n}\n\n/**\n * @param {Element} listItem\n * @return {void}\n */\nfunction scrollItemIntoView(listItem) {\n  /**\n   * @param {Element} el\n   * @return {number}\n   */\n  function getElementVisibility(el) {\n    let rect = el.getBoundingClientRect();\n    const { top, height } = rect;\n    let next = el.parentElement;\n    do {\n      rect = next.getBoundingClientRect();\n      if ((top + height) > rect.bottom) {\n        // bottom clipped\n        return 1;\n      }\n      if (top < rect.top) {\n        // top clipped\n        return -1;\n      }\n      next = next.parentElement;\n    } while (next !== document.body);\n    if (top < 0) {\n      return -1;\n    }\n    if ((top + height) > document.documentElement.clientHeight) {\n      return 1;\n    }\n    return 0;\n  }\n  const visibility = getElementVisibility(listItem);\n  if (visibility < 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  } else if (visibility > 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  }\n}\n\n/**\n * @callback SearchAdapterTextFilter\n * @param {string} input\n * @param {string} content\n * @return {boolean} passes\n*/\n\n/**\n * @template T\n * @typedef SearchAdapterOptions\n * @prop {Element} textfield\n * @prop {Element} list\n * @prop {('contains'|'startsWith'|SearchAdapterTextFilter)} [textFilter='contains']\n * @prop {function(Element):string} [itemTextParser]\n * @prop {boolean} [dropdown=false]\n * @prop {boolean} [filterItems=true]\n * @prop {('replace'|'append'|'none')} [suggestionMethod='replace']\n * @prop {function(string, function(T[]=), function(Error=)=):void} [performSearch]\n * @prop {function(T[], function(), function(Error=)):void} [updateList]\n * @prop {boolean} [searchOnFocus=true]\n * @prop {number} [debounce=null] Debounce time in milliseconds\n */\n\n/** @template T */\nexport default class SearchAdapter {\n  /** @param {SearchAdapterOptions<T>} options */\n  constructor(options) {\n    this.textfield = options.textfield;\n    this.list = options.list;\n    this.list.setAttribute('role', 'listbox');\n    List.attach(this.list);\n    if (typeof options.textFilter === 'function') {\n      this.filter = options.textFilter;\n    } else if (options.textFilter === 'startsWith') {\n      this.filter = startsWithTextFilter;\n    } else {\n      this.filter = containsTextFilter;\n    }\n    this.itemTextParser = defaultItemTextParser || options.itemTextParser;\n    /** @type {HTMLInputElement} */\n    const input = (this.textfield.getElementsByClassName('mdw-textfield__input')[0]);\n    this.input = input;\n    this.list.addEventListener(ListContent.ACTIVATE_EVENT, (event) => {\n      /** @type {HTMLElement} */\n      const item = (event.target);\n      this.onItemSelected(item);\n      const inputValue = this.input.value || '';\n      this.suggestedInput = inputValue;\n      this.input.setSelectionRange(inputValue.length, inputValue.length);\n      this.input.focus();\n      this.hideDropDown();\n    });\n    this.input.addEventListener('keydown', (event) => {\n      this.onTextFieldKeydownEvent(event);\n    });\n    this.input.addEventListener('input', (event) => {\n      if (this.handleInputEvent) {\n        this.handleInputEvent(event);\n      }\n    });\n    this.input.addEventListener('blur', (event) => {\n      if (this.handleBlurEvent) {\n        this.handleBlurEvent(event);\n      }\n    });\n    this.input.addEventListener('focus', (event) => {\n      if (this.searchOnFocus) {\n        this.handleInputEvent(event);\n      }\n    });\n\n    this.dropdown = options.dropdown;\n    if (options.filterItems !== false) {\n      this.filterItems = true;\n    }\n    if (options.searchOnFocus !== false) {\n      this.searchOnFocus = true;\n    }\n    this.debounce = options.debounce;\n    this.suggestionMethod = options.suggestionMethod || 'replace';\n    this.currentSearchTerm = this.input.value || '';\n    /** @type {string} */\n    this.suggestedInput = null;\n    /** @type {string} */\n    this.previousValue = null;\n    this.performSearch = options.performSearch || ((value, resolve = () => {}) => resolve());\n    this.updateList = options.updateList || ((results, resolve = () => {}) => resolve());\n  }\n\n  /**\n   * Default input handler\n   * @param {Event} [event]\n   * @return {void}\n   */\n  handleInputEvent(event) { // eslint-disable-line no-unused-vars\n    if (document.activeElement !== this.input) {\n      return;\n    }\n    const inputValue = this.input.value || '';\n    if (inputValue === this.suggestedInput) {\n      return;\n    }\n    this.showDropDown();\n    if (inputValue === this.previousValue) {\n      return;\n    }\n    this.previousValue = inputValue;\n    this.currentSearchTerm = inputValue;\n\n    /**\n     * @param {Error} error\n     * @return {void}\n     */\n    function onErrorCallback(error) {\n      if (error.message === 'debounced') {\n        return;\n      }\n      if (error.message === 'expired') {\n        return;\n      }\n      throw error;\n    }\n\n    // IE does not support ES6 Promises\n    // Using resolve/reject callbacks instead.\n    // Syntactically ugly, but removes need for a polyfill.\n    this.performDebounce(inputValue,\n      () => this.checkExpired(inputValue,\n        () => this.performSearch(inputValue,\n          searchResults => this.checkExpired(inputValue,\n            () => this.updateList(searchResults,\n              () => this.filterListItems(),\n              onErrorCallback),\n            onErrorCallback),\n          onErrorCallback),\n        onErrorCallback),\n      onErrorCallback);\n\n    /**\n     * Promise.resolve()\n     *   .then(() => this.performDebounce(inputValue))\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.performSearch(inputValue))\n     *   .then((searchResults) => {\n     *     results = searchResults;\n     *   })\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.updateList(results))\n     *   .then(() => this.filterListItems())\n     *   .catch((error) => {\n     *     if (error.message === 'debounced') {\n     *       return;\n     *     }\n     *     if (error.message === 'expired') {\n     *       return;\n     *     }\n     *     throw error;\n     *   });\n     */\n  }\n\n  /**\n   * @param {string} inputValue\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  checkExpired(inputValue, resolve, reject) {\n    if (inputValue === this.currentSearchTerm) {\n      resolve();\n    } else {\n      reject(new Error('expired'));\n    }\n  }\n\n  /**\n   * @param {string} searchTerm\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  performDebounce(searchTerm, resolve, reject) {\n    if (!this.debounce) {\n      resolve();\n      return;\n    }\n    setTimeout(() => {\n      if (searchTerm !== this.currentSearchTerm) {\n        reject(new Error('debounced'));\n        return;\n      }\n      resolve();\n    }, this.debounce);\n  }\n\n  /** @return {boolean} handled */\n  showDropDown() {\n    if (!this.dropdown) {\n      return false;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    let changed = false;\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.removeAttribute('mdw-hide');\n      changed = true;\n    }\n    if (!dropDownElement.hasAttribute('mdw-show')) {\n      dropDownElement.setAttribute('mdw-show', '');\n      changed = true;\n    }\n    return changed;\n  }\n\n  /** @return {boolean} handled */\n  isDropDownShown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      return false;\n    }\n    if (this.input === document.activeElement) {\n      return true;\n    }\n    if (dropDownElement.hasAttribute('mdw-show')) {\n      return true;\n    }\n    return false;\n  }\n\n  /** @return {boolean} handled */\n  hideDropDown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (!dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.setAttribute('mdw-hide', '');\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {Event|FocusEvent} event\n   * @return {void}\n   */\n  handleBlurEvent(event) { // eslint-disable-line no-unused-vars\n    if (this.dropdown) {\n      const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n      if (dropDownElement.hasAttribute('mdw-show')) {\n        dropDownElement.removeAttribute('mdw-show');\n      }\n    }\n  }\n\n  /**\n   * @param {Element} item\n   * @return {void}\n   */\n  onItemSelected(item) {\n    if (this.suggestionMethod === 'none') {\n      return;\n    }\n    let suggestion = this.itemTextParser(item);\n    if (suggestion) {\n      suggestion = suggestion.trim();\n    }\n    if (!suggestion) {\n      return;\n    }\n    this.suggestedInput = suggestion;\n    if (this.suggestionMethod === 'replace') {\n      TextField.setValue(this.textfield, suggestion);\n    } else if (this.suggestionMethod === 'append') {\n      const selectionStart = (this.previousValue || '').length;\n      const selectionEnd = suggestion.length;\n      TextField.setValue(this.textfield, suggestion);\n      this.input.setSelectionRange(selectionStart, selectionEnd);\n    }\n  }\n\n  /**\n   * @param {SearchAdapterTextFilter} [fnFilter]\n   * @return {void}\n   */\n  filterListItems(fnFilter) {\n    if (!this.filterItems) {\n      return;\n    }\n    const input = this.input.value;\n    const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n    const items = this.list.querySelectorAll('[role=\"option\"]');\n    let hasItem = false;\n    iterateArrayLike(items, (item) => {\n      const content = this.itemTextParser(item);\n      const fn = fnFilter || this.filter;\n      if (fn(input, content)) {\n        hasItem = true;\n        item.setAttribute('aria-hidden', 'false');\n      } else {\n        item.setAttribute('aria-hidden', 'true');\n      }\n    });\n    if (current && current.getAttribute('aria-hidden') === 'true') {\n      const newSelection = selectSibling(this.list);\n      if (newSelection) {\n        this.onItemSelected(newSelection);\n      }\n    }\n    if (!hasItem) {\n      this.hideDropDown();\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event\n   * @return {void}\n   */\n  onTextFieldKeydownEvent(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    if (event.ctrlKey || event.altKey) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowUp':\n      case 'Up': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, true);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'ArrowDown':\n      case 'Down': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, false);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'Esc':\n      case 'Escape': {\n        if (this.hideDropDown()) {\n          this.suggestedInput = this.previousValue;\n          TextField.setValue(this.textfield, this.previousValue);\n          event.stopPropagation();\n          event.preventDefault();\n        }\n        break;\n      }\n      case 'Enter': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n            event.preventDefault();\n          }\n        }\n        break;\n      }\n      case 'Tab': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n          }\n        }\n        break;\n      }\n      default:\n    }\n  }\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tabpanel\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function attach(tabPanelElement) {\n  tabPanelElement.setAttribute('role', 'tabpanel');\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function detach(tabPanelElement) {\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {boolean}\n */\nexport function isExpanded(tabPanelElement) {\n  return tabPanelElement.getAttribute('aria-expanded') === 'true';\n}\n\n/**\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n}\n\n/**\n * Hide element to avoid tabbing into next panel\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setHidden(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-hidden', value ? 'true' : 'false');\n}\n","import {\n  iterateArrayLike,\n  scrollToElement,\n  dispatchDomEvent,\n  getPassiveEventListenerOption,\n  isRtl,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\nimport * as TabPanel from './panel';\n\nexport const SCROLL_EVENT = 'mdw:tabcontent-scroll';\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function attach(tabContentElement) {\n  tabContentElement.addEventListener('scroll', onTabContentScroll, getPassiveEventListenerOption());\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.attach);\n  tabContentElement.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function detach(tabContentElement) {\n  tabContentElement.removeEventListener('keydown', onKeyDown);\n  tabContentElement.removeAttribute('mdw-selected-index');\n  tabContentElement.removeEventListener('scroll', onTabContentScroll);\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.detach);\n}\n\n/**\n * Prevent scrolling with keyboard\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      event.preventDefault();\n      break;\n    default:\n  }\n}\n\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabContentElement = (event.currentTarget);\n  if (tabContentElement.hasAttribute('mdw-no-scroll')) {\n    return;\n  }\n  const isPageRtl = isRtl();\n  const scrollPoint = tabContentElement.scrollLeft / tabContentElement.clientWidth;\n  let visibleIndex = Math.floor(scrollPoint);\n  let visibilityPercentage = scrollPoint - visibleIndex;\n\n  // Percentage may be incorrect due to floating point rounding errors\n  // Compare of integer values provided by browser\n  iterateSomeOfArrayLike(tabContentElement.children, ((panel, index) => {\n    if (tabContentElement.scrollLeft === panel.offsetLeft) {\n      visibleIndex = index;\n      visibilityPercentage = 0;\n      return true;\n    }\n    return false;\n  }));\n\n  const isResting = visibilityPercentage === 0;\n  let rightPanel;\n  let leftPeekPanel;\n  let rightPeekPanel;\n  let leftSelected = false;\n  let rightSelected = false;\n  let selectedIndex;\n  let leftPanelIndex;\n  if (isPageRtl) {\n    const lastIndex = tabContentElement.children.length - 1;\n    leftPanelIndex = lastIndex - visibleIndex;\n    leftPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex - 1));\n    rightPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 1));\n    rightPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 2));\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = lastIndex - visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = lastIndex - (visibleIndex + 1);\n    }\n  } else {\n    leftPanelIndex = visibleIndex;\n    rightPanel = tabContentElement.children.item(visibleIndex + 1);\n    leftPeekPanel = tabContentElement.children.item(visibleIndex - 1);\n    rightPeekPanel = tabContentElement.children.item(visibleIndex + 2);\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = visibleIndex + 1;\n    }\n  }\n  /** @type {HTMLElement} */\n  const leftPanel = (tabContentElement.children.item(leftPanelIndex));\n\n  const currentTargetIndexString = tabContentElement.getAttribute('mdw-target-index');\n  const currentTargetIndex = currentTargetIndexString == null\n    ? null : parseInt(currentTargetIndexString, 10);\n\n  let newSelectedIndex = null;\n  if (currentTargetIndex == null) {\n    TabPanel.setExpanded(leftPanel, leftSelected);\n    if (rightPanel) {\n      TabPanel.setExpanded(rightPanel, rightSelected);\n    }\n    newSelectedIndex = selectedIndex;\n  } else if (currentTargetIndex === selectedIndex) {\n    tabContentElement.removeAttribute('mdw-target-index');\n  }\n\n\n  TabPanel.setHidden(leftPanel, false);\n  if (leftPeekPanel) {\n    TabPanel.setHidden(leftPeekPanel, isResting || !leftSelected);\n  }\n  if (rightPanel) {\n    TabPanel.setHidden(rightPanel, isResting);\n  }\n  if (rightPeekPanel) {\n    TabPanel.setHidden(rightPeekPanel, isResting || !rightSelected);\n  }\n\n  dispatchDomEvent(tabContentElement, SCROLL_EVENT, {\n    newSelectedIndex,\n    leftPanelIndex,\n    visibilityPercentage,\n  });\n}\n\n/**\n * @param {HTMLElement} tabContentElement\n * @param {HTMLElement|number} panel element or index\n * @param {true|false|'smooth'} [scrollToPanel='smooth']\n * @return {void}\n */\nexport function selectPanel(tabContentElement, panel, scrollToPanel = 'smooth') {\n  /** @type {HTMLElement} */\n  let panelElement;\n  /** @type {number} */\n  let currentSelectedIndex = null;\n  /** @type {number} */\n  let panelIndex = null;\n  const otherPanels = [];\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), (el, index) => {\n    if (currentSelectedIndex == null && TabPanel.isExpanded(el)) {\n      currentSelectedIndex = index;\n    }\n    if (panel === el || panel === index) {\n      TabPanel.setExpanded(el, true);\n      TabPanel.setHidden(el, false);\n      /** @type {HTMLElement} */\n      panelElement = (el);\n      panelIndex = index;\n    } else {\n      otherPanels.push(el);\n    }\n  });\n  if (!panelElement) {\n    // Invalid index or panel not in tabcontent\n    return;\n  }\n  otherPanels.forEach(sibling => TabPanel.setExpanded(sibling, false));\n\n  const isPageRtl = isRtl();\n  const targetScrollLeft = isPageRtl\n    ? panelElement.parentElement.scrollWidth + panelElement.offsetLeft - panelElement.offsetWidth\n    : panelElement.offsetLeft;\n  if (!scrollToPanel || panelElement.parentElement.scrollLeft === targetScrollLeft) {\n    // No scrolling, hide others\n    otherPanels.forEach(sibling => TabPanel.setHidden(sibling, true));\n    return;\n  }\n  if (scrollToPanel && panelElement) {\n    if (panelIndex == null) {\n      tabContentElement.removeAttribute('mdw-target-index');\n    } else {\n      tabContentElement.setAttribute('mdw-target-index', panelIndex.toString(10));\n    }\n    scrollToElement(panelElement, scrollToPanel === 'smooth', isPageRtl);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport {\n  iterateArrayLike, getPassiveEventListenerOption, scrollToElement,\n} from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as TabItem from './item';\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function attach(tabListElement) {\n  let indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (!indicatorElement) {\n    indicatorElement = document.createElement('div');\n    indicatorElement.classList.add('mdw-tab__indicator');\n    tabListElement.appendChild(indicatorElement);\n  }\n\n  setupARIA(tabListElement);\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.attach);\n  RovingTabIndex.setupTabIndexes(tabListElement, tabListElement.querySelectorAll('[role=\"tab\"]'));\n  tabListElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent, getPassiveEventListenerOption());\n  tabListElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  tabListElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  tabListElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(tabListElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectNext(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function setupARIA(tabListElement) {\n  if (tabListElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  tabListElement.setAttribute('role', 'tablist');\n  tabListElement.setAttribute('aria-multiselectable', 'false');\n  tabListElement.setAttribute('aria-orientation', 'horizontal');\n  const indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (indicatorElement) {\n    indicatorElement.setAttribute('role', 'presentation');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function detach(tabListElement) {\n  tabListElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  RovingTabIndex.detach(tabListElement, tabListElement.querySelectorAll('[role=\"tab\"]'));\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.detach);\n}\n\n/**\n * @param {Element} tabListElement\n * @param {Element|number} item element or index\n * @param {number} [percentage=0]\n * @param {boolean} [animate=false]\n * @return {void}\n */\nexport function setIndicatorPosition(tabListElement, item, percentage, animate = false) {\n  /** @type {HTMLElement} */\n  const indicatorElement = (tabListElement.getElementsByClassName('mdw-tab__indicator')[0]);\n  if (!indicatorElement) {\n    return;\n  }\n  const items = tabListElement.getElementsByClassName('mdw-tab__item');\n  /** @type {HTMLElement} */\n  const leftItem = (item instanceof Element ? item : items.item(item));\n  let left = leftItem.offsetLeft;\n  let right = left + leftItem.offsetWidth;\n\n  if (percentage > 0) {\n    left += (percentage * leftItem.offsetWidth);\n    let nextItem = (leftItem.nextElementSibling);\n    if (!nextItem.classList.contains('mdw-tab__item')) {\n      // RTL\n      nextItem = leftItem.previousElementSibling;\n    }\n    right = nextItem.offsetLeft + (percentage * nextItem.offsetWidth);\n  }\n\n  // RTL is inversed\n  const width = Math.abs(right - left);\n  indicatorElement.style.setProperty('transform', `translateX(${left}px) scaleX(${width / 1000})`);\n  if (animate) {\n    indicatorElement.setAttribute('mdw-animate', '');\n  } else {\n    indicatorElement.removeAttribute('mdw-animate');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @return {Element}\n */\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @param {boolean} [dispatchEvents=false]\n * @return {void}\n */\nexport function selectItemAtIndex(tabListElement, tabItemIndex, dispatchEvents = false) {\n  tabListElement.setAttribute('mdw-selected-index', tabItemIndex.toString(10));\n  const items = tabListElement.getElementsByClassName('mdw-tab__item');\n  if (dispatchEvents) {\n    const item = items.item(tabItemIndex);\n    if (item) {\n      TabItem.setSelected(item, true, true);\n    }\n    return;\n  }\n  iterateArrayLike(items, (el, index) => {\n    if (tabItemIndex === index) {\n      TabItem.setSelected(el, true, false);\n      if (tabListElement.hasAttribute('mdw-scrollable')) {\n        scrollToElement(el, true);\n      }\n    } else {\n      TabItem.setSelected(el, false, false);\n    }\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  iterateArrayLike(tabListElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      TabItem.setSelected(item, false, false);\n    }\n  });\n}\n","import {\n  iterateArrayLike,\n  nextTick,\n  getPassiveEventListenerOption,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\nimport * as TabContent from './content';\nimport * as TabList from './list';\nimport * as TabPanel from './panel';\nimport * as TabItem from './item';\n\nconst RESIZE_WAIT_FRAMES = 5;\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function attach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.attach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.attach(tabContentElement);\n  }\n\n  tabElement.addEventListener(TabContent.SCROLL_EVENT, onTabContentScroll, getPassiveEventListenerOption());\n  tabElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange, getPassiveEventListenerOption());\n\n  const items = (tabListElement && tabListElement.getElementsByClassName('mdw-tab__item')) || [];\n  const panels = (tabContentElement && tabContentElement.getElementsByClassName('mdw-tab__panel')) || [];\n\n  let selectedItem;\n  let selectedPanel;\n  iterateArrayLike(items, (itemElement, index) => {\n    if (itemElement.getAttribute('aria-selected') === 'true') {\n      selectedItem = itemElement;\n      selectedPanel = panels[index];\n    }\n  });\n  if (!selectedItem && items.length) {\n    selectedItem = items[0];\n    selectedPanel = panels[0];\n  }\n  if (selectedItem) {\n    TabItem.setSelected(selectedItem, true);\n  }\n  if (selectedPanel) {\n    TabPanel.setHidden(selectedPanel, false);\n    TabPanel.setExpanded(selectedPanel, true);\n  }\n  onResize(tabElement);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onTabItemSelectedChange(event) {\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const tabItemElement = (event.target);\n  /** @type {HTMLElement} */\n  const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n  if (tabContentElement) {\n    let tabItemIndex = -1;\n    const tabItems = tabElement.querySelectorAll('.mdw-tab__list [role=\"tab\"]');\n    iterateSomeOfArrayLike(tabItems, (el, index) => {\n      if (el === tabItemElement) {\n        tabItemIndex = index;\n        return true;\n      }\n      return false;\n    });\n    if (!tabContentElement.hasAttribute('mdw-no-scroll')) {\n      TabContent.selectPanel(tabContentElement, tabItemIndex, 'smooth');\n      return;\n    }\n    TabContent.selectPanel(tabContentElement, tabItemIndex, true);\n  }\n\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.setIndicatorPosition(tabListElement, tabItemElement, 0, true);\n  }\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function detach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.detach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.detach(tabContentElement);\n  }\n\n  tabElement.removeEventListener(TabContent.SCROLL_EVENT, onTabContentScroll);\n  tabElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange);\n  tabElement.removeAttribute('mdw-resize-stage');\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function onResize(tabElement) {\n  let stage = 0;\n  tabElement.setAttribute('mdw-resize-stage', stage.toString());\n  /** @return {void} */\n  function performResize() {\n    if (!tabElement.hasAttribute('mdw-resize-stage')) {\n      // Skip resize\n      return;\n    }\n    const attrStage = tabElement.getAttribute('mdw-resize-stage');\n    if (attrStage !== stage.toString()) {\n      // Off-sync due to another resize event\n      return;\n    }\n    stage += 1;\n    tabElement.setAttribute('mdw-resize-stage', stage.toString());\n    if (stage === RESIZE_WAIT_FRAMES) {\n      /** @type {HTMLElement} */\n      const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n      if (tabContentElement && !tabContentElement.hasAttribute('mdw-no-scroll')) {\n        /** @type {HTMLElement} */\n        const relatedPanel = (tabContentElement.querySelector('.mdw-tab__panel[aria-expanded=\"true\"]'));\n        if (relatedPanel) {\n          TabContent.selectPanel(tabContentElement, relatedPanel, true);\n        }\n      }\n    } else if (stage === RESIZE_WAIT_FRAMES * 2) {\n      /** @type {HTMLElement} */\n      const tabListElement = (tabElement.getElementsByClassName('mdw-tab__list')[0]);\n      if (tabListElement) {\n        /** @type {HTMLElement} */\n        const relatedItem = (tabListElement.querySelector('.mdw-tab__item[aria-selected=\"true\"]'));\n        if (relatedItem) {\n          TabList.setIndicatorPosition(tabListElement, relatedItem, 0);\n        }\n      }\n      tabElement.removeAttribute('mdw-resize-stage');\n      return;\n    }\n\n    nextTick(performResize);\n  }\n  nextTick(performResize);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  if (tabElement.hasAttribute('mdw-resize-stage')) {\n    return;\n  }\n  const { detail } = event;\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (!tabListElement) {\n    return;\n  }\n  TabList.setIndicatorPosition(tabListElement, detail.leftPanelIndex, detail.visibilityPercentage);\n  if (detail.newSelectedIndex != null) {\n    TabList.selectItemAtIndex(tabListElement, detail.newSelectedIndex, false);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport { iterateArrayLike } from '../../core/dom';\nimport * as ChipItem from './item';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.detach);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport * as Ripple from '../../core/ripple/index';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n}\n","/**\n * @callback DataTableAdapterColumnFormatter<T>\n * @param {any} value\n * @param {T} [object]\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterColumnRenderer<T>\n * @param {HTMLTableCellElement} cell,\n * @param {any} value\n * @param {T} data\n * @return {void}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapterColumn\n * @typedef DataTableAdapterColumnOptions<T>\n * @property {string} key\n * @property {(string|DocumentFragment)} [name='']\n * @property {'checkbox'|string} [type]\n * @property {boolean} [rowSelector]\n * @property {string} [tooltip]\n * @property {boolean} [sortable]\n * @property {boolean} [primaryColumn]\n * @property {HTMLElement} [customSortIcon]\n * @property {string} [innerHTML]\n * @property {DocumentFragment} [fragment]\n * @property {DataTableAdapterColumnRenderer<T>} [renderer]\n * @property {DataTableAdapterColumnFormatter<T>} [formatter]\n * @template T\n */\n\n/** @return {HTMLLabelElement} */\nfunction constructTableCheckbox() {\n  const checkboxLabel = document.createElement('label');\n  checkboxLabel.className = 'mdw-selection';\n  const input = document.createElement('input');\n  input.className = 'mdw-selection__input';\n  input.type = 'checkbox';\n  const icon = document.createElement('div');\n  icon.className = 'mdw-selection__icon';\n  icon.setAttribute('mdw-checkbox', '');\n  checkboxLabel.appendChild(input);\n  checkboxLabel.appendChild(icon);\n  return checkboxLabel;\n}\n\n/**\n * @template T\n */\nexport default class DataTableAdapterColumn {\n  /** @param {DataTableAdapterColumnOptions<T>} options */\n  constructor(options) {\n    this.element = document.createElement('th');\n    if (options.innerHTML != null) {\n      this.element.innerHTML = options.innerHTML;\n    } else if (options.fragment) {\n      this.element.appendChild(options.fragment);\n    }\n    this.key = options.key;\n    this.element.dataset.key = options.key;\n\n    if (options.sortable) {\n      this.element.setAttribute('mdw-sortable', '');\n      let sortIcon = options.customSortIcon;\n      if (!sortIcon) {\n        sortIcon = document.createElement('div');\n        sortIcon.classList.add('mdw-datatable__sort-icon');\n        sortIcon.classList.add('material-icons');\n        sortIcon.textContent = 'arrow_downward';\n      }\n      if (this.element.hasChildNodes()) {\n        this.element.insertBefore(this.element.firstChild, options.customSortIcon);\n      } else {\n        this.element.appendChild(sortIcon);\n      }\n    }\n    if (options.tooltip) {\n      const wrapper = document.createElement('span');\n      wrapper.classList.add('mdw-tooltip__wrapper');\n      const target = document.createElement('span');\n      target.classList.add('mdw-tooltip__target');\n      if (!options.name) {\n        target.textContent = '';\n      } else if (typeof options.name === 'string') {\n        target.textContent = options.name;\n      } else {\n        target.appendChild(options.name);\n      }\n      const tooltip = document.createElement('div');\n      tooltip.className = 'mdw-tooltip mdw-theme';\n      tooltip.setAttribute('mdw-surface', 'background 700');\n      tooltip.setAttribute('mdw-dark', '');\n      tooltip.textContent = options.tooltip;\n      wrapper.appendChild(target);\n      wrapper.appendChild(tooltip);\n      this.element.appendChild(wrapper);\n    } else if (options.name) {\n      let node;\n      if (typeof options.name === 'string') {\n        node = document.createTextNode(options.name);\n      } else {\n        node = options.name;\n      }\n      this.element.appendChild(node);\n    }\n\n    this.primaryColumn = options.primaryColumn;\n    if (options.primaryColumn) {\n      this.element.setAttribute('mdw-primary-column', '');\n    }\n\n    this.rowSelector = options.rowSelector;\n\n    if (this.rowSelector) {\n      this.element.setAttribute('mdw-selector', '');\n    }\n    if (options.type) {\n      this.element.dataset.type = options.type;\n      this.type = options.type;\n    }\n    if (this.rowSelector && this.type === 'checkbox') {\n      const checkboxLabel = constructTableCheckbox();\n      this.element.appendChild(checkboxLabel);\n    }\n\n    if (options.renderer) {\n      this.renderer = options.renderer;\n    } else if (options.type === 'checkbox') {\n      this.renderer = DataTableAdapterColumn.defaultCheckboxRenderer;\n    } else {\n      this.renderer = DataTableAdapterColumn.defaultCellRenderer;\n    }\n    this.formatter = options.formatter || (value => value);\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCheckboxRenderer(cell, value) {\n    let input = cell.getElementsByTagName('input')[0];\n    const checked = !!value;\n    if (!input) {\n      const checkboxLabel = document.createElement('label');\n      checkboxLabel.className = 'mdw-selection';\n      input = document.createElement('input');\n      input.className = 'mdw-selection__input';\n      input.type = 'checkbox';\n      input.checked = checked;\n      const icon = document.createElement('div');\n      icon.className = 'mdw-selection__icon';\n      icon.setAttribute('mdw-checkbox', '');\n      checkboxLabel.appendChild(input);\n      checkboxLabel.appendChild(icon);\n      cell.appendChild(checkboxLabel);\n    }\n    if (input.checked !== checked) {\n      input.checked = checked;\n    }\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCellRenderer(cell, value) {\n    let stringValue;\n    if (value == null) {\n      stringValue = '';\n    } else {\n      stringValue = value.toString();\n    }\n    const len = cell.childNodes.length;\n    let foundTextNode = false;\n    for (let i = len - 1; i >= 0; i -= 1) {\n      const node = cell.childNodes.item(i);\n      if (!foundTextNode && node.nodeType === Node.TEXT_NODE) {\n        if (node.nodeValue !== stringValue) {\n          node.nodeValue = stringValue;\n        }\n        foundTextNode = true;\n      } else {\n        cell.removeChild(node);\n      }\n    }\n    if (!foundTextNode) {\n      const node = document.createTextNode(stringValue);\n      cell.appendChild(node);\n    }\n  }\n}\n","const radius = 8.75;\nconst circumference = 2 * Math.PI * radius;\n\n// TODO: Upgrade IE/Edge browsers to animate with rAF\n\n/**\n * @param {Element} progressCircleElement\n * @param {number} value Percentage value (0-100);\n * @return {void}\n */\nexport function setValue(progressCircleElement, value) {\n  const dashOffset = circumference * (3 - (value / 100));\n  const pathElements = progressCircleElement.getElementsByTagName('path');\n  pathElements[pathElements.length - 1].style.setProperty('stroke-dashoffset', dashOffset.toString());\n}\n","import { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\n\nimport * as Button from '../../components/button/index';\nimport * as DataTable from '../../components/datatable/index';\nimport DataTableAdapterColumn from './column';\n\n/**\n * @typedef {import('./column').DataTableAdapterColumnOptions<T>} DataTableAdapterColumnOptions<T>\n * @template T\n */\n\n/**\n * Callback fired when value change is requested\n * Return truthy value to cancel updating object\n * @callback DataTableAdapterOnValueChangeRequestedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {boolean} cancel\n * @template T\n */\n\n/**\n * Callback fired when value is changed\n * @callback DataTableAdapterOnValueChangedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {void}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterFilter<T>\n * @param {T} element\n * @param {number} [index]\n * @param {T[]} array\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterSorter<T>\n * @param {T} a\n * @param {T} b\n * @return {number}\n * @template T\n */\n\n/**\n * @template T\n */\nexport default class DataTableAdapter {\n  /**\n   * @param {Object} options\n   * @param {HTMLElement} options.datatable\n   * @param {T[]} options.datasource Object array\n   * @param {DataTableAdapterFilter<T>} [options.filter]\n   * @param {DataTableAdapterOnValueChangeRequestedCallback<T>} [options.onValueChangeRequested]\n   * @param {DataTableAdapterOnValueChangedCallback<T>} [options.onValueChanged]\n   * @param {DataTableAdapterSorter<T>} [options.sorter]\n   */\n  constructor(options) {\n    this.element = options.datatable;\n    this.datasource = options.datasource;\n    this.filter = options.filter;\n    this.sorter = options.sorter;\n    this.onValueChangeRequested = options.onValueChangeRequested || (() => false);\n    this.onValueChanged = options.onValueChanged || (() => {});\n\n    this.onElementClickListener = (event) => {\n      this.handleClickInteraction(event);\n    };\n    // Use one click event listener to reduce overhead and allow dynamic content\n    this.element.addEventListener('click', this.onElementClickListener);\n\n    this.onElementScrollListener = () => {\n      this.onElementScroll();\n    };\n\n    /** @type {HTMLTableRowElement} */\n    this.tabindexRow = null;\n    /** @type {Object} */\n    this.tabindexRowData = null;\n    this.element.addEventListener('mdw:tabindexchanged', (event) => {\n      if (this.element.hasAttribute('mdw-row-focusable')) {\n        this.tabindexRow = /** @type {HTMLTableRowElement} */ (event.target);\n        this.tabindexRowData = this.getDataForTableRow(this.tabindexRow);\n      }\n    });\n    DataTable.attach(this.element);\n    this.scroller = DataTable.getScroller(this.element);\n    this.element.setAttribute('mdw-datatable-adapter', '');\n    /** @type {DataTableAdapterColumn<T>[]} */\n    this.columns = [];\n    this.page = 0;\n    this.pageLimit = 0;\n    this.debounceTimeMs = 0;\n    this.throttleTimeMs = 0;\n    this.useLazyRendering = false;\n  }\n\n  detach() {\n    this.element.removeAttribute('mdw-datatable-adapter');\n    this.element = null;\n    this.datasource = null;\n    this.filteredDatasource = null;\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  performThrottledRender(forceRefresh = false) {\n    this.performLazyRender(forceRefresh);\n    if (this.throttledRenderPending) {\n      this.throttledRenderPending = false;\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  scheduleThrottledRender(forceRefresh = false) {\n    if (this.throttleTimeMs < 17) {\n      window.requestAnimationFrame(() => this.performThrottledRender(forceRefresh));\n    } else {\n      setTimeout(() => this.performThrottledRender(forceRefresh), this.throttleTimeMs);\n    }\n  }\n\n  onElementScroll() {\n    if (this.debounceTimeout) {\n      clearTimeout(this.debounceTimeout);\n      this.debounceTimeout = null;\n    }\n    if (this.throttledRenderPending) {\n      // Will perform in the future\n      return;\n    }\n    if (this.debounceTimeMs) {\n      this.debounceTimeout = setTimeout(() => {\n        this.scheduleThrottledRender();\n        this.throttledRenderPending = true;\n      }, this.debounceTimeMs);\n    } else {\n      this.scheduleThrottledRender();\n      this.throttledRenderPending = true;\n    }\n  }\n\n  buildScrollListener() {\n    this.scroller.addEventListener('scroll', this.onElementScrollListener);\n  }\n\n  destroyScrollListener() {\n    this.scroller.removeEventListener('scroll', this.onElementScrollListener);\n  }\n\n  /**\n   * @param {PointerEvent|MouseEvent} event\n   * @return {void}\n   */\n  handleClickInteraction(event) {\n    const { target } = event;\n    if (target instanceof HTMLInputElement) {\n      if (target.type === 'checkbox') {\n        event.stopPropagation();\n        const currentCell = this.getTableCell(target);\n        if (currentCell.tagName.toLowerCase() === 'th') {\n          this.setCheckOnAllRows(target.checked, currentCell.cellIndex);\n          this.setHasSelection(target.checked);\n          return;\n        }\n        const currentRow = this.getTableRow(target);\n        const object = this.getDataForTableRow(currentRow);\n        if (this.onValueChangeRequested(object, currentCell.dataset.key, target.checked)) {\n          event.preventDefault();\n          return;\n        }\n        object[currentCell.dataset.key] = target.checked;\n        this.onValueChanged(object, currentCell.dataset.key, target.checked);\n        if (currentCell.hasAttribute('mdw-selector')) {\n          if (target.checked) {\n            currentRow.setAttribute('aria-selected', 'true');\n            this.setHasSelection(true);\n          } else {\n            currentRow.removeAttribute('aria-selected');\n            const selectedRows = this.getSelectedRows();\n            this.setHasSelection(selectedRows.length !== 0);\n          }\n        }\n      }\n      return;\n    }\n    const currentCell = this.getTableCell(/** @type {HTMLElement} */ (target));\n    if (currentCell) {\n      if (currentCell.tagName.toLowerCase() === 'th' && currentCell.hasAttribute('mdw-sortable')) {\n        event.stopPropagation();\n        let ascending = true;\n        if (currentCell.hasAttribute('mdw-sorted') && !currentCell.getAttribute('mdw-sorted')) {\n          ascending = false;\n        }\n        this.updateSortIcons(currentCell, ascending);\n        if (this.updateSortColumn) {\n          this.updateSortColumn(currentCell, ascending);\n        }\n      }\n    }\n  }\n\n  /**\n   * Overridable sorting method\n   * @param {HTMLTableHeaderCellElement} [tableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortColumn(tableHeaderCell, ascending) {\n    if (!tableHeaderCell) {\n      this.sorter = null;\n      this.refresh();\n      return;\n    }\n    if (tableHeaderCell.cellIndex === -1) {\n      // Header not attached to row!\n      return;\n    }\n    const index = tableHeaderCell.cellIndex;\n    const tableColumn = this.columns[index];\n    const direction = ascending ? 1 : -1;\n    this.sorter = ((a, b) => {\n      const valueA = a[tableColumn.key];\n      const valueB = b[tableColumn.key];\n      if (valueA == null) {\n        if (valueB == null) {\n          return 0;\n        }\n        return -1 * direction;\n      }\n      if (valueB == null) {\n        return direction;\n      }\n      if (tableColumn.type === 'number') {\n        return (parseFloat(valueA) - parseFloat(valueB)) * direction;\n      }\n      if (tableColumn.type === 'checkbox') {\n        return ((valueA ? 1 : 0) - (valueB ? 1 : 0)) * direction;\n      }\n      if (valueA.localeCompare) {\n        return valueA.localeCompare(valueB) * direction;\n      }\n      // eslint-disable-next-line eqeqeq\n      if (valueA == valueB) {\n        return 0;\n      }\n      return (valueA - valueB) * direction;\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLTableHeaderCellElement} [sortedTableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortIcons(sortedTableHeaderCell, ascending) {\n    if (sortedTableHeaderCell) {\n      if (ascending) {\n        sortedTableHeaderCell.setAttribute('mdw-sorted', '');\n      } else {\n        sortedTableHeaderCell.setAttribute('mdw-sorted', 'desc');\n      }\n    }\n    iterateArrayLike(this.element.getElementsByTagName('th'), (otherTableHeader) => {\n      if (otherTableHeader !== sortedTableHeaderCell) {\n        otherTableHeader.removeAttribute('mdw-sorted');\n      }\n    });\n  }\n\n  /**\n   * @param {boolean} value\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  setCheckOnAllRows(value, columnIndex) {\n    const column = this.columns[columnIndex];\n    this.datasource.forEach((object) => {\n      object[column.key] = value; // eslint-disable-line no-param-reassign\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableRowElement}\n   */\n  getTableRow(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableRowElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableRow(element.parentElement);\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableCellElement}\n   */\n  getTableCell(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableCellElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableCell(element.parentElement);\n  }\n\n  /** @return {T[]} */\n  getSelectedRows() {\n    const selectorColumn = this.columns.filter(column => column.rowSelector)[0];\n    if (!selectorColumn) {\n      return [];\n    }\n    return this.getDatasource().filter(row => row[selectorColumn.key]);\n  }\n\n  /**\n   * @param {boolean} value\n   * @return {void}\n   */\n  setHasSelection(value) {\n    if (value) {\n      this.element.setAttribute('mdw-has-selection', '');\n      return;\n    }\n    this.element.removeAttribute('mdw-has-selection');\n  }\n\n  /**\n   * @param {T[]} datasource Object array\n   * @return {void}\n   */\n  setDatasource(datasource) {\n    this.datasource = datasource;\n  }\n\n  /**\n   * Toggle lazy rending for datasources\n   * @param {boolean} value\n   * @return {void}\n   */\n  setUseLazyRendering(value) {\n    this.useLazyRendering = value;\n    if (value) {\n      this.buildScrollListener();\n    } else {\n      this.destroyScrollListener();\n    }\n  }\n\n  /**\n   * @param {DataTableAdapterColumnOptions<T>} options\n   * @return {DataTableAdapterColumn<T>}\n   */\n  addColumn(options) {\n    const tableColumn = new DataTableAdapterColumn(options);\n    const headerRow = this.getHeaderRow();\n    headerRow.appendChild(tableColumn.element);\n    this.columns.push(tableColumn);\n    return tableColumn;\n  }\n\n  updatePaginator() {\n    if (!this.pageLimit) {\n      return;\n    }\n    const min = this.page * this.pageLimit;\n    const total = this.getDatasource().length;\n    let max = this.pageLimit + min;\n    if (max > total) {\n      max = total;\n    }\n    this.paginationDetailsElement.textContent = `${min + 1}-${max} of ${total}`;\n    this.previousPageButton.setAttribute('aria-disabled', (min === 0 ? 'true' : 'false'));\n    this.nextPageButton.setAttribute('aria-disabled', (max === total ? 'true' : 'false'));\n  }\n\n  /**\n   * @param {Object} options\n   * @param {boolean} [options.disabled=false]\n   * @param {number} [options.limit=10]\n   * @param {number[]} [options.limits=[10,25,50,100]]\n   * @return {void}\n   */\n  setPagination(options = {}) {\n    const footer = this.getFooter(!options.disabled);\n    if (options.disabled) {\n      this.pageLimit = 0;\n      this.page = 0;\n      if (footer) {\n        footer.style.display = 'none';\n      }\n      this.needsDraw = true;\n      return;\n    }\n    footer.style.display = '';\n    let optionsElement = footer.getElementsByClassName('mdw-datatable__footer-options')[0];\n    if (!optionsElement) {\n      optionsElement = document.createElement('div');\n      optionsElement.classList.add('mdw-datatable__footer-options');\n      const rowsPerPageText = document.createElement('span');\n      rowsPerPageText.textContent = 'Rows per page';\n      const limits = options.limits || [10, 25, 50, 100];\n      const limitsElement = document.createElement('label');\n      limitsElement.classList.add('mdw-textfield');\n      limitsElement.setAttribute('mdw-solo', '');\n      const select = document.createElement('select');\n      select.classList.add('mdw-textfield__input');\n      limits.forEach((limit) => {\n        const option = document.createElement('option');\n        option.value = limit.toString();\n        option.textContent = limit.toString();\n        select.appendChild(option);\n      });\n      select.value = (options.limit && options.limit.toString()) || '10';\n      const dropdownIcon = document.createElement('div');\n      dropdownIcon.classList.add('mdw-textfield__icon');\n      dropdownIcon.setAttribute('mdw-dropdown', '');\n      limitsElement.appendChild(select);\n      limitsElement.appendChild(dropdownIcon);\n      optionsElement.appendChild(rowsPerPageText);\n      optionsElement.appendChild(limitsElement);\n      footer.appendChild(optionsElement);\n      select.addEventListener('input', () => {\n        this.pageLimit = parseInt(select.value, 10);\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = footer.getElementsByClassName('mdw-datatable__footer-details')[0];\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = document.createElement('div');\n      this.paginationDetailsElement.classList.add('mdw-datatable__footer-details');\n      footer.appendChild(this.paginationDetailsElement);\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = footer.getElementsByClassName('mdw-datatable__footer-controls')[0];\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = document.createElement('div');\n      this.paginationControls.classList.add('mdw-datatable__footer-controls');\n      footer.appendChild(this.paginationControls);\n    }\n    if (!this.previousPageButton || !this.nextPageButton) {\n      const buttons = this.paginationControls.getElementsByClassName('mdw-button');\n      if (buttons.length !== 2) {\n        this.previousPageButton = document.createElement('a');\n        this.previousPageButton.classList.add('mdw-button');\n        this.previousPageButton.classList.add('material-icons');\n        this.previousPageButton.setAttribute('mdw-icon', '');\n        this.previousPageButton.textContent = 'chevron_left';\n        this.paginationControls.appendChild(this.previousPageButton);\n        Button.attach(this.previousPageButton);\n\n        this.nextPageButton = document.createElement('a');\n        this.nextPageButton.classList.add('mdw-button');\n        this.nextPageButton.classList.add('material-icons');\n        this.nextPageButton.setAttribute('mdw-icon', '');\n        this.nextPageButton.textContent = 'chevron_right';\n        this.paginationControls.appendChild(this.nextPageButton);\n        Button.attach(this.nextPageButton);\n      } else {\n        this.previousPageButton = buttons[0];\n        this.nextPageButton = buttons[1];\n      }\n      this.previousPageButton.addEventListener('click', () => {\n        if (this.previousPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page -= 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n      this.nextPageButton.addEventListener('click', () => {\n        if (this.nextPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page += 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    this.pageLimit = options.limit || 10;\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {boolean} create\n   * @return {HTMLElement}\n   */\n  getFooter(create) {\n    /** @type {HTMLElement} */\n    let footer = (this.element.getElementsByClassName('mdw-datatable__footer')[0]);\n    if (!footer && create) {\n      footer = document.createElement('div');\n      footer.classList.add('mdw-datatable__footer');\n      this.element.appendChild(footer);\n    }\n    return footer;\n  }\n\n  /**\n   * @param {HTMLTableRowElement} el\n   * @param {?number} viewportTop\n   * @param {?number} viewportBottom\n   * @return {boolean}\n   */\n  isRowVisible(\n    el,\n    viewportTop = this.scroller.scrollTop,\n    viewportBottom = this.scroller.scrollTop + this.scroller.offsetHeight\n  ) {\n    const rowTop = el.offsetTop;\n    const rowBottom = rowTop + el.offsetHeight;\n    if (rowTop > viewportTop && rowTop < viewportBottom) {\n      // Top of row is visible\n      return true;\n    }\n    if (rowBottom > viewportTop && rowBottom < viewportBottom) {\n      // Bottom of row is visible\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {(HTMLTableRowElement[])} visibleRows\n   * @return {void}\n   */\n  clearNonvisibleRows(visibleRows) {\n    const tbody = this.getTableBody();\n    if (visibleRows.length === tbody.rows.length) {\n      return;\n    }\n    let firstRowIndex = Infinity;\n    let lastRowIndex = -Infinity;\n    if (visibleRows.length) {\n      firstRowIndex = visibleRows[0].sectionRowIndex;\n      lastRowIndex = visibleRows[visibleRows.length - 1].sectionRowIndex;\n    }\n    iterateArrayLike(tbody.rows, (row, index) => {\n      if (index >= firstRowIndex && index <= lastRowIndex) {\n        return;\n      }\n      if (row.lastChild) {\n        // Store row height to prevent layout shifting\n        row.style.setProperty('height', `${row.offsetHeight || 0}px`);\n      }\n      while (row.lastChild) {\n        row.removeChild(row.lastChild);\n      }\n    });\n  }\n\n  /**\n   * @return {HTMLTableRowElement[]}\n   */\n  getLazyRenderRows() {\n    const tbody = this.getTableBody();\n    const len = tbody.rows.length;\n    const rows = [];\n    const minRowCount = window.screen.height / 48;\n    if (len <= minRowCount) {\n      iterateArrayLike(tbody.rows, (row) => {\n        rows.push(row);\n      });\n      return rows;\n    }\n    let foundFirstVisibleRow = false;\n    let startIndex = 0;\n    let endIndex = 0;\n    const viewportTop = this.scroller.scrollTop;\n    const viewportBottom = viewportTop + this.scroller.offsetHeight;\n    iterateSomeOfArrayLike(tbody.rows, (row, index) => {\n      if (this.isRowVisible(row, viewportTop, viewportBottom)) {\n        if (!foundFirstVisibleRow) {\n          foundFirstVisibleRow = true;\n          startIndex = index;\n        }\n        endIndex = index;\n      } else if (foundFirstVisibleRow) {\n        return true;\n      }\n      return false;\n    });\n\n    while ((endIndex - startIndex) + 1 < minRowCount) {\n      if (startIndex === 0) {\n        endIndex += 1;\n      } else if (endIndex === len - 1) {\n        startIndex -= 1;\n      } else {\n        startIndex -= 1;\n        endIndex += 1;\n      }\n    }\n    for (let i = startIndex; i <= endIndex; i += 1) {\n      rows.push(tbody.rows.item(i));\n    }\n\n    return rows;\n  }\n\n  /**\n   * @param {boolean} forceRefresh\n   * @return {void}\n   */\n  performLazyRender(forceRefresh = false) {\n    const visibleRows = this.getLazyRenderRows();\n    visibleRows.forEach((row) => {\n      if (forceRefresh || !row.cells.length) {\n        this.refreshRow(row.sectionRowIndex);\n      }\n    });\n    this.clearNonvisibleRows(visibleRows);\n  }\n\n  /**\n   * @param {DataTableAdapterFilter<T>} filter\n   * @return {void}\n   */\n  setFilter(filter) {\n    this.filter = filter;\n    this.refreshFilter();\n  }\n\n  /**\n   * @param {DataTableAdapterSorter<T>} sorter\n   * @return {void}\n   */\n  setSorter(sorter) {\n    this.sorter = sorter;\n    this.refreshFilter();\n  }\n\n  refreshFilter() {\n    if (this.filter && this.sorter) {\n      this.filteredDatasource = this.datasource.filter(this.filter).sort(this.sorter);\n    } else if (this.filter) {\n      this.filteredDatasource = this.datasource.filter(this.filter);\n    } else if (this.sorter) {\n      this.filteredDatasource = this.datasource.slice(0).sort(this.sorter);\n    } else {\n      this.filteredDatasource = null;\n    }\n  }\n\n  /**\n   * Get filtered datasource\n   * @return {T[]}\n   */\n  getDatasource() {\n    if (this.filter || this.sorter) {\n      if (this.filteredDatasource == null) {\n        this.refreshFilter();\n      }\n      return this.filteredDatasource;\n    }\n    return this.datasource;\n  }\n\n  /**\n   * Update number of rows in table\n   * @param {boolean} [refresh=false] Refresh new rows\n   * @return {void}\n   */\n  updateRowCount(refresh) {\n    const tbody = this.getTableBody();\n    const rowLength = tbody.rows.length;\n\n    const datasource = this.getDatasource();\n    let rowsToDisplay = datasource.length;\n    if (this.pageLimit) {\n      let offset = this.page * this.pageLimit;\n      if (offset > rowsToDisplay) {\n        // Datasource or filter likely changed\n        // Reset to page 0\n        this.page = 0;\n        offset = 0;\n      }\n      rowsToDisplay -= offset;\n      if (rowsToDisplay > this.pageLimit) {\n        rowsToDisplay = this.pageLimit;\n      }\n    }\n\n    const rowDifference = rowsToDisplay - rowLength;\n    const newRows = [];\n\n    if (rowDifference < 0) {\n      // too many rows\n      for (let i = rowLength - 1; i >= rowsToDisplay; i -= 1) {\n        const row = tbody.rows.item(i);\n        tbody.removeChild(row);\n      }\n    }\n    if (rowDifference > 0) {\n      const fragment = document.createDocumentFragment();\n      for (let i = 0; i < rowDifference; i += 1) {\n        const row = document.createElement('tr');\n        if (this.element.hasAttribute('mdw-row-focusable')) {\n          row.setAttribute('tabindex', '-1');\n        }\n        newRows.push(row);\n        fragment.appendChild(row);\n      }\n      tbody.appendChild(fragment);\n    }\n    if (refresh && rowDifference !== 0) {\n      if (this.useLazyRendering) {\n        this.scheduleThrottledRender(true);\n      } else {\n        newRows.forEach((row) => {\n          this.refreshRow(row.sectionRowIndex);\n        });\n      }\n    }\n  }\n\n  /** @return {void} */\n  refreshRows() {\n    if (this.useLazyRendering) {\n      this.performLazyRender(true);\n    } else {\n      const tbody = this.getTableBody();\n      iterateArrayLike(tbody.rows, (row, index) => {\n        this.refreshRow(index);\n      });\n    }\n    if (this.tabindexRowData) {\n      const row = this.getTableRowForData(this.tabindexRowData);\n      if (row !== this.tabindexRow) {\n        if (this.tabindexRow) {\n          this.tabindexRow.setAttribute('tabindex', '-1');\n        }\n        if (row) {\n          if (document.activeElement === this.tabindexRow) {\n            row.focus();\n          }\n          DataTable.updateTabIndex(row, false);\n        }\n        this.tabindexRow = row;\n      }\n    }\n    if (this.useLazyRendering) {\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /** @return {void} */\n  refresh() {\n    this.refreshFilter();\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {HTMLTableRowElement} row\n   * @return {T}\n   */\n  getDataForTableRow(row) {\n    const index = (row.sectionRowIndex) + (this.page * this.pageLimit);\n    return this.getDatasource()[index];\n  }\n\n  /**\n   * @param {T} data\n   * @return {HTMLTableRowElement} row\n   */\n  getTableRowForData(data) {\n    const datasourceIndex = this.getDatasource().indexOf(data);\n    if (datasourceIndex === -1) {\n      return null;\n    }\n    const minIndex = this.page * this.pageLimit;\n    return this.getTableBody().rows.item(datasourceIndex - minIndex);\n  }\n\n  /**\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshRow(rowIndex) {\n    const row = this.getTableBody().rows.item(rowIndex);\n    row.style.removeProperty('height');\n    this.columns.forEach((column, columnIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshCell(columnIndex, rowIndex) {\n    const tableColumn = this.columns[columnIndex];\n    const row = this.getTableBody().rows.item(rowIndex);\n    let len = row.cells.length;\n    while (len <= columnIndex) {\n      // Generate cells\n      const missingColumn = this.columns[len];\n      const missingCell = row.insertCell();\n      if (missingColumn.type) {\n        missingCell.dataset.type = missingColumn.type;\n      }\n      missingCell.dataset.key = missingColumn.key;\n      if (missingColumn.rowSelector) {\n        missingCell.setAttribute('mdw-selector', '');\n      }\n      if (missingColumn.primaryColumn) {\n        missingCell.setAttribute('mdw-primary-column', '');\n      }\n      len += 1;\n    }\n    const cell = row.cells.item(columnIndex);\n    const data = this.getDataForTableRow(row);\n    const value = data[tableColumn.key];\n    if (tableColumn.rowSelector) {\n      if (row.getAttribute('aria-selected') !== (value ? 'true' : 'false')) {\n        row.setAttribute('aria-selected', (value ? 'true' : 'false'));\n      }\n    }\n    const formattedValue = tableColumn.formatter(value, data);\n    tableColumn.renderer(cell, formattedValue, data);\n  }\n\n  /**\n   * @param {HTMLTableCellElement|DataTableAdapterColumn|number|string} search\n   * @return {DataTableAdapterColumn<T>}\n   */\n  getColumn(search) {\n    if (search instanceof DataTableAdapterColumn) {\n      return search;\n    }\n    if (search instanceof HTMLTableCellElement) {\n      return this.columns.filter(column => column.element === search)[0];\n    }\n    if (typeof search === 'string') {\n      return this.columns.filter(column => column.element.dataset.key === search)[0];\n    }\n    return this.columns[search];\n  }\n\n  /** @return {HTMLTableElement} */\n  getTable() {\n    let table = this.element.getElementsByTagName('table')[0];\n    if (!table) {\n      table = document.createElement('table');\n      const footer = this.element.getElementsByClassName('mdw-datatable__footer')[0];\n      if (footer) {\n        this.element.insertBefore(table, footer);\n      } else {\n        this.element.appendChild(table);\n      }\n    }\n    return table;\n  }\n\n  /** @return {HTMLTableRowElement} */\n  getHeaderRow() {\n    let thead = this.element.getElementsByTagName('thead')[0];\n    if (!thead) {\n      const table = this.getTable();\n      thead = document.createElement('thead');\n      table.appendChild(thead);\n    }\n    let headerRow = thead.getElementsByTagName('tr')[0];\n    if (!headerRow) {\n      headerRow = document.createElement('tr');\n      thead.appendChild(headerRow);\n    }\n    return headerRow;\n  }\n\n  /** @return {HTMLTableSectionElement} */\n  getTableBody() {\n    if (this.tbody) {\n      return this.tbody;\n    }\n    this.tbody = this.element.getElementsByTagName('tbody')[0];\n    if (!this.tbody) {\n      const table = this.getTable();\n      this.tbody = document.createElement('tbody');\n      table.appendChild(this.tbody);\n    }\n    return this.tbody;\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  refreshColumn(columnIndex) {\n    const tbody = this.getTableBody();\n    iterateArrayLike(tbody.rows, (row, rowIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n}\n","import { findElementParentByClassName } from '../../core/dom';\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function attach(fabElement) {\n  let closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (!closer) {\n    closer = document.createElement('div');\n    closer.classList.add('mdw-fab__close');\n    fabElement.appendChild(closer);\n  }\n  closer.addEventListener('click', onCloserClicked);\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.addEventListener('click', onFabButtonClicked);\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function detach(fabElement) {\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.removeEventListener('click', onFabButtonClicked);\n  const closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (closer) {\n    closer.removeEventListener('click', onCloserClicked);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCloserClicked(event) {\n  /** @type {HTMLElement} */\n  const closer = (event.currentTarget);\n  const fabElement = findElementParentByClassName(closer, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  hide(fabElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onFabButtonClicked(event) {\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const fabElement = findElementParentByClassName(button, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  toggle(fabElement);\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function show(fabElement) {\n  let changed = false;\n  if (fabElement.hasAttribute('mdw-hide')) {\n    fabElement.removeAttribute('mdw-hide');\n    changed = true;\n  }\n  if (!fabElement.hasAttribute('mdw-show')) {\n    fabElement.setAttribute('mdw-show', '');\n    changed = true;\n  }\n  return changed;\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function hide(fabElement) {\n  if (!fabElement.hasAttribute('mdw-hide')) {\n    fabElement.setAttribute('mdw-hide', '');\n  } else {\n    return false;\n  }\n  if (fabElement.hasAttribute('mdw-show')) {\n    fabElement.removeAttribute('mdw-show');\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function toggle(fabElement) {\n  if (hide(fabElement)) {\n    return;\n  }\n  show(fabElement);\n}\n","// https://material.io/design/navigation/navigation-transitions.html\n\nimport { nextTick } from '../dom';\n\n/**\n * @param {string} px\n * @return {number}\n */\nfunction pxToInteger(px) {\n  if (!px) {\n    return 0;\n  }\n  return parseInt(px, 10);\n}\n\n/**\n * @param {string} stringValue\n * @param {number} scaleX\n * @param {number} scaleY\n * @return {string}\n */\nfunction convertBoxShadow(stringValue, scaleX, scaleY) {\n  /**\n   * @param {string} shadow\n   * @return {string}\n   */\n  function convertShadow(shadow) {\n    let inset = '';\n    let offsetX = '';\n    let offsetY = '';\n    let blurRadius = '';\n    let spreadRadius = '';\n    let color = '';\n    shadow.split(' ').forEach((value) => {\n      if (value.toLowerCase() === 'inset') {\n        inset = value;\n        return;\n      }\n      if (value.indexOf('(') !== -1 || !value.match(/\\d/).length) {\n        color = value;\n        return;\n      }\n      const numberValue = pxToInteger(value);\n      if (!offsetX) {\n        offsetX = `${numberValue / scaleX}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!offsetY) {\n        offsetY = `${numberValue / scaleY}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!blurRadius) {\n        blurRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      } else {\n        spreadRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      }\n    });\n    return [\n      inset,\n      offsetX,\n      offsetY,\n      blurRadius,\n      spreadRadius,\n      color,\n    ].filter(v => v).join(' ');\n  }\n\n  if (!stringValue) {\n    return '';\n  }\n  return stringValue\n    // Strip spaces from anything parenthesized\n    .replace(/\\([^)]+\\)/g, substring => substring.replace(/ /g, ''))\n    // Split shadows by commas no inside parentheses\n    .match(/[^,(]+\\([^)]+\\)?[^,]*(|$)/g)\n    // Trim empty spaces\n    .map(shadow => shadow.trim())\n    // Convert values\n    .map(convertShadow)\n    // Rejoin shadows\n    .join(', ');\n}\n\n/**\n * @param {string} stringValue\n * @param {number} width\n * @param {number} height\n * @return {{horizontal:number, vertical:number}}\n */\nfunction convertBorderRadius(stringValue, width, height) {\n  /**\n   * @param {string} value\n   * @param {number} length\n   * @return {number}\n   */\n  function parsePercentage(value, length) {\n    const numValue = pxToInteger(value);\n    if (value.indexOf('%') === -1) {\n      return numValue;\n    }\n    return (numValue * length / 100.0);\n  }\n\n  if (!stringValue) {\n    return {\n      horizontal: 0,\n      vertical: 0,\n    };\n  }\n\n  const split = stringValue.split(' ');\n  if (split.length === 1) {\n    return {\n      horizontal: parsePercentage(stringValue, width),\n      vertical: parsePercentage(stringValue, height),\n    };\n  }\n  return {\n    horizontal: parsePercentage(split[0], width),\n    vertical: parsePercentage(split[1], height),\n  };\n}\n\n/**\n * @param {HTMLElement} targetElement\n * @param {HTMLElement} originElement\n * @param {CSSStyleDeclaration} [originStyle]\n * @return {Object}\n */\nexport function getShapeTransform(targetElement, originElement, originStyle) {\n  const originRect = originElement.getBoundingClientRect();\n  const targetRect = targetElement.getBoundingClientRect();\n  const originCSSStyle = originStyle || window.getComputedStyle(originElement);\n\n  let originX = originRect.left;\n  let originWidth = originRect.width;\n  let originY = originRect.top;\n  let originHeight = originRect.height;\n  if (originCSSStyle.boxSizing === 'border-box') {\n    const paddingTop = pxToInteger(originCSSStyle.paddingTop);\n    const paddingRight = pxToInteger(originCSSStyle.paddingRight);\n    const paddingBottom = pxToInteger(originCSSStyle.paddingBottom);\n    const paddingLeft = pxToInteger(originCSSStyle.paddingLeft);\n    originX += paddingLeft;\n    originWidth -= (paddingLeft + paddingRight);\n    originY += paddingTop;\n    originHeight -= (paddingTop + paddingBottom);\n  }\n\n  return {\n    originWidth,\n    originHeight,\n    translateX: originX - targetRect.left,\n    translateY: originY - targetRect.top,\n    scaleX: originWidth / targetRect.width,\n    scaleY: originHeight / targetRect.height,\n    toString() {\n      return [\n        `translateX(${this.translateX}px)`,\n        `translateY(${this.translateY}px)`,\n        `scaleX(${this.scaleX})`,\n        `scaleY(${this.scaleY})`,\n      ].join(' ');\n    },\n  };\n}\n\n/**\n * @param {HTMLElement} element\n * @param {string} property\n * @param {function(TransitionEvent):void} callback\n * @param {number} [expectedDuration]\n * @return {function} removeListener\n */\nfunction buildTransitionEndListener(element, property, callback, expectedDuration) {\n  let hasEnded = false;\n  const onTransitionEnd = (event) => {\n    if (event.propertyName !== property) {\n      return;\n    }\n    hasEnded = true;\n    element.removeEventListener('transitionend', onTransitionEnd);\n    callback(event);\n  };\n  element.addEventListener('transitionend', onTransitionEnd);\n  if (expectedDuration) {\n    setTimeout(() => {\n      element.removeEventListener('transitionend', onTransitionEnd);\n      if (!hasEnded) {\n        callback(null);\n      }\n    }, expectedDuration + 500);\n  }\n  return () => {\n    element.removeEventListener('transitionend', onTransitionEnd);\n  };\n}\n\n/**\n * @typedef {Object} TransitionElementOptions\n * @prop {HTMLElement} fromShapeElement\n * @prop {HTMLElement} toShapeElement\n * @prop {HTMLElement} fromContentElement\n * @prop {HTMLElement} toContentElement\n * @prop {number} [duration=250|300] (250ms collapse or 300ms expand)\n * @prop {boolean} [revertFrom=false] Revert from elements on completion\n * @prop {function(TransitionElementOptions)} [onTransitionEnd]\n * @prop {function(TransitionElementOptions)} [onComplete]\n */\n\n/**\n * @param {TransitionElementOptions} options\n * @return {function():void} revertAllElements()\n */\nexport function transitionElement(options) {\n  const toStyleSyle = window.getComputedStyle(options.toShapeElement);\n\n  const shapeTransform = getShapeTransform(\n    options.fromShapeElement, options.toShapeElement, toStyleSyle\n  );\n  const contentTransform = getShapeTransform(options.toContentElement, options.fromContentElement);\n\n  const transitionProperties = [\n    'transition',\n    'transform-origin',\n    'transform',\n    'background-color',\n    'border-radius',\n    'box-shadow',\n    'z-index',\n    'filter',\n    'opacity',\n    'visibility',\n  ];\n\n  const oldFromShapeProperties = {};\n  const oldToShapeProperties = {};\n  const oldFromContentProperties = {};\n  const oldToContentProperties = {};\n  const newFromShapeProperties = {};\n  transitionProperties.forEach((prop) => {\n    oldFromShapeProperties[prop] = options.fromShapeElement.style.getPropertyValue(prop);\n    oldToShapeProperties[prop] = options.toShapeElement.style.getPropertyValue(prop);\n    oldFromContentProperties[prop] = options.fromContentElement.style.getPropertyValue(prop);\n    oldToContentProperties[prop] = options.toContentElement.style.getPropertyValue(prop);\n    if (prop === 'box-shadow') {\n      newFromShapeProperties[prop] = convertBoxShadow(\n        toStyleSyle.getPropertyValue(prop),\n        shapeTransform.scaleX,\n        shapeTransform.scaleY\n      );\n    } else if (prop === 'border-radius') {\n      const topLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const topRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const horizontalRadii = [\n        `${topLeft.horizontal / shapeTransform.scaleX}px`,\n        `${topRight.horizontal / shapeTransform.scaleX}px`,\n        `${bottomLeft.horizontal / shapeTransform.scaleX}px`,\n        `${bottomRight.horizontal / shapeTransform.scaleX}px`,\n      ].join(' ');\n      const verticalRadii = [\n        `${topLeft.vertical / shapeTransform.scaleY}px`,\n        `${topRight.vertical / shapeTransform.scaleY}px`,\n        `${bottomLeft.vertical / shapeTransform.scaleY}px`,\n        `${bottomRight.vertical / shapeTransform.scaleY}px`,\n      ].join(' ');\n      newFromShapeProperties[prop] = `${horizontalRadii} / ${verticalRadii}`;\n    } else {\n      newFromShapeProperties[prop] = toStyleSyle.getPropertyValue(prop);\n    }\n  });\n\n  options.fromShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toContentElement.setAttribute('mdw-transition-busy', '');\n  options.fromContentElement.setAttribute('mdw-transition-busy', '');\n\n  // Hide toContentElement and overlay over fromContentElement immediately\n  options.toContentElement.style.setProperty('opacity', '0');\n  options.toContentElement.style.setProperty('transition', 'none');\n  options.toContentElement.style.setProperty('transform-origin', '0 0 0');\n  options.toContentElement.style.setProperty('transform', contentTransform);\n  options.toContentElement.style.setProperty('z-index', '9');\n  options.toContentElement.style.setProperty('visibility', 'visible');\n\n  options.fromContentElement.style.setProperty('opacity', '1');\n\n  options.fromShapeElement.style.setProperty('transition', 'none');\n  options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n  options.fromShapeElement.style.setProperty('transform', 'none');\n  options.fromShapeElement.style.setProperty('z-index', '8');\n\n  options.toShapeElement.style.setProperty('background-color', 'transparent');\n  options.toShapeElement.style.setProperty('filter', 'none');\n  options.toShapeElement.style.setProperty('box-shadow', 'none');\n  options.toShapeElement.style.setProperty('visibility', 'visible');\n\n  const revertFunction = () => {\n    transitionProperties.forEach((prop) => {\n      if (oldFromShapeProperties[prop] == null) {\n        options.fromShapeElement.style.removeProperty(prop);\n      } else {\n        options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n      }\n      if (oldToShapeProperties[prop] == null) {\n        options.toShapeElement.style.removeProperty(prop);\n      } else {\n        options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n      }\n      if (oldFromContentProperties[prop] == null) {\n        options.fromContentElement.style.removeProperty(prop);\n      } else {\n        options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n      }\n      if (oldToContentProperties[prop] == null) {\n        options.toContentElement.style.removeProperty(prop);\n      } else {\n        options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n      }\n    });\n  };\n\n  nextTick(() => {\n    nextTick(() => {\n      let calculatedDuration = options.duration;\n      if (calculatedDuration == null) {\n        if (shapeTransform.scaleX * shapeTransform.scaleY >= 1) {\n          calculatedDuration = 300; // expand\n        } else {\n          calculatedDuration = 250; // collapse\n        }\n      }\n      const totalDuration = calculatedDuration.toString(10);\n      const fadeInTime = (calculatedDuration * 0.70).toString(10);\n      const fadeOutTime = (calculatedDuration * 0.30).toString(10);\n      const transformTransition = transitionProperties\n        .filter(prop => prop !== 'transform-origin' && prop !== 'opacity' && prop !== 'transition')\n        .map(prop => `${prop} ${totalDuration}ms cubic-bezier(0.4, 0.0, 0.2, 1) 0s`)\n        .join(', ');\n      const fadeInTransition = `opacity ${fadeInTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) ${fadeOutTime}ms`;\n      const fadeOutTransition = [\n        `opacity ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n        `visibility ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n      ].join(', ');\n\n      options.fromShapeElement.style.setProperty('transition', transformTransition);\n      transitionProperties.forEach((prop) => {\n        if (prop === 'transform') {\n          options.fromShapeElement.style.setProperty('transform', shapeTransform);\n        } else if (prop === 'transition') {\n          // noop;\n        } else if (prop === 'transform-origin') {\n          options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n        } else if (prop === 'z-index') {\n          options.fromShapeElement.style.setProperty('z-index', '8');\n        } else if (prop === 'visibility') {\n          options.fromShapeElement.style.setProperty('visibility', 'hidden');\n        } else if (newFromShapeProperties[prop] == null) {\n          options.fromShapeElement.style.removeProperty(prop);\n        } else {\n          options.fromShapeElement.style.setProperty(prop, newFromShapeProperties[prop]);\n        }\n      });\n\n      nextTick(() => {\n        buildTransitionEndListener(options.fromShapeElement, 'transform', () => {\n          transitionProperties.forEach((prop) => {\n            if (prop === 'transition') {\n              options.toShapeElement.style.setProperty('transition', 'none');\n              options.toContentElement.style.setProperty('transition', 'none');\n            } else {\n              if (oldToShapeProperties[prop] == null) {\n                options.toShapeElement.style.removeProperty(prop);\n              } else {\n                options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n              }\n              if (oldToContentProperties[prop] == null) {\n                options.toContentElement.style.removeProperty(prop);\n              } else {\n                options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n              }\n            }\n\n            if (prop === 'visibility' && !options.revertFrom) {\n              return;\n            }\n            if (oldFromContentProperties[prop] == null) {\n              options.fromContentElement.style.removeProperty(prop);\n            } else {\n              options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n            }\n            if (oldFromShapeProperties[prop] == null) {\n              options.fromShapeElement.style.removeProperty(prop);\n            } else {\n              options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n            }\n          });\n          if (options.onTransitionEnd) {\n            options.onTransitionEnd(options);\n          }\n          nextTick(() => {\n            if (oldToShapeProperties.transition == null) {\n              options.toShapeElement.style.removeProperty('transition');\n            } else {\n              options.toShapeElement.style.setProperty('transition', oldToShapeProperties.transition);\n            }\n            if (oldToContentProperties.transition == null) {\n              options.toContentElement.style.removeProperty('transition');\n            } else {\n              options.toContentElement.style.setProperty('transition', oldToContentProperties.transition);\n            }\n            options.fromShapeElement.removeAttribute('mdw-transition-busy');\n            options.toShapeElement.removeAttribute('mdw-transition-busy');\n            options.toContentElement.removeAttribute('mdw-transition-busy');\n            options.fromContentElement.removeAttribute('mdw-transition-busy');\n            if (options.onComplete) {\n              options.onComplete(options);\n            }\n          });\n        }, calculatedDuration);\n      });\n\n      // Fade out fromContent while shaping into new content\n      options.fromContentElement.style.setProperty('transition', fadeOutTransition);\n      options.fromContentElement.style.setProperty('opacity', '0');\n      options.fromContentElement.style.setProperty('visibility', 'hidden');\n\n      options.toContentElement.style.setProperty('transition', [\n        transformTransition,\n        fadeInTransition,\n      ].join(', '));\n      options.toContentElement.style.setProperty('opacity', '1');\n      options.toContentElement.style.setProperty('transform', 'none');\n    });\n  });\n\n  return revertFunction;\n}\n"],"sourceRoot":""}