{"version":3,"sources":["webpack:///../core/dom.js","webpack:///../core/aria/rovingtabindex.js","webpack:///../core/aria/button.js","webpack:///../components/button/index.js","webpack:///../core/ripple/index.js","webpack:///../core/overlay/index.js","webpack:///../components/dialog/index.js","webpack:///../components/list/secondary.js","webpack:///../components/list/content.js","webpack:///../core/throttler.js","webpack:///../components/layout/index.js","webpack:///../components/menu/index.js","webpack:///../components/tab/item.js","webpack:///../components/menu/item.js","webpack:///../components/list/index.js","webpack:///../components/textfield/index.js","webpack:///../components/bottomnav/item.js","webpack:///../components/snackbar/index.js","webpack:///../components/list/item.js","webpack:///../components/datatable/index.js","webpack:///../core/aria/attributes.js","webpack:///../core/aria/tab.js","webpack:///../adapters/dom/index.js","webpack:///../adapters/list/index.js","webpack:///../components/bottomnav/index.js","webpack:///../adapters/search/index.js","webpack:///../components/tab/panel.js","webpack:///../components/tab/content.js","webpack:///../components/tab/list.js","webpack:///../components/tab/index.js","webpack:///../components/chip/index.js","webpack:///../components/chip/item.js","webpack:///../adapters/datatable/column.js","webpack:///../components/progress/index.js","webpack:///../adapters/datatable/index.js","webpack:///../components/fab/index.js","webpack:///../core/transition/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getPassiveEventListenerOption","nextTick","cancelTick","getChildElementByClass","findElementParentByClassName","isRtl","dispatchDomEvent","iterateArrayLike","iterateSomeOfArrayLike","iterateElementSiblings","getTextNode","setTextNode","scrollToElement","passiveEventListenerSupported","options","passive","window","addEventListener","removeEventListener","err","testPassiveEventListenerOptionSupport","requestAnimationFrame","cb","setTimeout","cancelAnimationFrame","clearTimeout","element","className","child","getElementsByClassName","parentElement","includeSelf","el","classList","contains","document","documentElement","dir","type","detail","event","CustomEvent","bubbles","cancelable","Event","createEvent","initEvent","initCustomEvent","dispatchEvent","arrayLike","fn","Array","prototype","forEach","call","some","distance","sibling","previousElementSibling","nextElementSibling","node","create","textNode","childNodes","childNode","nodeType","Node","TEXT_NODE","createTextNode","appendChild","value","nodeValue","removeChild","smooth","rtl","parent","targetScrollLeft","scrollWidth","offsetLeft","offsetWidth","elementRect","getBoundingClientRect","parentRect","subPixelScrollPosition","left","Math","abs","scrollLeft","scrollTo","top","behavior","style","setProperty","removeProperty","TABINDEX_ZEROED","FORWARDS_REQUESTED","BACKWARDS_REQUESTED","setupTabIndexes","detach","removeTabIndex","selectNext","selectPrevious","_dom__WEBPACK_IMPORTED_MODULE_0__","items","focusableWhenDisabled","arguments","length","undefined","currentlyFocusedChild","currentTabIndexChild","firstFocusableChild","activeElement","getAttribute","setAttribute","onChildFocus","onKeyDownHandler","currentTarget","excludeItems","item","indexOf","hasAttribute","ctrlKey","altKey","shiftKey","metaKey","childElement","target","moveHorizontal","moveVertical","key","verticalOrientation","ariaOrientation","moveForwards","isPageRTL","stopPropagation","preventDefault","attemptFocus","focus","e","list","current","reverse","foundCurrent","index","array","candidate","onKeyDown","buttonElement","newEvent","attach","add","Ripple","Overlay","attachCore","HTMLButtonElement","HTMLInputElement","AriaButton","detachCore","removeAttribute","button_attach","button_detach","rippleContainer","createElement","firstChild","insertBefore","rippleInner","onClick","onMouseDown","onTouchStart","onAnimationEnd","pointerType","rect","updateRipplePosition","pageX","pageXOffset","pageY","pageYOffset","drawRipple","touch","changedTouches","matches","msMatchesSelector","isActive","x","y","width","height","xPos","yPos","clientWidth","clientHeight","hypotenuse","sqrt","concat","initiator","currentInitiator","animationName","clearRipple","lastInteractionWasTouch","onBlur","onFocus","matchMedia","DialogStack","previousFocus","state","previousState","_classCallCheck","this","OPEN_DIALOGS","CANCEL_EVENT","CONFIRM_EVENT","CUSTOM_EVENT","DISMISS_EVENT","onTransitionEnd","dialogCloser","onCancelClick","popup","buttons","querySelectorAll","foundConfirmButton","foundCancelButton","button","Button","onCustomButtonClick","onConfirmClick","dialogElement","popupElement","setupARIA","propertyName","HTMLAnchorElement","cancelElement","cancel","hide","confirm","onEscapeKeyDown","focusableElements","join","foundTarget","HTMLElement","handleTabKeyPress","onPopState","lastOpenDialog","Object","keys","every","title","getTitleText","history","pushState","titleElement","textContent","bodyElement","stackIndex","stack","splice","hash","back","show","changed","hadLayer","getPropertyValue","dialogRect","Element","transformOriginX","transformOriginY","offsetTop","updateTransformOrigin","newState","random","toString","substr","replaceState","dialogStack","push","focusElement","querySelector","scrollIntoView","updateButtonText","texts","updateBody","content","body","insertAdjacentElement","DocumentFragment","lastChild","updateTitle","buttonArea","buttonText","custom","autofocus","stacked","SECONDARY_ACTION_EVENT","onInteraction","listSecondaryElement","ACTIVATE_EVENT","SELECTED_CHANGE_EVENT","CHECKED_CHANGE_EVENT","FOCUS_EVENT","content_attach","onSecondaryAction","content_onClick","isDisabled","content_detach","setSelected","setChecked","setCurrent","listContentElement","secondaryElement","ListSecondary","onCheckToggleRequest","currentValue","newValue","Attributes","Throttler","throttleTimeMs","pending","queued","queue","_this","run","hideNavDrawer","getAppBarElement","showFab","hideFab","resetScroll","MIN_SCROLL_DELTA","MOBILE_BREAKPOINT","TABLET_BREAKPOINT","SCROLL_THROTTLE_TIME_MS","lastScrollY","penultimateScrollY","scrolledPastAppBar","appBarElement","layoutContentElement","lastScrollBottomDistance","scrollThrottler","onBodyScroll","contentElement","getContentElement","onContentScroll","toggleNavDrawer","showNavDrawer","toggleSideSheet","showSideSheet","hideSideSheet","scrim","onScrimClick","onScrimScroll","getScrollThrottler","scrollTop","scrollHeight","navDrawer","location","id","innerWidth","sidesheet","onScroll","shouldAutoHideAppBar","appBar","autoHide","changeFabCut","fabElement","fabCutAttr","trim","openAppBarFabCut","replace","closeAppBarFabCut","isBody","scrollElement","currentScrollY","change","delta","scrollBottom","scrollBottomDistance","scrollBottomChange","didScrollUp","isAtScrollTop","newScrollUp","didScrollDown","isAtScrollBottom","newScrollDown","bottomAppBar","scrolledAway","newScrollAway","scrolledBack","isAtRest","MenuStack","originalEvent","pendingResizeOperation","OPEN_MENUS","HIDE_EVENT","menuElement","onMenuClick","onMenuScroll","onWindowResize","lastOpenMenu","updateMenuPosition","selectNextMenuItem","MenuItem","menu","backwards","menuItems","firstFocusableItem","lastFocusableElement","focusable","alignTarget","transformOrigin","useAlignTarget","margin","mdwPosition","mdwDirection","alignTop","alignBottom","alignVCenter","alignStart","alignEnd","alignLeft","alignRight","alignHCenter","openUp","openDown","openNormal","openReverse","openVCenter","openHCenter","openLtr","openRtl","offsetY","offsetBottom","offsetX","offsetRight","popupElementHeight","popupElementWidth","canOpenDownwardsFromBottom","innerHeight","canOpenDownwardsFromTop","canOpenUpwardsFromTop","canOpenUpwardsFromBottom","canOpenRightwardsFromLeft","canOpenRightwardsFromRight","canOpenLeftwardsFromRight","canOpenLeftwardsFromLeft","canOpenFromCenter","candidates","map","filter","candidateNumber","number","menuStack","menuItem","refreshMenuItems","_core_aria_tab__WEBPACK_IMPORTED_MODULE_0__","_core_dom__WEBPACK_IMPORTED_MODULE_1__","_core_overlay_index__WEBPACK_IMPORTED_MODULE_2__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_3__","AriaTab","attachAria","CHECK_EVENT","UNCHECK_EVENT","_core_overlay_index__WEBPACK_IMPORTED_MODULE_0__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_1__","_core_dom__WEBPACK_IMPORTED_MODULE_2__","onMouseMove","role","useAriaChecked","menuItemElement","toggleChecked","checked","isCheckable","isChecked","attachAll","_core_dom__WEBPACK_IMPORTED_MODULE_0__","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_1__","_item__WEBPACK_IMPORTED_MODULE_2__","_content__WEBPACK_IMPORTED_MODULE_3__","root","listElement","newRole","children","setupAria","ListItem","RovingTabIndex","onForwardsRequested","onBackwardsRequested","onTabIndexZeroed","ListContent","onSelectedChangeEvent","onCheckedChangeEvent","onContentFocusEvent","onFocusInteraction","split","interaction","listElementRole","itemElement","defaultPrevented","currentItem","setValue","textfieldElement","input","onInput","inputElement","updateTextAreaSize","updateInputEmptyState","attrName","previousRowsAttrValue","rows","_window$getComputedSt","getComputedStyle","paddingTop","heightPx","parseInt","paddingTopPx","floor","HTMLTextAreaElement","HTMLSelectElement","Date","hoursStr","getHours","minutesStr","getMinutes","secondsStr","getSeconds","getMilliseconds","valueAsDate","valueAsNumber","getTime","getTimezoneOffset","SnackbarQueueItem","hideTimeout","SNACKBAR_QUEUE","SHOW_EVENT","snackbarElement","onButtonClick","slice","reverseIndex","clearHideTimeout","findNextQueueItem","q","handleAnimationChange","currentQueueItem","autoHideString","timeInSeconds","parseFloat","timeout","nextQueueItem","update","span","getElementsByTagName","text","buttonInk","autoDestroy","newlyCreated","skipQueue","_content__WEBPACK_IMPORTED_MODULE_0__","listItemElement","isTreeItem","roleIsNone","activatorContent","parentRole","contentChild","setExpanded","isExpanded","onChildContentActivate","treeitem","activatedElement","updateTabIndex","getScroller","headerRow","getHeaderRow","tbody","getTableBody","cellFocusable","rowFocusable","onHeaderRowClick","onTableBodyKeyDown","onTableBodyClick","firstRow","foundTabbableRow","firstCell","foundTabbableCell","row","cells","cell","mdwDataTable","findParentCell","hasSelection","checkboxes","checkbox","HTMLTableRowElement","HTMLTableCellElement","removeOtherTabIndexes","HTMLTableSectionElement","td","tr","HTMLTableElement","cellIndex","mdwTable","ascending","th","i","deleteRow","sort","a","b","aCell","bCell","aText","bText","dataset","localeCompare","fragment","createDocumentFragment","currentSelection","isRow","nextSelection","sectionRowIndex","newRow","newIndex","newRowIndex","newCellIndex","isRtlEnabled","isLeft","isRight","datatableElement","scroller","footer","table","getTable","tableElement","thead","name","dispatchEventName","stringValue","explicit","emptyValue","attr","_attributes__WEBPACK_IMPORTED_MODULE_0__","AnyDomAdapterCreatorFn","AnyDomAdapterRendererFn","data","s","String","DomAdapter","datasource","renderFn","createFn","Map","elementMap","render","unlinkedDataItems","removeItem","refreshItem","clear","WeakMap","checkPosition","elementIndex","get","siblingIndex","nextSibling","set","delete","idx","nextDataObject","nextElement","AnyListAdapterRendererFn","primaryText","ListAdapter","list_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","bottomnavElement","selectedItem","BottomNavItem","containsTextFilter","toLocaleLowerCase","startsWithTextFilter","defaultItemTextParser","textElement","selectSibling","scrollItemIntoView","listItem","visibility","_rect","next","bottom","getElementVisibility","block","inline","SearchAdapter","textfield","List","textFilter","itemTextParser","onItemSelected","inputValue","suggestedInput","setSelectionRange","hideDropDown","onTextFieldKeydownEvent","handleInputEvent","handleBlurEvent","searchOnFocus","dropdown","filterItems","debounce","suggestionMethod","currentSearchTerm","previousValue","performSearch","updateList","results","_this2","showDropDown","performDebounce","checkExpired","searchResults","filterListItems","onErrorCallback","error","message","resolve","reject","Error","searchTerm","_this3","dropDownElement","suggestion","TextField","selectionStart","selectionEnd","fnFilter","_this4","hasItem","newSelection","isDropDownShown","click","tabPanelElement","setHidden","SCROLL_EVENT","onTabContentScroll","tabContentElement","isPageRtl","scrollPoint","visibleIndex","visibilityPercentage","panel","rightPanel","leftPeekPanel","rightPeekPanel","selectedIndex","leftPanelIndex","isResting","leftSelected","rightSelected","lastIndex","leftPanel","currentTargetIndexString","currentTargetIndex","newSelectedIndex","TabPanel","selectPanel","panelElement","scrollToPanel","currentSelectedIndex","panelIndex","otherPanels","tabListElement","setIndicatorPosition","percentage","animate","indicatorElement","leftItem","right","nextItem","TabItem","tab_attach","tab_detach","onResize","RESIZE_WAIT_FRAMES","tabElement","TabList","TabContent","onTabItemSelectedChange","selectedPanel","panels","tabItemElement","tabItemIndex","tabItems","stage","performResize","relatedPanel","relatedItem","dispatchEvents","_item__WEBPACK_IMPORTED_MODULE_1__","ChipItem","_core_ripple_index__WEBPACK_IMPORTED_MODULE_0__","DataTableAdapterColumn","innerHTML","sortable","sortIcon","customSortIcon","hasChildNodes","tooltip","wrapper","primaryColumn","rowSelector","checkboxLabel","icon","constructTableCheckbox","renderer","defaultCheckboxRenderer","defaultCellRenderer","formatter","foundTextNode","circumference","PI","progressCircleElement","dashOffset","pathElements","DataTableAdapter","datatable","sorter","onValueChangeRequested","onValueChanged","onElementClickListener","handleClickInteraction","onElementScrollListener","onElementScroll","tabindexRow","tabindexRowData","getDataForTableRow","DataTable","columns","page","pageLimit","debounceTimeMs","useLazyRendering","filteredDatasource","forceRefresh","performLazyRender","throttledRenderPending","scheduleThrottledRender","performThrottledRender","debounceTimeout","currentCell","getTableCell","tagName","toLowerCase","setCheckOnAllRows","setHasSelection","currentRow","getTableRow","object","selectedRows","getSelectedRows","updateSortIcons","updateSortColumn","tableHeaderCell","refresh","tableColumn","direction","valueA","valueB","sortedTableHeaderCell","otherTableHeader","columnIndex","column","selectorColumn","getDatasource","buildScrollListener","destroyScrollListener","min","total","max","paginationDetailsElement","previousPageButton","nextPageButton","getFooter","disabled","display","needsDraw","optionsElement","rowsPerPageText","limits","limitsElement","select","limit","option","dropdownIcon","updateRowCount","updatePaginator","refreshRows","paginationControls","viewportTop","viewportBottom","offsetHeight","rowTop","rowBottom","visibleRows","firstRowIndex","Infinity","lastRowIndex","_this5","len","minRowCount","screen","foundFirstVisibleRow","startIndex","endIndex","isRowVisible","_this6","getLazyRenderRows","refreshRow","clearNonvisibleRows","refreshFilter","_this7","rowLength","rowsToDisplay","offset","rowDifference","newRows","_this8","getTableRowForData","datasourceIndex","minIndex","rowIndex","_this9","refreshCell","missingColumn","missingCell","insertCell","formattedValue","search","_this10","closer","onCloserClicked","onFabButtonClicked","toggle","transitionElement","pxToInteger","px","convertBorderRadius","parsePercentage","numValue","horizontal","vertical","getShapeTransform","targetElement","originElement","originStyle","originRect","targetRect","originCSSStyle","originX","originWidth","originY","originHeight","boxSizing","paddingRight","paddingBottom","paddingLeft","translateX","translateY","scaleX","scaleY","toStyleSyle","toShapeElement","shapeTransform","fromShapeElement","contentTransform","toContentElement","fromContentElement","transitionProperties","oldFromShapeProperties","oldToShapeProperties","oldFromContentProperties","oldToContentProperties","newFromShapeProperties","prop","substring","match","shadow","inset","blurRadius","spreadRadius","color","numberValue","v","topLeft","topRight","bottomLeft","bottomRight","horizontalRadii","verticalRadii","calculatedDuration","duration","totalDuration","fadeInTime","fadeOutTime","transformTransition","fadeInTransition","fadeOutTransition","property","callback","expectedDuration","hasEnded","revertFrom","transition","onComplete"],"mappings":"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","file":"entire-framework.min.js","sourcesContent":["/** @type {?boolean} */\nlet passiveEventListenerSupported = null;\n\n/** @return {void} */\nfunction testPassiveEventListenerOptionSupport() {\n  try {\n    passiveEventListenerSupported = false;\n    const options = {\n      get passive() {\n        passiveEventListenerSupported = true;\n        return true;\n      },\n    };\n    // @ts-ignore\n    window.addEventListener('test', options, options);\n    // @ts-ignore\n    window.removeEventListener('test', options, options);\n  } catch (err) {\n    passiveEventListenerSupported = false;\n  }\n}\n\n/** @return {Object|boolean} */\nexport function getPassiveEventListenerOption() {\n  if (passiveEventListenerSupported == null) {\n    testPassiveEventListenerOptionSupport();\n  }\n  if (passiveEventListenerSupported) {\n    return { passive: true };\n  }\n  return false;\n}\n\nexport const nextTick = window.requestAnimationFrame || (cb => window.setTimeout(cb, 17));\n\nexport const cancelTick = window.cancelAnimationFrame || window.clearTimeout;\n\n/**\n * @param {Element} element\n * @param {string} className\n * @return {Element}\n */\nexport function getChildElementByClass(element, className) {\n  const child = element.getElementsByClassName(className)[0];\n  if (child && child.parentElement !== element) {\n    return null;\n  }\n  return child;\n}\n\n/**\n * @param {Element} element\n * @param {string} className\n * @param {boolean} [includeSelf=true]\n * @return {HTMLElement}\n */\nexport function findElementParentByClassName(element, className, includeSelf) {\n  let el;\n  if (includeSelf === false) {\n    el = element.parentElement;\n  } else {\n    /** @type {HTMLElement} */\n    el = (element);\n  }\n  while (el != null && !el.classList.contains(className)) {\n    el = el.parentElement;\n  }\n  return el;\n}\n\n/** @return {boolean} */\nexport function isRtl() {\n  return document.documentElement.dir === 'rtl';\n}\n\n/**\n * @param {Element} element\n * @param {string} type\n * @param {Object} [detail]\n * @return {boolean}\n */\nexport function dispatchDomEvent(element, type, detail) {\n  let event;\n  if (typeof CustomEvent === 'function') {\n    event = new CustomEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      detail,\n    });\n  } else if (detail == null) {\n    if (typeof Event === 'function') {\n      event = new Event(type, {\n        bubbles: true,\n        cancelable: true,\n      });\n    } else {\n      event = document.createEvent('Event');\n      event.initEvent(type, true, true);\n    }\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, detail);\n  }\n  return element.dispatchEvent(event);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):any} fn\n * @return {void}\n * @template {any} T\n */\nexport function iterateArrayLike(arrayLike, fn) {\n  Array.prototype.forEach.call(arrayLike, fn);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):boolean|void} fn\n * @return {boolean}\n * @template {any} T\n */\nexport function iterateSomeOfArrayLike(arrayLike, fn) {\n  return Array.prototype.some.call(arrayLike, fn);\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.nextElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateSomeOfElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Node} node\n * @param {boolean} [create]\n * @return {Node}\n */\nexport function getTextNode(node, create) {\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (create && !textNode) {\n    textNode = document.createTextNode('');\n    node.appendChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {Node} node\n * @param {string} value\n * @return {Node}\n */\nexport function setTextNode(node, value) {\n  /** @type {ChildNode} */\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (value) {\n    if (!textNode) {\n      textNode = document.createTextNode(value);\n      node.appendChild(textNode);\n    } else {\n      textNode.nodeValue = value;\n    }\n  } else if (textNode) {\n    node.removeChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {HTMLElement} element\n * @param {boolean} [smooth=false]\n * @param {boolean} [rtl=false]\n * @return {void}\n */\nexport function scrollToElement(element, smooth, rtl) {\n  if (!element) {\n    return;\n  }\n  const parent = element.parentElement;\n  if (!parent) {\n    return;\n  }\n\n  let targetScrollLeft = rtl\n    ? parent.scrollWidth + element.offsetLeft - element.offsetWidth\n    : element.offsetLeft;\n\n  const elementRect = element.getBoundingClientRect();\n  const parentRect = parent.getBoundingClientRect();\n  let subPixelScrollPosition = elementRect.left - parentRect.left;\n  if (subPixelScrollPosition < 0) {\n    subPixelScrollPosition = 0;\n  }\n  if (Math.abs(subPixelScrollPosition - targetScrollLeft) < 2) {\n    targetScrollLeft = subPixelScrollPosition;\n  }\n  if (parent.scrollLeft === targetScrollLeft) {\n    return;\n  }\n\n  if (parent.scrollTo) {\n    parent.scrollTo({\n      top: 0,\n      left: targetScrollLeft,\n      behavior: smooth ? 'smooth' : 'auto',\n    });\n    return;\n  }\n  parent.style.setProperty('scroll-behavior', 'auto');\n  parent.scrollLeft = targetScrollLeft;\n  nextTick(() => {\n    parent.style.removeProperty('scroll-behavior');\n  });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#kbd_roving_tabindex\n\nimport {\n  iterateArrayLike,\n  isRtl,\n  dispatchDomEvent,\n  iterateSomeOfArrayLike,\n} from '../dom';\n\nexport const TABINDEX_ZEROED = 'mdw:rovingtabindex-tabindexzeroed';\nexport const FORWARDS_REQUESTED = 'mdw:rovingtabindex-forwardsrequested';\nexport const BACKWARDS_REQUESTED = 'mdw:rovingtabindex-backwardsrequested';\n\n/**\n * @param {Element} parentElement\n * @param {ArrayLike<Element>} items\n * @param {boolean} [focusableWhenDisabled=true]\n * @return {void}\n */\nexport function setupTabIndexes(parentElement, items, focusableWhenDisabled = true) {\n  /** @type {Element} */\n  let currentlyFocusedChild = null;\n  /** @type {Element} */\n  let currentTabIndexChild = null;\n  /** @type {Element} */\n  let firstFocusableChild = null;\n  iterateArrayLike(items, (child) => {\n    if (!currentlyFocusedChild && document.activeElement === child) {\n      currentlyFocusedChild = child;\n    } else if (!currentTabIndexChild && child.getAttribute('tabindex') === '0') {\n      currentTabIndexChild = child;\n    } else {\n      if (!firstFocusableChild && child.getAttribute('aria-hidden') !== 'true'\n        && (focusableWhenDisabled || child.getAttribute('aria-disabled') !== 'true')) {\n        firstFocusableChild = child;\n      }\n      child.setAttribute('tabindex', '-1');\n    }\n    child.addEventListener('focus', onChildFocus);\n  });\n  if (currentlyFocusedChild) {\n    currentlyFocusedChild.setAttribute('tabindex', '0');\n  } else if (currentTabIndexChild) {\n    if (currentlyFocusedChild) {\n      currentTabIndexChild.setAttribute('tabindex', '-1');\n    }\n  } else if (firstFocusableChild) {\n    firstFocusableChild.setAttribute('tabindex', '0');\n  }\n  parentElement.addEventListener('keydown', onKeyDownHandler);\n}\n\n\n/**\n * @param {Element} parentElement\n * @param {ArrayLike<Element>} items\n * @return {void}\n */\nexport function detach(parentElement, items) {\n  iterateArrayLike(items, (child) => {\n    child.removeEventListener('focus', onChildFocus);\n  });\n  parentElement.removeEventListener('keydown', onKeyDownHandler);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nfunction onChildFocus(event) {\n  /** @type {Element} */\n  const child = (event.currentTarget);\n  if (child.getAttribute('tabindex') === '0') {\n    return;\n  }\n  child.setAttribute('tabindex', '0');\n  dispatchDomEvent(child, TABINDEX_ZEROED);\n}\n\n/**\n * @param {ArrayLike<Element>} items\n * @param {Element[]} [excludeItems]\n * @return {void}\n */\nexport function removeTabIndex(items, excludeItems = []) {\n  iterateArrayLike(items, (item) => {\n    if (excludeItems.indexOf(item) !== -1) {\n      return;\n    }\n    if (item.hasAttribute('tabindex')) {\n      item.setAttribute('tabindex', '-1');\n    }\n  });\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDownHandler(event) {\n  if (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\n    return;\n  }\n\n  /** @type {Element} */\n  const parentElement = (event.currentTarget);\n  /** @type {Element} */\n  const childElement = (event.target);\n\n  let moveHorizontal = false;\n  let moveVertical = false;\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      moveHorizontal = true;\n      break;\n    case 'ArrowDown':\n    case 'ArrowUp':\n    case 'Down':\n    case 'Up':\n      moveVertical = true;\n      break;\n    default:\n      return;\n  }\n\n  let verticalOrientation = true;\n  // DOM Read\n  const ariaOrientation = parentElement.getAttribute('aria-orientation');\n  if (ariaOrientation === 'horizontal') {\n    verticalOrientation = false;\n  } else if (ariaOrientation !== 'vertical') {\n    switch (parentElement.getAttribute('role')) {\n      case 'listbox':\n      case 'tablist':\n      case 'tree':\n        verticalOrientation = true;\n        break;\n      default:\n        verticalOrientation = false;\n    }\n  }\n  let moveForwards = false;\n  if (verticalOrientation) {\n    if (!moveVertical) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Down':\n        moveForwards = true;\n        break;\n      case 'ArrowUp':\n      case 'Up':\n        // moveForwards = false;\n        break;\n      default:\n        return;\n    }\n  } else {\n    if (!moveHorizontal) {\n      return;\n    }\n    const isPageRTL = isRtl();\n    switch (event.key) {\n      case 'ArrowLeft':\n      case 'Left':\n        moveForwards = isPageRTL;\n        break;\n      case 'ArrowRight':\n      case 'Right':\n        moveForwards = !isPageRTL;\n        break;\n      default:\n        return;\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  if (moveForwards) {\n    dispatchDomEvent(childElement, FORWARDS_REQUESTED);\n  } else {\n    dispatchDomEvent(childElement, BACKWARDS_REQUESTED);\n  }\n}\n\n/**\n * @param {HTMLElement} element\n * @return {boolean}\n */\nfunction attemptFocus(element) {\n  try {\n    element.focus();\n  } catch (e) {\n    // Ignore error.\n  }\n  return document.activeElement === element;\n}\n\n/**\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @param {boolean} [reverse]\n * @return {void}\n */\nexport function selectNext(list, current = null, reverse = false) {\n  let foundCurrent = false;\n\n  const iterateResult = iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!foundCurrent) {\n      if (current) {\n        if (candidate === current) {\n          foundCurrent = true;\n        }\n      } else if (candidate.getAttribute('tabindex') === '0') {\n        foundCurrent = true;\n      }\n      return false;\n    }\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    return attemptFocus(candidate);\n  });\n  if (iterateResult) {\n    return;\n  }\n  iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    // Abort if we've looped all the way back to original element\n    // Abort if candidate received focus\n    return (attemptFocus(candidate) || candidate === current);\n  });\n}\n\n/**\n * Alias for selectNext(list, current, true);\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @return {void}\n */\nexport function selectPrevious(list, current) {\n  return selectNext(list, current, true);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'button');\n  if (element instanceof HTMLButtonElement === false\n      && !element.hasAttribute('tabindex')) {\n    element.setAttribute('tabindex', '0');\n  }\n  element.setAttribute('mdw-aria-button-js', '');\n  if (element instanceof HTMLButtonElement === false\n    && element instanceof HTMLInputElement === false) {\n    element.addEventListener('keydown', onKeyDown);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-button-js');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (!buttonElement) {\n    return;\n  }\n  if (buttonElement.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  buttonElement.dispatchEvent(newEvent);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\nimport * as Ripple from '../../core/ripple/index';\nimport * as Overlay from '../../core/overlay/index';\nimport * as AriaButton from '../../core/aria/button';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Ripple.attach(element);\n  element.classList.add('mdw-ripple');\n  Overlay.attach(element);\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  AriaButton.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaButton.detach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","import {\n  getChildElementByClass, nextTick, getPassiveEventListenerOption, iterateArrayLike,\n} from '../dom';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-ripple'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  let rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (!rippleContainer) {\n    rippleContainer = document.createElement('div');\n    rippleContainer.classList.add('mdw-ripple__container');\n    rippleContainer.setAttribute('role', 'presentation');\n    if (element.firstChild) {\n      element.insertBefore(rippleContainer, element.firstChild);\n    } else {\n      element.appendChild(rippleContainer);\n    }\n  }\n\n  let rippleInner = getChildElementByClass(rippleContainer, 'mdw-ripple__inner');\n  if (!rippleInner) {\n    rippleInner = document.createElement('div');\n    rippleInner.classList.add('mdw-ripple__inner');\n    rippleInner.setAttribute('role', 'presentation');\n    rippleContainer.appendChild(rippleInner);\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.removeAttribute('mdw-fade-out');\n  element.setAttribute('mdw-ripple-js', '');\n  element.addEventListener('click', onClick, getPassiveEventListenerOption());\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  rippleInner.addEventListener('animationend', onAnimationEnd, getPassiveEventListenerOption());\n}\n\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (!event.pointerType && !event.detail) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = event.pageX - rect.left - window.pageXOffset;\n  const y = event.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'mouse');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  const touch = event.changedTouches[0];\n  if (!touch) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = touch.pageX - rect.left - window.pageXOffset;\n  const y = touch.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'touch');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n\n  nextTick(() => {\n    if (isActive(rippleContainer.parentElement)) {\n      if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n        return;\n      }\n      updateRipplePosition(rippleInner);\n      drawRipple(rippleInner, 'key');\n    }\n  });\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isActive(element) {\n  if (element.matches) {\n    return element.matches(':active');\n  }\n  // @ts-ignore\n  if (element.msMatchesSelector) {\n    // @ts-ignore\n    element.msMatchesSelector(':active');\n  }\n  return false;\n}\n\n/**\n * @param {HTMLElement} rippleInner\n * @param {number} [x]\n * @param {number} [y]\n * @return {void}\n */\nexport function updateRipplePosition(rippleInner, x, y) {\n  let width;\n  let height;\n  let xPos = x;\n  let yPos = y;\n  if (x == null) {\n    xPos = rippleInner.parentElement.clientWidth / 2;\n    width = xPos;\n  } else if (x >= rippleInner.parentElement.clientWidth / 2) {\n    width = x;\n    // furthest horizontal side is left\n  } else {\n    width = rippleInner.parentElement.clientWidth - x;\n    // furthest horizontal side is right\n  }\n  if (y == null) {\n    yPos = rippleInner.parentElement.clientHeight / 2;\n    height = yPos;\n  } else if (y >= rippleInner.parentElement.clientHeight / 2) {\n    height = y;\n    // furthest vertical side is bottom\n  } else {\n    height = rippleInner.parentElement.clientHeight - y;\n    // furthest vertical side is top\n  }\n  const hypotenuse = Math.sqrt((width * width) + (height * height));\n  rippleInner.style.setProperty('height', `${hypotenuse}px`);\n  rippleInner.style.setProperty('width', `${hypotenuse}px`);\n  rippleInner.style.setProperty('left', `${xPos - (hypotenuse / 2)}px`);\n  rippleInner.style.setProperty('top', `${yPos - (hypotenuse / 2)}px`);\n}\n\n/**\n * @param {Element} rippleInner\n * @param {string} initiator\n * @return {void}\n */\nexport function drawRipple(rippleInner, initiator) {\n  const currentInitiator = rippleInner.getAttribute('mdw-fade-in');\n  if (currentInitiator && currentInitiator !== initiator) {\n    // Only allow repeat interactions from same initiator\n    return;\n  }\n  rippleInner.setAttribute('mdw-fade-in', initiator);\n  if (currentInitiator === initiator) {\n    // Repeat the animation\n    if (rippleInner.hasAttribute('mdw-fade-in-repeat')) {\n      rippleInner.removeAttribute('mdw-fade-in-repeat');\n    } else {\n      rippleInner.setAttribute('mdw-fade-in-repeat', '');\n    }\n  }\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  /** @type {HTMLElement} */\n  const rippleInner = (event.currentTarget);\n  if (event.animationName === 'ripple-fade-in' || event.animationName === 'ripple-fade-in-repeat') {\n    rippleInner.setAttribute('mdw-fade-in-complete', '');\n    return;\n  }\n  if (event.animationName === 'ripple-fade-out') {\n    rippleInner.removeAttribute('mdw-fade-in');\n    rippleInner.removeAttribute('mdw-fade-in-repeat');\n    rippleInner.removeAttribute('mdw-fade-in-complete');\n    rippleInner.removeAttribute('mdw-fade-out');\n  }\n}\n\n/**\n * @param {Element} rippleInner\n * @return {void}\n */\nexport function clearRipple(rippleInner) {\n  if (!rippleInner.hasAttribute('mdw-fade-in')) {\n    return;\n  }\n  if (rippleInner.hasAttribute('mdw-keydown') && !rippleInner.hasAttribute('mdw-keyup')) {\n    return;\n  }\n  if (!rippleInner.hasAttribute('mdw-fade-in-complete')) {\n    return;\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.setAttribute('mdw-fade-out', '');\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (event.pointerType || event.detail) {\n    return;\n  }\n  if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n    // Already handled by keydown\n    return;\n  }\n  updateRipplePosition(rippleInner);\n  drawRipple(rippleInner, 'key');\n  nextTick(() => {\n    clearRipple(rippleInner);\n  });\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  const rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (rippleContainer) {\n    element.removeChild(rippleContainer);\n  }\n  element.removeAttribute('mdw-ripple-js');\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousedown', onMouseDown);\n  element.removeEventListener('touchstart', onTouchStart);\n  element.removeEventListener('keydown', onKeyDown);\n}\n","import { getPassiveEventListenerOption, iterateArrayLike } from '../dom';\n\nlet lastInteractionWasTouch = false;\n\nif (window && window.matchMedia) {\n  lastInteractionWasTouch = window.matchMedia('(any-pointer: coarse)').matches;\n}\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-overlay'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-overlay-js', '');\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.addEventListener('blur', onBlur, getPassiveEventListenerOption());\n  element.addEventListener('focus', onFocus, getPassiveEventListenerOption());\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.hasAttribute('mdw-overlay-touch')) {\n    return;\n  }\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'true');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onBlur(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  const value = element.getAttribute('mdw-overlay-touch');\n  if (value == null) {\n    return;\n  }\n  if (value === 'true') {\n    lastInteractionWasTouch = true;\n  } else {\n    lastInteractionWasTouch = false;\n  }\n  element.removeAttribute('mdw-overlay-touch');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element.hasAttribute('mdw-overlay-touch')) {\n    // Element was focused without a mouse or touch event (keyboard or programmatic)\n    if (lastInteractionWasTouch) {\n      element.setAttribute('mdw-overlay-touch', 'true');\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-overlay-js');\n  element.removeAttribute('mdw-overlay-touch');\n  element.removeEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.removeEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.removeEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.removeEventListener('blur', onBlur, getPassiveEventListenerOption());\n}\n","// https://www.w3.org/TR/wai-aria-practices/#dialog_modal\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  findElementParentByClassName,\n  getChildElementByClass,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\nclass DialogStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object} [state]\n   * @param {Object} [previousState]\n   */\n  constructor(element, previousFocus, state, previousState) {\n    this.element = (element);\n    this.previousFocus = (previousFocus);\n    this.state = state;\n    this.previousState = previousState;\n  }\n}\n\n/** @type {DialogStack[]} */\nconst OPEN_DIALOGS = [];\n\nexport const CANCEL_EVENT = 'mdw:dialog-cancel';\n\nexport const CONFIRM_EVENT = 'mdw:dialog-confirm';\n\nexport const CUSTOM_EVENT = 'mdw:dialog-custom';\n\nexport const DISMISS_EVENT = 'mdw:dialog-dismiss';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-dialog-js', '');\n  element.addEventListener('transitionend', onTransitionEnd);\n\n  let dialogCloser = getChildElementByClass(element, 'mdw-dialog__close');\n  if (!dialogCloser) {\n    dialogCloser = document.createElement('div');\n    dialogCloser.className = 'mdw-dialog__close';\n    if (element.firstChild) {\n      element.insertBefore(dialogCloser, element.firstChild);\n    } else {\n      element.appendChild(dialogCloser);\n    }\n  }\n  dialogCloser.addEventListener('click', onCancelClick);\n  const popup = getChildElementByClass(element, 'mdw-dialog__popup');\n  popup.addEventListener('keydown', onKeyDown);\n  const buttons = popup.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  let foundConfirmButton = false;\n  let foundCancelButton = false;\n  iterateArrayLike(buttons, (button) => {\n    Button.attach(button);\n    if (button.hasAttribute('mdw-custom')) {\n      button.addEventListener('click', onCustomButtonClick);\n      return;\n    }\n    if (!foundConfirmButton) {\n      button.addEventListener('click', onConfirmClick);\n      foundConfirmButton = true;\n      return;\n    }\n    if (!foundCancelButton) {\n      button.addEventListener('click', onCancelClick);\n      foundCancelButton = true;\n      return;\n    }\n    button.addEventListener('click', onCustomButtonClick);\n  });\n  setupARIA(element);\n}\n\n/**\n * @param {TransitionEvent} event\n * @return {void}\n */\nexport function onTransitionEnd(event) {\n  if (event.propertyName !== 'opacity') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const dialogElement = (event.currentTarget);\n  if (dialogElement.getAttribute('aria-hidden') !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (!popupElement) {\n    return;\n  }\n  popupElement.style.removeProperty('display');\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function setupARIA(dialogElement) {\n  if (dialogElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  dialogElement.setAttribute('role', 'dialog');\n  dialogElement.setAttribute('aria-modal', 'true');\n  if (!dialogElement.hasAttribute('aria-hidden')) {\n    dialogElement.setAttribute('aria-hidden', 'true');\n  }\n  const popupElement = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n  if (!popupElement) {\n    return;\n  }\n\n  if (!popupElement.hasAttribute('aria-label') && !popupElement.hasAttribute('aria-labelledby')) {\n    const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (titleElement) {\n      // titleElement\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function detach(dialogElement) {\n  dialogElement.removeEventListener('transitionend', onTransitionEnd);\n  dialogElement.removeAttribute('mdw-dialog-js');\n  const dialogCloser = getChildElementByClass(dialogElement, 'mdw-dialog__close');\n  if (dialogCloser) {\n    dialogCloser.removeEventListener('click', onCancelClick);\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (popupElement) {\n    popupElement.removeEventListener('keydown', onKeyDown);\n    popupElement.style.removeProperty('transform-origin');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  const buttons = popupElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button) => {\n    Button.detach(button);\n    button.removeEventListener('click', onConfirmClick);\n    button.removeEventListener('click', onCancelClick);\n    button.removeEventListener('click', onCustomButtonClick);\n  });\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCancelClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const cancelElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(cancelElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onConfirmClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  confirm(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCustomButtonClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  if (dispatchDomEvent(dialogElement, CUSTOM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Tab') {\n    handleTabKeyPress(event);\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    onEscapeKeyDown(event);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onEscapeKeyDown(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const popupElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(popupElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenDialog = OPEN_DIALOGS[OPEN_DIALOGS.length - 1];\n  if (!lastOpenDialog || !lastOpenDialog.previousState) {\n    return;\n  }\n  if ((lastOpenDialog.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenDialog.previousState[key])) {\n    if (dispatchDomEvent(lastOpenDialog.element, CANCEL_EVENT)) {\n      hide(lastOpenDialog.element);\n    } else {\n      // Revert pop state by pushing state again\n      const title = getTitleText(lastOpenDialog.element);\n      window.history.pushState(lastOpenDialog.state, title);\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function cancel(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CANCEL_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function confirm(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CONFIRM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {string}\n */\nexport function getTitleText(dialogElement) {\n  let title = 'Dialog';\n  const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (titleElement) {\n    title = titleElement.textContent;\n  } else {\n    const bodyElement = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n    if (bodyElement) {\n      title = bodyElement.textContent;\n    }\n  }\n  return title;\n}\n\n/**\n * @param {Element} dialogElement\n * @return {boolean} handled\n */\nexport function hide(dialogElement) {\n  if (dialogElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(dialogElement, DISMISS_EVENT)) {\n    return false;\n  }\n  dialogElement.setAttribute('aria-hidden', 'true');\n  // .mdw-dialog__popup hidden by transitionEnd event\n  let stackIndex = -1;\n  OPEN_DIALOGS.some((stack, index) => {\n    if (stack.element === dialogElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const stack = OPEN_DIALOGS[stackIndex];\n    if (stack.previousFocus && stack.previousFocus instanceof HTMLElement) {\n      if (findElementParentByClassName(document.activeElement, 'mdw-dialog') === dialogElement) {\n        // Only pop focus back when hiding a dialog with focus within itself.\n        try {\n          stack.previousFocus.focus();\n        } catch (e) {\n          // Failed to focus\n        }\n      }\n    }\n    OPEN_DIALOGS.splice(stackIndex, 1);\n    if (stack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (stack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_DIALOGS.length) {\n    window.removeEventListener('popstate', onPopState);\n  }\n  return true;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {boolean} handled\n */\nexport function show(dialogElement, event) {\n  if (event && event.type === 'click' && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  let changed = false;\n\n  if (dialogElement.getAttribute('aria-hidden') !== 'false') {\n    dialogElement.setAttribute('aria-hidden', 'false');\n    /** @type {HTMLElement} */\n    const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n    popupElement.style.setProperty('display', 'flex');\n    changed = true;\n  }\n\n  updateTransformOrigin(dialogElement, event);\n\n  if (!changed) {\n    return false;\n  }\n  attach(dialogElement);\n  const previousFocus = document.activeElement;\n  const newState = { hash: Math.random().toString(36).substr(2, 16) };\n  let previousState = null;\n  if (window.history && window.history.pushState) {\n    if (!window.history.state) {\n      // Create new previous state\n      window.history.replaceState({\n        hash: Math.random().toString(36).substr(2, 16),\n      }, document.title);\n    }\n    previousState = window.history.state;\n    const title = getTitleText(dialogElement);\n    window.history.pushState(newState, title);\n    window.addEventListener('popstate', onPopState);\n  }\n  const dialogStack = new DialogStack(dialogElement, previousFocus, newState, previousState);\n  OPEN_DIALOGS.push(dialogStack);\n  const focusElement = dialogElement.querySelector('[mdw-autofocus]');\n  try {\n    if (focusElement && focusElement instanceof HTMLElement) {\n      if (focusElement.scrollIntoView) {\n        focusElement.scrollIntoView();\n      }\n      focusElement.focus();\n    } else if (dialogElement instanceof HTMLElement) {\n      dialogElement.focus();\n    }\n  } catch (e) {\n    // Failed to focus\n  }\n  return true;\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function handleTabKeyPress(event) {\n  /** @type {Element} */\n  const popupElement = (event.currentTarget);\n  const focusableElements = popupElement.querySelectorAll([\n    'button:not(:disabled):not([tabindex=\"-1\"])',\n    '[href]:not(:disabled):not([tabindex=\"-1\"])',\n    'input:not(:disabled):not([tabindex=\"-1\"])',\n    'select:not(:disabled):not([tabindex=\"-1\"])',\n    'textarea:not(:disabled):not([tabindex=\"-1\"])',\n    '[tabindex]:not([tabindex=\"-1\"])'].join(', '));\n  let foundTarget = false;\n  let candidate = null;\n  iterateSomeOfArrayLike(focusableElements, (el) => {\n    if (el === event.target) {\n      foundTarget = true;\n      if (event.shiftKey) {\n        return true;\n      }\n    } else if (event.shiftKey) {\n      candidate = el;\n    } else if (foundTarget) {\n      candidate = el;\n      return true;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (event.shiftKey) {\n      // Select last item\n      candidate = focusableElements[focusableElements.length - 1];\n    } else {\n      // Select first item\n      candidate = focusableElements[0];\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  if (candidate && candidate instanceof HTMLElement) {\n    try {\n      candidate.focus();\n    } catch (e) {\n      // Failed to focus\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)} [content]\n * @return {void}\n */\nexport function updateTitle(dialogElement, content) {\n  let title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (!content) {\n    if (!title) {\n      // Nothing to be done\n      return;\n    }\n    title.parentElement.removeChild(title);\n    return;\n  }\n  if (!title) {\n    title = document.createElement('div');\n    title.className = 'mdw-dialog__title';\n    const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n    popup.insertBefore(title, popup.firstChild);\n  }\n  if (content instanceof DocumentFragment) {\n    while (title.lastChild) {\n      title.removeChild(title.lastChild);\n    }\n    title.appendChild(content);\n  } else {\n    title.textContent = content;\n  }\n}\n\n\n/**\n * @param {Element} dialogElement\n * @param {string[]} texts\n * @return {void}\n */\nexport function updateButtonText(dialogElement, texts) {\n  const buttons = dialogElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button, index) => {\n    setTextNode(button, texts[index]);\n  });\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)} [content]\n * @return {void}\n */\nexport function updateBody(dialogElement, content) {\n  let body = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n  if (!content) {\n    if (!body) {\n      // Nothing to be done\n      return;\n    }\n    body.parentElement.removeChild(body);\n    return;\n  }\n  if (!body) {\n    body = document.createElement('div');\n    body.className = 'mdw-dialog__body mdw-theme';\n    body.setAttribute('mdw-ink', 'medium');\n    const title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (title) {\n      title.insertAdjacentElement('afterend', body);\n    } else {\n      const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n      popup.insertBefore(body, popup.firstChild);\n    }\n  }\n  if (content instanceof DocumentFragment) {\n    while (body.lastChild) {\n      body.removeChild(body.lastChild);\n    }\n    body.appendChild(content);\n  } else {\n    body.textContent = content;\n  }\n}\n\n/**\n * @param {Object} options\n * @param {(DocumentFragment|string)} [options.title]\n * @param {(DocumentFragment|string)} [options.body]\n * @param {string[]} [options.buttons]\n * @param {boolean} [options.stacked=false]\n * @param {Element} [options.parent]\n * @param {boolean} [options.custom=false] Use custom button events\n * @param {(string|number)} [options.autofocus=0] Autofocus button by index or text\n * @return {Element}\n */\nexport function create(options) {\n  const element = document.createElement('div');\n  element.className = 'mdw-dialog';\n\n  const popup = document.createElement('div');\n  popup.className = 'mdw-dialog__popup mdw-theme';\n  popup.setAttribute('mdw-surface', 'card');\n  element.appendChild(popup);\n\n  updateTitle(element, options.title);\n  updateBody(element, options.body);\n\n  if (options.buttons) {\n    const buttonArea = document.createElement('div');\n    buttonArea.className = 'mdw-dialog__button-area';\n    let index = 0;\n    options.buttons.forEach((buttonText) => {\n      const button = document.createElement('div');\n      button.className = 'mdw-button mdw-theme';\n      button.setAttribute('tabindex', '0');\n      button.setAttribute('mdw-ink', 'secondary');\n      if (options.custom) {\n        button.setAttribute('mdw-custom', '');\n      }\n      button.textContent = buttonText;\n      buttonArea.appendChild(button);\n      if ((options.autofocus == null && index === 0)\n        || options.autofocus === index || options.autofocus === buttonText) {\n        button.setAttribute('mdw-autofocus', '');\n      }\n      index += 1;\n    });\n    if (options.stacked) {\n      buttonArea.setAttribute('mdw-stacked', '');\n    }\n    popup.appendChild(buttonArea);\n  }\n  if (options.parent) {\n    options.parent.appendChild(element);\n  }\n  attach(element);\n  return element;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {void}\n */\nexport function updateTransformOrigin(dialogElement, event) {\n  /** @type {HTMLElement} */\n  const popup = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  popup.style.removeProperty('transform-origin');\n  if (!event) {\n    return;\n  }\n  const hadLayer = popup.style.getPropertyValue('display') != null;\n  if (!hadLayer) {\n    popup.style.setProperty('display', 'flex');\n  }\n  let pageX;\n  let pageY;\n  const dialogRect = dialogElement.getBoundingClientRect();\n  if ('pageX' in event && 'pageY' in event) {\n    ({ pageX, pageY } = event);\n    pageX -= window.pageXOffset;\n    pageY -= window.pageYOffset;\n  } else {\n    /** @type {Element} */\n    const target = (event.target || event.currentTarget);\n    if (target instanceof Element === false) {\n      return;\n    }\n    const rect = target.getBoundingClientRect();\n    if (!rect.width && !rect.width && !rect.left && !rect.top) {\n      return;\n    }\n    pageX = rect.left + (rect.width / 2);\n    pageY = rect.top + (rect.height / 2);\n  }\n  const transformOriginX = pageX - dialogRect.left - popup.offsetLeft;\n  const transformOriginY = pageY - dialogRect.top - popup.offsetTop;\n  popup.style.setProperty('transform-origin', `${transformOriginX}px ${transformOriginY}px`);\n  if (!hadLayer) {\n    popup.style.removeProperty('display');\n  }\n}\n\n// Aliases\nexport const dismiss = hide;\n","import { dispatchDomEvent, getPassiveEventListenerOption } from '../../core/dom';\n\nexport const SECONDARY_ACTION_EVENT = 'mdw:listsecondary-action';\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function attach(listSecondaryElement) {\n  if (!listSecondaryElement.hasAttribute('mdw-action')) {\n    return;\n  }\n  listSecondaryElement.addEventListener('click', onClick);\n  listSecondaryElement.addEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onInteraction(event) {\n  event.stopPropagation();\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listSecondaryElement = (event.currentTarget);\n  dispatchDomEvent(listSecondaryElement, SECONDARY_ACTION_EVENT);\n}\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function detach(listSecondaryElement) {\n  listSecondaryElement.removeEventListener('click', onClick);\n  listSecondaryElement.removeEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n","import { iterateArrayLike, dispatchDomEvent } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\nimport * as Attributes from '../../core/aria/attributes';\n\nimport * as ListSecondary from './secondary';\n\nexport const ACTIVATE_EVENT = 'mdw:listcontent-activate';\nexport const SELECTED_CHANGE_EVENT = 'mdw:listcontent-selectedchange';\nexport const CHECKED_CHANGE_EVENT = 'mdw:listcontent-checkedchange';\nexport const FOCUS_EVENT = 'mdw:listcontent-focus';\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function attach(listContentElement) {\n  attachCore(listContentElement);\n  if (!listContentElement.hasAttribute('mdw-no-overlay')) {\n    listContentElement.classList.add('mdw-overlay');\n    Overlay.attach(listContentElement);\n  }\n  if (!listContentElement.hasAttribute('mdw-no-ripple')) {\n    listContentElement.classList.add('mdw-ripple');\n    Ripple.attach(listContentElement);\n  }\n  if (listContentElement.getAttribute('role') === 'radio'\n  && listContentElement.getAttribute('aria-checked') === 'true'\n  && listContentElement.getAttribute('tabindex') !== '0') {\n    listContentElement.setAttribute('tabindex', '0');\n  }\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.attach(secondaryElement);\n  }\n  listContentElement.addEventListener(ListSecondary.SECONDARY_ACTION_EVENT, onSecondaryAction);\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  if (document.activeElement !== event.currentTarget) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (!listContentElement) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  if (isDisabled(listContentElement)) {\n    return;\n  }\n\n  if (event.key === 'Spacebar' || event.key === ' ') {\n    if (onCheckToggleRequest(listContentElement)) {\n      return;\n    }\n  }\n\n  // Slightly redundant, but performs ripple\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  listContentElement.dispatchEvent(newEvent);\n}\n\n/**\n * @param {Element} listContentElement\n * @return {boolean} handled\n */\nfunction onCheckToggleRequest(listContentElement) {\n  const currentValue = listContentElement.getAttribute('aria-checked');\n  if (currentValue == null) {\n    // Attribute does not exist\n    return false;\n  }\n  let newValue = currentValue === 'true' ? 'false' : 'true';\n  if (newValue === 'false' && listContentElement.getAttribute('role') === 'radio') {\n    newValue = 'true';\n  }\n  Attributes.setChecked(listContentElement, newValue, CHECKED_CHANGE_EVENT);\n  return true;\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function attachCore(listContentElement) {\n  if (!listContentElement.hasAttribute('role')) {\n    if (listContentElement.parentElement.getAttribute('role') === 'none') {\n      listContentElement.setAttribute('role', 'option');\n    }\n  }\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__icon'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__avatar'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  listContentElement.addEventListener('click', onClick);\n  listContentElement.addEventListener('keydown', onKeyDown);\n  listContentElement.addEventListener('focus', onFocus);\n}\n\n/**\n * Sets [aria-checked=\"true\"] on Focus if [role=\"radio\"]\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  dispatchDomEvent(listContentElement, FOCUS_EVENT);\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onSecondaryAction(event) {\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (isDisabled(listContentElement)) {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  onCheckToggleRequest(listContentElement);\n\n  // Regardless if checkable, event is propagated up\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (isDisabled(listContentElement)) {\n    return;\n  }\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (!secondaryElement || !secondaryElement.hasAttribute('mdw-action')) {\n    if (onCheckToggleRequest(listContentElement)) {\n      return;\n    }\n  }\n  dispatchDomEvent(listContentElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return (element.getAttribute('aria-disabled') === 'true');\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function detachCore(listContentElement) {\n  listContentElement.removeEventListener('click', onClick);\n  listContentElement.removeEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function detach(listContentElement) {\n  detachCore(listContentElement);\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.detach(secondaryElement);\n  }\n  listContentElement.removeEventListener(ListSecondary.SECONDARY_ACTION_EVENT, onSecondaryAction);\n  Ripple.detach(listContentElement);\n  Overlay.detach(listContentElement);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setChecked(element, value, dispatchEvent = true) {\n  return Attributes.setChecked(element, value, dispatchEvent ? CHECKED_CHANGE_EVENT : null);\n}\n\n// Alias\nexport const { setCurrent } = Attributes;\n","export default class Throttler {\n  /** @param {number} throttleTimeMs */\n  constructor(throttleTimeMs) {\n    this.pending = false;\n    this.queued = false;\n    this.queue = null;\n    this.throttleTimeMs = throttleTimeMs;\n  }\n\n  abort() {\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.pending = false;\n    this.queued = false;\n  }\n\n  /**\n   * @param {function} fn\n   * @return {void}\n   */\n  run(fn) {\n    if (this.pending) {\n      this.queued = true;\n      return;\n    }\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.queued = false;\n    this.pending = true;\n    this.queue = setTimeout(() => {\n      this.pending = false;\n      if (this.queued) {\n        this.run(fn);\n      }\n    }, this.throttleTimeMs);\n    fn();\n  }\n}\n","import { iterateArrayLike, getPassiveEventListenerOption } from '../../core/dom';\nimport Throttler from '../../core/throttler';\n\nconst MIN_SCROLL_DELTA = 24; // Avoid finger bounce\n\nconst MOBILE_BREAKPOINT = 600;\nconst TABLET_BREAKPOINT = 1024;\n\n// Throttler will execute at earliest convenience\n// Smoother than using requestAnimationFrame\nconst SCROLL_THROTTLE_TIME_MS = 20;\n\n/** @type {number} */\nlet lastScrollY = null;\n/** @type {number} */\nlet penultimateScrollY = null;\nlet scrolledPastAppBar = false;\n/** @type {HTMLElement} */\nlet appBarElement = null;\n/** @type {HTMLElement} */\nlet layoutContentElement = null;\n/** @type {number} */\nlet lastScrollBottomDistance = null;\n/** @type {Throttler} */\nlet scrollThrottler = null;\n\n/** @return {void} */\nexport function attach() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    // Initialize with scroll up\n    document.body.addEventListener('scroll', onBodyScroll, getPassiveEventListenerOption());\n    const contentElement = getContentElement();\n    if (contentElement) {\n      contentElement.addEventListener('scroll', onContentScroll, getPassiveEventListenerOption());\n    }\n    resetScroll();\n  }\n\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-toggle'),\n    el => el.addEventListener('click', toggleNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-show'),\n    el => el.addEventListener('click', showNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-hide'),\n    el => el.addEventListener('click', hideNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-toggle'),\n    el => el.addEventListener('click', toggleSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-show'),\n    el => el.addEventListener('click', showSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-hide'),\n    el => el.addEventListener('click', hideSideSheet));\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.addEventListener('click', onScrimClick);\n    scrim.addEventListener('scroll', onScrimScroll);\n    scrim.addEventListener('touchmove', onScrimScroll);\n    scrim.addEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {Throttler} */\nexport function getScrollThrottler() {\n  if (!scrollThrottler) {\n    scrollThrottler = new Throttler(SCROLL_THROTTLE_TIME_MS);\n  }\n  return scrollThrottler;\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onScrimScroll(event) {\n  // JS needed for Safari\n  event.preventDefault();\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function onScrimClick(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  if (navDrawer && (window.location.hash === `#${navDrawer.id}` || navDrawer.getAttribute('aria-hidden') === 'false')) {\n    if (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-navdrawer-style') === 'modal') {\n      hideNavDrawer();\n    }\n  }\n  const sidesheet = document.getElementsByClassName('mdw-layout__sidesheet')[0];\n  if (sidesheet && sidesheet.getAttribute('aria-hidden') === 'false') {\n    if (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-sidesheet-style') === 'modal') {\n      hideSideSheet();\n    }\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__navdrawer')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  navDrawer.setAttribute('aria-hidden', 'true');\n  if (window.location.hash === `#${navDrawer.id}`) {\n    window.location.hash = '';\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleNavDrawer(event) {\n  if (document.getElementsByClassName('mdw-layout__navdrawer')[0].getAttribute('aria-hidden') === 'false') {\n    hideNavDrawer(event);\n  } else {\n    showNavDrawer(event);\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'true');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleSideSheet(event) {\n  if (document.getElementsByClassName('mdw-layout__sidesheet')[0].getAttribute('aria-hidden') === 'false') {\n    hideSideSheet(event);\n  } else {\n    showSideSheet(event);\n  }\n}\n\n/** @return {void} */\nexport function detach() {\n  document.removeEventListener('scroll', onBodyScroll);\n  const content = getContentElement();\n  if (content) {\n    content.removeEventListener('scroll', onContentScroll);\n  }\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.removeEventListener('click', onScrimClick);\n    scrim.removeEventListener('scroll', onScrimScroll);\n    scrim.removeEventListener('touchmove', onScrimScroll);\n    scrim.removeEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {void} */\nexport function onBodyScroll() {\n  // position:sticky scrolling\n  getScrollThrottler().run(() => onScroll(true));\n}\n\n/** @return {boolean} */\nexport function isMobile() {\n  return window.innerWidth < MOBILE_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function isTablet() {\n  return window.innerWidth >= MOBILE_BREAKPOINT\n    && window.innerWidth < TABLET_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function shouldAutoHideAppBar() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return false;\n  }\n  const autoHide = appBar.getAttribute('mdw-autohide');\n  if (autoHide == null) {\n    return false;\n  }\n  if (autoHide === '') {\n    return true;\n  }\n  if (autoHide.indexOf('tablet') !== -1 && isTablet()) {\n    return true;\n  }\n  if (autoHide.indexOf('mobile') !== -1 && isMobile()) {\n    return true;\n  }\n  return false;\n}\n\n/** @return {void} */\nexport function onContentScroll() {\n  getScrollThrottler().run(() => onScroll(false));\n}\n\n/** @return {HTMLElement} */\nexport function getAppBarElement() {\n  if (!appBarElement) {\n    /** @type {HTMLElement} */\n    appBarElement = (document.getElementsByClassName('mdw-layout__appbar')[0]);\n  }\n  return appBarElement;\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function showFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'false');\n  if (changeFabCut !== false) {\n    openAppBarFabCut();\n  }\n}\n\n/** @return {void} */\nexport function openAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (fabCutAttr == null) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') === -1) {\n    appBar.setAttribute('mdw-fab-cut', `open ${fabCutAttr}`.trim());\n  }\n}\n\n/** @return {void} */\nexport function closeAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (!fabCutAttr) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') !== -1) {\n    appBar.setAttribute('mdw-fab-cut', fabCutAttr.replace('open', '').trim());\n  }\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function hideFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'true');\n  if (changeFabCut !== false) {\n    closeAppBarFabCut();\n  }\n}\n\n/** @return {boolean} */\nexport function isFabShown() {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return false;\n  }\n  return fabElement.getAttribute('aria-hidden') !== 'true';\n}\n\n/** @return {HTMLElement} */\nexport function getContentElement() {\n  if (!layoutContentElement) {\n    /** @type {HTMLElement} */\n    layoutContentElement = (document.getElementsByClassName('mdw-layout__content')[0]);\n  }\n  return layoutContentElement;\n}\n\n/** @return {void} */\nexport function resetScroll() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    appBar.removeAttribute('mdw-hide');\n    appBar.removeAttribute('mdw-raise');\n  }\n  scrolledPastAppBar = false;\n  lastScrollY = 0 + MIN_SCROLL_DELTA;\n  penultimateScrollY = lastScrollY;\n  onScroll(true);\n}\n\n/**\n * @param {boolean} isBody\n * @return {void}\n */\nexport function onScroll(isBody) {\n  const contentElement = getContentElement();\n  const scrollElement = isBody ? document.body : contentElement;\n  const currentScrollY = scrollElement.scrollTop;\n  const change = currentScrollY - lastScrollY;\n  const delta = Math.abs(change);\n  if (delta === 0) {\n    // Horizontal scroll?\n    return;\n  }\n  if (currentScrollY < 0 && lastScrollY <= 0) {\n    // Repeated overscroll event\n    return;\n  }\n\n  const scrollBottom = scrollElement.scrollHeight - scrollElement.clientHeight;\n  const scrollBottomDistance = scrollBottom - currentScrollY;\n  const scrollTopChange = currentScrollY <= 0\n    || lastScrollY <= 0;\n  const scrollBottomChange = scrollBottomDistance === 0 && lastScrollBottomDistance !== 0;\n\n  lastScrollBottomDistance = scrollBottomDistance;\n  if (delta < MIN_SCROLL_DELTA && !scrollTopChange && !scrollBottomChange) {\n    return;\n  }\n\n  const didScrollUp = (scrollBottomDistance > 0) && (change < 0);\n  const isAtScrollTop = didScrollUp && currentScrollY <= 0;\n  const newScrollUp = didScrollUp && lastScrollY >= penultimateScrollY;\n  const didScrollDown = (change > 0);\n  const isAtScrollBottom = didScrollDown && (scrollBottomDistance <= 0);\n  const newScrollDown = didScrollDown && lastScrollY <= penultimateScrollY;\n\n  penultimateScrollY = lastScrollY;\n  lastScrollY = currentScrollY;\n\n  // To avoid DOM read, abort if scrolling in same direction and has already past app bar\n  if ((change === 0) || (!isAtScrollTop && !newScrollUp && !isAtScrollBottom && !newScrollDown\n    && scrolledPastAppBar)) {\n    return;\n  }\n\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n\n  const bottomAppBar = appBar.hasAttribute('mdw-bottom');\n\n  const scrolledAway = bottomAppBar ? didScrollUp : didScrollDown;\n  const newScrollAway = scrolledAway && (bottomAppBar ? newScrollUp : newScrollDown);\n\n  // For code readability\n  const scrolledBack = !scrolledAway;\n  const newScrollBack = scrolledBack && (bottomAppBar ? newScrollDown : newScrollUp);\n\n  const isAtRest = (bottomAppBar ? isAtScrollBottom : isAtScrollTop);\n\n  if (scrolledBack) {\n    // scrolledPastAppBar needs to be recalculated\n    scrolledPastAppBar = false;\n  }\n\n  // Don't perform on each scroll back, only on first\n  if (newScrollBack || isAtRest) {\n    if (appBar.hasAttribute('mdw-autohide')) {\n      appBar.removeAttribute('mdw-hide');\n      appBar.style.removeProperty('margin-top');\n    }\n  }\n\n  if (!scrolledPastAppBar) {\n    if (bottomAppBar) {\n      scrolledPastAppBar = currentScrollY <= scrollBottom - appBar.clientHeight;\n    } else {\n      scrolledPastAppBar = currentScrollY > appBar.clientHeight;\n    }\n  }\n\n  if (isAtRest) {\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.setAttribute('mdw-prominent', '');\n    }\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.removeAttribute('mdw-raise');\n    }\n    return;\n  }\n\n  // Not at rest\n  if (scrolledAway && scrolledPastAppBar) {\n    if (shouldAutoHideAppBar()) {\n      appBar.setAttribute('mdw-hide', '');\n      if (!isBody) {\n        appBar.style.setProperty('margin-top', `${-appBar.clientHeight}px`);\n      }\n    }\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.removeAttribute('mdw-prominent');\n    }\n  }\n\n  if (newScrollAway) {\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.setAttribute('mdw-raise', '');\n    }\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  nextTick,\n  cancelTick,\n} from '../../core/dom';\n\nimport * as MenuItem from './item';\n\nclass MenuStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object} [state]\n   * @param {Object} [previousState]\n   * @param {MouseEvent|PointerEvent} [originalEvent]\n   */\n  constructor(element, previousFocus, state, previousState, originalEvent) {\n    this.element = element;\n    this.previousFocus = previousFocus;\n    this.state = state;\n    this.previousState = previousState;\n    this.originalEvent = originalEvent;\n    this.pendingResizeOperation = null;\n  }\n}\n\n/** @type {MenuStack[]} */\nconst OPEN_MENUS = [];\n\nexport const HIDE_EVENT = 'mdw:menu-hide';\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function attach(menuElement) {\n  menuElement.setAttribute('mdw-menu-js', '');\n  menuElement.addEventListener('click', onMenuClick);\n  menuElement.addEventListener('scroll', onMenuScroll);\n  menuElement.addEventListener('touchmove', onMenuScroll);\n  menuElement.addEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  setupARIA(menuElement);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function setupARIA(menuElement) {\n  if (menuElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  if (!menuElement.hasAttribute('aria-hidden')) {\n    menuElement.setAttribute('aria-hidden', 'true');\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-divider'),\n    el => el.setAttribute('role', 'separator'));\n  menuElement.setAttribute('role', 'menu');\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  if (popupElement) {\n    popupElement.setAttribute('role', 'none');\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onMenuScroll(event) {\n  // JS needed for Safari\n  event.preventDefault();\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/**\n * @param {MouseEvent|PointerEvent} event\n * @return {void}\n */\nexport function onMenuClick(event) {\n  if (event.currentTarget === event.target && event.target instanceof HTMLElement) {\n    event.stopPropagation();\n    hide(event.target);\n  }\n}\n\n/**\n * @return {void}\n */\nexport function onWindowResize() {\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.originalEvent) {\n    return;\n  }\n  if (lastOpenMenu.pendingResizeOperation) {\n    cancelTick(lastOpenMenu.pendingResizeOperation);\n  }\n  lastOpenMenu.pendingResizeOperation = nextTick(() => {\n    updateMenuPosition(\n      lastOpenMenu.element,\n      /** @type {HTMLElement} */ (lastOpenMenu.element.getElementsByClassName('mdw-menu__popup')[0]),\n      lastOpenMenu.originalEvent\n    );\n    lastOpenMenu.pendingResizeOperation = null;\n  });\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.previousState) {\n    return;\n  }\n  if ((lastOpenMenu.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenMenu.previousState[key])) {\n    hide(lastOpenMenu.element);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuElement = (event.currentTarget);\n  if (!menuElement || menuElement.getAttribute('aria-hidden') === 'true') {\n    return;\n  }\n\n  if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, false);\n    return;\n  }\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, true);\n    return;\n  }\n  if (event.key === 'Tab') {\n    // Hide menu allowing focus to revert to calling element\n    // To then allow browser default Tab interaction\n    // Unless menu hiding is cancelled\n    if (!hide(menuElement)) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    event.stopPropagation();\n    event.preventDefault();\n    hide(menuElement);\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function detach(menuElement) {\n  hide(menuElement);\n  menuElement.removeEventListener('click', onMenuClick);\n  menuElement.removeEventListener('scroll', onMenuScroll);\n  menuElement.removeEventListener('touchmove', onMenuScroll);\n  menuElement.removeEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  menuElement.removeAttribute('mdw-menu-js');\n  /** @type {HTMLElement} */\n  const popupElement = (menuElement.getElementsByClassName('mdw-menu__popup')[0]);\n  if (popupElement) {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), MenuItem.detach);\n}\n\n/**\n * @param {Element} menu\n * @param {boolean} [backwards=false]\n * @return {void}\n */\nexport function selectNextMenuItem(menu, backwards) {\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const menuItems = (menu.getElementsByClassName('mdw-menu__item'));\n  let foundTarget = false;\n  /** @type {HTMLElement} */\n  let candidate = null;\n  /** @type {HTMLElement} */\n  let firstFocusableItem = null;\n  let lastFocusableElement = null;\n  const target = document.activeElement;\n\n  // Hidden elements cannot be focused\n  // Disabled elements cannot be focused on IE11\n  // Skip elements that fail to receive focus\n  iterateSomeOfArrayLike(menuItems, (el) => {\n    el.focus();\n    const focusable = (document.activeElement === el);\n    if (focusable) {\n      if (!firstFocusableItem) {\n        firstFocusableItem = el;\n      }\n      lastFocusableElement = el;\n    }\n    if (el === target) {\n      foundTarget = true;\n      if (backwards && candidate) {\n        return true;\n      }\n      return false;\n    }\n    if (backwards) {\n      if (focusable) {\n        candidate = el;\n      }\n      return false;\n    }\n    if (foundTarget) {\n      if (focusable) {\n        candidate = el;\n        return true;\n      }\n      return false;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (backwards) {\n      candidate = lastFocusableElement;\n    } else {\n      candidate = firstFocusableItem;\n    }\n  }\n  if (candidate && document.activeElement !== candidate) {\n    candidate.focus();\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @param {HTMLElement} popupElement\n * @param {MouseEvent|PointerEvent} [event]\n * @param {boolean} [alignTarget=true]\n * @return {void}\n */\nexport function updateMenuPosition(menuElement, popupElement, event, alignTarget) {\n  let top = 'auto';\n  let left = 'auto';\n  let transformOrigin = '';\n  const useAlignTarget = (alignTarget !== false);\n  const margin = useAlignTarget ? '0' : '';\n  const mdwPosition = menuElement.getAttribute('mdw-position') || '';\n  const mdwDirection = menuElement.getAttribute('mdw-direction') || '';\n  let alignTop = mdwPosition.indexOf('top') !== -1;\n  let alignBottom = mdwPosition.indexOf('bottom') !== -1;\n  let alignVCenter = mdwPosition.indexOf('vcenter') !== -1;\n\n  const alignStart = mdwPosition.indexOf('start') !== -1;\n  const alignEnd = mdwPosition.indexOf('end') !== -1;\n  let alignLeft = mdwPosition.indexOf('left') !== -1;\n  let alignRight = mdwPosition.indexOf('right') !== -1;\n  let alignHCenter = mdwPosition.indexOf('hcenter') !== -1;\n\n  let openUp = mdwDirection.indexOf('up') !== -1;\n  let openDown = mdwDirection.indexOf('down') !== -1;\n  const openNormal = mdwDirection.indexOf('normal') !== -1;\n  const openReverse = mdwDirection.indexOf('reverse') !== -1;\n  let openVCenter = mdwDirection.indexOf('vcenter') !== -1;\n  let openHCenter = mdwDirection.indexOf('hcenter') !== -1;\n  let openLtr = mdwDirection.indexOf('ltr') !== -1;\n  let openRtl = mdwDirection.indexOf('rtl') !== -1;\n\n  /** @type {HTMLElement} */\n  const target = (event.currentTarget || event.target);\n\n  let isPageRTL = null;\n  if (alignStart || alignEnd || openNormal || openReverse) {\n    // Using page-direction based values\n    isPageRTL = isRtl();\n    if (alignStart || alignEnd) {\n      if (alignStart) {\n        if (isPageRTL) {\n          alignRight = true;\n        } else {\n          alignLeft = true;\n        }\n      } else if (isPageRTL) {\n        alignLeft = true;\n      } else {\n        alignRight = true;\n      }\n    }\n    if (openNormal || openReverse) {\n      if (openNormal) {\n        if (isPageRTL) {\n          openRtl = true;\n        } else {\n          openLtr = true;\n        }\n      } else if (isPageRTL) {\n        openLtr = true;\n      } else {\n        openRtl = true;\n      }\n    }\n  }\n  const offsetTop = useAlignTarget ? 0 : -event.offsetY;\n  const offsetBottom = useAlignTarget ? target.clientHeight : event.offsetY;\n  const offsetLeft = useAlignTarget ? 0 : -event.offsetX;\n  const offsetRight = useAlignTarget ? target.clientWidth : event.offsetX;\n  const rect = target.getBoundingClientRect();\n  const pageX = rect.left;\n  const pageY = rect.top;\n\n  /* Automatic Positioning\n    *\n    * 9 Positions\n    *   3      7      4\n    *     ┌─────────┐\n    *     │         │\n    *   5 │    9    │ 6\n    *     │         │\n    *     └─────────┘\n    *   1      8      2\n    *\n    * 1: Bottom Left\n    * 2: Bottom Right\n    * 3: Top Left\n    * 4: Top Right\n    * 5: VCenter Left\n    * 6: VCenter Right\n    * 7: HCenter Top\n    * 8: HCenter Bottom\n    * 9: VCenter HCenter\n    *\n    * 9 Directions:\n    * a - Down LTR\n    * b - Down RTL\n    * c - Up LTR\n    * d - Up RTL\n    * e - LTR\n    * f - RTL\n    * g - Down\n    * h - Up\n    * i - Center\n    *\n    *\n    * 16 total combos\n    * 1a 1b 1c 1d  └↘ └↙ └↗ └↖\n    * 2a 2b 2c 2d  ┘↘ ┘↙ ┘↗ ┘↖\n    * 3a 3b 3c 3d  ┌↘ ┌↙ ┌↗ ┌↖\n    * 4a 4b 4c 4d  ┐↘ ┐↙ ┐↗ ┐↖\n    *\n    * Avoid using opposite angle\n    *\n    * 1a XX 1c 1d  └↘ ██ └↗ └↖\n    * XX 2b 2c 2d  ██ ┘↙ ┘↗ ┘↖\n    * 1a 3b 3c XX  ┌↘ ┌↙ ┌↗ ██\n    * 4a 4b XX 4d  ┐↘ ┐↙ ██ ┐↖\n    *\n    *\n    * Preference Order:\n    * - Flow from corner           1a 2b 3c 4d    └↘ ┘↙ ┌↗ ┐↖\n    * - Open adjacent to target    4a 3b 2c 1d    ┐↘ ┌↙ ┘↗ └↖\n    * - Overlay target             3a 4b 1c 2d    ┌↘ ┐↙ └↗ ┘↖\n    * - Open from horizontal side  5e 6f          │→ │←\n    * - Open from center           9i             █·\n    */\n\n  popupElement.style.setProperty('max-height', 'none');\n  const popupElementHeight = popupElement.clientHeight;\n  const popupElementWidth = popupElement.clientWidth;\n  const canOpenDownwardsFromBottom = !alignTop && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetBottom) <= window.innerHeight;\n  const canOpenDownwardsFromTop = !alignBottom && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetTop) <= window.innerHeight;\n  const canOpenUpwardsFromTop = !alignBottom && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetTop >= popupElementHeight;\n  const canOpenUpwardsFromBottom = !alignTop && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetBottom >= popupElementHeight;\n  const canOpenRightwardsFromLeft = !alignRight && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetLeft) <= window.innerWidth;\n  const canOpenRightwardsFromRight = !alignLeft && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetRight) <= window.innerWidth;\n  const canOpenLeftwardsFromRight = !alignLeft && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetRight >= popupElementWidth;\n  const canOpenLeftwardsFromLeft = !alignRight && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetLeft >= popupElementWidth;\n  const canOpenFromCenter = !alignLeft && !alignRight && !alignTop && !alignBottom\n    && !openUp && !openDown\n    && ((pageX + offsetLeft) / 2) >= (popupElementWidth / 2)\n    && (popupElementWidth / 2) + ((pageX + offsetLeft) / 2) <= window.innerWidth;\n  popupElement.style.removeProperty('max-height');\n  const candidates = [\n    canOpenDownwardsFromBottom && canOpenRightwardsFromLeft, // 1a └↘\n    canOpenDownwardsFromBottom && canOpenLeftwardsFromRight, // 2b ┘↙\n    canOpenUpwardsFromTop && canOpenRightwardsFromLeft, // 3c ┌↗\n    canOpenUpwardsFromTop && canOpenLeftwardsFromLeft, // 4d ┐↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromRight, // 4a ┐↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromLeft, // 3b ┌↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2c ┘↗\n    canOpenUpwardsFromBottom && canOpenLeftwardsFromLeft, // 1d └↖\n    canOpenDownwardsFromTop && canOpenRightwardsFromLeft, // 3a ┌↘\n    canOpenDownwardsFromTop && canOpenLeftwardsFromRight, // 4b ┐↙\n    canOpenUpwardsFromBottom && canOpenRightwardsFromLeft, // 1c └↗\n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2d ┘↖\n    canOpenRightwardsFromLeft, // 5e │→\n    canOpenLeftwardsFromRight, // 6f │←\n    canOpenFromCenter, // 9i █·\n  ].map((value, index) => {\n    if (value) {\n      return index + 1;\n    }\n    return 0;\n  }).filter(value => value !== 0);\n  if (candidates.length) {\n    let candidateNumber;\n    if (isPageRTL === null) {\n      isPageRTL = isRtl();\n    }\n    if (isPageRTL) {\n      candidateNumber = [2, 1, 4, 3, 6, 5, 8, 7, 10, 9, 12, 11, 14, 13, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    } else {\n      candidateNumber = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    }\n    if (candidateNumber == null) {\n      candidateNumber = isPageRTL ? 2 : 1;\n    }\n    switch (candidateNumber) {\n      // Position\n      default:\n      case 1:\n      case 8:\n      case 11:\n        alignBottom = true; alignLeft = true;\n        break;\n      case 2:\n      case 7:\n      case 12:\n        alignBottom = true; alignRight = true;\n        break;\n      case 3:\n      case 6:\n      case 9:\n        alignTop = true; alignLeft = true;\n        break;\n      case 4:\n      case 5:\n      case 10:\n        alignTop = true; alignRight = true;\n        break;\n      case 13:\n        alignVCenter = true; alignLeft = true;\n        break;\n      case 14:\n        alignVCenter = true; alignRight = true;\n        break;\n      case 15:\n        alignVCenter = true; alignHCenter = true;\n    }\n    switch (candidateNumber) {\n      // Direction\n      default:\n      case 1:\n      case 5:\n      case 9:\n        openDown = true; openLtr = true;\n        break;\n      case 2:\n      case 6:\n      case 10:\n        openDown = true; openRtl = true;\n        break;\n      case 3:\n      case 7:\n      case 11:\n        openUp = true; openLtr = true;\n        break;\n      case 4:\n      case 8:\n      case 12:\n        openUp = true; openRtl = true;\n        break;\n      case 13:\n        openLtr = true; openVCenter = true;\n        break;\n      case 14:\n        openRtl = true; openVCenter = true;\n        break;\n      case 15:\n        openHCenter = true; openVCenter = true;\n        break;\n    }\n  }\n\n  if (openLtr) {\n    if (alignRight) {\n      left = `${pageX + offsetRight}px`;\n    } else if (alignHCenter) {\n      left = `${pageX + ((offsetLeft + offsetRight) / 2)}px`;\n    } else {\n      left = `${pageX + offsetLeft}px`;\n    }\n    transformOrigin = 'left';\n  } else if (openHCenter) {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - (popupElementWidth / 2)}px`;\n    } else if (alignRight) {\n      left = `${(pageX + offsetRight) - (popupElementWidth / 2)}px`;\n    } else {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - (popupElementWidth / 2)}px`;\n    }\n    transformOrigin = 'center';\n  } else {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - popupElementWidth}px`;\n    } else if (alignHCenter) {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - popupElementWidth}px`;\n    } else {\n      left = `${(pageX + offsetRight) - popupElementWidth}px`;\n    }\n    transformOrigin = 'right';\n  }\n\n  if (openUp) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - popupElement.clientHeight}px`;\n    } else if (alignVCenter) {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - popupElement.clientHeight}px`;\n    } else {\n      top = `${(pageY + offsetTop) - popupElement.clientHeight}px`;\n    }\n    transformOrigin += ' bottom';\n  } else if (openVCenter) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - (popupElement.clientHeight / 2)}px`;\n    } else if (alignTop) {\n      top = `${(pageY + offsetTop) - (popupElement.clientHeight / 2)}px`;\n    } else {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - (popupElement.clientHeight / 2)}px`;\n    }\n    transformOrigin += ' center';\n  } else {\n    if (alignTop) {\n      top = `${pageY + offsetTop}px`;\n    } else if (alignVCenter) {\n      top = `${pageY + ((offsetTop + offsetBottom) / 2)}px`;\n    } else {\n      top = `${pageY + offsetBottom}px`;\n    }\n    transformOrigin += ' top';\n  }\n\n  popupElement.style.setProperty('top', top);\n  popupElement.style.setProperty('left', left);\n  popupElement.style.setProperty('right', 'auto');\n  popupElement.style.setProperty('bottom', 'auto');\n  popupElement.style.setProperty('margin', margin);\n  popupElement.style.setProperty('transform-origin', transformOrigin);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function refreshMenuItems(menuElement) {\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), (menuItem) => {\n    menuItem.setAttribute('tabindex', '-1');\n    MenuItem.attach(menuItem);\n  });\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  popupElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {Element} menuElement\n * @param {MouseEvent|PointerEvent} [event]\n * @param {boolean} [alignTarget=true]\n * @return {boolean} handled\n */\nexport function show(menuElement, event, alignTarget) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (menuElement.getElementsByClassName('mdw-menu__popup')[0]);\n  let changed = false;\n  if (event) {\n    updateMenuPosition(menuElement, popupElement, event, alignTarget);\n  } else {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  if (menuElement.getAttribute('aria-hidden') !== 'false') {\n    menuElement.setAttribute('aria-hidden', 'false');\n    changed = true;\n  }\n  if (changed) {\n    attach(menuElement);\n    const previousFocus = document.activeElement;\n    const newState = { hash: Math.random().toString(36).substr(2, 16) };\n    let previousState = null;\n    if (window.history && window.history.pushState) {\n      if (!window.history.state) {\n        // Create new previous state\n        window.history.replaceState({\n          hash: Math.random().toString(36).substr(2, 16),\n        }, document.title);\n      }\n      previousState = window.history.state;\n      window.history.pushState(newState, document.title);\n      window.addEventListener('popstate', onPopState);\n      window.addEventListener('resize', onWindowResize);\n    }\n    const menuStack = new MenuStack(menuElement, previousFocus, newState, previousState, event);\n    OPEN_MENUS.push(menuStack);\n    refreshMenuItems(menuElement);\n    if (event && !event.detail && ('pointerType' in event) && !event.pointerType) {\n      // Triggered with keyboard event\n      selectNextMenuItem(menuElement);\n    } else {\n      popupElement.focus();\n    }\n  }\n  return changed;\n}\n\n/**\n * @param {Element} menuElement\n * @return {boolean} handled\n */\nexport function hide(menuElement) {\n  if (menuElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  menuElement.setAttribute('aria-hidden', 'true');\n  let stackIndex = -1;\n  OPEN_MENUS.some((stack, index) => {\n    if (stack.element === menuElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const menuStack = OPEN_MENUS[stackIndex];\n    if (menuStack.previousFocus && menuStack.previousFocus instanceof HTMLElement) {\n      menuStack.previousFocus.focus();\n    }\n    OPEN_MENUS.splice(stackIndex, 1);\n    if (menuStack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (menuStack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_MENUS.length) {\n    window.removeEventListener('popstate', onPopState);\n    window.removeEventListener('resize', onWindowResize);\n  }\n  dispatchDomEvent(menuElement, HIDE_EVENT);\n  return true;\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:tabitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-tab__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateElementSiblings,\n} from '../../core/dom';\n\nexport const ACTIVATE_EVENT = 'mdw:menuitem-activate';\nexport const CHECK_EVENT = 'mdw:menuitem-check';\nexport const UNCHECK_EVENT = 'mdw:menuitem-uncheck';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  // If mouseover is used, an item can still lose focus via keyboard navigation.\n  // An extra event listener would need to be created to catch blur but the cursor\n  // would still remain over the element, thus needing another mousemove event.\n  // Prioritization is given to less event listeners rather than operations per second.\n  element.addEventListener('mousemove', onMouseMove);\n  element.addEventListener('click', onClick);\n  element.addEventListener('keydown', onKeyDown);\n  setupARIA(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function setupARIA(element) {\n  if (element.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  const role = element.getAttribute('role');\n  let useAriaChecked = false;\n  if (role === 'menuitemcheckbox' || role === 'menuitemradio') {\n    useAriaChecked = true;\n  } else if (role !== 'menuitem') {\n    if (element.getElementsByClassName('mdw-menu__check').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemcheckbox');\n    } else if (element.getElementsByClassName('mdw-menu__radio').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemradio');\n    } else {\n      element.setAttribute('role', 'menuitem');\n    }\n  }\n  if (useAriaChecked && !element.hasAttribute('aria-checked')) {\n    element.setAttribute('aria-checked', 'false');\n  }\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__text'),\n    el => el.setAttribute('role', 'text'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__check'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__info'),\n    el => el.setAttribute('role', 'note'));\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n  if (isDisabled(menuItemElement)) {\n    return;\n  }\n  const role = menuItemElement.getAttribute('role');\n  if (role === 'menuitemcheckbox') {\n    toggleChecked(menuItemElement);\n  } else if (role === 'menuitemradio') {\n    setChecked(menuItemElement, true);\n  }\n  dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onMouseMove(event) {\n  /** @type {HTMLElement} */\n  const el = (event.currentTarget);\n  if (!el) {\n    return;\n  }\n  const previousFocus = document.activeElement;\n  if (previousFocus === el) {\n    // Already focused\n    return;\n  }\n  if (el.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  el.focus();\n  if (document.activeElement !== el) {\n    if (document.activeElement !== previousFocus && previousFocus instanceof HTMLElement) {\n      previousFocus.focus();\n    }\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n\n  if (event.key === 'Enter') {\n    event.stopPropagation();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    onClick(event);\n    return;\n  }\n\n  if (event.key === 'Spacebar' || (event.key === ' ')) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    const role = menuItemElement.getAttribute('role');\n    if (role === 'menuitemcheckbox') {\n      toggleChecked(menuItemElement);\n    } else if (role === 'menuitemradio') {\n      setChecked(menuItemElement, true);\n    } else {\n      dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isChecked(element) {\n  return (element.getAttribute('aria-checked') === 'true');\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return (element.getAttribute('aria-disabled') === 'true');\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n * @return {boolean} uiChanged\n */\nexport function setChecked(element, checked) {\n  const role = element.getAttribute('role');\n  let isCheckable = false;\n  if (role === 'menuitemcheckbox') {\n    isCheckable = true;\n    if (!dispatchDomEvent(element, checked ? CHECK_EVENT : UNCHECK_EVENT)) {\n      return false;\n    }\n  }\n  if (role === 'menuitemradio') {\n    isCheckable = true;\n    if (checked) {\n      if (!dispatchDomEvent(element, CHECK_EVENT)) {\n        return false;\n      }\n      iterateElementSiblings(element, (sibling) => {\n        if (sibling.getAttribute('role') === 'menuitemradio') {\n          sibling.setAttribute('aria-checked', 'false');\n        }\n      });\n    }\n  }\n  if (!isCheckable) {\n    return false;\n  }\n  element.setAttribute('aria-checked', checked ? 'true' : 'false');\n  return true;\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function toggleChecked(element) {\n  const checked = !isChecked(element);\n  return setChecked(element, checked);\n}\n\n/**\n * @param {Element} element\n * @return {boolean} handled\n */\nexport function openSubMenu(element) {\n  const hasPopup = element.getAttribute('aria-haspopup');\n  if (hasPopup !== 'menu' && hasPopup !== 'true') {\n    return false;\n  }\n\n  // TODO: Open new menu\n  return false;\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousemove', onMouseMove);\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-js');\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n// https://www.w3.org/TR/wai-aria-practices/#TreeView\n// https://www.w3.org/TR/wai-aria-practices/examples/landmarks/navigation.html\n\nimport { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\n\nimport * as ListItem from './item';\nimport * as ListContent from './content';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-list'), attach);\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function attach(listElement) {\n  let role = listElement.getAttribute('role');\n  if (!role) {\n    let newRole = 'listbox';\n    const parentRole = listElement.parentElement && listElement.parentElement.getAttribute('role');\n    if (parentRole === 'treeitem') {\n      newRole = 'group';\n    } else if (iterateSomeOfArrayLike(listElement.children,\n      child => child.hasAttribute('aria-expanded') && child.classList.contains('mdw-list__item'))) {\n      newRole = 'tree';\n    }\n    listElement.setAttribute('role', newRole);\n    role = newRole;\n  }\n\n  setupAria(listElement, role);\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.attach(child);\n    }\n  });\n  if (role === 'radiogroup') {\n    if (!listElement.hasAttribute('mdw-on-focus')) {\n      listElement.setAttribute('mdw-on-focus', 'check');\n    }\n  }\n  iterateArrayLike(listElement.getElementsByClassName('mdw-list'), attach);\n  if (listElement.hasAttribute('mdw-list-js')) {\n    return;\n  }\n  if (role !== 'listbox' && role !== 'tree' && role !== 'radiogroup') {\n    return;\n  }\n\n  switch (role) {\n    case 'tree':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.setupTabIndexes(listElement, listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n      return;\n  }\n\n  listElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  listElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  listElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.addEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.addEventListener(ListContent.CHECKED_CHANGE_EVENT, onCheckedChangeEvent);\n  listElement.addEventListener(ListContent.FOCUS_EVENT, onContentFocusEvent);\n  listElement.setAttribute('mdw-list-js', '');\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onContentFocusEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  const onFocusInteraction = listElement.getAttribute('mdw-on-focus');\n  if (!onFocusInteraction) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.target);\n  if (ListContent.isDisabled(listContentElement)) {\n    return;\n  }\n  onFocusInteraction.split(' ').forEach((interaction) => {\n    switch (interaction) {\n      case 'select':\n        ListContent.setSelected(listContentElement, true);\n        break;\n      case 'check':\n        ListContent.setChecked(listContentElement, true);\n        break;\n      default:\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  // List is readonly\n  if (listElement.getAttribute('aria-readonly') === 'true') {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  const listElementRole = listElement.getAttribute('role');\n  if (listElementRole !== 'listbox' && listElementRole !== 'tree') {\n    // Bubble up\n    return;\n  }\n  const { detail } = event;\n  if (detail.value === 'false') {\n    // Item is radio-like and cannot be unselected\n    if (listElement.getAttribute('aria-required') === 'true'\n      && listElement.getAttribute('aria-multiselectable') !== 'true') {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (listElement.getAttribute('aria-multiselectable') !== 'true') {\n    // Item is radio-like and must uncheck others\n    setTimeout(() => {\n      // Wait to see if event is cancelled\n      if (event.defaultPrevented) {\n        return;\n      }\n      const role = itemElement.getAttribute('role');\n      iterateArrayLike(listElement.querySelectorAll(`[role=\"${role}\"][aria-selected=\"true\"]`),\n        (item) => {\n          if (item === itemElement) {\n            return;\n          }\n          item.setAttribute('aria-selected', 'false');\n        });\n    });\n  }\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onCheckedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  if (listElement.getAttribute('aria-readonly') === 'true') {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  const listElementRole = listElement.getAttribute('role');\n  if (listElementRole !== 'radiogroup') {\n    // Bubble up\n    return;\n  }\n\n  const { detail } = event;\n  if (detail.value === 'false') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  setTimeout(() => {\n    // Wait to see if event is cancelled\n    if (event.defaultPrevented) {\n      return;\n    }\n    iterateArrayLike(listElement.querySelectorAll('[role=\"radio\"][aria-checked=\"true\"]'),\n      (item) => {\n        if (item === itemElement) {\n          return;\n        }\n        item.setAttribute('aria-checked', 'false');\n      });\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"treeitem\"]'), [currentItem]);\n      break;\n    case 'listbox':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"option\"]'), [currentItem]);\n      break;\n    case 'radiogroup':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"radio\"]'), [currentItem]);\n      break;\n    default:\n  }\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {Element} listElement\n * @param {string} role\n * @return {void}\n */\nexport function setupAria(listElement, role = 'tree') {\n  if (!listElement.hasAttribute('role')) {\n    listElement.setAttribute('role', role);\n  }\n  listElement.setAttribute('aria-orientation', 'vertical');\n  if (!listElement.hasAttribute('aria-multiselectable')) {\n    listElement.setAttribute('aria-multiselectable', 'false');\n  }\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function detach(listElement) {\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.detach(child);\n    }\n  });\n  RovingTabIndex.detach(\n    listElement,\n    listElement.querySelectorAll(`[role=\"${listElement.getAttribute('role') === 'tree' ? 'treeitem' : 'option'}\"]`)\n  );\n  listElement.removeEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.removeEventListener(ListContent.CHECKED_CHANGE_EVENT, onCheckedChangeEvent);\n  listElement.removeEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  listElement.removeEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  listElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.removeAttribute('mdw-list-js');\n}\n","import { getPassiveEventListenerOption } from '../../core/dom';\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function attach(textfieldElement) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.addEventListener('input', onInput, getPassiveEventListenerOption());\n    onInput({ currentTarget: input });\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function detach(textfieldElement) {\n  textfieldElement.removeAttribute('mdw-value-empty');\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.removeEventListener('input', onInput);\n  }\n}\n\n/**\n * @param {Event|{currentTarget:HTMLElement}} event\n * @return {void}\n */\nexport function onInput(event) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement} */\n  const inputElement = (event.currentTarget);\n  if (inputElement.parentElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(/** @type {HTMLTextAreaElement} */ (inputElement));\n  }\n  updateInputEmptyState(inputElement);\n}\n\n/**\n * @param {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} inputElement\n * @return {void} */\nexport function updateInputEmptyState(inputElement) {\n  const attrName = 'mdw-value-empty';\n  const textfieldElement = inputElement.parentElement;\n  if (inputElement.value) {\n    if (textfieldElement.hasAttribute(attrName)) {\n      textfieldElement.removeAttribute(attrName);\n    }\n  } else if (!textfieldElement.hasAttribute(attrName)) {\n    textfieldElement.setAttribute(attrName, '');\n  }\n}\n\n/**\n * @param {HTMLTextAreaElement} inputElement\n * @return {number} Single row height */\nexport function updateTextAreaSize(inputElement) {\n  const previousRowsAttrValue = inputElement.getAttribute('rows');\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = 1;\n  const { height, paddingTop } = window.getComputedStyle(inputElement);\n  if (!height || height === 'auto') {\n    if (previousRowsAttrValue == null) {\n      inputElement.removeAttribute('rows');\n    } else {\n      inputElement.setAttribute('rows', previousRowsAttrValue);\n    }\n    return -1;\n  }\n  const heightPx = parseInt(height.replace('px', ''), 10);\n  const paddingTopPx = parseInt(paddingTop.replace('px', ''), 10);\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = Math.floor((inputElement.scrollHeight - paddingTopPx) / heightPx);\n  return heightPx;\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {string|Date|number}\n */\nexport function getValue(textfieldElement) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if ((input instanceof HTMLTextAreaElement) || (input instanceof HTMLSelectElement)) {\n    return input.value;\n  }\n  switch (input.type) {\n    case 'number':\n    case 'range':\n      return Number.isNaN(input.valueAsNumber) ? null : input.valueAsNumber;\n    case 'date':\n    case 'datetime-local':\n    case 'time':\n      if (input.value == null) {\n        return null;\n      }\n      return new Date(\n        (new Date(input.valueAsNumber).getTimezoneOffset() * 60 * 1000) + input.valueAsNumber\n      );\n    default:\n      return input.value;\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @param {string|Date|number} [value]\n * @return {void}\n */\nexport function setValue(textfieldElement, value) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (value == null) {\n    input.value = null;\n  } else if (input instanceof HTMLTextAreaElement || input instanceof HTMLSelectElement) {\n    if (value instanceof Date) {\n      input.value = value.toString();\n    } else if (typeof value === 'string') {\n      input.value = value;\n    } else {\n      input.value = value.toString(10);\n    }\n  } else if (value instanceof Date) {\n    if (input.type === 'time') {\n      const hoursStr = `${value.getHours() < 10 ? '0' : ''}${value.getHours()}`;\n      const minutesStr = `${value.getMinutes() < 10 ? '0' : ''}${value.getMinutes()}`;\n      const secondsStr = `${value.getSeconds() < 10 ? '0' : ''}${value.getSeconds()}`;\n      input.value = `${hoursStr}:${minutesStr}:${secondsStr}.${value.getMilliseconds()}`;\n    } else {\n      switch (input.type) {\n        case 'date':\n          input.valueAsDate = value;\n          break;\n        case 'datetime-local':\n          input.valueAsNumber = value.getTime() - (value.getTimezoneOffset() * 60 * 1000);\n          break;\n        case 'number':\n        case 'range':\n          input.valueAsNumber = value.getTime();\n          break;\n        default:\n          input.value = value.toString();\n      }\n    }\n  } else if (typeof value === 'string') {\n    input.value = value;\n  } else {\n    switch (input.type) {\n      case 'date':\n      case 'time':\n      case 'datetime-local':\n      case 'number':\n      case 'range':\n        input.valueAsNumber = value;\n        break;\n      default:\n        input.value = value.toString();\n    }\n  }\n  updateInputEmptyState(input);\n  if (input instanceof HTMLTextAreaElement && textfieldElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(input);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:bottomnavitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-bottomnav__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#alert\n// https://www.w3.org/TR/wai-aria-practices/#alert\n\nimport {\n  dispatchDomEvent,\n  findElementParentByClassName,\n  nextTick,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\n/**\n * @typedef SnackbarCreateOptions\n * @property {!string} text\n * @property {!string} [buttonText]\n * @property {string} [buttonInk='primary']\n * @property {boolean} [stacked=false]\n * @property {number|boolean} [autoHide=4] Auto hide time in seconds\n * @property {boolean} [autoDestroy=true] Destroy element after hide\n * @property {Element} [parent] Parent element to which to append\n * @property {boolean} [show=true] Show element after creation\n * @property {boolean} [skipQueue=false] Skip queue\n */\n\nclass SnackbarQueueItem {\n  /**\n   * @param {Element} element\n   * @param {SnackbarCreateOptions} [options]\n   */\n  constructor(element, options) {\n    this.element = element;\n    this.options = options;\n    this.hideTimeout = null;\n  }\n\n  /** @return {void} */\n  clearHideTimeout() {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n      this.hideTimeout = null;\n    }\n  }\n}\n\n/** @type {SnackbarQueueItem[]} */\nconst SNACKBAR_QUEUE = [];\n\nexport const HIDE_EVENT = 'mdw:snackbar-hide';\nexport const SHOW_EVENT = 'mdw:snackbar-show';\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function attach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.attach(button);\n    button.addEventListener('click', onButtonClick);\n  }\n  snackbarElement.setAttribute('mdw-js', '');\n  snackbarElement.addEventListener('animationend', onAnimationEnd);\n  snackbarElement.addEventListener('keydown', onKeyDown);\n  setupARIA(snackbarElement);\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function setupARIA(snackbarElement) {\n  if (snackbarElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  snackbarElement.setAttribute('role', 'alert');\n  snackbarElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    // Allow users to close snackbar with escape, for accessibilty reasons\n    event.stopPropagation();\n    event.preventDefault();\n    /** @type {Element} */\n    const snackbarElement = (event.currentTarget);\n    hide(snackbarElement);\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function detach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.detach(button);\n    button.removeEventListener('click', onButtonClick);\n  }\n  // Remove timeouts and stacks\n  SNACKBAR_QUEUE.slice().reverse().forEach((queue, reverseIndex, array) => {\n    if (queue.element === snackbarElement) {\n      queue.clearHideTimeout();\n      const index = array.length - reverseIndex - 1;\n      SNACKBAR_QUEUE.splice(index, 1);\n    }\n  });\n  snackbarElement.removeAttribute('mdw-js');\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onButtonClick(event) {\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (buttonElement instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const snackbarElement = findElementParentByClassName(buttonElement, 'mdw-snackbar');\n  hide(snackbarElement);\n}\n\n/**\n * @param {Element} element\n * @return {SnackbarQueueItem}\n */\nexport function findNextQueueItem(element) {\n  let queue = null;\n  SNACKBAR_QUEUE.some((q) => {\n    if (q.element === element) {\n      queue = q;\n      return true;\n    }\n    return false;\n  });\n  return queue;\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  handleAnimationChange(/** @type {Element} */ (event.currentTarget));\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function handleAnimationChange(snackbarElement) {\n  const showing = snackbarElement.getAttribute('aria-hidden') === 'false';\n  if (showing) {\n    const currentQueueItem = findNextQueueItem(snackbarElement);\n    if (currentQueueItem && currentQueueItem.hideTimeout) {\n      return;\n    }\n    const autoHideString = snackbarElement.getAttribute('mdw-autohide');\n    if (autoHideString == null) {\n      return;\n    }\n    const timeInSeconds = parseFloat(autoHideString) || 4;\n    if (timeInSeconds < 0) {\n      return;\n    }\n    const timeout = setTimeout(() => {\n      hide(snackbarElement);\n    }, timeInSeconds * 1000);\n    if (currentQueueItem) {\n      currentQueueItem.hideTimeout = timeout;\n    }\n    return;\n  }\n\n  const nextQueueItem = findNextQueueItem(snackbarElement);\n  if (nextQueueItem) {\n    update(snackbarElement, nextQueueItem.options);\n    show(snackbarElement);\n    return;\n  }\n  if (snackbarElement.hasAttribute('mdw-autodestroy')) {\n    if (snackbarElement.parentElement) {\n      snackbarElement.parentElement.removeChild(snackbarElement);\n    }\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {boolean} changed\n */\nexport function hide(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, HIDE_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'true');\n  const currentQueueItem = findNextQueueItem(snackbarElement);\n  if (currentQueueItem) {\n    SNACKBAR_QUEUE.splice(SNACKBAR_QUEUE.indexOf(currentQueueItem), 1);\n  }\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {?Element} snackbarElement\n * @return {boolean} changed\n */\nexport function show(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'false') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, SHOW_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'false');\n  attach(snackbarElement);\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {SnackbarCreateOptions} options\n * @return {void}\n */\nexport function update(element, options) {\n  element.classList.add('mdw-snackbar');\n  if (!element.classList.contains('mdw-theme')) {\n    // Guidelines conflict stating a background should be fully opaque\n    // But says spec says to use #000000 with 87% opacity\n    // Calculated against white, opaque value is #212121 (Gray-900)\n    element.classList.add('mdw-theme');\n    element.setAttribute('mdw-surface', 'background 900');\n    element.setAttribute('mdw-dark', '');\n  }\n  let span = element.getElementsByTagName('span')[0];\n  if (span) {\n    // To trigger screen readers, we destroy and create a new span and textnode\n    span.parentElement.removeChild(span);\n  }\n  span = document.createElement('span');\n  if (element.firstChild) {\n    element.insertBefore(span, element.firstChild);\n  } else {\n    element.appendChild(span);\n  }\n  const textNode = document.createTextNode(options.text);\n  span.appendChild(textNode);\n  let button = element.getElementsByClassName('mdw-button')[0];\n  if (options.buttonText) {\n    if (!button) {\n      button = document.createElement('a');\n      element.appendChild(button);\n    }\n    setTextNode(button, options.buttonText);\n    button.classList.add('mdw-button');\n    if (typeof options.buttonInk === 'undefined') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', 'secondary');\n    } else if (typeof options.buttonInk === 'string') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', options.buttonInk);\n    } else {\n      // Don't set attribute if null is passed\n    }\n  } else if (button && button.parentElement) {\n    button.parentElement.removeChild(button);\n  }\n  if (options.stacked) {\n    element.setAttribute('mdw-stacked', '');\n  }\n  if (options.autoHide !== false) {\n    let timeInSeconds;\n    if (options.autoHide === true) {\n      timeInSeconds = 4;\n    } else if (options.autoHide == null) {\n      timeInSeconds = 4;\n    } else {\n      timeInSeconds = options.autoHide;\n    }\n    if (timeInSeconds > 0) {\n      element.setAttribute('mdw-autohide', timeInSeconds.toString());\n    }\n  }\n  if (options.autoDestroy !== false) {\n    element.setAttribute('mdw-autodestroy', '');\n  }\n}\n\n/**\n * Creates a Snackbar element if required and adds to show queue\n * @param {SnackbarCreateOptions} options\n * @return {HTMLElement}\n */\nexport function create(options) {\n  let element;\n  let newlyCreated = false;\n  if (options.parent) {\n    /** @type {HTMLElement} */\n    element = (options.parent.getElementsByClassName('mdw-snackbar')[0]);\n  }\n  if (!element) {\n    element = document.createElement('div');\n    if (options.parent) {\n      options.parent.appendChild(element);\n    }\n    newlyCreated = true;\n  }\n  const queue = new SnackbarQueueItem(element, options);\n  if (options.skipQueue) {\n    SNACKBAR_QUEUE.splice(0, 0, queue);\n  } else {\n    SNACKBAR_QUEUE.push(queue);\n  }\n\n  if (options.show !== false) {\n    if (newlyCreated) {\n      // Update after show to trigger a text change\n      update(element, options);\n      show(element);\n      update(element, options);\n    } else {\n      show(element);\n    }\n  }\n  return element;\n}\n","import * as ListContent from './content';\nimport { iterateArrayLike, getChildElementByClass } from '../../core/dom';\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attach(listItemElement) {\n  attachCore(listItemElement);\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.attach);\n  if (listItemElement.hasAttribute('aria-expanded')) {\n    if (!listItemElement.hasAttribute('mdw-expander-js')) {\n      listItemElement.setAttribute('mdw-pre-expander-js', '');\n      setTimeout(() => {\n        if (listItemElement.hasAttribute('mdw-pre-expander-js')) {\n          listItemElement.removeAttribute('mdw-pre-expander-js');\n          listItemElement.setAttribute('mdw-expander-js', '');\n        }\n      }, 500);\n    }\n    setExpanded(listItemElement, isExpanded(listItemElement));\n  }\n  listItemElement.addEventListener(ListContent.ACTIVATE_EVENT, onChildContentActivate);\n  listItemElement.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attachCore(listItemElement) {\n  setupAria(listItemElement);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {boolean}\n */\nexport function isExpanded(listItemElement) {\n  return (listItemElement.getAttribute('aria-expanded') === 'true');\n}\n\n/**\n * @param {Element} listItemElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(listItemElement, value) {\n  listItemElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n  iterateArrayLike(listItemElement.querySelectorAll('[role=\"treeitem\"]'), (treeitem) => {\n    treeitem.setAttribute('mdw-skip-tab', value ? 'false' : 'true');\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onChildContentActivate(event) {\n  /** @type {HTMLElement} */\n  const activatedElement = (event.target);\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!activatedElement || activatedElement.parentElement !== element) {\n    return;\n  }\n  if (element.hasAttribute('aria-expanded')) {\n    event.stopPropagation();\n    setExpanded(element, !isExpanded(element));\n  }\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function setupAria(listItemElement) {\n  let isTreeItem = null;\n  let roleIsNone = false;\n  if (!listItemElement.hasAttribute('role')) {\n    if (listItemElement.hasAttribute('aria-expanded')) {\n      listItemElement.setAttribute('role', 'treeitem');\n      isTreeItem = true;\n      roleIsNone = false;\n    } else {\n      listItemElement.setAttribute('role', 'none');\n      isTreeItem = false;\n      roleIsNone = true;\n    }\n  }\n  if (isTreeItem !== false || listItemElement.getAttribute('role') === 'treeitem') {\n    const activatorContent = getChildElementByClass(listItemElement, 'mdw-list__content');\n    if (activatorContent && !activatorContent.hasAttribute('role')) {\n      activatorContent.setAttribute('role', 'none');\n    }\n  }\n  if (!roleIsNone) {\n    return;\n  }\n  const parentRole = listItemElement.parentElement && listItemElement.parentElement.getAttribute('role');\n  if (!parentRole) {\n    return;\n  }\n  const contentChild = getChildElementByClass(listItemElement, 'mdw-list__content');\n  if (!contentChild) {\n    return;\n  }\n  if (contentChild.hasAttribute('role')) {\n    return;\n  }\n  switch (parentRole) {\n    case 'listbox':\n      contentChild.setAttribute('role', 'option');\n      break;\n    case 'radiogroup':\n      contentChild.setAttribute('role', 'radio');\n      break;\n    case 'group':\n    case 'tree':\n    case 'treeitem':\n      contentChild.setAttribute('role', 'treeitem');\n      break;\n    default:\n    case 'list':\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  if (document.activeElement !== event.currentTarget) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  if (!element.hasAttribute('aria-expanded')) {\n    return;\n  }\n  const activatorContent = getChildElementByClass(element, 'mdw-list__content');\n  if (!activatorContent) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  activatorContent.dispatchEvent(newEvent);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function detach(listItemElement) {\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.detach);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#grid\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  findElementParentByClassName,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  if (!element.hasAttribute('role')) {\n    element.setAttribute('role', 'grid');\n  }\n  element.setAttribute('mdw-js', '');\n  const headerRow = getHeaderRow(element);\n  const tbody = getTableBody(element);\n  const cellFocusable = element.hasAttribute('mdw-cell-focusable');\n  const rowFocusable = element.hasAttribute('mdw-row-focusable');\n\n  headerRow.addEventListener('click', onHeaderRowClick);\n  tbody.addEventListener('keydown', onTableBodyKeyDown);\n  tbody.addEventListener('click', onTableBodyClick);\n  /** @type {HTMLTableRowElement} */\n  let firstRow = null;\n  let foundTabbableRow = false;\n  /** @type {HTMLTableCellElement} */\n  let firstCell = null;\n  let foundTabbableCell = false;\n  iterateArrayLike(tbody.rows, (row) => {\n    if (rowFocusable) {\n      if (!firstRow) {\n        firstRow = row;\n      }\n      if (!foundTabbableRow && row.getAttribute('tabindex') === '0') {\n        foundTabbableRow = true;\n      } else {\n        row.setAttribute('tabindex', '-1');\n      }\n    } else {\n      row.removeAttribute('tabindex');\n    }\n    iterateArrayLike(row.cells, (cell) => {\n      if (cellFocusable && !rowFocusable) {\n        if (!firstCell) {\n          firstCell = cell;\n        }\n        if (!foundTabbableCell && cell.getAttribute('tabindex') === '0') {\n          foundTabbableCell = true;\n        } else {\n          cell.setAttribute('tabindex', '-1');\n        }\n      } else {\n        cell.removeAttribute('tabindex');\n      }\n    });\n  });\n  if (rowFocusable && !foundTabbableRow && firstRow) {\n    updateTabIndex(firstRow, false);\n  } else if (cellFocusable && !foundTabbableCell && firstCell) {\n    updateTabIndex(firstCell, false);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onTableBodyClick(event) {\n  /** @type {HTMLTableSectionElement} */\n  const tbody = (event.currentTarget);\n  const mdwDataTable = findElementParentByClassName(tbody, 'mdw-datatable');\n  const { target } = event;\n  let cell = null;\n  /** @type {HTMLTableRowElement} */\n  let row = null;\n\n  if (target instanceof HTMLInputElement && target.type === 'checkbox') {\n    if (mdwDataTable.hasAttribute('mdw-datatable-adapter')) {\n      return;\n    }\n    // Checkbox clicked\n    cell = findParentCell(target);\n    if (!cell.hasAttribute('mdw-selector')) {\n      return;\n    }\n    event.stopPropagation();\n    /** @type {HTMLTableRowElement} */\n    row = (cell.parentElement);\n    let hasSelection = false;\n    if (target.checked) {\n      row.setAttribute('aria-selected', 'true');\n      hasSelection = true;\n    } else {\n      row.setAttribute('aria-selected', 'false');\n      /** @type {NodeListOf<HTMLInputElement>} */\n      const checkboxes = (mdwDataTable.querySelectorAll('td[mdw-selector] input[type=checkbox]'));\n      hasSelection = iterateSomeOfArrayLike(checkboxes, checkbox => checkbox.checked);\n    }\n    if (hasSelection) {\n      mdwDataTable.setAttribute('mdw-has-selection', '');\n    } else {\n      mdwDataTable.removeAttribute('mdw-has-selection');\n    }\n    return;\n  }\n  if (target instanceof HTMLTableRowElement) {\n    row = target;\n  } else if (target instanceof HTMLTableCellElement) {\n    cell = target;\n  } else {\n    cell = findParentCell(/** @type {Element} */ (target));\n  }\n\n  if (cell) {\n    /** @type {HTMLTableRowElement} */\n    row = (cell.parentElement);\n    const cellFocusable = mdwDataTable.hasAttribute('mdw-cell-focusable');\n    if (cellFocusable) {\n      updateTabIndex(cell);\n      return;\n    }\n  }\n  if (row) {\n    const rowFocusable = mdwDataTable.hasAttribute('mdw-row-focusable');\n    if (rowFocusable) {\n      updateTabIndex(row);\n    }\n  }\n}\n\n/**\n * @param {HTMLTableRowElement|HTMLTableCellElement} element\n * @param {boolean} [removeOtherTabIndexes=true]\n * @return {void}\n */\nexport function updateTabIndex(element, removeOtherTabIndexes) {\n  if (removeOtherTabIndexes !== false) {\n    /** @type {HTMLElement} */\n    let tbody = element;\n    while (tbody != null && tbody instanceof HTMLTableSectionElement === false) {\n      tbody = tbody.parentElement;\n    }\n    if (element instanceof HTMLTableCellElement) {\n      iterateArrayLike(tbody.querySelectorAll('td[tabindex=\"0\"]'), (td) => {\n        if (td !== element) {\n          td.setAttribute('tabindex', '-1');\n        }\n      });\n    }\n    if (element instanceof HTMLTableRowElement) {\n      iterateArrayLike(tbody.querySelectorAll('tr[tabindex=\"0\"]'), (tr) => {\n        if (tr !== element) {\n          tr.setAttribute('tabindex', '-1');\n        }\n      });\n    }\n  }\n  if (element.getAttribute('tabindex') !== '0') {\n    element.setAttribute('tabindex', '0');\n    dispatchDomEvent(element, 'mdw:tabindexchanged');\n  }\n}\n\n/**\n * @param {Element} element\n * @return {HTMLTableCellElement}\n */\nexport function findParentCell(element) {\n  let el = element;\n  while (el != null) {\n    if (el instanceof HTMLTableElement) {\n      return null;\n    }\n    if (el instanceof HTMLTableCellElement) {\n      return el;\n    }\n    el = el.parentElement;\n  }\n  return null;\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onHeaderRowClick(event) {\n  /** @type {HTMLElement} */\n  const targetElement = (event.target);\n  const cell = findParentCell(targetElement);\n  if (!cell) {\n    return;\n  }\n  if (cell.cellIndex === -1) {\n    return;\n  }\n  if (!cell.hasAttribute('mdw-sortable')) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const headerRow = (event.currentTarget);\n  const mdwTable = findElementParentByClassName(headerRow, 'mdw-datatable');\n  if (!mdwTable) {\n    return;\n  }\n  if (mdwTable.hasAttribute('mdw-datatable-adapter')) {\n    return;\n  }\n  let ascending = true;\n  if (cell.hasAttribute('mdw-sorted') && !cell.getAttribute('mdw-sorted')) {\n    ascending = false;\n  }\n  if (ascending) {\n    cell.setAttribute('mdw-sorted', '');\n  } else {\n    cell.setAttribute('mdw-sorted', 'desc');\n  }\n  iterateArrayLike(cell.parentElement.getElementsByTagName('th'), (th) => {\n    if (th !== cell) {\n      th.removeAttribute('mdw-sorted');\n    }\n  });\n\n  /** @type {HTMLTableSectionElement} */\n  const tbody = getTableBody(mdwTable);\n  const rows = [];\n  for (let i = tbody.rows.length - 1; i >= 0; i -= 1) {\n    rows.push(tbody.rows.item(i));\n    tbody.deleteRow(i);\n  }\n  rows.sort((a, b) => {\n    const aCell = a.cells.item(cell.cellIndex);\n    const bCell = b.cells.item(cell.cellIndex);\n    const aText = aCell.textContent;\n    const bText = bCell.textContent;\n    if (aCell.dataset.type === 'number') {\n      return parseFloat(bText) - parseFloat(aText);\n    }\n    return bText.localeCompare(aText);\n  });\n  if (ascending) {\n    rows.reverse();\n  }\n  const fragment = document.createDocumentFragment();\n  rows.forEach((row) => {\n    fragment.appendChild(row);\n  });\n  tbody.appendChild(fragment);\n  event.stopPropagation();\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onTableBodyKeyDown(event) {\n  const currentSelection = document.activeElement;\n  let cellIndex = 0;\n  /** @type {HTMLTableRowElement} */\n  let row = null;\n  let isRow = false;\n  /** @type {HTMLTableRowElement|HTMLTableCellElement} */\n  let nextSelection = null;\n  if (currentSelection instanceof HTMLTableCellElement) {\n    ({ cellIndex } = currentSelection);\n    /** @type {HTMLTableRowElement} */\n    row = (currentSelection.parentElement);\n  } else if (currentSelection instanceof HTMLTableRowElement) {\n    isRow = true;\n    row = currentSelection;\n  }\n  if (!row) {\n    return;\n  }\n  /** @type {HTMLTableSectionElement} */\n  const tbody = (event.currentTarget);\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    if (row.sectionRowIndex === 0) {\n      return;\n    }\n    const newRow = tbody.rows.item(row.sectionRowIndex - 1);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(cellIndex);\n    }\n  } else if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    const newIndex = row.sectionRowIndex + 1;\n    if (newIndex >= tbody.rows.length) {\n      return;\n    }\n    const newRow = tbody.rows.item(newIndex);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(cellIndex);\n    }\n  } else if (event.ctrlKey && event.key === 'Home') {\n    if (row.sectionRowIndex === 0 && cellIndex === 0) {\n      return;\n    }\n    const newRow = tbody.rows.item(0);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(0);\n    }\n  } else if (event.ctrlKey && event.key === 'End') {\n    const newRowIndex = tbody.rows.length - 1;\n    let newCellIndex = 0;\n    if (!isRow) {\n      newCellIndex = row.cells.length - 1;\n    }\n    if (row.sectionRowIndex === newRowIndex && cellIndex === newCellIndex) {\n      return;\n    }\n    const newRow = tbody.rows.item(newRowIndex);\n    if (isRow) {\n      nextSelection = newRow;\n    } else {\n      nextSelection = newRow.cells.item(newCellIndex);\n    }\n  } else if (event.key === 'Home') {\n    if (isRow) {\n      return;\n    }\n    if (cellIndex === 0) {\n      return;\n    }\n    nextSelection = row.cells.item(0);\n  } else if (event.key === 'End') {\n    if (isRow) {\n      return;\n    }\n    const newIndex = row.cells.length - 1;\n    if (newIndex === cellIndex) {\n      return;\n    }\n    nextSelection = row.cells.item(newIndex);\n  } else {\n    const isRtlEnabled = isRtl();\n    let isLeft = false;\n    let isRight = false;\n    if (event.key === 'ArrowLeft' || (event.key === 'Left')) {\n      if (isRtlEnabled) {\n        isRight = true;\n      } else {\n        isLeft = true;\n      }\n    }\n    if (event.key === 'ArrowRight' || (event.key === 'Right')) {\n      if (isRtlEnabled) {\n        isLeft = true;\n      } else {\n        isRight = true;\n      }\n    }\n    if (isLeft) {\n      if (isRow) {\n        return;\n      }\n      if (cellIndex === 0) {\n        return;\n      }\n      nextSelection = row.cells.item(cellIndex - 1);\n    } else if (isRight) {\n      if (isRow) {\n        return;\n      }\n      const newIndex = cellIndex + 1;\n      if (newIndex >= row.cells.length) {\n        return;\n      }\n      nextSelection = row.cells.item(newIndex);\n    }\n  }\n  if (nextSelection) {\n    event.stopPropagation();\n    event.preventDefault();\n    currentSelection.setAttribute('tabindex', '-1');\n    nextSelection.focus();\n    updateTabIndex(nextSelection, false);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-js');\n  const headerRow = getHeaderRow(element);\n  const tbody = getTableBody(element);\n  headerRow.removeEventListener('click', onHeaderRowClick);\n  tbody.removeEventListener('keydown', onTableBodyKeyDown);\n  tbody.removeEventListener('click', onTableBodyClick);\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLElement}\n */\nexport function getScroller(datatableElement) {\n  /** @type {HTMLElement} */\n  let scroller = (datatableElement.getElementsByClassName('mdw-datatable__scroller')[0]);\n  if (!scroller) {\n    scroller = document.createElement('div');\n    scroller.classList.add('mdw-datatable__scroller');\n    const footer = datatableElement.getElementsByClassName('mdw-datatable__footer')[0];\n    if (footer) {\n      datatableElement.insertBefore(scroller, footer);\n    } else {\n      datatableElement.appendChild(scroller);\n    }\n    // Move table into scroller if it exists\n    const table = datatableElement.getElementsByTagName('table')[0];\n    if (table) {\n      table.parentElement.removeChild(table);\n      scroller.appendChild(table);\n    }\n  }\n  return scroller;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableElement}\n */\nexport function getTable(datatableElement) {\n  if (datatableElement instanceof HTMLTableElement) {\n    return datatableElement;\n  }\n  let table = datatableElement.getElementsByTagName('table')[0];\n  if (!table) {\n    const scroller = getScroller(datatableElement);\n    table = document.createElement('table');\n    scroller.appendChild(table);\n  }\n  return table;\n}\n\n/**\n * @param {Element} tableElement\n * @return {HTMLTableRowElement}\n */\nexport function getHeaderRow(tableElement) {\n  let thead = tableElement.getElementsByTagName('thead')[0];\n  if (!thead) {\n    const table = getTable(tableElement);\n    thead = document.createElement('thead');\n    table.appendChild(thead);\n  }\n  let headerRow = thead.getElementsByTagName('tr')[0];\n  if (!headerRow) {\n    headerRow = document.createElement('tr');\n    thead.appendChild(headerRow);\n  }\n  return headerRow;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableSectionElement}\n */\nexport function getTableBody(datatableElement) {\n  let tbody = datatableElement.getElementsByTagName('tbody')[0];\n  if (!tbody) {\n    const table = getTable(datatableElement);\n    tbody = document.createElement('tbody');\n    table.appendChild(tbody);\n  }\n  return tbody;\n}\n","import { dispatchDomEvent } from '../dom';\n\n/**\n * @param {string} name Attribute Name\n * @param {Element} element Element\n * @param {string|boolean} value Boolean Attribute Value\n * @param {string} [dispatchEventName] OnChangeEvent\n * @param {boolean} [explicit=true]\n * @param {string} [emptyValue=false] Default empty value\n * @return {boolean} successful\n */\nfunction setAttribute(name, element, value, dispatchEventName, explicit = true, emptyValue = 'false') {\n  const attr = element.getAttribute(name);\n  let stringValue;\n  if (typeof value === 'string') {\n    stringValue = value;\n  } else {\n    stringValue = (value ? 'true' : 'false');\n  }\n  if (attr === stringValue) {\n    // Nothing to change\n    return true;\n  }\n  if (stringValue === emptyValue) {\n    // Set default empty value\n    if (attr == null) {\n      // No attribute set\n      if (explicit) {\n        // Explicitly set attribute\n        element.setAttribute(name, stringValue);\n      }\n      return true;\n    }\n    if (!explicit) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, stringValue);\n    }\n  } else {\n    // Non default value;\n    element.setAttribute(name, stringValue);\n  }\n  if (!dispatchEventName) {\n    return true;\n  }\n  // Alert change\n  if (!dispatchDomEvent(element, dispatchEventName, { value: stringValue })) {\n    // Revert\n    if (attr == null) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, attr);\n    }\n    return false;\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setCurrent(element, value, dispatchEventName) {\n  // Some browsers incorrectly style [aria-current=\"false\"]\n  // Attribute will be removed when false|\"false\"\n  return setAttribute('aria-current', element, value, dispatchEventName, false);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  return setAttribute('aria-selected', element, value, dispatchEventName);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setChecked(element, value, dispatchEventName) {\n  return setAttribute('aria-checked', element, value, dispatchEventName);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as Attributes from './attributes';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'tab');\n  element.setAttribute('mdw-aria-tab-js', '');\n  element.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-tab-js');\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  if (Attributes.setSelected(element, value, dispatchEventName)) {\n    Attributes.setCurrent(element, value);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Remap Space and Enter as Click\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  element.dispatchEvent(newEvent);\n}\n","/** @return {HTMLElement} */\nfunction AnyDomAdapterCreatorFn() {\n  return document.createElement('div');\n}\n\n/**\n * @param {HTMLElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyDomAdapterRendererFn(element, data) {\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      // eslint-disable-next-line no-new-wrappers\n      s = new String(data).toString();\n    }\n  }\n  if (element.textContent !== s) {\n    // eslint-disable-next-line no-param-reassign\n    element.textContent = s;\n  }\n}\n\n/**\n * @template T1\n * @template {HTMLElement} T2\n */\nexport default class DomAdapter {\n  /**\n   * @param {HTMLElement} element\n   * @param {Array<T1>} datasource\n   * @param {function(T2, T1):void} [renderFn={function(HTMLElement,T1):void}]\n   * @param {function():T2} [createFn={function():HTMLElement}]\n   */\n  constructor(element, datasource, renderFn, createFn) {\n    this.element = element;\n    this.datasource = datasource;\n    /** @type {Map<T1, T2>} */\n    this.map = new Map();\n    /** @type {WeakMap<T2, T1>} */\n    this.elementMap = new Map();\n    this.render = renderFn || AnyDomAdapterRendererFn;\n    this.create = createFn || AnyDomAdapterCreatorFn;\n  }\n\n  /** @return {void} */\n  refresh() {\n    /** @type {T1[]} */\n    const unlinkedDataItems = [];\n    this.map.forEach((element, data) => {\n      if (this.datasource.indexOf(data) === -1) {\n        unlinkedDataItems.push(data);\n      }\n    });\n    unlinkedDataItems.forEach((data) => {\n      this.removeItem(data);\n    });\n    this.datasource.forEach((data) => {\n      this.refreshItem(data);\n    });\n  }\n\n  /** @return {void} */\n  clear() {\n    this.map.clear();\n    this.elementMap = new WeakMap();\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild);\n    }\n  }\n\n  /**\n   * @param {T1} data\n   * @param {boolean} [checkPosition=true]\n   * @return {void}\n   */\n  refreshItem(data, checkPosition = true) {\n    const index = this.datasource.indexOf(data);\n    if (index === -1) {\n      this.removeItem(data);\n      return;\n    }\n    let elementIndex = -1;\n    let element = this.map.get(data);\n    if (!element) {\n      // @ts-ignore\n      element = this.create();\n      this.map.set(data, element);\n      this.elementMap.set(element, data);\n    } else if (checkPosition) {\n      elementIndex = index;\n    } else {\n      let sibling = this.element.firstChild;\n      let siblingIndex = -1;\n      while (sibling) {\n        siblingIndex += 1;\n        if (sibling === element) {\n          elementIndex = siblingIndex;\n          break;\n        }\n        sibling = sibling.nextSibling;\n      }\n    }\n    this.render(element, data);\n    if (elementIndex === index) {\n      return;\n    }\n    if (elementIndex !== -1 && element.parentElement) {\n      element.parentElement.removeChild(element);\n      this.elementMap.delete(element);\n    }\n    let idx = index;\n    let nextDataObject = this.datasource[idx + 1];\n    while (nextDataObject) {\n      const nextElement = this.map.get(nextDataObject);\n      if (nextElement) {\n        this.element.insertBefore(element, nextElement);\n        return;\n      }\n      idx += 1;\n      nextDataObject = this.datasource[idx + 1];\n    }\n    this.element.appendChild(element);\n  }\n\n  /**\n   * @param {T1} data\n   * @return {void}\n   */\n  removeItem(data) {\n    const element = this.map.get(data);\n    if (!element) {\n      return;\n    }\n    if (element.parentElement) {\n      element.parentElement.removeChild(element);\n    }\n    this.map.delete(data);\n    this.elementMap.delete(element);\n  }\n\n  detach() {\n    this.element = null;\n    this.datasource = null;\n  }\n}\n","import DomAdapter from '../dom/index';\nimport * as ListItem from '../../components/list/item';\n\n/**\n * @param {HTMLLIElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyListAdapterRendererFn(element, data) {\n  let primaryText = element.getElementsByClassName('mdw-list__text')[0];\n  if (!primaryText) {\n    let contentElement = element.getElementsByClassName('mdw-list__content')[0];\n    if (!contentElement) {\n      contentElement = document.createElement('div');\n      contentElement.className = 'mdw-list__content';\n      element.appendChild(contentElement);\n    }\n    primaryText = document.createElement('div');\n    primaryText.className = 'mdw-list__text';\n    contentElement.appendChild(primaryText);\n    ListItem.attach(element);\n  }\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      s = new String(data).toString(); // eslint-disable-line no-new-wrappers\n    }\n  }\n  if (primaryText.textContent !== s) {\n    primaryText.textContent = s;\n  }\n}\n\n/**\n * @template T\n * @extends {DomAdapter<T, HTMLLIElement>}\n * */\nexport default class ListAdapter extends DomAdapter {\n  /**\n   * @param {HTMLElement} element\n   * @param {Array<T>} datasource\n   * @param {function(HTMLLIElement, T):void} [renderFn]\n   */\n  constructor(element, datasource, renderFn) {\n    super(element, datasource, renderFn, ListAdapter.create);\n    this.render = renderFn || AnyListAdapterRendererFn;\n  }\n\n  static create() {\n    const element = document.createElement('li');\n    element.classList.add('mdw-list__item');\n    return element;\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport { iterateArrayLike } from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as BottomNavItem from './item';\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function attach(bottomnavElement) {\n  setupARIA(bottomnavElement);\n  /** @type {Element} */\n  let selectedItem;\n  const items = bottomnavElement.getElementsByClassName('mdw-bottomnav__item');\n\n  iterateArrayLike(items, (item) => {\n    BottomNavItem.attach(item);\n    if (!selectedItem && item.getAttribute('aria-selected') === 'true') {\n      selectedItem = item;\n    }\n  });\n  if (!selectedItem) {\n    selectedItem = items[0];\n  }\n  if (selectedItem) {\n    BottomNavItem.setSelected(selectedItem, true, true);\n  }\n  bottomnavElement.addEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  bottomnavElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  bottomnavElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(bottomnavElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectNext(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function setupARIA(bottomnavElement) {\n  bottomnavElement.setAttribute('role', 'tablist');\n  bottomnavElement.setAttribute('aria-multiselectable', 'false');\n  bottomnavElement.setAttribute('aria-orientation', 'horizontal');\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function detach(bottomnavElement) {\n  bottomnavElement.removeEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.removeEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  bottomnavElement.removeEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  bottomnavElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  iterateArrayLike(bottomnavElement.getElementsByClassName('mdw-bottomnav__item'), BottomNavItem.detach);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  iterateArrayLike(bottomnavElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      BottomNavItem.setSelected(item, false);\n    }\n  });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#combobox\n\nimport { iterateSomeOfArrayLike, iterateArrayLike, getTextNode } from '../../core/dom';\n\nimport * as List from '../../components/list/index';\nimport * as ListContent from '../../components/list/content';\nimport * as TextField from '../../components/textfield/index';\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction containsTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) !== -1;\n}\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction startsWithTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) === 0;\n}\n\n/**\n * @param {Element} item\n * @return {string}\n */\nfunction defaultItemTextParser(item) {\n  if (item.hasAttribute('data-mdw-search-text')) {\n    return item.getAttribute('data-mdw-search-text');\n  }\n  let textElement;\n  [\n    'mdw-list__text-line',\n    'mdw-list__text',\n    'mdw-list__content',\n  ].some((className) => {\n    textElement = item.getElementsByClassName(className)[0];\n    return textElement != null;\n  });\n\n  const textNode = textElement ? getTextNode(textElement) : getTextNode(item);\n  if (textNode) {\n    return textNode.textContent || '';\n  }\n  return '';\n}\n\n/**\n * @param {Element} list\n * @param {boolean} [backwards=false]\n * @return {Element} sibling\n */\nfunction selectSibling(list, backwards) {\n  const current = list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n  const items = list.querySelectorAll('[role=\"option\"]:not([aria-hidden=\"true\"]):not([disabled])');\n  let sibling;\n  if (current && current.getAttribute('aria-hidden') !== 'true') {\n    iterateSomeOfArrayLike(items, (item, index) => {\n      if (item !== current) {\n        return false;\n      }\n      if (backwards) {\n        sibling = items[index - 1];\n      } else {\n        sibling = items[index + 1];\n      }\n      return true;\n    });\n  } else if (backwards) {\n    sibling = items[items.length - 1];\n  } else {\n    sibling = items[0];\n  }\n  if (sibling && sibling !== current) {\n    if (current) {\n      current.setAttribute('aria-selected', 'false');\n    }\n    sibling.setAttribute('aria-selected', 'true');\n    return sibling;\n  }\n  return null;\n}\n\n/**\n * @param {Element} listItem\n * @return {void}\n */\nfunction scrollItemIntoView(listItem) {\n  /**\n   * @param {Element} el\n   * @return {number}\n   */\n  function getElementVisibility(el) {\n    let rect = el.getBoundingClientRect();\n    const { top, height } = rect;\n    let next = el.parentElement;\n    do {\n      rect = next.getBoundingClientRect();\n      if ((top + height) > rect.bottom) {\n        // bottom clipped\n        return 1;\n      }\n      if (top < rect.top) {\n        // top clipped\n        return -1;\n      }\n      next = next.parentElement;\n    } while (next !== document.body);\n    if (top < 0) {\n      return -1;\n    }\n    if ((top + height) > document.documentElement.clientHeight) {\n      return 1;\n    }\n    return 0;\n  }\n  const visibility = getElementVisibility(listItem);\n  if (visibility < 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  } else if (visibility > 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  }\n}\n\n/**\n * @callback SearchAdapterTextFilter\n * @param {string} input\n * @param {string} content\n * @return {boolean} passes\n */\n\n/**\n * @template T\n * @typedef SearchAdapterOptions\n * @prop {Element} textfield\n * @prop {Element} list\n * @prop {('contains'|'startsWith'|SearchAdapterTextFilter)} [textFilter='contains']\n * @prop {function(Element):string} [itemTextParser]\n * @prop {boolean} [dropdown=false]\n * @prop {boolean} [filterItems=true]\n * @prop {('replace'|'append'|'none')} [suggestionMethod='replace']\n * @prop {function(string, function(T[]=), function(Error=)=):void} [performSearch]\n * @prop {function(T[], function(), function(Error=)):void} [updateList]\n * @prop {boolean} [searchOnFocus=true]\n * @prop {number} [debounce=null] Debounce time in milliseconds\n */\n\n/** @template T */\nexport default class SearchAdapter {\n  /** @param {SearchAdapterOptions<T>} options */\n  constructor(options) {\n    this.textfield = options.textfield;\n    this.list = options.list;\n    this.list.setAttribute('role', 'listbox');\n    List.attach(this.list);\n    if (typeof options.textFilter === 'function') {\n      this.filter = options.textFilter;\n    } else if (options.textFilter === 'startsWith') {\n      this.filter = startsWithTextFilter;\n    } else {\n      this.filter = containsTextFilter;\n    }\n    this.itemTextParser = defaultItemTextParser || options.itemTextParser;\n    /** @type {HTMLInputElement} */\n    const input = (this.textfield.getElementsByClassName('mdw-textfield__input')[0]);\n    this.input = input;\n    this.list.addEventListener(ListContent.ACTIVATE_EVENT, (event) => {\n      /** @type {HTMLElement} */\n      const item = (event.target);\n      this.onItemSelected(item);\n      const inputValue = this.input.value || '';\n      this.suggestedInput = inputValue;\n      this.input.setSelectionRange(inputValue.length, inputValue.length);\n      this.input.focus();\n      this.hideDropDown();\n    });\n    this.input.addEventListener('keydown', (event) => {\n      this.onTextFieldKeydownEvent(event);\n    });\n    this.input.addEventListener('input', (event) => {\n      if (this.handleInputEvent) {\n        this.handleInputEvent(event);\n      }\n    });\n    this.input.addEventListener('blur', (event) => {\n      if (this.handleBlurEvent) {\n        this.handleBlurEvent(event);\n      }\n    });\n    this.input.addEventListener('focus', (event) => {\n      if (this.searchOnFocus) {\n        this.handleInputEvent(event);\n      }\n    });\n\n    this.dropdown = options.dropdown;\n    if (options.filterItems !== false) {\n      this.filterItems = true;\n    }\n    if (options.searchOnFocus !== false) {\n      this.searchOnFocus = true;\n    }\n    this.debounce = options.debounce;\n    this.suggestionMethod = options.suggestionMethod || 'replace';\n    this.currentSearchTerm = this.input.value || '';\n    /** @type {string} */\n    this.suggestedInput = null;\n    /** @type {string} */\n    this.previousValue = null;\n    this.performSearch = options.performSearch || ((value, resolve = () => {}) => resolve());\n    this.updateList = options.updateList || ((results, resolve = () => {}) => resolve());\n  }\n\n  /**\n   * Default input handler\n   * @param {Event} [event]\n   * @return {void}\n   */\n  handleInputEvent(event) { // eslint-disable-line no-unused-vars\n    if (document.activeElement !== this.input) {\n      return;\n    }\n    const inputValue = this.input.value || '';\n    if (inputValue === this.suggestedInput) {\n      return;\n    }\n    this.showDropDown();\n    if (inputValue === this.previousValue) {\n      return;\n    }\n    this.previousValue = inputValue;\n    this.currentSearchTerm = inputValue;\n\n    /**\n     * @param {Error} error\n     * @return {void}\n     */\n    function onErrorCallback(error) {\n      if (error.message === 'debounced') {\n        return;\n      }\n      if (error.message === 'expired') {\n        return;\n      }\n      throw error;\n    }\n\n    // IE does not support ES6 Promises\n    // Using resolve/reject callbacks instead.\n    // Syntactically ugly, but removes need for a polyfill.\n    this.performDebounce(inputValue,\n      () => this.checkExpired(inputValue,\n        () => this.performSearch(inputValue,\n          searchResults => this.checkExpired(inputValue,\n            () => this.updateList(searchResults,\n              () => this.filterListItems(),\n              onErrorCallback),\n            onErrorCallback),\n          onErrorCallback),\n        onErrorCallback),\n      onErrorCallback);\n\n    /**\n     * Promise.resolve()\n     *   .then(() => this.performDebounce(inputValue))\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.performSearch(inputValue))\n     *   .then((searchResults) => {\n     *     results = searchResults;\n     *   })\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.updateList(results))\n     *   .then(() => this.filterListItems())\n     *   .catch((error) => {\n     *     if (error.message === 'debounced') {\n     *       return;\n     *     }\n     *     if (error.message === 'expired') {\n     *       return;\n     *     }\n     *     throw error;\n     *   });\n     */\n  }\n\n  /**\n   * @param {string} inputValue\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  checkExpired(inputValue, resolve, reject) {\n    if (inputValue === this.currentSearchTerm) {\n      resolve();\n    } else {\n      reject(new Error('expired'));\n    }\n  }\n\n  /**\n   * @param {string} searchTerm\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  performDebounce(searchTerm, resolve, reject) {\n    if (!this.debounce) {\n      resolve();\n      return;\n    }\n    setTimeout(() => {\n      if (searchTerm !== this.currentSearchTerm) {\n        reject(new Error('debounced'));\n        return;\n      }\n      resolve();\n    }, this.debounce);\n  }\n\n  /** @return {boolean} handled */\n  showDropDown() {\n    if (!this.dropdown) {\n      return false;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    let changed = false;\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.removeAttribute('mdw-hide');\n      changed = true;\n    }\n    if (!dropDownElement.hasAttribute('mdw-show')) {\n      dropDownElement.setAttribute('mdw-show', '');\n      changed = true;\n    }\n    return changed;\n  }\n\n  /** @return {boolean} handled */\n  isDropDownShown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      return false;\n    }\n    if (this.input === document.activeElement) {\n      return true;\n    }\n    if (dropDownElement.hasAttribute('mdw-show')) {\n      return true;\n    }\n    return false;\n  }\n\n  /** @return {boolean} handled */\n  hideDropDown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (!dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.setAttribute('mdw-hide', '');\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {Event|FocusEvent} event\n   * @return {void}\n   */\n  handleBlurEvent(event) { // eslint-disable-line no-unused-vars\n    if (this.dropdown) {\n      const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n      if (dropDownElement.hasAttribute('mdw-show')) {\n        dropDownElement.removeAttribute('mdw-show');\n      }\n    }\n  }\n\n  /**\n   * @param {Element} item\n   * @return {void}\n   */\n  onItemSelected(item) {\n    if (this.suggestionMethod === 'none') {\n      return;\n    }\n    let suggestion = this.itemTextParser(item);\n    if (suggestion) {\n      suggestion = suggestion.trim();\n    }\n    if (!suggestion) {\n      return;\n    }\n    this.suggestedInput = suggestion;\n    if (this.suggestionMethod === 'replace') {\n      TextField.setValue(this.textfield, suggestion);\n    } else if (this.suggestionMethod === 'append') {\n      const selectionStart = (this.previousValue || '').length;\n      const selectionEnd = suggestion.length;\n      TextField.setValue(this.textfield, suggestion);\n      this.input.setSelectionRange(selectionStart, selectionEnd);\n    }\n  }\n\n  /**\n   * @param {SearchAdapterTextFilter} [fnFilter]\n   * @return {void}\n   */\n  filterListItems(fnFilter) {\n    if (!this.filterItems) {\n      return;\n    }\n    const input = this.input.value;\n    const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n    const items = this.list.querySelectorAll('[role=\"option\"]');\n    let hasItem = false;\n    iterateArrayLike(items, (item) => {\n      const content = this.itemTextParser(item);\n      const fn = fnFilter || this.filter;\n      if (fn(input, content)) {\n        hasItem = true;\n        item.setAttribute('aria-hidden', 'false');\n      } else {\n        item.setAttribute('aria-hidden', 'true');\n      }\n    });\n    if (current && current.getAttribute('aria-hidden') === 'true') {\n      const newSelection = selectSibling(this.list);\n      if (newSelection) {\n        this.onItemSelected(newSelection);\n      }\n    }\n    if (!hasItem) {\n      this.hideDropDown();\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event\n   * @return {void}\n   */\n  onTextFieldKeydownEvent(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    if (event.ctrlKey || event.altKey) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowUp':\n      case 'Up': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, true);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'ArrowDown':\n      case 'Down': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, false);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'Esc':\n      case 'Escape': {\n        if (this.hideDropDown()) {\n          this.suggestedInput = this.previousValue;\n          TextField.setValue(this.textfield, this.previousValue);\n          event.stopPropagation();\n          event.preventDefault();\n        }\n        break;\n      }\n      case 'Enter': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n            event.preventDefault();\n          }\n        }\n        break;\n      }\n      case 'Tab': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n          }\n        }\n        break;\n      }\n      default:\n    }\n  }\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tabpanel\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function attach(tabPanelElement) {\n  tabPanelElement.setAttribute('role', 'tabpanel');\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function detach(tabPanelElement) {\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {boolean}\n */\nexport function isExpanded(tabPanelElement) {\n  return tabPanelElement.getAttribute('aria-expanded') === 'true';\n}\n\n/**\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n}\n\n/**\n * Hide element to avoid tabbing into next panel\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setHidden(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-hidden', value ? 'true' : 'false');\n}\n","import {\n  iterateArrayLike,\n  scrollToElement,\n  dispatchDomEvent,\n  getPassiveEventListenerOption,\n  isRtl,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\nimport * as TabPanel from './panel';\n\nexport const SCROLL_EVENT = 'mdw:tabcontent-scroll';\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function attach(tabContentElement) {\n  tabContentElement.addEventListener('scroll', onTabContentScroll, getPassiveEventListenerOption());\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.attach);\n  tabContentElement.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function detach(tabContentElement) {\n  tabContentElement.removeEventListener('keydown', onKeyDown);\n  tabContentElement.removeAttribute('mdw-selected-index');\n  tabContentElement.removeEventListener('scroll', onTabContentScroll);\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.detach);\n}\n\n/**\n * Prevent scrolling with keyboard\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      event.preventDefault();\n      break;\n    default:\n  }\n}\n\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabContentElement = (event.currentTarget);\n  if (tabContentElement.hasAttribute('mdw-no-scroll')) {\n    return;\n  }\n  const isPageRtl = isRtl();\n  const scrollPoint = tabContentElement.scrollLeft / tabContentElement.clientWidth;\n  let visibleIndex = Math.floor(scrollPoint);\n  let visibilityPercentage = scrollPoint - visibleIndex;\n\n  // Percentage may be incorrect due to floating point rounding errors\n  // Compare integer values provided by browser to check for 0\n  iterateSomeOfArrayLike(tabContentElement.children, ((/** @type {HTMLElement} */ panel, index) => {\n    if (tabContentElement.scrollLeft === panel.offsetLeft) {\n      visibleIndex = index;\n      visibilityPercentage = 0;\n      return true;\n    }\n    return false;\n  }));\n\n  const isResting = visibilityPercentage === 0;\n  let rightPanel;\n  let leftPeekPanel;\n  let rightPeekPanel;\n  let leftSelected = false;\n  let rightSelected = false;\n  let selectedIndex;\n  let leftPanelIndex;\n  if (isPageRtl) {\n    const lastIndex = tabContentElement.children.length - 1;\n    leftPanelIndex = lastIndex - visibleIndex;\n    leftPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex - 1));\n    rightPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 1));\n    rightPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 2));\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = lastIndex - visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = lastIndex - (visibleIndex + 1);\n    }\n  } else {\n    leftPanelIndex = visibleIndex;\n    rightPanel = tabContentElement.children.item(visibleIndex + 1);\n    leftPeekPanel = tabContentElement.children.item(visibleIndex - 1);\n    rightPeekPanel = tabContentElement.children.item(visibleIndex + 2);\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = visibleIndex + 1;\n    }\n  }\n  /** @type {HTMLElement} */\n  const leftPanel = (tabContentElement.children.item(leftPanelIndex));\n\n  const currentTargetIndexString = tabContentElement.getAttribute('mdw-target-index');\n  const currentTargetIndex = currentTargetIndexString == null\n    ? null : parseInt(currentTargetIndexString, 10);\n\n  let newSelectedIndex = null;\n  if (currentTargetIndex == null) {\n    TabPanel.setExpanded(leftPanel, leftSelected);\n    if (rightPanel) {\n      TabPanel.setExpanded(rightPanel, rightSelected);\n    }\n    newSelectedIndex = selectedIndex;\n  } else if (currentTargetIndex === selectedIndex) {\n    tabContentElement.removeAttribute('mdw-target-index');\n  }\n\n\n  TabPanel.setHidden(leftPanel, false);\n  if (leftPeekPanel) {\n    TabPanel.setHidden(leftPeekPanel, isResting || !leftSelected);\n  }\n  if (rightPanel) {\n    TabPanel.setHidden(rightPanel, isResting);\n  }\n  if (rightPeekPanel) {\n    TabPanel.setHidden(rightPeekPanel, isResting || !rightSelected);\n  }\n\n  dispatchDomEvent(tabContentElement, SCROLL_EVENT, {\n    newSelectedIndex,\n    leftPanelIndex,\n    visibilityPercentage,\n  });\n}\n\n/**\n * @param {HTMLElement} tabContentElement\n * @param {HTMLElement|number} panel element or index\n * @param {true|false|'smooth'} [scrollToPanel='smooth']\n * @return {void}\n */\nexport function selectPanel(tabContentElement, panel, scrollToPanel = 'smooth') {\n  /** @type {HTMLElement} */\n  let panelElement;\n  /** @type {number} */\n  let currentSelectedIndex = null;\n  /** @type {number} */\n  let panelIndex = null;\n  /** @type {Element[]} */\n  const otherPanels = [];\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), (el, index) => {\n    if (currentSelectedIndex == null && TabPanel.isExpanded(el)) {\n      currentSelectedIndex = index;\n    }\n    if (panel === el || panel === index) {\n      TabPanel.setExpanded(el, true);\n      TabPanel.setHidden(el, false);\n      /** @type {HTMLElement} */\n      panelElement = (el);\n      panelIndex = index;\n    } else {\n      otherPanels.push(el);\n    }\n  });\n  if (!panelElement) {\n    // Invalid index or panel not in tabcontent\n    return;\n  }\n  otherPanels.forEach(sibling => TabPanel.setExpanded(sibling, false));\n\n  const isPageRtl = isRtl();\n  const targetScrollLeft = isPageRtl\n    ? panelElement.parentElement.scrollWidth + panelElement.offsetLeft - panelElement.offsetWidth\n    : panelElement.offsetLeft;\n  if (!scrollToPanel || panelElement.parentElement.scrollLeft === targetScrollLeft) {\n    // No scrolling, hide others\n    otherPanels.forEach(sibling => TabPanel.setHidden(sibling, true));\n    return;\n  }\n  if (scrollToPanel && panelElement) {\n    if (panelIndex == null) {\n      tabContentElement.removeAttribute('mdw-target-index');\n    } else {\n      tabContentElement.setAttribute('mdw-target-index', panelIndex.toString(10));\n    }\n    scrollToElement(panelElement, scrollToPanel === 'smooth', isPageRtl);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport {\n  iterateArrayLike, getPassiveEventListenerOption, scrollToElement,\n} from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as TabItem from './item';\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function attach(tabListElement) {\n  let indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (!indicatorElement) {\n    indicatorElement = document.createElement('div');\n    indicatorElement.classList.add('mdw-tab__indicator');\n    tabListElement.appendChild(indicatorElement);\n  }\n\n  setupARIA(tabListElement);\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.attach);\n  RovingTabIndex.setupTabIndexes(tabListElement, tabListElement.querySelectorAll('[role=\"tab\"]'));\n  tabListElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent,\n    getPassiveEventListenerOption());\n  tabListElement.addEventListener(RovingTabIndex.FORWARDS_REQUESTED, onForwardsRequested);\n  tabListElement.addEventListener(RovingTabIndex.BACKWARDS_REQUESTED, onBackwardsRequested);\n  tabListElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(tabListElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectNext(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function setupARIA(tabListElement) {\n  if (tabListElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  tabListElement.setAttribute('role', 'tablist');\n  tabListElement.setAttribute('aria-multiselectable', 'false');\n  tabListElement.setAttribute('aria-orientation', 'horizontal');\n  const indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (indicatorElement) {\n    indicatorElement.setAttribute('role', 'presentation');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function detach(tabListElement) {\n  tabListElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  RovingTabIndex.detach(tabListElement, tabListElement.querySelectorAll('[role=\"tab\"]'));\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.detach);\n}\n\n/**\n * @param {Element} tabListElement\n * @param {Element|number} item element or index\n * @param {number} [percentage=0]\n * @param {boolean} [animate=false]\n * @return {void}\n */\nexport function setIndicatorPosition(tabListElement, item, percentage, animate = false) {\n  /** @type {HTMLElement} */\n  const indicatorElement = (tabListElement.getElementsByClassName('mdw-tab__indicator')[0]);\n  if (!indicatorElement) {\n    return;\n  }\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  /** @type {HTMLElement} */\n  const leftItem = (item instanceof Element ? item : items.item(item));\n  let left = leftItem.offsetLeft;\n  let right = left + leftItem.offsetWidth;\n\n  if (percentage > 0) {\n    left += (percentage * leftItem.offsetWidth);\n    /** @type {HTMLElement} */\n    let nextItem = (leftItem.nextElementSibling);\n    if (!nextItem.classList.contains('mdw-tab__item')) {\n      // RTL\n      /** @type {HTMLElement} */\n      nextItem = (leftItem.previousElementSibling);\n    }\n    right = nextItem.offsetLeft + (percentage * nextItem.offsetWidth);\n  }\n\n  // RTL is inversed\n  const width = Math.abs(right - left);\n  indicatorElement.style.setProperty('transform', `translateX(${left}px) scaleX(${width / 1000})`);\n  if (animate) {\n    indicatorElement.setAttribute('mdw-animate', '');\n  } else {\n    indicatorElement.removeAttribute('mdw-animate');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @return {Element}\n */\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @param {boolean} [dispatchEvents=false]\n * @return {void}\n */\nexport function selectItemAtIndex(tabListElement, tabItemIndex, dispatchEvents = false) {\n  tabListElement.setAttribute('mdw-selected-index', tabItemIndex.toString(10));\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  if (dispatchEvents) {\n    const item = items.item(tabItemIndex);\n    if (item) {\n      TabItem.setSelected(item, true, true);\n    }\n    return;\n  }\n  iterateArrayLike(items, (el, index) => {\n    if (tabItemIndex === index) {\n      TabItem.setSelected(el, true, false);\n      if (tabListElement.hasAttribute('mdw-scrollable')) {\n        scrollToElement(el, true);\n      }\n    } else {\n      TabItem.setSelected(el, false, false);\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  iterateArrayLike(tabListElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      TabItem.setSelected(item, false, false);\n    }\n  });\n}\n","import {\n  iterateArrayLike,\n  nextTick,\n  getPassiveEventListenerOption,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\nimport * as TabContent from './content';\nimport * as TabList from './list';\nimport * as TabPanel from './panel';\nimport * as TabItem from './item';\n\nconst RESIZE_WAIT_FRAMES = 5;\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function attach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.attach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.attach(tabContentElement);\n  }\n\n  tabElement.addEventListener(TabContent.SCROLL_EVENT, onTabContentScroll,\n    getPassiveEventListenerOption());\n  tabElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange,\n    getPassiveEventListenerOption());\n\n  /** @type {ArrayLike<Element>} */\n  const items = (tabListElement && tabListElement.getElementsByClassName('mdw-tab__item')) || [];\n  /** @type {ArrayLike<Element>} */\n  const panels = (tabContentElement && tabContentElement.getElementsByClassName('mdw-tab__panel')) || [];\n\n  let selectedItem;\n  let selectedPanel;\n  iterateArrayLike(items, (itemElement, index) => {\n    if (itemElement.getAttribute('aria-selected') === 'true') {\n      selectedItem = itemElement;\n      selectedPanel = panels[index];\n    }\n  });\n  if (!selectedItem && items.length) {\n    selectedItem = items[0];\n    selectedPanel = panels[0];\n  }\n  if (selectedItem) {\n    TabItem.setSelected(selectedItem, true);\n  }\n  if (selectedPanel) {\n    TabPanel.setHidden(selectedPanel, false);\n    TabPanel.setExpanded(selectedPanel, true);\n  }\n  onResize(tabElement);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabItemSelectedChange(event) {\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const tabItemElement = (event.target);\n  /** @type {HTMLElement} */\n  const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n  if (tabContentElement) {\n    let tabItemIndex = -1;\n    const tabItems = tabElement.querySelectorAll('.mdw-tab__list [role=\"tab\"]');\n    iterateSomeOfArrayLike(tabItems, (el, index) => {\n      if (el === tabItemElement) {\n        tabItemIndex = index;\n        return true;\n      }\n      return false;\n    });\n    if (!tabContentElement.hasAttribute('mdw-no-scroll')) {\n      TabContent.selectPanel(tabContentElement, tabItemIndex, 'smooth');\n      return;\n    }\n    TabContent.selectPanel(tabContentElement, tabItemIndex, true);\n  }\n\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.setIndicatorPosition(tabListElement, tabItemElement, 0, true);\n  }\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function detach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.detach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.detach(tabContentElement);\n  }\n\n  tabElement.removeEventListener(TabContent.SCROLL_EVENT, onTabContentScroll);\n  tabElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange);\n  tabElement.removeAttribute('mdw-resize-stage');\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function onResize(tabElement) {\n  let stage = 0;\n  tabElement.setAttribute('mdw-resize-stage', stage.toString());\n  /** @return {void} */\n  function performResize() {\n    if (!tabElement.hasAttribute('mdw-resize-stage')) {\n      // Skip resize\n      return;\n    }\n    const attrStage = tabElement.getAttribute('mdw-resize-stage');\n    if (attrStage !== stage.toString()) {\n      // Off-sync due to another resize event\n      return;\n    }\n    stage += 1;\n    tabElement.setAttribute('mdw-resize-stage', stage.toString());\n    if (stage === RESIZE_WAIT_FRAMES) {\n      /** @type {HTMLElement} */\n      const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n      if (tabContentElement && !tabContentElement.hasAttribute('mdw-no-scroll')) {\n        /** @type {HTMLElement} */\n        const relatedPanel = (tabContentElement.querySelector('.mdw-tab__panel[aria-expanded=\"true\"]'));\n        if (relatedPanel) {\n          TabContent.selectPanel(tabContentElement, relatedPanel, true);\n        }\n      }\n    } else if (stage === RESIZE_WAIT_FRAMES * 2) {\n      /** @type {HTMLElement} */\n      const tabListElement = (tabElement.getElementsByClassName('mdw-tab__list')[0]);\n      if (tabListElement) {\n        /** @type {HTMLElement} */\n        const relatedItem = (tabListElement.querySelector('.mdw-tab__item[aria-selected=\"true\"]'));\n        if (relatedItem) {\n          TabList.setIndicatorPosition(tabListElement, relatedItem, 0);\n        }\n      }\n      tabElement.removeAttribute('mdw-resize-stage');\n      return;\n    }\n\n    nextTick(performResize);\n  }\n  nextTick(performResize);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  if (tabElement.hasAttribute('mdw-resize-stage')) {\n    return;\n  }\n  const { detail } = event;\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (!tabListElement) {\n    return;\n  }\n  TabList.setIndicatorPosition(tabListElement, detail.leftPanelIndex, detail.visibilityPercentage);\n  if (detail.newSelectedIndex != null) {\n    TabList.selectItemAtIndex(tabListElement, detail.newSelectedIndex, false);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport { iterateArrayLike } from '../../core/dom';\nimport * as ChipItem from './item';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.detach);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport * as Ripple from '../../core/ripple/index';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  Ripple.detach(element);\n}\n","/**\n * @callback DataTableAdapterColumnFormatter<T>\n * @param {any} value\n * @param {T} [object]\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterColumnRenderer<T>\n * @param {HTMLTableCellElement} cell,\n * @param {any} value\n * @param {T} data\n * @return {void}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapterColumn\n * @typedef DataTableAdapterColumnOptions<T>\n * @property {string} key\n * @property {(string|DocumentFragment)} [name='']\n * @property {'checkbox'|string} [type]\n * @property {boolean} [rowSelector]\n * @property {string} [tooltip]\n * @property {boolean} [sortable]\n * @property {boolean} [primaryColumn]\n * @property {HTMLElement} [customSortIcon]\n * @property {string} [innerHTML]\n * @property {DocumentFragment} [fragment]\n * @property {DataTableAdapterColumnRenderer<T>} [renderer]\n * @property {DataTableAdapterColumnFormatter<T>} [formatter]\n * @template T\n */\n\n/** @return {HTMLLabelElement} */\nfunction constructTableCheckbox() {\n  const checkboxLabel = document.createElement('label');\n  checkboxLabel.className = 'mdw-selection';\n  const input = document.createElement('input');\n  input.className = 'mdw-selection__input';\n  input.type = 'checkbox';\n  const icon = document.createElement('div');\n  icon.className = 'mdw-selection__icon';\n  icon.setAttribute('mdw-checkbox', '');\n  checkboxLabel.appendChild(input);\n  checkboxLabel.appendChild(icon);\n  return checkboxLabel;\n}\n\n/**\n * @template T\n */\nexport default class DataTableAdapterColumn {\n  /** @param {DataTableAdapterColumnOptions<T>} options */\n  constructor(options) {\n    this.element = document.createElement('th');\n    if (options.innerHTML != null) {\n      this.element.innerHTML = options.innerHTML;\n    } else if (options.fragment) {\n      this.element.appendChild(options.fragment);\n    }\n    this.key = options.key;\n    this.element.dataset.key = options.key;\n\n    if (options.sortable) {\n      this.element.setAttribute('mdw-sortable', '');\n      let sortIcon = options.customSortIcon;\n      if (!sortIcon) {\n        sortIcon = document.createElement('div');\n        sortIcon.classList.add('mdw-datatable__sort-icon');\n        sortIcon.classList.add('material-icons');\n        sortIcon.textContent = 'arrow_downward';\n      }\n      if (this.element.hasChildNodes()) {\n        this.element.insertBefore(this.element.firstChild, options.customSortIcon);\n      } else {\n        this.element.appendChild(sortIcon);\n      }\n    }\n    if (options.tooltip) {\n      const wrapper = document.createElement('span');\n      wrapper.classList.add('mdw-tooltip__wrapper');\n      const target = document.createElement('span');\n      target.classList.add('mdw-tooltip__target');\n      if (!options.name) {\n        target.textContent = '';\n      } else if (typeof options.name === 'string') {\n        target.textContent = options.name;\n      } else {\n        target.appendChild(options.name);\n      }\n      const tooltip = document.createElement('div');\n      tooltip.className = 'mdw-tooltip mdw-theme';\n      tooltip.setAttribute('mdw-surface', 'background 700');\n      tooltip.setAttribute('mdw-dark', '');\n      tooltip.textContent = options.tooltip;\n      wrapper.appendChild(target);\n      wrapper.appendChild(tooltip);\n      this.element.appendChild(wrapper);\n    } else if (options.name) {\n      let node;\n      if (typeof options.name === 'string') {\n        node = document.createTextNode(options.name);\n      } else {\n        node = options.name;\n      }\n      this.element.appendChild(node);\n    }\n\n    this.primaryColumn = options.primaryColumn;\n    if (options.primaryColumn) {\n      this.element.setAttribute('mdw-primary-column', '');\n    }\n\n    this.rowSelector = options.rowSelector;\n\n    if (this.rowSelector) {\n      this.element.setAttribute('mdw-selector', '');\n    }\n    if (options.type) {\n      this.element.dataset.type = options.type;\n      this.type = options.type;\n    }\n    if (this.rowSelector && this.type === 'checkbox') {\n      const checkboxLabel = constructTableCheckbox();\n      this.element.appendChild(checkboxLabel);\n    }\n\n    if (options.renderer) {\n      this.renderer = options.renderer;\n    } else if (options.type === 'checkbox') {\n      this.renderer = DataTableAdapterColumn.defaultCheckboxRenderer;\n    } else {\n      this.renderer = DataTableAdapterColumn.defaultCellRenderer;\n    }\n    this.formatter = options.formatter || (value => value);\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCheckboxRenderer(cell, value) {\n    let input = cell.getElementsByTagName('input')[0];\n    const checked = !!value;\n    if (!input) {\n      const checkboxLabel = document.createElement('label');\n      checkboxLabel.className = 'mdw-selection';\n      input = document.createElement('input');\n      input.className = 'mdw-selection__input';\n      input.type = 'checkbox';\n      input.checked = checked;\n      const icon = document.createElement('div');\n      icon.className = 'mdw-selection__icon';\n      icon.setAttribute('mdw-checkbox', '');\n      checkboxLabel.appendChild(input);\n      checkboxLabel.appendChild(icon);\n      cell.appendChild(checkboxLabel);\n    }\n    if (input.checked !== checked) {\n      input.checked = checked;\n    }\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCellRenderer(cell, value) {\n    let stringValue;\n    if (value == null) {\n      stringValue = '';\n    } else {\n      stringValue = value.toString();\n    }\n    const len = cell.childNodes.length;\n    let foundTextNode = false;\n    for (let i = len - 1; i >= 0; i -= 1) {\n      const node = cell.childNodes.item(i);\n      if (!foundTextNode && node.nodeType === Node.TEXT_NODE) {\n        if (node.nodeValue !== stringValue) {\n          node.nodeValue = stringValue;\n        }\n        foundTextNode = true;\n      } else {\n        cell.removeChild(node);\n      }\n    }\n    if (!foundTextNode) {\n      const node = document.createTextNode(stringValue);\n      cell.appendChild(node);\n    }\n  }\n}\n","const radius = 8.75;\nconst circumference = 2 * Math.PI * radius;\n\n// TODO: Upgrade IE/Edge browsers to animate with rAF\n\n/**\n * @param {Element} progressCircleElement\n * @return {void}\n */\nexport function attach(progressCircleElement) {\n  /** @type {Element} */\n  let svg = (progressCircleElement.getElementsByTagName('svg')[0]);\n  if (!svg) {\n    svg = (document.createElement('svg'));\n    svg.setAttribute('viewbox', '0 0 24 24');\n    progressCircleElement.appendChild(svg);\n  }\n  const paths = svg.getElementsByTagName('path');\n  if (paths.length !== 2) {\n    svg.innerHTML = `\n      <path d=\"M12 3.25A8.75 8.75 0 1 1 3.25 12\"/>\n      <path d=\"M12 3.25A8.75 8.75 0 1 1 3.25 12 A 8.75 8.75 0 0 1 12 3.25\"/>\n    `;\n  }\n}\n\n/**\n * @param {Element} progressCircleElement\n * @param {number} value Percentage value (0-100);\n * @return {void}\n */\nexport function setValue(progressCircleElement, value) {\n  const dashOffset = circumference * (3 - (value / 100));\n  const pathElements = progressCircleElement.getElementsByTagName('path');\n  pathElements[pathElements.length - 1].style.setProperty('stroke-dashoffset', dashOffset.toString());\n}\n","import { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\n\nimport * as Button from '../../components/button/index';\nimport * as DataTable from '../../components/datatable/index';\nimport DataTableAdapterColumn from './column';\n\n/**\n * @typedef {import('./column').DataTableAdapterColumnOptions<T>} DataTableAdapterColumnOptions<T>\n * @template T\n */\n\n/**\n * Callback fired when value change is requested\n * Return truthy value to cancel updating object\n * @callback DataTableAdapterOnValueChangeRequestedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {boolean} cancel\n * @template T\n */\n\n/**\n * Callback fired when value is changed\n * @callback DataTableAdapterOnValueChangedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {void}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterFilter<T>\n * @param {T} element\n * @param {number} [index]\n * @param {T[]} array\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterSorter<T>\n * @param {T} a\n * @param {T} b\n * @return {number}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapter\n * @typedef DataTableAdapterOptions<T>\n * @prop {HTMLElement} options.datatable\n * @prop {T[]} options.datasource Object array\n * @prop {DataTableAdapterFilter<T>} [options.filter]\n * @prop {DataTableAdapterOnValueChangeRequestedCallback<T>} [options.onValueChangeRequested]\n * @prop {DataTableAdapterOnValueChangedCallback<T>} [options.onValueChanged]\n * @prop {DataTableAdapterSorter<T>} [options.sorter]\n * @template T\n */\n\n/** @template {Object} T */\nexport default class DataTableAdapter {\n  /** @param {DataTableAdapterOptions<T>} options */\n  constructor(options) {\n    this.element = options.datatable;\n    this.datasource = options.datasource;\n    this.filter = options.filter;\n    this.sorter = options.sorter;\n    this.onValueChangeRequested = options.onValueChangeRequested || (() => false);\n    this.onValueChanged = options.onValueChanged || (() => {});\n\n    this.onElementClickListener = (/** @type {MouseEvent|PointerEvent} */ event) => {\n      this.handleClickInteraction(event);\n    };\n    // Use one click event listener to reduce overhead and allow dynamic content\n    this.element.addEventListener('click', this.onElementClickListener);\n\n    this.onElementScrollListener = () => {\n      this.onElementScroll();\n    };\n\n    /** @type {HTMLTableRowElement} */\n    this.tabindexRow = null;\n    /** @type {Object} */\n    this.tabindexRowData = null;\n    this.element.addEventListener('mdw:tabindexchanged', (event) => {\n      if (this.element.hasAttribute('mdw-row-focusable')) {\n        this.tabindexRow = /** @type {HTMLTableRowElement} */ (event.target);\n        this.tabindexRowData = this.getDataForTableRow(this.tabindexRow);\n      }\n    });\n    DataTable.attach(this.element);\n    this.scroller = DataTable.getScroller(this.element);\n    this.element.setAttribute('mdw-datatable-adapter', '');\n    /** @type {DataTableAdapterColumn<T>[]} */\n    this.columns = [];\n    this.page = 0;\n    this.pageLimit = 0;\n    this.debounceTimeMs = 0;\n    this.throttleTimeMs = 0;\n    this.useLazyRendering = false;\n  }\n\n  detach() {\n    this.element.removeAttribute('mdw-datatable-adapter');\n    this.element = null;\n    this.datasource = null;\n    this.filteredDatasource = null;\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  performThrottledRender(forceRefresh = false) {\n    this.performLazyRender(forceRefresh);\n    if (this.throttledRenderPending) {\n      this.throttledRenderPending = false;\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  scheduleThrottledRender(forceRefresh = false) {\n    if (this.throttleTimeMs < 17) {\n      window.requestAnimationFrame(() => this.performThrottledRender(forceRefresh));\n    } else {\n      setTimeout(() => this.performThrottledRender(forceRefresh), this.throttleTimeMs);\n    }\n  }\n\n  onElementScroll() {\n    if (this.debounceTimeout) {\n      clearTimeout(this.debounceTimeout);\n      this.debounceTimeout = null;\n    }\n    if (this.throttledRenderPending) {\n      // Will perform in the future\n      return;\n    }\n    if (this.debounceTimeMs) {\n      this.debounceTimeout = setTimeout(() => {\n        this.scheduleThrottledRender();\n        this.throttledRenderPending = true;\n      }, this.debounceTimeMs);\n    } else {\n      this.scheduleThrottledRender();\n      this.throttledRenderPending = true;\n    }\n  }\n\n  buildScrollListener() {\n    this.scroller.addEventListener('scroll', this.onElementScrollListener);\n  }\n\n  destroyScrollListener() {\n    this.scroller.removeEventListener('scroll', this.onElementScrollListener);\n  }\n\n  /**\n   * @param {PointerEvent|MouseEvent} event\n   * @return {void}\n   */\n  handleClickInteraction(event) {\n    const { target } = event;\n    if (target instanceof HTMLInputElement) {\n      if (target.type === 'checkbox') {\n        event.stopPropagation();\n        const currentCell = this.getTableCell(target);\n        if (currentCell.tagName.toLowerCase() === 'th') {\n          this.setCheckOnAllRows(target.checked, currentCell.cellIndex);\n          this.setHasSelection(target.checked);\n          return;\n        }\n        const currentRow = this.getTableRow(target);\n        const object = this.getDataForTableRow(currentRow);\n        if (this.onValueChangeRequested(object, currentCell.dataset.key, target.checked)) {\n          event.preventDefault();\n          return;\n        }\n        object[currentCell.dataset.key] = target.checked;\n        this.onValueChanged(object, currentCell.dataset.key, target.checked);\n        if (currentCell.hasAttribute('mdw-selector')) {\n          if (target.checked) {\n            currentRow.setAttribute('aria-selected', 'true');\n            this.setHasSelection(true);\n          } else {\n            currentRow.removeAttribute('aria-selected');\n            const selectedRows = this.getSelectedRows();\n            this.setHasSelection(selectedRows.length !== 0);\n          }\n        }\n      }\n      return;\n    }\n    const currentCell = this.getTableCell(/** @type {HTMLElement} */ (target));\n    if (currentCell) {\n      if (currentCell.tagName.toLowerCase() === 'th' && currentCell.hasAttribute('mdw-sortable')) {\n        event.stopPropagation();\n        let ascending = true;\n        if (currentCell.hasAttribute('mdw-sorted') && !currentCell.getAttribute('mdw-sorted')) {\n          ascending = false;\n        }\n        this.updateSortIcons(currentCell, ascending);\n        if (this.updateSortColumn) {\n          this.updateSortColumn(currentCell, ascending);\n        }\n      }\n    }\n  }\n\n  /**\n   * Overridable sorting method\n   * @param {HTMLTableHeaderCellElement} [tableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortColumn(tableHeaderCell, ascending) {\n    if (!tableHeaderCell) {\n      this.sorter = null;\n      this.refresh();\n      return;\n    }\n    if (tableHeaderCell.cellIndex === -1) {\n      // Header not attached to row!\n      return;\n    }\n    const index = tableHeaderCell.cellIndex;\n    const tableColumn = this.columns[index];\n    const direction = ascending ? 1 : -1;\n    this.sorter = ((/** @type {T} */ a, /** @type {T} */ b) => {\n      const valueA = a[tableColumn.key];\n      const valueB = b[tableColumn.key];\n      if (valueA == null) {\n        if (valueB == null) {\n          return 0;\n        }\n        return -1 * direction;\n      }\n      if (valueB == null) {\n        return direction;\n      }\n      if (tableColumn.type === 'number') {\n        return (parseFloat(valueA) - parseFloat(valueB)) * direction;\n      }\n      if (tableColumn.type === 'checkbox') {\n        return ((valueA ? 1 : 0) - (valueB ? 1 : 0)) * direction;\n      }\n      if (valueA.localeCompare) {\n        return valueA.localeCompare(valueB) * direction;\n      }\n      // eslint-disable-next-line eqeqeq\n      if (valueA == valueB) {\n        return 0;\n      }\n      return (valueA - valueB) * direction;\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLTableHeaderCellElement} [sortedTableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortIcons(sortedTableHeaderCell, ascending) {\n    if (sortedTableHeaderCell) {\n      if (ascending) {\n        sortedTableHeaderCell.setAttribute('mdw-sorted', '');\n      } else {\n        sortedTableHeaderCell.setAttribute('mdw-sorted', 'desc');\n      }\n    }\n    iterateArrayLike(this.element.getElementsByTagName('th'), (otherTableHeader) => {\n      if (otherTableHeader !== sortedTableHeaderCell) {\n        otherTableHeader.removeAttribute('mdw-sorted');\n      }\n    });\n  }\n\n  /**\n   * @param {boolean} value\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  setCheckOnAllRows(value, columnIndex) {\n    const column = this.columns[columnIndex];\n    this.datasource.forEach((object) => {\n      object[column.key] = value; // eslint-disable-line no-param-reassign\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableRowElement}\n   */\n  getTableRow(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableRowElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableRow(element.parentElement);\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableCellElement}\n   */\n  getTableCell(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableCellElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableCell(element.parentElement);\n  }\n\n  /** @return {T[]} */\n  getSelectedRows() {\n    const selectorColumn = this.columns.filter(column => column.rowSelector)[0];\n    if (!selectorColumn) {\n      return [];\n    }\n    return this.getDatasource().filter(row => row[selectorColumn.key]);\n  }\n\n  /**\n   * @param {boolean} value\n   * @return {void}\n   */\n  setHasSelection(value) {\n    if (value) {\n      this.element.setAttribute('mdw-has-selection', '');\n      return;\n    }\n    this.element.removeAttribute('mdw-has-selection');\n  }\n\n  /**\n   * @param {T[]} datasource Object array\n   * @return {void}\n   */\n  setDatasource(datasource) {\n    this.datasource = datasource;\n  }\n\n  /**\n   * Toggle lazy rending for datasources\n   * @param {boolean} value\n   * @return {void}\n   */\n  setUseLazyRendering(value) {\n    this.useLazyRendering = value;\n    if (value) {\n      this.buildScrollListener();\n    } else {\n      this.destroyScrollListener();\n    }\n  }\n\n  /**\n   * @param {DataTableAdapterColumnOptions<T>} options\n   * @return {DataTableAdapterColumn<T>}\n   */\n  addColumn(options) {\n    const tableColumn = new DataTableAdapterColumn(options);\n    const headerRow = this.getHeaderRow();\n    headerRow.appendChild(tableColumn.element);\n    this.columns.push(tableColumn);\n    return tableColumn;\n  }\n\n  updatePaginator() {\n    if (!this.pageLimit) {\n      return;\n    }\n    const min = this.page * this.pageLimit;\n    const total = this.getDatasource().length;\n    let max = this.pageLimit + min;\n    if (max > total) {\n      max = total;\n    }\n    this.paginationDetailsElement.textContent = `${min + 1}-${max} of ${total}`;\n    this.previousPageButton.setAttribute('aria-disabled', (min === 0 ? 'true' : 'false'));\n    this.nextPageButton.setAttribute('aria-disabled', (max === total ? 'true' : 'false'));\n  }\n\n  /**\n   * @param {Object} options\n   * @param {boolean} [options.disabled=false]\n   * @param {number} [options.limit=10]\n   * @param {number[]} [options.limits=[10,25,50,100]]\n   * @return {void}\n   */\n  setPagination(options = {}) {\n    const footer = this.getFooter(!options.disabled);\n    if (options.disabled) {\n      this.pageLimit = 0;\n      this.page = 0;\n      if (footer) {\n        footer.style.display = 'none';\n      }\n      this.needsDraw = true;\n      return;\n    }\n    footer.style.display = '';\n    let optionsElement = footer.getElementsByClassName('mdw-datatable__footer-options')[0];\n    if (!optionsElement) {\n      optionsElement = document.createElement('div');\n      optionsElement.classList.add('mdw-datatable__footer-options');\n      const rowsPerPageText = document.createElement('span');\n      rowsPerPageText.textContent = 'Rows per page';\n      const limits = options.limits || [10, 25, 50, 100];\n      const limitsElement = document.createElement('label');\n      limitsElement.classList.add('mdw-textfield');\n      limitsElement.setAttribute('mdw-solo', '');\n      const select = document.createElement('select');\n      select.classList.add('mdw-textfield__input');\n      limits.forEach((limit) => {\n        const option = document.createElement('option');\n        option.value = limit.toString();\n        option.textContent = limit.toString();\n        select.appendChild(option);\n      });\n      select.value = (options.limit && options.limit.toString()) || '10';\n      const dropdownIcon = document.createElement('div');\n      dropdownIcon.classList.add('mdw-textfield__icon');\n      dropdownIcon.setAttribute('mdw-dropdown', '');\n      limitsElement.appendChild(select);\n      limitsElement.appendChild(dropdownIcon);\n      optionsElement.appendChild(rowsPerPageText);\n      optionsElement.appendChild(limitsElement);\n      footer.appendChild(optionsElement);\n      select.addEventListener('input', () => {\n        this.pageLimit = parseInt(select.value, 10);\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = footer.getElementsByClassName('mdw-datatable__footer-details')[0];\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = document.createElement('div');\n      this.paginationDetailsElement.classList.add('mdw-datatable__footer-details');\n      footer.appendChild(this.paginationDetailsElement);\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = footer.getElementsByClassName('mdw-datatable__footer-controls')[0];\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = document.createElement('div');\n      this.paginationControls.classList.add('mdw-datatable__footer-controls');\n      footer.appendChild(this.paginationControls);\n    }\n    if (!this.previousPageButton || !this.nextPageButton) {\n      const buttons = this.paginationControls.getElementsByClassName('mdw-button');\n      if (buttons.length !== 2) {\n        this.previousPageButton = document.createElement('a');\n        this.previousPageButton.classList.add('mdw-button');\n        this.previousPageButton.classList.add('material-icons');\n        this.previousPageButton.setAttribute('mdw-icon', '');\n        this.previousPageButton.textContent = 'chevron_left';\n        this.paginationControls.appendChild(this.previousPageButton);\n        Button.attach(this.previousPageButton);\n\n        this.nextPageButton = document.createElement('a');\n        this.nextPageButton.classList.add('mdw-button');\n        this.nextPageButton.classList.add('material-icons');\n        this.nextPageButton.setAttribute('mdw-icon', '');\n        this.nextPageButton.textContent = 'chevron_right';\n        this.paginationControls.appendChild(this.nextPageButton);\n        Button.attach(this.nextPageButton);\n      } else {\n        this.previousPageButton = buttons[0];\n        this.nextPageButton = buttons[1];\n      }\n      this.previousPageButton.addEventListener('click', () => {\n        if (this.previousPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page -= 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n      this.nextPageButton.addEventListener('click', () => {\n        if (this.nextPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page += 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    this.pageLimit = options.limit || 10;\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {boolean} create\n   * @return {HTMLElement}\n   */\n  getFooter(create) {\n    /** @type {HTMLElement} */\n    let footer = (this.element.getElementsByClassName('mdw-datatable__footer')[0]);\n    if (!footer && create) {\n      footer = document.createElement('div');\n      footer.classList.add('mdw-datatable__footer');\n      this.element.appendChild(footer);\n    }\n    return footer;\n  }\n\n  /**\n   * @param {HTMLTableRowElement} el\n   * @param {?number} viewportTop\n   * @param {?number} viewportBottom\n   * @return {boolean}\n   */\n  isRowVisible(\n    el,\n    viewportTop = this.scroller.scrollTop,\n    viewportBottom = this.scroller.scrollTop + this.scroller.offsetHeight\n  ) {\n    const rowTop = el.offsetTop;\n    const rowBottom = rowTop + el.offsetHeight;\n    if (rowTop > viewportTop && rowTop < viewportBottom) {\n      // Top of row is visible\n      return true;\n    }\n    if (rowBottom > viewportTop && rowBottom < viewportBottom) {\n      // Bottom of row is visible\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {(HTMLTableRowElement[])} visibleRows\n   * @return {void}\n   */\n  clearNonvisibleRows(visibleRows) {\n    const tbody = this.getTableBody();\n    if (visibleRows.length === tbody.rows.length) {\n      return;\n    }\n    let firstRowIndex = Infinity;\n    let lastRowIndex = -Infinity;\n    if (visibleRows.length) {\n      firstRowIndex = visibleRows[0].sectionRowIndex;\n      lastRowIndex = visibleRows[visibleRows.length - 1].sectionRowIndex;\n    }\n    iterateArrayLike(tbody.rows, (row, index) => {\n      if (index >= firstRowIndex && index <= lastRowIndex) {\n        return;\n      }\n      if (row.lastChild) {\n        // Store row height to prevent layout shifting\n        row.style.setProperty('height', `${row.offsetHeight || 0}px`);\n      }\n      while (row.lastChild) {\n        row.removeChild(row.lastChild);\n      }\n    });\n  }\n\n  /**\n   * @return {HTMLTableRowElement[]}\n   */\n  getLazyRenderRows() {\n    const tbody = this.getTableBody();\n    const len = tbody.rows.length;\n    /** @type {HTMLTableRowElement[]} */\n    const rows = [];\n    const minRowCount = window.screen.height / 48;\n    if (len <= minRowCount) {\n      iterateArrayLike(tbody.rows, (row) => {\n        rows.push(row);\n      });\n      return rows;\n    }\n    let foundFirstVisibleRow = false;\n    let startIndex = 0;\n    let endIndex = 0;\n    const viewportTop = this.scroller.scrollTop;\n    const viewportBottom = viewportTop + this.scroller.offsetHeight;\n    iterateSomeOfArrayLike(tbody.rows, (row, index) => {\n      if (this.isRowVisible(row, viewportTop, viewportBottom)) {\n        if (!foundFirstVisibleRow) {\n          foundFirstVisibleRow = true;\n          startIndex = index;\n        }\n        endIndex = index;\n      } else if (foundFirstVisibleRow) {\n        return true;\n      }\n      return false;\n    });\n\n    while ((endIndex - startIndex) + 1 < minRowCount) {\n      if (startIndex === 0) {\n        endIndex += 1;\n      } else if (endIndex === len - 1) {\n        startIndex -= 1;\n      } else {\n        startIndex -= 1;\n        endIndex += 1;\n      }\n    }\n    for (let i = startIndex; i <= endIndex; i += 1) {\n      rows.push(tbody.rows.item(i));\n    }\n\n    return rows;\n  }\n\n  /**\n   * @param {boolean} forceRefresh\n   * @return {void}\n   */\n  performLazyRender(forceRefresh = false) {\n    const visibleRows = this.getLazyRenderRows();\n    visibleRows.forEach((row) => {\n      if (forceRefresh || !row.cells.length) {\n        this.refreshRow(row.sectionRowIndex);\n      }\n    });\n    this.clearNonvisibleRows(visibleRows);\n  }\n\n  /**\n   * @param {DataTableAdapterFilter<T>} filter\n   * @return {void}\n   */\n  setFilter(filter) {\n    this.filter = filter;\n    this.refreshFilter();\n  }\n\n  /**\n   * @param {DataTableAdapterSorter<T>} sorter\n   * @return {void}\n   */\n  setSorter(sorter) {\n    this.sorter = sorter;\n    this.refreshFilter();\n  }\n\n  refreshFilter() {\n    if (this.filter && this.sorter) {\n      this.filteredDatasource = this.datasource.filter(this.filter).sort(this.sorter);\n    } else if (this.filter) {\n      this.filteredDatasource = this.datasource.filter(this.filter);\n    } else if (this.sorter) {\n      this.filteredDatasource = this.datasource.slice(0).sort(this.sorter);\n    } else {\n      this.filteredDatasource = null;\n    }\n  }\n\n  /**\n   * Get filtered datasource\n   * @return {T[]}\n   */\n  getDatasource() {\n    if (this.filter || this.sorter) {\n      if (this.filteredDatasource == null) {\n        this.refreshFilter();\n      }\n      return this.filteredDatasource;\n    }\n    return this.datasource;\n  }\n\n  /**\n   * Update number of rows in table\n   * @param {boolean} [refresh=false] Refresh new rows\n   * @return {void}\n   */\n  updateRowCount(refresh) {\n    const tbody = this.getTableBody();\n    const rowLength = tbody.rows.length;\n\n    const datasource = this.getDatasource();\n    let rowsToDisplay = datasource.length;\n    if (this.pageLimit) {\n      let offset = this.page * this.pageLimit;\n      if (offset > rowsToDisplay) {\n        // Datasource or filter likely changed\n        // Reset to page 0\n        this.page = 0;\n        offset = 0;\n      }\n      rowsToDisplay -= offset;\n      if (rowsToDisplay > this.pageLimit) {\n        rowsToDisplay = this.pageLimit;\n      }\n    }\n\n    const rowDifference = rowsToDisplay - rowLength;\n    const newRows = [];\n\n    if (rowDifference < 0) {\n      // too many rows\n      for (let i = rowLength - 1; i >= rowsToDisplay; i -= 1) {\n        const row = tbody.rows.item(i);\n        tbody.removeChild(row);\n      }\n    }\n    if (rowDifference > 0) {\n      const fragment = document.createDocumentFragment();\n      for (let i = 0; i < rowDifference; i += 1) {\n        const row = document.createElement('tr');\n        if (this.element.hasAttribute('mdw-row-focusable')) {\n          row.setAttribute('tabindex', '-1');\n        }\n        newRows.push(row);\n        fragment.appendChild(row);\n      }\n      tbody.appendChild(fragment);\n    }\n    if (refresh && rowDifference !== 0) {\n      if (this.useLazyRendering) {\n        this.scheduleThrottledRender(true);\n      } else {\n        newRows.forEach((row) => {\n          this.refreshRow(row.sectionRowIndex);\n        });\n      }\n    }\n  }\n\n  /** @return {void} */\n  refreshRows() {\n    if (this.useLazyRendering) {\n      this.performLazyRender(true);\n    } else {\n      const tbody = this.getTableBody();\n      iterateArrayLike(tbody.rows, (row, index) => {\n        this.refreshRow(index);\n      });\n    }\n    if (this.tabindexRowData) {\n      const row = this.getTableRowForData(this.tabindexRowData);\n      if (row !== this.tabindexRow) {\n        if (this.tabindexRow) {\n          this.tabindexRow.setAttribute('tabindex', '-1');\n        }\n        if (row) {\n          if (document.activeElement === this.tabindexRow) {\n            row.focus();\n          }\n          DataTable.updateTabIndex(row, false);\n        }\n        this.tabindexRow = row;\n      }\n    }\n    if (this.useLazyRendering) {\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /** @return {void} */\n  refresh() {\n    this.refreshFilter();\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {HTMLTableRowElement} row\n   * @return {T}\n   */\n  getDataForTableRow(row) {\n    const index = (row.sectionRowIndex) + (this.page * this.pageLimit);\n    return this.getDatasource()[index];\n  }\n\n  /**\n   * @param {T} data\n   * @return {HTMLTableRowElement} row\n   */\n  getTableRowForData(data) {\n    const datasourceIndex = this.getDatasource().indexOf(data);\n    if (datasourceIndex === -1) {\n      return null;\n    }\n    const minIndex = this.page * this.pageLimit;\n    return this.getTableBody().rows.item(datasourceIndex - minIndex);\n  }\n\n  /**\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshRow(rowIndex) {\n    const row = this.getTableBody().rows.item(rowIndex);\n    row.style.removeProperty('height');\n    this.columns.forEach((column, columnIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshCell(columnIndex, rowIndex) {\n    const tableColumn = this.columns[columnIndex];\n    const row = this.getTableBody().rows.item(rowIndex);\n    let len = row.cells.length;\n    while (len <= columnIndex) {\n      // Generate cells\n      const missingColumn = this.columns[len];\n      const missingCell = row.insertCell();\n      if (missingColumn.type) {\n        missingCell.dataset.type = missingColumn.type;\n      }\n      missingCell.dataset.key = missingColumn.key;\n      if (missingColumn.rowSelector) {\n        missingCell.setAttribute('mdw-selector', '');\n      }\n      if (missingColumn.primaryColumn) {\n        missingCell.setAttribute('mdw-primary-column', '');\n      }\n      len += 1;\n    }\n    const cell = row.cells.item(columnIndex);\n    const data = this.getDataForTableRow(row);\n    const value = data[tableColumn.key];\n    if (tableColumn.rowSelector) {\n      if (row.getAttribute('aria-selected') !== (value ? 'true' : 'false')) {\n        row.setAttribute('aria-selected', (value ? 'true' : 'false'));\n      }\n    }\n    const formattedValue = tableColumn.formatter(value, data);\n    tableColumn.renderer(cell, formattedValue, data);\n  }\n\n  /**\n   * @param {HTMLTableCellElement|DataTableAdapterColumn<T>|number|string} search\n   * @return {DataTableAdapterColumn<T>}\n   */\n  getColumn(search) {\n    if (search instanceof DataTableAdapterColumn) {\n      return search;\n    }\n    if (search instanceof HTMLTableCellElement) {\n      return this.columns.filter(column => column.element === search)[0];\n    }\n    if (typeof search === 'string') {\n      return this.columns.filter(column => column.element.dataset.key === search)[0];\n    }\n    return this.columns[search];\n  }\n\n  /** @return {HTMLTableElement} */\n  getTable() {\n    let table = this.element.getElementsByTagName('table')[0];\n    if (!table) {\n      table = document.createElement('table');\n      const footer = this.element.getElementsByClassName('mdw-datatable__footer')[0];\n      if (footer) {\n        this.element.insertBefore(table, footer);\n      } else {\n        this.element.appendChild(table);\n      }\n    }\n    return table;\n  }\n\n  /** @return {HTMLTableRowElement} */\n  getHeaderRow() {\n    let thead = this.element.getElementsByTagName('thead')[0];\n    if (!thead) {\n      const table = this.getTable();\n      thead = document.createElement('thead');\n      table.appendChild(thead);\n    }\n    let headerRow = thead.getElementsByTagName('tr')[0];\n    if (!headerRow) {\n      headerRow = document.createElement('tr');\n      thead.appendChild(headerRow);\n    }\n    return headerRow;\n  }\n\n  /** @return {HTMLTableSectionElement} */\n  getTableBody() {\n    if (this.tbody) {\n      return this.tbody;\n    }\n    this.tbody = this.element.getElementsByTagName('tbody')[0];\n    if (!this.tbody) {\n      const table = this.getTable();\n      this.tbody = document.createElement('tbody');\n      table.appendChild(this.tbody);\n    }\n    return this.tbody;\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  refreshColumn(columnIndex) {\n    const tbody = this.getTableBody();\n    iterateArrayLike(tbody.rows, (row, rowIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n}\n","import { findElementParentByClassName } from '../../core/dom';\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function attach(fabElement) {\n  let closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (!closer) {\n    closer = document.createElement('div');\n    closer.classList.add('mdw-fab__close');\n    fabElement.appendChild(closer);\n  }\n  closer.addEventListener('click', onCloserClicked);\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.addEventListener('click', onFabButtonClicked);\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function detach(fabElement) {\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.removeEventListener('click', onFabButtonClicked);\n  const closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (closer) {\n    closer.removeEventListener('click', onCloserClicked);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCloserClicked(event) {\n  /** @type {HTMLElement} */\n  const closer = (event.currentTarget);\n  const fabElement = findElementParentByClassName(closer, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  hide(fabElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onFabButtonClicked(event) {\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const fabElement = findElementParentByClassName(button, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  toggle(fabElement);\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function show(fabElement) {\n  let changed = false;\n  if (fabElement.hasAttribute('mdw-hide')) {\n    fabElement.removeAttribute('mdw-hide');\n    changed = true;\n  }\n  if (!fabElement.hasAttribute('mdw-show')) {\n    fabElement.setAttribute('mdw-show', '');\n    changed = true;\n  }\n  return changed;\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function hide(fabElement) {\n  if (!fabElement.hasAttribute('mdw-hide')) {\n    fabElement.setAttribute('mdw-hide', '');\n  } else {\n    return false;\n  }\n  if (fabElement.hasAttribute('mdw-show')) {\n    fabElement.removeAttribute('mdw-show');\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function toggle(fabElement) {\n  if (hide(fabElement)) {\n    return;\n  }\n  show(fabElement);\n}\n","// https://material.io/design/navigation/navigation-transitions.html\n\nimport { nextTick } from '../dom';\n\n/**\n * @param {string} px\n * @return {number}\n */\nfunction pxToInteger(px) {\n  if (!px) {\n    return 0;\n  }\n  return parseInt(px, 10);\n}\n\n/**\n * @param {string} stringValue\n * @param {number} scaleX\n * @param {number} scaleY\n * @return {string}\n */\nfunction convertBoxShadow(stringValue, scaleX, scaleY) {\n  /**\n   * @param {string} shadow\n   * @return {string}\n   */\n  function convertShadow(shadow) {\n    let inset = '';\n    let offsetX = '';\n    let offsetY = '';\n    let blurRadius = '';\n    let spreadRadius = '';\n    let color = '';\n    shadow.split(' ').forEach((value) => {\n      if (value.toLowerCase() === 'inset') {\n        inset = value;\n        return;\n      }\n      if (value.indexOf('(') !== -1 || !value.match(/\\d/).length) {\n        color = value;\n        return;\n      }\n      const numberValue = pxToInteger(value);\n      if (!offsetX) {\n        offsetX = `${numberValue / scaleX}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!offsetY) {\n        offsetY = `${numberValue / scaleY}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!blurRadius) {\n        blurRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      } else {\n        spreadRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      }\n    });\n    return [\n      inset,\n      offsetX,\n      offsetY,\n      blurRadius,\n      spreadRadius,\n      color,\n    ].filter(v => v).join(' ');\n  }\n\n  if (!stringValue) {\n    return '';\n  }\n  return stringValue\n    // Strip spaces from anything parenthesized\n    .replace(/\\([^)]+\\)/g, substring => substring.replace(/ /g, ''))\n    // Split shadows by commas no inside parentheses\n    .match(/[^,(]+\\([^)]+\\)?[^,]*(|$)/g)\n    // Trim empty spaces\n    .map(shadow => shadow.trim())\n    // Convert values\n    .map(convertShadow)\n    // Rejoin shadows\n    .join(', ');\n}\n\n/**\n * @param {string} stringValue\n * @param {number} width\n * @param {number} height\n * @return {{horizontal:number, vertical:number}}\n */\nfunction convertBorderRadius(stringValue, width, height) {\n  /**\n   * @param {string} value\n   * @param {number} length\n   * @return {number}\n   */\n  function parsePercentage(value, length) {\n    const numValue = pxToInteger(value);\n    if (value.indexOf('%') === -1) {\n      return numValue;\n    }\n    return (numValue * length / 100.0);\n  }\n\n  if (!stringValue) {\n    return {\n      horizontal: 0,\n      vertical: 0,\n    };\n  }\n\n  const split = stringValue.split(' ');\n  if (split.length === 1) {\n    return {\n      horizontal: parsePercentage(stringValue, width),\n      vertical: parsePercentage(stringValue, height),\n    };\n  }\n  return {\n    horizontal: parsePercentage(split[0], width),\n    vertical: parsePercentage(split[1], height),\n  };\n}\n\n/**\n * @param {HTMLElement} targetElement\n * @param {HTMLElement} originElement\n * @param {CSSStyleDeclaration} [originStyle]\n * @return {Object}\n */\nexport function getShapeTransform(targetElement, originElement, originStyle) {\n  const originRect = originElement.getBoundingClientRect();\n  const targetRect = targetElement.getBoundingClientRect();\n  const originCSSStyle = originStyle || window.getComputedStyle(originElement);\n\n  let originX = originRect.left;\n  let originWidth = originRect.width;\n  let originY = originRect.top;\n  let originHeight = originRect.height;\n  if (originCSSStyle.boxSizing === 'border-box') {\n    const paddingTop = pxToInteger(originCSSStyle.paddingTop);\n    const paddingRight = pxToInteger(originCSSStyle.paddingRight);\n    const paddingBottom = pxToInteger(originCSSStyle.paddingBottom);\n    const paddingLeft = pxToInteger(originCSSStyle.paddingLeft);\n    originX += paddingLeft;\n    originWidth -= (paddingLeft + paddingRight);\n    originY += paddingTop;\n    originHeight -= (paddingTop + paddingBottom);\n  }\n\n  return {\n    originWidth,\n    originHeight,\n    translateX: originX - targetRect.left,\n    translateY: originY - targetRect.top,\n    scaleX: originWidth / targetRect.width,\n    scaleY: originHeight / targetRect.height,\n    toString() {\n      return [\n        `translateX(${this.translateX}px)`,\n        `translateY(${this.translateY}px)`,\n        `scaleX(${this.scaleX})`,\n        `scaleY(${this.scaleY})`,\n      ].join(' ');\n    },\n  };\n}\n\n/**\n * @param {HTMLElement} element\n * @param {string} property\n * @param {function(TransitionEvent):void} callback\n * @param {number} [expectedDuration]\n * @return {function} removeListener\n */\nfunction buildTransitionEndListener(element, property, callback, expectedDuration) {\n  let hasEnded = false;\n  const onTransitionEnd = (/** @type {TransitionEvent} */ event) => {\n    if (event.propertyName !== property) {\n      return;\n    }\n    hasEnded = true;\n    element.removeEventListener('transitionend', onTransitionEnd);\n    callback(event);\n  };\n  element.addEventListener('transitionend', onTransitionEnd);\n  if (expectedDuration) {\n    setTimeout(() => {\n      element.removeEventListener('transitionend', onTransitionEnd);\n      if (!hasEnded) {\n        callback(null);\n      }\n    }, expectedDuration + 500);\n  }\n  return () => {\n    element.removeEventListener('transitionend', onTransitionEnd);\n  };\n}\n\n/**\n * @typedef {Object} TransitionElementOptions\n * @prop {HTMLElement} fromShapeElement\n * @prop {HTMLElement} toShapeElement\n * @prop {HTMLElement} fromContentElement\n * @prop {HTMLElement} toContentElement\n * @prop {number} [duration=250|300] (250ms collapse or 300ms expand)\n * @prop {boolean} [revertFrom=false] Revert from elements on completion\n * @prop {function(TransitionElementOptions)} [onTransitionEnd]\n * @prop {function(TransitionElementOptions)} [onComplete]\n */\n\n/**\n * @param {TransitionElementOptions} options\n * @return {function():void} revertAllElements()\n */\nexport function transitionElement(options) {\n  const toStyleSyle = window.getComputedStyle(options.toShapeElement);\n\n  const shapeTransform = getShapeTransform(\n    options.fromShapeElement, options.toShapeElement, toStyleSyle\n  );\n  const contentTransform = getShapeTransform(options.toContentElement, options.fromContentElement);\n\n  const transitionProperties = [\n    'transition',\n    'transform-origin',\n    'transform',\n    'background-color',\n    'border-radius',\n    'box-shadow',\n    'z-index',\n    'filter',\n    'opacity',\n    'visibility',\n  ];\n\n  /** @type {Object.<string,string>} */\n  const oldFromShapeProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldToShapeProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldFromContentProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldToContentProperties = {};\n  /** @type {Object.<string,string>} */\n  const newFromShapeProperties = {};\n  transitionProperties.forEach((prop) => {\n    oldFromShapeProperties[prop] = options.fromShapeElement.style.getPropertyValue(prop);\n    oldToShapeProperties[prop] = options.toShapeElement.style.getPropertyValue(prop);\n    oldFromContentProperties[prop] = options.fromContentElement.style.getPropertyValue(prop);\n    oldToContentProperties[prop] = options.toContentElement.style.getPropertyValue(prop);\n    if (prop === 'box-shadow') {\n      newFromShapeProperties[prop] = convertBoxShadow(\n        toStyleSyle.getPropertyValue(prop),\n        shapeTransform.scaleX,\n        shapeTransform.scaleY\n      );\n    } else if (prop === 'border-radius') {\n      const topLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const topRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const horizontalRadii = [\n        `${topLeft.horizontal / shapeTransform.scaleX}px`,\n        `${topRight.horizontal / shapeTransform.scaleX}px`,\n        `${bottomLeft.horizontal / shapeTransform.scaleX}px`,\n        `${bottomRight.horizontal / shapeTransform.scaleX}px`,\n      ].join(' ');\n      const verticalRadii = [\n        `${topLeft.vertical / shapeTransform.scaleY}px`,\n        `${topRight.vertical / shapeTransform.scaleY}px`,\n        `${bottomLeft.vertical / shapeTransform.scaleY}px`,\n        `${bottomRight.vertical / shapeTransform.scaleY}px`,\n      ].join(' ');\n      newFromShapeProperties[prop] = `${horizontalRadii} / ${verticalRadii}`;\n    } else {\n      newFromShapeProperties[prop] = toStyleSyle.getPropertyValue(prop);\n    }\n  });\n\n  options.fromShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toContentElement.setAttribute('mdw-transition-busy', '');\n  options.fromContentElement.setAttribute('mdw-transition-busy', '');\n\n  // Hide toContentElement and overlay over fromContentElement immediately\n  options.toContentElement.style.setProperty('opacity', '0');\n  options.toContentElement.style.setProperty('transition', 'none');\n  options.toContentElement.style.setProperty('transform-origin', '0 0 0');\n  options.toContentElement.style.setProperty('transform', contentTransform);\n  options.toContentElement.style.setProperty('z-index', '9');\n  options.toContentElement.style.setProperty('visibility', 'visible');\n\n  options.fromContentElement.style.setProperty('opacity', '1');\n\n  options.fromShapeElement.style.setProperty('transition', 'none');\n  options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n  options.fromShapeElement.style.setProperty('transform', 'none');\n  options.fromShapeElement.style.setProperty('z-index', '8');\n\n  options.toShapeElement.style.setProperty('background-color', 'transparent');\n  options.toShapeElement.style.setProperty('filter', 'none');\n  options.toShapeElement.style.setProperty('box-shadow', 'none');\n  options.toShapeElement.style.setProperty('visibility', 'visible');\n\n  const revertFunction = () => {\n    transitionProperties.forEach((prop) => {\n      if (oldFromShapeProperties[prop] == null) {\n        options.fromShapeElement.style.removeProperty(prop);\n      } else {\n        options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n      }\n      if (oldToShapeProperties[prop] == null) {\n        options.toShapeElement.style.removeProperty(prop);\n      } else {\n        options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n      }\n      if (oldFromContentProperties[prop] == null) {\n        options.fromContentElement.style.removeProperty(prop);\n      } else {\n        options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n      }\n      if (oldToContentProperties[prop] == null) {\n        options.toContentElement.style.removeProperty(prop);\n      } else {\n        options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n      }\n    });\n  };\n\n  nextTick(() => {\n    nextTick(() => {\n      let calculatedDuration = options.duration;\n      if (calculatedDuration == null) {\n        if (shapeTransform.scaleX * shapeTransform.scaleY >= 1) {\n          calculatedDuration = 300; // expand\n        } else {\n          calculatedDuration = 250; // collapse\n        }\n      }\n      const totalDuration = calculatedDuration.toString(10);\n      const fadeInTime = (calculatedDuration * 0.70).toString(10);\n      const fadeOutTime = (calculatedDuration * 0.30).toString(10);\n      const transformTransition = transitionProperties\n        .filter(prop => prop !== 'transform-origin' && prop !== 'opacity' && prop !== 'transition')\n        .map(prop => `${prop} ${totalDuration}ms cubic-bezier(0.4, 0.0, 0.2, 1) 0s`)\n        .join(', ');\n      const fadeInTransition = `opacity ${fadeInTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) ${fadeOutTime}ms`;\n      const fadeOutTransition = [\n        `opacity ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n        `visibility ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n      ].join(', ');\n\n      options.fromShapeElement.style.setProperty('transition', transformTransition);\n      transitionProperties.forEach((prop) => {\n        if (prop === 'transform') {\n          options.fromShapeElement.style.setProperty('transform', shapeTransform);\n        } else if (prop === 'transition') {\n          // noop;\n        } else if (prop === 'transform-origin') {\n          options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n        } else if (prop === 'z-index') {\n          options.fromShapeElement.style.setProperty('z-index', '8');\n        } else if (prop === 'visibility') {\n          options.fromShapeElement.style.setProperty('visibility', 'hidden');\n        } else if (newFromShapeProperties[prop] == null) {\n          options.fromShapeElement.style.removeProperty(prop);\n        } else {\n          options.fromShapeElement.style.setProperty(prop, newFromShapeProperties[prop]);\n        }\n      });\n\n      nextTick(() => {\n        buildTransitionEndListener(options.fromShapeElement, 'transform', () => {\n          transitionProperties.forEach((prop) => {\n            if (prop === 'transition') {\n              options.toShapeElement.style.setProperty('transition', 'none');\n              options.toContentElement.style.setProperty('transition', 'none');\n            } else {\n              if (oldToShapeProperties[prop] == null) {\n                options.toShapeElement.style.removeProperty(prop);\n              } else {\n                options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n              }\n              if (oldToContentProperties[prop] == null) {\n                options.toContentElement.style.removeProperty(prop);\n              } else {\n                options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n              }\n            }\n\n            if (prop === 'visibility' && !options.revertFrom) {\n              return;\n            }\n            if (oldFromContentProperties[prop] == null) {\n              options.fromContentElement.style.removeProperty(prop);\n            } else {\n              options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n            }\n            if (oldFromShapeProperties[prop] == null) {\n              options.fromShapeElement.style.removeProperty(prop);\n            } else {\n              options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n            }\n          });\n          if (options.onTransitionEnd) {\n            options.onTransitionEnd(options);\n          }\n          nextTick(() => {\n            if (oldToShapeProperties.transition == null) {\n              options.toShapeElement.style.removeProperty('transition');\n            } else {\n              options.toShapeElement.style.setProperty('transition', oldToShapeProperties.transition);\n            }\n            if (oldToContentProperties.transition == null) {\n              options.toContentElement.style.removeProperty('transition');\n            } else {\n              options.toContentElement.style.setProperty('transition', oldToContentProperties.transition);\n            }\n            options.fromShapeElement.removeAttribute('mdw-transition-busy');\n            options.toShapeElement.removeAttribute('mdw-transition-busy');\n            options.toContentElement.removeAttribute('mdw-transition-busy');\n            options.fromContentElement.removeAttribute('mdw-transition-busy');\n            if (options.onComplete) {\n              options.onComplete(options);\n            }\n          });\n        }, calculatedDuration);\n      });\n\n      // Fade out fromContent while shaping into new content\n      options.fromContentElement.style.setProperty('transition', fadeOutTransition);\n      options.fromContentElement.style.setProperty('opacity', '0');\n      options.fromContentElement.style.setProperty('visibility', 'hidden');\n\n      options.toContentElement.style.setProperty('transition', [\n        transformTransition,\n        fadeInTransition,\n      ].join(', '));\n      options.toContentElement.style.setProperty('opacity', '1');\n      options.toContentElement.style.setProperty('transform', 'none');\n    });\n  });\n\n  return revertFunction;\n}\n"],"sourceRoot":""}