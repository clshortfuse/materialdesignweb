{"version":3,"sources":["webpack:///../core/dom.js","webpack:///../core/aria/keyboard.js","webpack:///../core/aria/rovingtabindex.js","webpack:///../core/aria/button.js","webpack:///../components/button/index.js","webpack:///../core/ripple/index.js","webpack:///../core/overlay/index.js","webpack:///../core/aria/attributes.js","webpack:///../components/dialog/index.js","webpack:///../core/throttler.js","webpack:///../components/layout/index.js","webpack:///../components/list/content.js","webpack:///../components/menu/index.js","webpack:///../components/selection/input.js","webpack:///../components/selection/index.js","webpack:///../components/tab/item.js","webpack:///../components/menu/item.js","webpack:///../components/datatable/cell.js","webpack:///../components/list/index.js","webpack:///../components/textfield/index.js","webpack:///../components/datatable/row.js","webpack:///../components/list/item.js","webpack:///../components/bottomnav/item.js","webpack:///../components/snackbar/index.js","webpack:///../components/datatable/index.js","webpack:///../components/datatable/columnheader.js","webpack:///../core/aria/tab.js","webpack:///../adapters/list/index.js","webpack:///../components/bottomnav/index.js","webpack:///../adapters/search/index.js","webpack:///../components/tab/panel.js","webpack:///../components/tab/content.js","webpack:///../components/tab/list.js","webpack:///../components/tab/index.js","webpack:///../components/chip/index.js","webpack:///../components/chip/item.js","webpack:///../adapters/datatable/column.js","webpack:///../components/progress/index.js","webpack:///../components/list/secondary.js","webpack:///../adapters/datatable/index.js","webpack:///../components/fab/index.js","webpack:///../components/selection/radiogroup.js","webpack:///../components/datatable/rowheader.js","webpack:///../adapters/dom/index.js","webpack:///../core/transition/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getPassiveEventListenerOption","nextTick","cancelTick","getChildElementByClass","findElementParentByClassName","isRtl","dispatchDomEvent","iterateArrayLike","iterateSomeOfArrayLike","iterateElementSiblings","getTextNode","setTextNode","scrollToElement","passiveEventListenerSupported","options","passive","window","addEventListener","removeEventListener","err","testPassiveEventListenerOptionSupport","requestAnimationFrame","cb","setTimeout","cancelAnimationFrame","clearTimeout","element","className","child","getElementsByClassName","parentElement","includeSelf","el","classList","contains","document","documentElement","dir","type","detail","event","CustomEvent","bubbles","cancelable","Event","createEvent","initEvent","initCustomEvent","dispatchEvent","arrayLike","fn","Array","prototype","forEach","call","some","distance","sibling","previousElementSibling","nextElementSibling","node","create","textNode","childNodes","childNode","nodeType","Node","TEXT_NODE","createTextNode","appendChild","value","nodeValue","removeChild","smooth","rtl","parent","targetScrollLeft","scrollWidth","offsetLeft","offsetWidth","elementRect","getBoundingClientRect","parentRect","subPixelScrollPosition","left","Math","abs","scrollLeft","scrollTo","top","behavior","style","setProperty","removeProperty","FORWARD_ARROW_KEY","BACK_ARROW_KEY","UP_ARROW_KEY","DOWN_ARROW_KEY","HOME_KEY","END_KEY","SPACEBAR_KEY","ENTER_KEY","attach","detach","_dom__WEBPACK_IMPORTED_MODULE_0__","PAGEUP_KEY","PAGEDOWN_KEY","onKeyDownHandler","currentTarget","ctrlKey","shiftKey","altKey","metaKey","repeat","key","stopPropagation","preventDefault","TABINDEX_ZEROED","setupTabIndexes","removeTabIndex","selectNext","selectPrevious","items","focusableWhenDisabled","arguments","length","undefined","currentlyFocusedChild","currentTabIndexChild","firstFocusableChild","activeElement","getAttribute","setAttribute","hasAttribute","onChildFocus","excludeItems","item","indexOf","attemptFocus","focus","e","list","current","loop","reverse","foundCurrent","index","array","candidate","HTMLElement","onKeyDown","buttonElement","newEvent","add","Ripple","Overlay","attachCore","HTMLButtonElement","HTMLInputElement","AriaButton","detachCore","removeAttribute","button_attach","button_detach","rippleContainer","createElement","firstChild","insertBefore","rippleInner","onClick","onMouseDown","onTouchStart","onAnimationEnd","pointerType","rect","updateRipplePosition","pageX","pageXOffset","pageY","pageYOffset","drawRipple","touch","changedTouches","matches","msMatchesSelector","isActive","x","y","width","height","xPos","yPos","clientWidth","clientHeight","hypotenuse","sqrt","concat","initiator","currentInitiator","animationName","clearRipple","lastInteractionWasTouch","onBlur","onFocus","matchMedia","setCurrent","setSelected","isChecked","setChecked","isDisabled","isReadonly","name","dispatchEventName","stringValue","explicit","emptyValue","attr","DialogStack","previousFocus","state","previousState","_classCallCheck","this","OPEN_DIALOGS","CANCEL_EVENT","CONFIRM_EVENT","CUSTOM_EVENT","DISMISS_EVENT","onTransitionEnd","dialogCloser","onCancelClick","popup","buttons","querySelectorAll","foundConfirmButton","foundCancelButton","button","Button","onCustomButtonClick","onConfirmClick","dialogElement","popupElement","setupARIA","propertyName","HTMLAnchorElement","cancelElement","cancel","hide","confirm","onEscapeKeyDown","focusableElements","join","foundTarget","target","handleTabKeyPress","onPopState","lastOpenDialog","Object","keys","every","title","getTitleText","history","pushState","titleElement","textContent","bodyElement","stackIndex","stack","splice","hash","back","show","changed","hadLayer","getPropertyValue","dialogRect","Element","transformOriginX","transformOriginY","offsetTop","updateTransformOrigin","newState","random","toString","substr","replaceState","dialogStack","push","focusElement","querySelector","scrollIntoView","updateButtonText","texts","updateBody","content","body","insertAdjacentElement","DocumentFragment","lastChild","updateTitle","buttonArea","buttonText","custom","autofocus","stacked","Throttler","throttleTimeMs","pending","queued","queue","_this","run","isNavDrawerModalShowing","hideNavDrawer","getAppBarElement","showFab","hideFab","resetScroll","MIN_SCROLL_DELTA","MOBILE_BREAKPOINT","TABLET_BREAKPOINT","SCROLL_THROTTLE_TIME_MS","lastScrollY","penultimateScrollY","scrolledPastAppBar","appBarElement","layoutContentElement","lastScrollBottomDistance","scrollThrottler","onBodyScroll","contentElement","getContentElement","onContentScroll","toggleNavDrawer","showNavDrawer","toggleSideSheet","showSideSheet","hideSideSheet","scrim","onScrimClick","onScrimScroll","getScrollThrottler","scrollTop","scrollHeight","navDrawer","location","id","innerWidth","sidesheet","onScroll","shouldAutoHideAppBar","appBar","autoHide","changeFabCut","fabElement","fabCutAttr","trim","openAppBarFabCut","replace","closeAppBarFabCut","isBody","scrollElement","currentScrollY","change","delta","scrollBottom","scrollBottomDistance","scrollBottomChange","didScrollUp","isAtScrollTop","newScrollUp","didScrollDown","isAtScrollBottom","newScrollDown","bottomAppBar","scrolledAway","newScrollAway","scrolledBack","isAtRest","r","ACTIVATE_EVENT","SELECTED_CHANGE_EVENT","FOCUS_EVENT","_core_dom__WEBPACK_IMPORTED_MODULE_0__","_core_overlay_index__WEBPACK_IMPORTED_MODULE_1__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_2__","_core_aria_attributes__WEBPACK_IMPORTED_MODULE_3__","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_4__","_secondary__WEBPACK_IMPORTED_MODULE_5__","listContentElement","secondaryElement","ListSecondary","Keyboard","onEnterKey","Attributes","MenuStack","originalEvent","pendingResizeOperation","OPEN_MENUS","HIDE_EVENT","menuElement","onMenuClick","onMenuScroll","onWindowResize","lastOpenMenu","updateMenuPosition","selectNextMenuItem","MenuItem","menu","backwards","menuItems","firstFocusableItem","lastFocusableElement","focusable","alignTarget","transformOrigin","useAlignTarget","margin","mdwPosition","mdwDirection","alignTop","alignBottom","alignVCenter","alignStart","alignEnd","alignLeft","alignRight","alignHCenter","openUp","openDown","openNormal","openReverse","openVCenter","openHCenter","openLtr","openRtl","isPageRTL","offsetY","offsetBottom","offsetX","offsetRight","popupElementHeight","popupElementWidth","canOpenDownwardsFromBottom","innerHeight","canOpenDownwardsFromTop","canOpenUpwardsFromTop","canOpenUpwardsFromBottom","canOpenRightwardsFromLeft","canOpenRightwardsFromRight","canOpenLeftwardsFromRight","canOpenLeftwardsFromLeft","canOpenFromCenter","candidates","map","filter","candidateNumber","number","menuStack","menuItem","refreshMenuItems","CLICK_EVENT","onSpacebarKey","CHECKED_CHANGE_EVENT","selection_attach","inputElement","SelectionInput","onActivateEvent","selectionElement","role","newValue","_core_aria_tab__WEBPACK_IMPORTED_MODULE_0__","_core_dom__WEBPACK_IMPORTED_MODULE_1__","_core_overlay_index__WEBPACK_IMPORTED_MODULE_2__","_core_ripple_index__WEBPACK_IMPORTED_MODULE_3__","AriaTab","attachAria","CHECK_EVENT","UNCHECK_EVENT","_core_aria_attributes__WEBPACK_IMPORTED_MODULE_0__","_core_dom__WEBPACK_IMPORTED_MODULE_3__","onMouseMove","useAriaChecked","menuItemElement","toggleChecked","checked","isCheckable","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_1__","_core_dom__WEBPACK_IMPORTED_MODULE_2__","gridCellElement","attachAll","_core_aria_attributes__WEBPACK_IMPORTED_MODULE_1__","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_2__","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_3__","_item__WEBPACK_IMPORTED_MODULE_4__","_content__WEBPACK_IMPORTED_MODULE_5__","root","listElement","newRole","children","setupAria","ListItem","RovingTabIndex","onDownArrowKey","onUpArrowKey","onTabIndexZeroed","ListContent","onSelectedChangeEvent","onContentFocusEvent","onFocusInteraction","split","interaction","listElementRole","itemElement","defaultPrevented","currentItem","setValue","textfieldElement","input","onInput","updateTextAreaSize","updateInputEmptyState","attrName","previousRowsAttrValue","rows","_window$getComputedSt","getComputedStyle","paddingTop","heightPx","parseInt","paddingTopPx","floor","HTMLTextAreaElement","HTMLSelectElement","Date","hoursStr","getHours","minutesStr","getMinutes","secondsStr","getSeconds","getMilliseconds","valueAsDate","valueAsNumber","getTime","getTimezoneOffset","_cell__WEBPACK_IMPORTED_MODULE_2__","cells","DataTableCell","rowElement","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_0__","_content__WEBPACK_IMPORTED_MODULE_2__","listItemElement","isTreeItem","roleIsNone","activatorContent","parentRole","contentChild","setExpanded","isExpanded","onChildContentActivate","treeitem","activatedElement","SnackbarQueueItem","hideTimeout","SNACKBAR_QUEUE","SHOW_EVENT","snackbarElement","onButtonClick","slice","reverseIndex","clearHideTimeout","findNextQueueItem","q","handleAnimationChange","currentQueueItem","autoHideString","timeInSeconds","parseFloat","timeout","nextQueueItem","update","span","getElementsByTagName","text","buttonInk","autoDestroy","newlyCreated","skipQueue","CELL_TABINDEX_QUERIES","getScroller","_cell__WEBPACK_IMPORTED_MODULE_0__","_columnheader__WEBPACK_IMPORTED_MODULE_1__","_rowheader__WEBPACK_IMPORTED_MODULE_2__","_row__WEBPACK_IMPORTED_MODULE_3__","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_4__","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_5__","_core_dom__WEBPACK_IMPORTED_MODULE_6__","getTable","headerRow","tableElement","thead","table","getHeaderRow","tbody","getTableBody","DataTableColumnHeader","DataTableRowHeader","tableRows","DataTableRow","onItemFocus","onSelectedChange","onSort","onKeyboard","selected","dataTableElement","HTMLTableRowElement","datatableElement","columnIndex","ascending","th","cellIndex","i","deleteRow","sort","a","b","aCell","bCell","aText","bText","dataset","localeCompare","fragment","createDocumentFragment","row","sortColumn","emitter","cell","HTMLTableCellElement","checkNavKeys","searchElements","scroller","footer","HTMLTableElement","SORT_EVENT","_cell__WEBPACK_IMPORTED_MODULE_3__","Cell","columnHeaderElement","ariaSort","_keyboard__WEBPACK_IMPORTED_MODULE_0__","_attributes__WEBPACK_IMPORTED_MODULE_1__","AnyListAdapterRenderer","data","primaryText","s","String","ListAdapter","_possibleConstructorReturn","_getPrototypeOf","render","DomAdapter","_core_aria_rovingtabindex__WEBPACK_IMPORTED_MODULE_1__","_core_aria_keyboard__WEBPACK_IMPORTED_MODULE_2__","_item__WEBPACK_IMPORTED_MODULE_3__","bottomnavElement","selectedItem","BottomNavItem","onForwardsRequested","onBackwardsRequested","containsTextFilter","toLocaleLowerCase","startsWithTextFilter","defaultItemTextParser","textElement","selectSibling","scrollItemIntoView","listItem","visibility","_rect","next","bottom","getElementVisibility","block","inline","SearchAdapter","textfield","List","textFilter","itemTextParser","onItemSelected","inputValue","suggestedInput","setSelectionRange","hideDropDown","onTextFieldKeydownEvent","handleInputEvent","handleBlurEvent","searchOnFocus","dropdown","filterItems","debounce","suggestionMethod","currentSearchTerm","previousValue","performSearch","updateList","results","_this2","showDropDown","performDebounce","checkExpired","searchResults","filterListItems","onErrorCallback","error","message","resolve","reject","Error","searchTerm","_this3","dropDownElement","suggestion","TextField","selectionStart","selectionEnd","fnFilter","_this4","hasItem","newSelection","isDropDownShown","click","tabPanelElement","setHidden","SCROLL_EVENT","onTabContentScroll","tabContentElement","isPageRtl","scrollPoint","visibleIndex","visibilityPercentage","panel","rightPanel","leftPeekPanel","rightPeekPanel","selectedIndex","leftPanelIndex","isResting","leftSelected","rightSelected","lastIndex","leftPanel","currentTargetIndexString","currentTargetIndex","newSelectedIndex","TabPanel","selectPanel","panelElement","scrollToPanel","currentSelectedIndex","panelIndex","otherPanels","tabListElement","onForwardArrowKey","onBackArrowKey","setIndicatorPosition","percentage","animate","indicatorElement","leftItem","right","nextItem","TabItem","tab_attach","tab_detach","onResize","RESIZE_WAIT_FRAMES","tabElement","TabList","TabContent","onTabItemSelectedChange","selectedPanel","panels","tabItemElement","tabItemIndex","tabItems","stage","performResize","relatedPanel","relatedItem","dispatchEvents","_item__WEBPACK_IMPORTED_MODULE_1__","ChipItem","_core_ripple_index__WEBPACK_IMPORTED_MODULE_0__","constructTableCheckbox","icon","Selection","DataTableAdapterColumn","innerHTML","sortable","sortIcon","customSortIcon","hasChildNodes","tooltip","wrapper","primaryColumn","rowSelector","checkboxLabel","renderer","defaultCheckboxRenderer","defaultCellRenderer","formatter","circumference","PI","progressCircleElement","dashOffset","pathElements","SECONDARY_ACTION_EVENT","listSecondaryElement","onInteraction","DataTableAdapter","datatable","datasource","sorter","onValueChangeRequested","onValueChanged","DataTable","onElementScrollListener","onElementScroll","onDataTableColumnHeaderSortListener","onDataTableColumnHeaderSort","onCheckedChangeEventListener","onCheckedChangeEvent","onRowSelectedChangeEvent","columns","page","pageLimit","debounceTimeMs","useLazyRendering","updateSortIcons","updateSortColumn","filteredDatasource","forceRefresh","performLazyRender","throttledRenderPending","scheduleThrottledRender","performThrottledRender","debounceTimeout","currentCell","getTableCell","setCheckOnAllRows","setHasSelection","currentRow","getTableRow","object","getDataForTableRow","tableHeaderCell","refresh","tableColumn","direction","valueA","valueB","sortedTableHeaderCell","otherTableHeader","column","selectorColumn","getDatasource","buildScrollListener","destroyScrollListener","min","total","max","paginationDetailsElement","previousPageButton","nextPageButton","getFooter","disabled","needsDraw","optionsElement","rowsPerPageText","limits","limitsElement","select","limit","option","dropdownIcon","updateRowCount","updatePaginator","refreshRows","paginationControls","viewportTop","viewportBottom","offsetHeight","rowTop","rowBottom","visibleRows","firstRowIndex","Infinity","lastRowIndex","sectionRowIndex","_this5","len","minRowCount","screen","foundFirstVisibleRow","startIndex","endIndex","isRowVisible","_this6","getLazyRenderRows","refreshRow","clearNonvisibleRows","refreshFilter","_this7","rowLength","rowsToDisplay","offset","rowDifference","newRows","_this8","datasourceIndex","minIndex","rowIndex","_this9","refreshCell","createdCells","missingColumn","missingCell","insertCell","formattedValue","search","_this10","closer","onCloserClicked","onFabButtonClicked","toggle","_index__WEBPACK_IMPORTED_MODULE_0__","onCheckedChange","radiogroupElement","AnyDomAdapterCreator","AnyDomAdapterRenderer","dataElementMap","Map","elementDataMap","WeakMap","dataBoundsMap","onScrollerScrollListener","onScrollerScroll","setupRecycleOptions","recycle","recycleOptions","position","drawViewport","deferRenderDebounce","deferRender","unlinkedDataItems","removeItem","clear","refreshItem","maxBottomBounds","idle","itemsToDraw","foundVisibleItem","expectedTop","paddingTopSet","lastBottom","additionalPrerenderSize","preRenderTop","preRenderBottom","dataBounds","getBounds","newBounds","invalidate","storeBoundsCache","isBottomInPrerender","isTopInPrerender","isBottomVisible","isTopVisible","get","removeElement","delete","lastRenderedBounds","renderedElements","newPaddingTop","cachedBounds","lastItem","lastItemBounds","equalSize","indexHint","cached","cache","set","previousBounds","firstBounds","fastMeasure","offsetParentRect","offsetParent","measureElementBounds","dataIndex","elementIndex","bounds","checkPosition","firstElementChild","siblingIndex","previousDataObject","inserted","previousElement","prevClientWidth","prevClientHeight","invalidateItem","currentBounds","j","previousIndex","transitionElement","pxToInteger","px","convertBorderRadius","parsePercentage","numValue","horizontal","vertical","getShapeTransform","targetElement","originElement","originStyle","originRect","targetRect","originCSSStyle","originX","originWidth","originY","originHeight","boxSizing","paddingRight","paddingBottom","paddingLeft","translateX","translateY","scaleX","scaleY","toStyleSyle","toShapeElement","shapeTransform","fromShapeElement","contentTransform","toContentElement","fromContentElement","transitionProperties","oldFromShapeProperties","oldToShapeProperties","oldFromContentProperties","oldToContentProperties","newFromShapeProperties","prop","substring","match","shadow","inset","blurRadius","spreadRadius","color","toLowerCase","numberValue","v","topLeft","topRight","bottomLeft","bottomRight","horizontalRadii","verticalRadii","calculatedDuration","duration","totalDuration","fadeInTime","fadeOutTime","transformTransition","fadeInTransition","fadeOutTransition","property","callback","expectedDuration","hasEnded","revertFrom","transition","onComplete"],"mappings":"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","file":"entire-framework.min.js","sourcesContent":["/** @type {?boolean} */\nlet passiveEventListenerSupported = null;\n\n/** @return {void} */\nfunction testPassiveEventListenerOptionSupport() {\n  try {\n    passiveEventListenerSupported = false;\n    const options = {\n      get passive() {\n        passiveEventListenerSupported = true;\n        return true;\n      },\n    };\n    // @ts-ignore\n    window.addEventListener('test', options, options);\n    // @ts-ignore\n    window.removeEventListener('test', options, options);\n  } catch (err) {\n    passiveEventListenerSupported = false;\n  }\n}\n\n/** @return {Object|boolean} */\nexport function getPassiveEventListenerOption() {\n  if (passiveEventListenerSupported == null) {\n    testPassiveEventListenerOptionSupport();\n  }\n  if (passiveEventListenerSupported) {\n    return { passive: true };\n  }\n  return false;\n}\n\nexport const nextTick = window.requestAnimationFrame || (cb => window.setTimeout(cb, 17));\n\nexport const cancelTick = window.cancelAnimationFrame || window.clearTimeout;\n\n/**\n * @param {Element} element\n * @param {string} className\n * @return {Element}\n */\nexport function getChildElementByClass(element, className) {\n  const child = element.getElementsByClassName(className)[0];\n  if (child && child.parentElement !== element) {\n    return null;\n  }\n  return child;\n}\n\n/**\n * @param {Element} element\n * @param {string} className\n * @param {boolean} [includeSelf=true]\n * @return {HTMLElement}\n */\nexport function findElementParentByClassName(element, className, includeSelf) {\n  let el;\n  if (includeSelf === false) {\n    el = element.parentElement;\n  } else {\n    /** @type {HTMLElement} */\n    el = (element);\n  }\n  while (el != null && !el.classList.contains(className)) {\n    el = el.parentElement;\n  }\n  return el;\n}\n\n/** @return {boolean} */\nexport function isRtl() {\n  return document.documentElement.dir === 'rtl';\n}\n\n/**\n * @param {Element} element\n * @param {string} type\n * @param {Object} [detail]\n * @return {boolean}\n */\nexport function dispatchDomEvent(element, type, detail) {\n  let event;\n  if (typeof CustomEvent === 'function') {\n    event = new CustomEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      detail,\n    });\n  } else if (detail == null) {\n    if (typeof Event === 'function') {\n      event = new Event(type, {\n        bubbles: true,\n        cancelable: true,\n      });\n    } else {\n      event = document.createEvent('Event');\n      event.initEvent(type, true, true);\n    }\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, detail);\n  }\n  return element.dispatchEvent(event);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):any} fn\n * @return {void}\n * @template {any} T\n */\nexport function iterateArrayLike(arrayLike, fn) {\n  Array.prototype.forEach.call(arrayLike, fn);\n}\n\n/**\n * @param {ArrayLike<T>} arrayLike\n * @param {function(T, number, ArrayLike<T>):boolean|void} fn\n * @return {boolean}\n * @template {any} T\n */\nexport function iterateSomeOfArrayLike(arrayLike, fn) {\n  return Array.prototype.some.call(arrayLike, fn);\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    fn(sibling, distance);\n    sibling = sibling.nextElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Element} element\n * @param {function(Element, number):boolean|void} fn\n * @return {boolean}\n */\nexport function iterateSomeOfElementSiblings(element, fn) {\n  let distance = -1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance -= 1;\n  }\n  sibling = element.nextElementSibling;\n  distance = 1;\n  while (sibling) {\n    if (fn(sibling, distance)) {\n      return true;\n    }\n    sibling = sibling.previousElementSibling;\n    distance += 1;\n  }\n  return false;\n}\n\n/**\n * @param {Node} node\n * @param {boolean} [create]\n * @return {Node}\n */\nexport function getTextNode(node, create) {\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (create && !textNode) {\n    textNode = document.createTextNode('');\n    node.appendChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {Node} node\n * @param {string} value\n * @return {Node}\n */\nexport function setTextNode(node, value) {\n  /** @type {ChildNode} */\n  let textNode;\n  iterateSomeOfArrayLike(node.childNodes, (childNode) => {\n    if (childNode.nodeType !== Node.TEXT_NODE) {\n      return false;\n    }\n    textNode = childNode;\n    return true;\n  });\n  if (value) {\n    if (!textNode) {\n      textNode = document.createTextNode(value);\n      node.appendChild(textNode);\n    } else {\n      textNode.nodeValue = value;\n    }\n  } else if (textNode) {\n    node.removeChild(textNode);\n  }\n  return textNode;\n}\n\n/**\n * @param {HTMLElement} element\n * @param {boolean} [smooth=false]\n * @param {boolean} [rtl=false]\n * @return {void}\n */\nexport function scrollToElement(element, smooth, rtl) {\n  if (!element) {\n    return;\n  }\n  const parent = element.parentElement;\n  if (!parent) {\n    return;\n  }\n\n  let targetScrollLeft = rtl\n    ? parent.scrollWidth + element.offsetLeft - element.offsetWidth\n    : element.offsetLeft;\n\n  const elementRect = element.getBoundingClientRect();\n  const parentRect = parent.getBoundingClientRect();\n  let subPixelScrollPosition = elementRect.left - parentRect.left;\n  if (subPixelScrollPosition < 0) {\n    subPixelScrollPosition = 0;\n  }\n  if (Math.abs(subPixelScrollPosition - targetScrollLeft) < 2) {\n    targetScrollLeft = subPixelScrollPosition;\n  }\n  if (parent.scrollLeft === targetScrollLeft) {\n    return;\n  }\n\n  if (parent.scrollTo) {\n    parent.scrollTo({\n      top: 0,\n      left: targetScrollLeft,\n      behavior: smooth ? 'smooth' : 'auto',\n    });\n    return;\n  }\n  parent.style.setProperty('scroll-behavior', 'auto');\n  parent.scrollLeft = targetScrollLeft;\n  nextTick(() => {\n    parent.style.removeProperty('scroll-behavior');\n  });\n}\n","// Keyboard Navigation\n\nimport { dispatchDomEvent, isRtl } from '../dom';\n\nexport const FORWARD_ARROW_KEY = 'mdw:keyboard-forwardarrowkey';\nexport const BACK_ARROW_KEY = 'mdw:keyboard-backarrowkey';\nexport const UP_ARROW_KEY = 'mdw:keyboard-uparrowkey';\nexport const DOWN_ARROW_KEY = 'mdw:keyboard-downarrowkey';\nexport const HOME_KEY = 'mdw:keyboard-homekey';\nexport const END_KEY = 'mdw:keyboard-endkey';\nexport const PAGEUP_KEY = 'mdw:keyboard-pageupkey';\nexport const PAGEDOWN_KEY = 'mdw:keyboard-pagedownkey';\nexport const SPACEBAR_KEY = 'mdw:keyboard-spacebarkey';\nexport const ENTER_KEY = 'mdw:keyboard-enterkey';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.addEventListener('keydown', onKeyDownHandler);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDownHandler);\n}\n\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDownHandler(event) {\n  /** @type {Element} */\n  const element = (event.currentTarget);\n  const detail = {\n    ctrlKey: event.ctrlKey,\n    shiftKey: event.shiftKey,\n    altKey: event.altKey,\n    metaKey: event.metaKey,\n    repeat: event.repeat,\n  };\n\n  let type;\n  switch (event.key) {\n    case 'Enter':\n      type = ENTER_KEY;\n      break;\n    case ' ':\n    case 'Spacebar':\n      type = SPACEBAR_KEY;\n      break;\n    case 'ArrowDown':\n    case 'Down':\n      type = DOWN_ARROW_KEY;\n      break;\n    case 'ArrowUp':\n    case 'Up':\n      type = UP_ARROW_KEY;\n      break;\n    case 'ArrowLeft':\n    case 'Left':\n      type = isRtl() ? FORWARD_ARROW_KEY : BACK_ARROW_KEY;\n      break;\n    case 'ArrowRight':\n    case 'Right':\n      type = isRtl() ? BACK_ARROW_KEY : FORWARD_ARROW_KEY;\n      break;\n    case 'Home':\n      type = HOME_KEY;\n      break;\n    case 'End':\n      type = END_KEY;\n      break;\n    case 'PageUp':\n      type = PAGEUP_KEY;\n      break;\n    case 'PageDown':\n      type = PAGEDOWN_KEY;\n      break;\n    default:\n      return;\n  }\n\n  if (!dispatchDomEvent(element, type, detail)) {\n    // preventDefault called\n    event.stopPropagation();\n    event.preventDefault();\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#kbd_roving_tabindex\n\nimport {\n  iterateArrayLike,\n  dispatchDomEvent,\n  iterateSomeOfArrayLike,\n} from '../dom';\n\nexport const TABINDEX_ZEROED = 'mdw:rovingtabindex-tabindexzeroed';\n\n/**\n * @param {ArrayLike<Element>} items\n * @param {boolean} [focusableWhenDisabled=true]\n * @return {void}\n */\nexport function setupTabIndexes(items, focusableWhenDisabled = true) {\n  /** @type {Element} */\n  let currentlyFocusedChild = null;\n  /** @type {Element} */\n  let currentTabIndexChild = null;\n  /** @type {Element} */\n  let firstFocusableChild = null;\n  iterateArrayLike(items, (child) => {\n    if (!currentlyFocusedChild && document.activeElement === child) {\n      currentlyFocusedChild = child;\n    } else if (!currentTabIndexChild && child.getAttribute('tabindex') === '0') {\n      currentTabIndexChild = child;\n    } else {\n      if (!firstFocusableChild && child.getAttribute('aria-hidden') !== 'true'\n        && (focusableWhenDisabled || child.getAttribute('aria-disabled') !== 'true')) {\n        firstFocusableChild = child;\n      }\n      child.setAttribute('tabindex', '-1');\n    }\n    attach(child);\n  });\n  if (currentlyFocusedChild) {\n    currentlyFocusedChild.setAttribute('tabindex', '0');\n  } else if (currentTabIndexChild) {\n    if (currentlyFocusedChild) {\n      currentTabIndexChild.setAttribute('tabindex', '-1');\n    }\n  } else if (firstFocusableChild) {\n    firstFocusableChild.setAttribute('tabindex', '0');\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  if (!element.hasAttribute('tabindex')) {\n    element.setAttribute('tabindex', (document.activeElement === element) ? '0' : '-1');\n  }\n  element.addEventListener('focus', onChildFocus);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('focus', onChildFocus);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nfunction onChildFocus(event) {\n  /** @type {Element} */\n  const child = (event.currentTarget);\n  if (child.getAttribute('tabindex') === '0') {\n    return;\n  }\n  child.setAttribute('tabindex', '0');\n  dispatchDomEvent(child, TABINDEX_ZEROED);\n}\n\n/**\n * @param {ArrayLike<Element>} items\n * @param {Element[]} [excludeItems]\n * @return {void}\n */\nexport function removeTabIndex(items, excludeItems = []) {\n  iterateArrayLike(items, (item) => {\n    if (excludeItems.indexOf(item) !== -1) {\n      return;\n    }\n    if (item.hasAttribute('tabindex')) {\n      item.setAttribute('tabindex', '-1');\n    }\n  });\n}\n\n/**\n * @param {HTMLElement} element\n * @return {boolean}\n */\nfunction attemptFocus(element) {\n  try {\n    element.focus();\n  } catch (e) {\n    // Ignore error.\n  }\n  return document.activeElement === element;\n}\n\n/**\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @param {boolean} [loop=true]\n * @param {boolean} [reverse]\n * @return {void}\n */\nexport function selectNext(list, current = null, loop = true, reverse = false) {\n  let foundCurrent = false;\n\n  const iterateResult = iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!foundCurrent) {\n      if (current) {\n        if (candidate === current) {\n          foundCurrent = true;\n        }\n      } else if (candidate.getAttribute('tabindex') === '0') {\n        foundCurrent = true;\n      }\n      return false;\n    }\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    return attemptFocus(candidate);\n  });\n  if (iterateResult) {\n    return;\n  }\n  if (!loop) {\n    if (document.activeElement !== current && current instanceof HTMLElement) {\n      current.focus();\n    }\n    return;\n  }\n  iterateSomeOfArrayLike(list, (item, index, array) => {\n    const candidate = reverse ? (array[array.length - 1 - index]) : item;\n    if (!candidate.hasAttribute('tabindex')) {\n      return false;\n    }\n    if (candidate.getAttribute('aria-hidden') === 'true') {\n      return false;\n    }\n    if (candidate.getAttribute('mdw-skip-tab') === 'true') {\n      return false;\n    }\n    // Abort if we've looped all the way back to original element\n    // Abort if candidate received focus\n    return (attemptFocus(candidate) || candidate === current);\n  });\n}\n\n/**\n * Alias for selectNext(list, current, true);\n * @param {ArrayLike<HTMLElement>} list\n * @param {Element} [current]\n * @param {boolean} [loop=true]\n * @return {void}\n */\nexport function selectPrevious(list, current, loop = true) {\n  return selectNext(list, current, loop, true);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'button');\n  if (element instanceof HTMLButtonElement === false\n      && !element.hasAttribute('tabindex')) {\n    element.setAttribute('tabindex', '0');\n  }\n  element.setAttribute('mdw-aria-button-js', '');\n  if (element instanceof HTMLButtonElement === false\n    && element instanceof HTMLInputElement === false) {\n    element.addEventListener('keydown', onKeyDown);\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-button-js');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (!buttonElement) {\n    return;\n  }\n  if (buttonElement.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  buttonElement.dispatchEvent(newEvent);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#button\n\nimport * as Ripple from '../../core/ripple/index';\nimport * as Overlay from '../../core/overlay/index';\nimport * as AriaButton from '../../core/aria/button';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Ripple.attach(element);\n  element.classList.add('mdw-ripple');\n  Overlay.attach(element);\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  AriaButton.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaButton.detach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","import {\n  getChildElementByClass, nextTick, getPassiveEventListenerOption, iterateArrayLike,\n} from '../dom';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-ripple'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  let rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (!rippleContainer) {\n    rippleContainer = document.createElement('div');\n    rippleContainer.classList.add('mdw-ripple__container');\n    rippleContainer.setAttribute('role', 'presentation');\n    if (element.firstChild) {\n      element.insertBefore(rippleContainer, element.firstChild);\n    } else {\n      element.appendChild(rippleContainer);\n    }\n  }\n\n  let rippleInner = getChildElementByClass(rippleContainer, 'mdw-ripple__inner');\n  if (!rippleInner) {\n    rippleInner = document.createElement('div');\n    rippleInner.classList.add('mdw-ripple__inner');\n    rippleInner.setAttribute('role', 'presentation');\n    rippleContainer.appendChild(rippleInner);\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.removeAttribute('mdw-fade-out');\n  element.setAttribute('mdw-ripple-js', '');\n  element.addEventListener('click', onClick, getPassiveEventListenerOption());\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  rippleInner.addEventListener('animationend', onAnimationEnd, getPassiveEventListenerOption());\n}\n\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (!event.pointerType && !event.detail) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = event.pageX - rect.left - window.pageXOffset;\n  const y = event.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'mouse');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  const touch = event.changedTouches[0];\n  if (!touch) {\n    return;\n  }\n  const rect = rippleContainer.getBoundingClientRect();\n  const x = touch.pageX - rect.left - window.pageXOffset;\n  const y = touch.pageY - rect.top - window.pageYOffset;\n  updateRipplePosition(rippleInner, x, y);\n  drawRipple(rippleInner, 'touch');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n\n  nextTick(() => {\n    if (isActive(rippleContainer.parentElement)) {\n      if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n        return;\n      }\n      updateRipplePosition(rippleInner);\n      drawRipple(rippleInner, 'key');\n    }\n  });\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isActive(element) {\n  if (element.matches) {\n    return element.matches(':active');\n  }\n  // @ts-ignore\n  if (element.msMatchesSelector) {\n    // @ts-ignore\n    element.msMatchesSelector(':active');\n  }\n  return false;\n}\n\n/**\n * @param {HTMLElement} rippleInner\n * @param {number} [x]\n * @param {number} [y]\n * @return {void}\n */\nexport function updateRipplePosition(rippleInner, x, y) {\n  let width;\n  let height;\n  let xPos = x;\n  let yPos = y;\n  if (x == null) {\n    xPos = rippleInner.parentElement.clientWidth / 2;\n    width = xPos;\n  } else if (x >= rippleInner.parentElement.clientWidth / 2) {\n    width = x;\n    // furthest horizontal side is left\n  } else {\n    width = rippleInner.parentElement.clientWidth - x;\n    // furthest horizontal side is right\n  }\n  if (y == null) {\n    yPos = rippleInner.parentElement.clientHeight / 2;\n    height = yPos;\n  } else if (y >= rippleInner.parentElement.clientHeight / 2) {\n    height = y;\n    // furthest vertical side is bottom\n  } else {\n    height = rippleInner.parentElement.clientHeight - y;\n    // furthest vertical side is top\n  }\n  const hypotenuse = Math.sqrt((width * width) + (height * height));\n  rippleInner.style.setProperty('height', `${hypotenuse}px`);\n  rippleInner.style.setProperty('width', `${hypotenuse}px`);\n  rippleInner.style.setProperty('left', `${xPos - (hypotenuse / 2)}px`);\n  rippleInner.style.setProperty('top', `${yPos - (hypotenuse / 2)}px`);\n}\n\n/**\n * @param {Element} rippleInner\n * @param {string} initiator\n * @return {void}\n */\nexport function drawRipple(rippleInner, initiator) {\n  const currentInitiator = rippleInner.getAttribute('mdw-fade-in');\n  if (currentInitiator && currentInitiator !== initiator) {\n    // Only allow repeat interactions from same initiator\n    return;\n  }\n  rippleInner.setAttribute('mdw-fade-in', initiator);\n  if (currentInitiator === initiator) {\n    // Repeat the animation\n    if (rippleInner.hasAttribute('mdw-fade-in-repeat')) {\n      rippleInner.removeAttribute('mdw-fade-in-repeat');\n    } else {\n      rippleInner.setAttribute('mdw-fade-in-repeat', '');\n    }\n  }\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  /** @type {HTMLElement} */\n  const rippleInner = (event.currentTarget);\n  if (event.animationName === 'ripple-fade-in' || event.animationName === 'ripple-fade-in-repeat') {\n    rippleInner.setAttribute('mdw-fade-in-complete', '');\n    return;\n  }\n  if (event.animationName === 'ripple-fade-out') {\n    rippleInner.removeAttribute('mdw-fade-in');\n    rippleInner.removeAttribute('mdw-fade-in-repeat');\n    rippleInner.removeAttribute('mdw-fade-in-complete');\n    rippleInner.removeAttribute('mdw-fade-out');\n  }\n}\n\n/**\n * @param {Element} rippleInner\n * @return {void}\n */\nexport function clearRipple(rippleInner) {\n  if (!rippleInner.hasAttribute('mdw-fade-in')) {\n    return;\n  }\n  if (rippleInner.hasAttribute('mdw-keydown') && !rippleInner.hasAttribute('mdw-keyup')) {\n    return;\n  }\n  if (!rippleInner.hasAttribute('mdw-fade-in-complete')) {\n    return;\n  }\n  rippleInner.removeAttribute('mdw-fade-in');\n  rippleInner.removeAttribute('mdw-fade-in-repeat');\n  rippleInner.removeAttribute('mdw-fade-in-complete');\n  rippleInner.setAttribute('mdw-fade-out', '');\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const rippleContainer = (getChildElementByClass(element, 'mdw-ripple__container'));\n  if (!rippleContainer) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const rippleInner = (getChildElementByClass(rippleContainer, 'mdw-ripple__inner'));\n  if (!rippleInner) {\n    return;\n  }\n  // @ts-ignore\n  if (event.pointerType || event.detail) {\n    return;\n  }\n  if (rippleInner.getAttribute('mdw-fade-in') === 'key') {\n    // Already handled by keydown\n    return;\n  }\n  updateRipplePosition(rippleInner);\n  drawRipple(rippleInner, 'key');\n  nextTick(() => {\n    clearRipple(rippleInner);\n  });\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  const rippleContainer = getChildElementByClass(element, 'mdw-ripple__container');\n  if (rippleContainer) {\n    element.removeChild(rippleContainer);\n  }\n  element.removeAttribute('mdw-ripple-js');\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousedown', onMouseDown);\n  element.removeEventListener('touchstart', onTouchStart);\n  element.removeEventListener('keydown', onKeyDown);\n}\n","import { getPassiveEventListenerOption, iterateArrayLike } from '../dom';\n\nlet lastInteractionWasTouch = false;\n\nif (window && window.matchMedia) {\n  lastInteractionWasTouch = window.matchMedia('(any-pointer: coarse)').matches;\n}\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-overlay'), attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-overlay-js', '');\n  element.addEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.addEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.addEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.addEventListener('blur', onBlur, getPassiveEventListenerOption());\n  element.addEventListener('focus', onFocus, getPassiveEventListenerOption());\n}\n\n/**\n * @param {PointerEvent|MouseEvent} event\n * @return {void}\n */\nexport function onMouseDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.hasAttribute('mdw-overlay-touch')) {\n    return;\n  }\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onTouchStart(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'true');\n}\n\n/**\n * @param {TouchEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  element.setAttribute('mdw-overlay-touch', 'false');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onBlur(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  const value = element.getAttribute('mdw-overlay-touch');\n  if (value == null) {\n    return;\n  }\n  if (value === 'true') {\n    lastInteractionWasTouch = true;\n  } else {\n    lastInteractionWasTouch = false;\n  }\n  element.removeAttribute('mdw-overlay-touch');\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element.hasAttribute('mdw-overlay-touch')) {\n    // Element was focused without a mouse or touch event (keyboard or programmatic)\n    if (lastInteractionWasTouch) {\n      element.setAttribute('mdw-overlay-touch', 'true');\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-overlay-js');\n  element.removeAttribute('mdw-overlay-touch');\n  element.removeEventListener('mousedown', onMouseDown, getPassiveEventListenerOption());\n  element.removeEventListener('touchstart', onTouchStart, getPassiveEventListenerOption());\n  element.removeEventListener('keydown', onKeyDown, getPassiveEventListenerOption());\n  element.removeEventListener('blur', onBlur, getPassiveEventListenerOption());\n}\n","import { dispatchDomEvent } from '../dom';\n\n/**\n * @param {string} name Attribute Name\n * @param {Element} element Element\n * @param {string|boolean} value Boolean Attribute Value\n * @param {string} [dispatchEventName] OnChangeEvent\n * @param {boolean} [explicit=true]\n * @param {string} [emptyValue=false] Default empty value\n * @return {boolean} successful\n */\nfunction setAttribute(name, element, value, dispatchEventName, explicit = true, emptyValue = 'false') {\n  const attr = element.getAttribute(name);\n  let stringValue;\n  if (typeof value === 'string') {\n    stringValue = value;\n  } else {\n    stringValue = (value ? 'true' : 'false');\n  }\n  if (attr === stringValue) {\n    // Nothing to change\n    return true;\n  }\n  if (stringValue === emptyValue) {\n    // Set default empty value\n    if (attr == null) {\n      // No attribute set\n      if (explicit) {\n        // Explicitly set attribute\n        element.setAttribute(name, stringValue);\n      }\n      return true;\n    }\n    if (!explicit) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, stringValue);\n    }\n  } else {\n    // Non default value;\n    element.setAttribute(name, stringValue);\n  }\n  if (!dispatchEventName) {\n    return true;\n  }\n  // Alert change\n  if (!dispatchDomEvent(element, dispatchEventName, { value: stringValue })) {\n    // Revert\n    if (attr == null) {\n      element.removeAttribute(name);\n    } else {\n      element.setAttribute(name, attr);\n    }\n    return false;\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setCurrent(element, value, dispatchEventName) {\n  // Some browsers incorrectly style [aria-current=\"false\"]\n  // Attribute will be removed when false|\"false\"\n  return setAttribute('aria-current', element, value, dispatchEventName, false);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  return setAttribute('aria-selected', element, value, dispatchEventName);\n}\n\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isChecked(element) {\n  return element.getAttribute('aria-checked') === 'true';\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setChecked(element, value, dispatchEventName) {\n  return setAttribute('aria-checked', element, value, dispatchEventName);\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isDisabled(element) {\n  return element.getAttribute('aria-disabled') === 'true';\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function isReadonly(element) {\n  return element.getAttribute('aria-readonly') === 'true';\n}\n","// https://www.w3.org/TR/wai-aria-practices/#dialog_modal\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  findElementParentByClassName,\n  getChildElementByClass,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\nclass DialogStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object} [state]\n   * @param {Object} [previousState]\n   */\n  constructor(element, previousFocus, state, previousState) {\n    this.element = (element);\n    this.previousFocus = (previousFocus);\n    this.state = state;\n    this.previousState = previousState;\n  }\n}\n\n/** @type {DialogStack[]} */\nconst OPEN_DIALOGS = [];\n\nexport const CANCEL_EVENT = 'mdw:dialog-cancel';\n\nexport const CONFIRM_EVENT = 'mdw:dialog-confirm';\n\nexport const CUSTOM_EVENT = 'mdw:dialog-custom';\n\nexport const DISMISS_EVENT = 'mdw:dialog-dismiss';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-dialog-js', '');\n  element.addEventListener('transitionend', onTransitionEnd);\n\n  let dialogCloser = getChildElementByClass(element, 'mdw-dialog__close');\n  if (!dialogCloser) {\n    dialogCloser = document.createElement('div');\n    dialogCloser.className = 'mdw-dialog__close';\n    if (element.firstChild) {\n      element.insertBefore(dialogCloser, element.firstChild);\n    } else {\n      element.appendChild(dialogCloser);\n    }\n  }\n  dialogCloser.addEventListener('click', onCancelClick);\n  const popup = getChildElementByClass(element, 'mdw-dialog__popup');\n  popup.addEventListener('keydown', onKeyDown);\n  const buttons = popup.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  let foundConfirmButton = false;\n  let foundCancelButton = false;\n  iterateArrayLike(buttons, (button) => {\n    Button.attach(button);\n    if (button.hasAttribute('mdw-custom')) {\n      button.addEventListener('click', onCustomButtonClick);\n      return;\n    }\n    if (!foundConfirmButton) {\n      button.addEventListener('click', onConfirmClick);\n      foundConfirmButton = true;\n      return;\n    }\n    if (!foundCancelButton) {\n      button.addEventListener('click', onCancelClick);\n      foundCancelButton = true;\n      return;\n    }\n    button.addEventListener('click', onCustomButtonClick);\n  });\n  setupARIA(element);\n}\n\n/**\n * @param {TransitionEvent} event\n * @return {void}\n */\nexport function onTransitionEnd(event) {\n  if (event.propertyName !== 'opacity') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const dialogElement = (event.currentTarget);\n  if (dialogElement.getAttribute('aria-hidden') !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (!popupElement) {\n    return;\n  }\n  popupElement.style.removeProperty('display');\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function setupARIA(dialogElement) {\n  if (dialogElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  dialogElement.setAttribute('role', 'dialog');\n  dialogElement.setAttribute('aria-modal', 'true');\n  if (!dialogElement.hasAttribute('aria-hidden')) {\n    dialogElement.setAttribute('aria-hidden', 'true');\n  }\n  const popupElement = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n  if (!popupElement) {\n    return;\n  }\n\n  if (!popupElement.hasAttribute('aria-label') && !popupElement.hasAttribute('aria-labelledby')) {\n    const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (titleElement) {\n      // titleElement\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function detach(dialogElement) {\n  dialogElement.removeEventListener('transitionend', onTransitionEnd);\n  dialogElement.removeAttribute('mdw-dialog-js');\n  const dialogCloser = getChildElementByClass(dialogElement, 'mdw-dialog__close');\n  if (dialogCloser) {\n    dialogCloser.removeEventListener('click', onCancelClick);\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  if (popupElement) {\n    popupElement.removeEventListener('keydown', onKeyDown);\n    popupElement.style.removeProperty('transform-origin');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  const buttons = popupElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button) => {\n    Button.detach(button);\n    button.removeEventListener('click', onConfirmClick);\n    button.removeEventListener('click', onCancelClick);\n    button.removeEventListener('click', onCustomButtonClick);\n  });\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCancelClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const cancelElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(cancelElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onConfirmClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  confirm(dialogElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCustomButtonClick(event) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(button, 'mdw-dialog');\n  if (dispatchDomEvent(dialogElement, CUSTOM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Tab') {\n    handleTabKeyPress(event);\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    onEscapeKeyDown(event);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onEscapeKeyDown(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const popupElement = (event.currentTarget);\n  const dialogElement = findElementParentByClassName(popupElement, 'mdw-dialog');\n  cancel(dialogElement);\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenDialog = OPEN_DIALOGS[OPEN_DIALOGS.length - 1];\n  if (!lastOpenDialog || !lastOpenDialog.previousState) {\n    return;\n  }\n  if ((lastOpenDialog.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenDialog.previousState[key])) {\n    if (dispatchDomEvent(lastOpenDialog.element, CANCEL_EVENT)) {\n      hide(lastOpenDialog.element);\n    } else {\n      // Revert pop state by pushing state again\n      const title = getTitleText(lastOpenDialog.element);\n      window.history.pushState(lastOpenDialog.state, title);\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function cancel(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CANCEL_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {void}\n */\nexport function confirm(dialogElement) {\n  if (dispatchDomEvent(dialogElement, CONFIRM_EVENT)) {\n    hide(dialogElement);\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @return {string}\n */\nexport function getTitleText(dialogElement) {\n  let title = 'Dialog';\n  const titleElement = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (titleElement) {\n    title = titleElement.textContent;\n  } else {\n    const bodyElement = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n    if (bodyElement) {\n      title = bodyElement.textContent;\n    }\n  }\n  return title;\n}\n\n/**\n * @param {Element} dialogElement\n * @return {boolean} handled\n */\nexport function hide(dialogElement) {\n  if (dialogElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(dialogElement, DISMISS_EVENT)) {\n    return false;\n  }\n  dialogElement.setAttribute('aria-hidden', 'true');\n  // .mdw-dialog__popup hidden by transitionEnd event\n  let stackIndex = -1;\n  OPEN_DIALOGS.some((stack, index) => {\n    if (stack.element === dialogElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const stack = OPEN_DIALOGS[stackIndex];\n    if (stack.previousFocus && stack.previousFocus instanceof HTMLElement) {\n      if (findElementParentByClassName(document.activeElement, 'mdw-dialog') === dialogElement) {\n        // Only pop focus back when hiding a dialog with focus within itself.\n        try {\n          stack.previousFocus.focus();\n        } catch (e) {\n          // Failed to focus\n        }\n      }\n    }\n    OPEN_DIALOGS.splice(stackIndex, 1);\n    if (stack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (stack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_DIALOGS.length) {\n    window.removeEventListener('popstate', onPopState);\n  }\n  return true;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {boolean} handled\n */\nexport function show(dialogElement, event) {\n  if (event && event.type === 'click' && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  let changed = false;\n\n  if (dialogElement.getAttribute('aria-hidden') !== 'false') {\n    dialogElement.setAttribute('aria-hidden', 'false');\n    /** @type {HTMLElement} */\n    const popupElement = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n    popupElement.style.setProperty('display', 'flex');\n    changed = true;\n  }\n\n  updateTransformOrigin(dialogElement, event);\n\n  if (!changed) {\n    return false;\n  }\n  attach(dialogElement);\n  const previousFocus = document.activeElement;\n  const newState = { hash: Math.random().toString(36).substr(2, 16) };\n  let previousState = null;\n  if (window.history && window.history.pushState) {\n    if (!window.history.state) {\n      // Create new previous state\n      window.history.replaceState({\n        hash: Math.random().toString(36).substr(2, 16),\n      }, document.title);\n    }\n    previousState = window.history.state;\n    const title = getTitleText(dialogElement);\n    window.history.pushState(newState, title);\n    window.addEventListener('popstate', onPopState);\n  }\n  const dialogStack = new DialogStack(dialogElement, previousFocus, newState, previousState);\n  OPEN_DIALOGS.push(dialogStack);\n  const focusElement = dialogElement.querySelector('[mdw-autofocus]');\n  try {\n    if (focusElement && focusElement instanceof HTMLElement) {\n      if (focusElement.scrollIntoView) {\n        focusElement.scrollIntoView();\n      }\n      focusElement.focus();\n    } else if (dialogElement instanceof HTMLElement) {\n      dialogElement.focus();\n    }\n  } catch (e) {\n    // Failed to focus\n  }\n  return true;\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function handleTabKeyPress(event) {\n  /** @type {Element} */\n  const popupElement = (event.currentTarget);\n  const focusableElements = popupElement.querySelectorAll([\n    'button:not(:disabled):not([tabindex=\"-1\"])',\n    '[href]:not(:disabled):not([tabindex=\"-1\"])',\n    'input:not(:disabled):not([tabindex=\"-1\"])',\n    'select:not(:disabled):not([tabindex=\"-1\"])',\n    'textarea:not(:disabled):not([tabindex=\"-1\"])',\n    '[tabindex]:not([tabindex=\"-1\"])'].join(', '));\n  let foundTarget = false;\n  let candidate = null;\n  iterateSomeOfArrayLike(focusableElements, (el) => {\n    if (el === event.target) {\n      foundTarget = true;\n      if (event.shiftKey) {\n        return true;\n      }\n    } else if (event.shiftKey) {\n      candidate = el;\n    } else if (foundTarget) {\n      candidate = el;\n      return true;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (event.shiftKey) {\n      // Select last item\n      candidate = focusableElements[focusableElements.length - 1];\n    } else {\n      // Select first item\n      candidate = focusableElements[0];\n    }\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  if (candidate && candidate instanceof HTMLElement) {\n    try {\n      candidate.focus();\n    } catch (e) {\n      // Failed to focus\n    }\n  }\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)} [content]\n * @return {void}\n */\nexport function updateTitle(dialogElement, content) {\n  let title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n  if (!content) {\n    if (!title) {\n      // Nothing to be done\n      return;\n    }\n    title.parentElement.removeChild(title);\n    return;\n  }\n  if (!title) {\n    title = document.createElement('div');\n    title.className = 'mdw-dialog__title';\n    const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n    popup.insertBefore(title, popup.firstChild);\n  }\n  if (content instanceof DocumentFragment) {\n    while (title.lastChild) {\n      title.removeChild(title.lastChild);\n    }\n    title.appendChild(content);\n  } else {\n    title.textContent = content;\n  }\n}\n\n\n/**\n * @param {Element} dialogElement\n * @param {string[]} texts\n * @return {void}\n */\nexport function updateButtonText(dialogElement, texts) {\n  const buttons = dialogElement.querySelectorAll('.mdw-dialog__button-area .mdw-button');\n  iterateArrayLike(buttons, (button, index) => {\n    setTextNode(button, texts[index]);\n  });\n}\n\n/**\n * @param {Element} dialogElement\n * @param {(DocumentFragment|string)} [content]\n * @return {void}\n */\nexport function updateBody(dialogElement, content) {\n  let body = dialogElement.getElementsByClassName('mdw-dialog__body')[0];\n  if (!content) {\n    if (!body) {\n      // Nothing to be done\n      return;\n    }\n    body.parentElement.removeChild(body);\n    return;\n  }\n  if (!body) {\n    body = document.createElement('div');\n    body.className = 'mdw-dialog__body mdw-theme';\n    body.setAttribute('mdw-ink', 'medium');\n    const title = dialogElement.getElementsByClassName('mdw-dialog__title')[0];\n    if (title) {\n      title.insertAdjacentElement('afterend', body);\n    } else {\n      const popup = dialogElement.getElementsByClassName('mdw-dialog__popup')[0];\n      popup.insertBefore(body, popup.firstChild);\n    }\n  }\n  if (content instanceof DocumentFragment) {\n    while (body.lastChild) {\n      body.removeChild(body.lastChild);\n    }\n    body.appendChild(content);\n  } else {\n    body.textContent = content;\n  }\n}\n\n/**\n * @param {Object} options\n * @param {(DocumentFragment|string)} [options.title]\n * @param {(DocumentFragment|string)} [options.body]\n * @param {string[]} [options.buttons]\n * @param {boolean} [options.stacked=false]\n * @param {Element} [options.parent]\n * @param {boolean} [options.custom=false] Use custom button events\n * @param {(string|number)} [options.autofocus=0] Autofocus button by index or text\n * @return {Element}\n */\nexport function create(options) {\n  const element = document.createElement('div');\n  element.className = 'mdw-dialog';\n\n  const popup = document.createElement('div');\n  popup.className = 'mdw-dialog__popup mdw-theme';\n  popup.setAttribute('mdw-surface', 'card');\n  element.appendChild(popup);\n\n  updateTitle(element, options.title);\n  updateBody(element, options.body);\n\n  if (options.buttons) {\n    const buttonArea = document.createElement('div');\n    buttonArea.className = 'mdw-dialog__button-area';\n    let index = 0;\n    options.buttons.forEach((buttonText) => {\n      const button = document.createElement('div');\n      button.className = 'mdw-button mdw-theme';\n      button.setAttribute('tabindex', '0');\n      button.setAttribute('mdw-ink', 'secondary');\n      if (options.custom) {\n        button.setAttribute('mdw-custom', '');\n      }\n      button.textContent = buttonText;\n      buttonArea.appendChild(button);\n      if ((options.autofocus == null && index === 0)\n        || options.autofocus === index || options.autofocus === buttonText) {\n        button.setAttribute('mdw-autofocus', '');\n      }\n      index += 1;\n    });\n    if (options.stacked) {\n      buttonArea.setAttribute('mdw-stacked', '');\n    }\n    popup.appendChild(buttonArea);\n  }\n  if (options.parent) {\n    options.parent.appendChild(element);\n  }\n  attach(element);\n  return element;\n}\n\n/**\n * @param {Element} dialogElement\n * @param {Event} [event]\n * @return {void}\n */\nexport function updateTransformOrigin(dialogElement, event) {\n  /** @type {HTMLElement} */\n  const popup = (dialogElement.getElementsByClassName('mdw-dialog__popup')[0]);\n  popup.style.removeProperty('transform-origin');\n  if (!event) {\n    return;\n  }\n  const hadLayer = popup.style.getPropertyValue('display') != null;\n  if (!hadLayer) {\n    popup.style.setProperty('display', 'flex');\n  }\n  let pageX;\n  let pageY;\n  const dialogRect = dialogElement.getBoundingClientRect();\n  if ('pageX' in event && 'pageY' in event) {\n    ({ pageX, pageY } = event);\n    pageX -= window.pageXOffset;\n    pageY -= window.pageYOffset;\n  } else {\n    /** @type {Element} */\n    const target = (event.target || event.currentTarget);\n    if (target instanceof Element === false) {\n      return;\n    }\n    const rect = target.getBoundingClientRect();\n    if (!rect.width && !rect.width && !rect.left && !rect.top) {\n      return;\n    }\n    pageX = rect.left + (rect.width / 2);\n    pageY = rect.top + (rect.height / 2);\n  }\n  const transformOriginX = pageX - dialogRect.left - popup.offsetLeft;\n  const transformOriginY = pageY - dialogRect.top - popup.offsetTop;\n  popup.style.setProperty('transform-origin', `${transformOriginX}px ${transformOriginY}px`);\n  if (!hadLayer) {\n    popup.style.removeProperty('display');\n  }\n}\n\n// Aliases\nexport const dismiss = hide;\n","export default class Throttler {\n  /** @param {number} throttleTimeMs */\n  constructor(throttleTimeMs) {\n    this.pending = false;\n    this.queued = false;\n    this.queue = null;\n    this.throttleTimeMs = throttleTimeMs;\n  }\n\n  abort() {\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.pending = false;\n    this.queued = false;\n  }\n\n  /**\n   * @param {function} fn\n   * @return {void}\n   */\n  run(fn) {\n    if (this.pending) {\n      this.queued = true;\n      return;\n    }\n    if (this.queue) {\n      clearTimeout(this.queue);\n      this.queue = null;\n    }\n    this.queued = false;\n    this.pending = true;\n    this.queue = setTimeout(() => {\n      this.pending = false;\n      if (this.queued) {\n        this.run(fn);\n      }\n    }, this.throttleTimeMs);\n    fn();\n  }\n}\n","import { iterateArrayLike } from '../../core/dom';\nimport Throttler from '../../core/throttler';\n\nconst MIN_SCROLL_DELTA = 24; // Avoid finger bounce\n\nconst MOBILE_BREAKPOINT = 600;\nconst TABLET_BREAKPOINT = 1024;\n\n// Throttler will execute at earliest convenience\n// Smoother than using requestAnimationFrame\nconst SCROLL_THROTTLE_TIME_MS = 20;\n\n/** @type {number} */\nlet lastScrollY = null;\n/** @type {number} */\nlet penultimateScrollY = null;\nlet scrolledPastAppBar = false;\n/** @type {HTMLElement} */\nlet appBarElement = null;\n/** @type {HTMLElement} */\nlet layoutContentElement = null;\n/** @type {number} */\nlet lastScrollBottomDistance = null;\n/** @type {Throttler} */\nlet scrollThrottler = null;\n\n/** @return {void} */\nexport function attach() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    // Initialize with scroll up\n    document.body.addEventListener('scroll', onBodyScroll);\n    const contentElement = getContentElement();\n    if (contentElement) {\n      contentElement.addEventListener('scroll', onContentScroll);\n    }\n    resetScroll();\n  }\n\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-toggle'),\n    el => el.addEventListener('click', toggleNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-show'),\n    el => el.addEventListener('click', showNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__navdrawer-hide'),\n    el => el.addEventListener('click', hideNavDrawer));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-toggle'),\n    el => el.addEventListener('click', toggleSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-show'),\n    el => el.addEventListener('click', showSideSheet));\n  iterateArrayLike(document.getElementsByClassName('mdw-layout__sidesheet-hide'),\n    el => el.addEventListener('click', hideSideSheet));\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.addEventListener('click', onScrimClick);\n    scrim.addEventListener('scroll', onScrimScroll);\n    scrim.addEventListener('touchmove', onScrimScroll);\n    scrim.addEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {Throttler} */\nexport function getScrollThrottler() {\n  if (!scrollThrottler) {\n    scrollThrottler = new Throttler(SCROLL_THROTTLE_TIME_MS);\n  }\n  return scrollThrottler;\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onScrimScroll(event) {\n  // JS needed for Safari\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    event.preventDefault();\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/** @return {boolean} */\nexport function isNavDrawerModalShowing() {\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  if (!navDrawer) {\n    return false;\n  }\n  if (window.location.hash !== `#${navDrawer.id}` && navDrawer.getAttribute('aria-hidden') !== 'false') {\n    return false;\n  }\n  return (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-navdrawer-style') === 'modal');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function onScrimClick(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  if (isNavDrawerModalShowing()) {\n    hideNavDrawer();\n  }\n  const sidesheet = document.getElementsByClassName('mdw-layout__sidesheet')[0];\n  if (sidesheet && sidesheet.getAttribute('aria-hidden') === 'false') {\n    if (window.innerWidth < TABLET_BREAKPOINT || document.body.getAttribute('mdw-sidesheet-style') === 'modal') {\n      hideSideSheet();\n    }\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__navdrawer')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideNavDrawer(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const navDrawer = document.getElementsByClassName('mdw-layout__navdrawer')[0];\n  navDrawer.setAttribute('aria-hidden', 'true');\n  if (window.location.hash === `#${navDrawer.id}`) {\n    window.location.hash = '';\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleNavDrawer(event) {\n  if (document.getElementsByClassName('mdw-layout__navdrawer')[0].getAttribute('aria-hidden') === 'false') {\n    hideNavDrawer(event);\n  } else {\n    showNavDrawer(event);\n  }\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function showSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'false');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function hideSideSheet(event) {\n  if (event && event.target instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  document.getElementsByClassName('mdw-layout__sidesheet')[0].setAttribute('aria-hidden', 'true');\n}\n\n/**\n * @param {MouseEvent} [event]\n * @return {void}\n */\nexport function toggleSideSheet(event) {\n  if (document.getElementsByClassName('mdw-layout__sidesheet')[0].getAttribute('aria-hidden') === 'false') {\n    hideSideSheet(event);\n  } else {\n    showSideSheet(event);\n  }\n}\n\n/** @return {void} */\nexport function detach() {\n  document.removeEventListener('scroll', onBodyScroll);\n  const content = getContentElement();\n  if (content) {\n    content.removeEventListener('scroll', onContentScroll);\n  }\n  const scrim = document.getElementsByClassName('mdw-layout__scrim')[0];\n  if (scrim) {\n    scrim.removeEventListener('click', onScrimClick);\n    scrim.removeEventListener('scroll', onScrimScroll);\n    scrim.removeEventListener('touchmove', onScrimScroll);\n    scrim.removeEventListener('wheel', onScrimScroll);\n  }\n}\n\n/** @return {void} */\nexport function onBodyScroll() {\n  // position:sticky scrolling\n  getScrollThrottler().run(() => onScroll(true));\n}\n\n/** @return {boolean} */\nexport function isMobile() {\n  return window.innerWidth < MOBILE_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function isTablet() {\n  return window.innerWidth >= MOBILE_BREAKPOINT\n    && window.innerWidth < TABLET_BREAKPOINT;\n}\n\n/** @return {boolean} */\nexport function shouldAutoHideAppBar() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return false;\n  }\n  const autoHide = appBar.getAttribute('mdw-autohide');\n  if (autoHide == null) {\n    return false;\n  }\n  if (autoHide === '') {\n    return true;\n  }\n  if (autoHide.indexOf('tablet') !== -1 && isTablet()) {\n    return true;\n  }\n  if (autoHide.indexOf('mobile') !== -1 && isMobile()) {\n    return true;\n  }\n  return false;\n}\n\n/** @return {void} */\nexport function onContentScroll() {\n  getScrollThrottler().run(() => onScroll(false));\n}\n\n/** @return {HTMLElement} */\nexport function getAppBarElement() {\n  if (!appBarElement) {\n    /** @type {HTMLElement} */\n    appBarElement = (document.getElementsByClassName('mdw-layout__appbar')[0]);\n  }\n  return appBarElement;\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function showFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'false');\n  if (changeFabCut !== false) {\n    openAppBarFabCut();\n  }\n}\n\n/** @return {void} */\nexport function openAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (fabCutAttr == null) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') === -1) {\n    appBar.setAttribute('mdw-fab-cut', `open ${fabCutAttr}`.trim());\n  }\n}\n\n/** @return {void} */\nexport function closeAppBarFabCut() {\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n  const fabCutAttr = appBar.getAttribute('mdw-fab-cut');\n  if (!fabCutAttr) {\n    return;\n  }\n  if (fabCutAttr.indexOf('open') !== -1) {\n    appBar.setAttribute('mdw-fab-cut', fabCutAttr.replace('open', '').trim());\n  }\n}\n\n/**\n * @param {boolean} [changeFabCut=true]\n * @return {void}\n */\nexport function hideFab(changeFabCut) {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return;\n  }\n  fabElement.setAttribute('aria-hidden', 'true');\n  if (changeFabCut !== false) {\n    closeAppBarFabCut();\n  }\n}\n\n/** @return {boolean} */\nexport function isFabShown() {\n  const fabElement = document.getElementsByClassName('mdw-layout__fab')[0];\n  if (!fabElement) {\n    return false;\n  }\n  return fabElement.getAttribute('aria-hidden') !== 'true';\n}\n\n/** @return {HTMLElement} */\nexport function getContentElement() {\n  if (!layoutContentElement) {\n    /** @type {HTMLElement} */\n    layoutContentElement = (document.getElementsByClassName('mdw-layout__content')[0]);\n  }\n  return layoutContentElement;\n}\n\n/** @return {void} */\nexport function resetScroll() {\n  const appBar = getAppBarElement();\n  if (appBar) {\n    appBar.removeAttribute('mdw-hide');\n    appBar.removeAttribute('mdw-raise');\n  }\n  scrolledPastAppBar = false;\n  lastScrollY = 0 + MIN_SCROLL_DELTA;\n  penultimateScrollY = lastScrollY;\n  onScroll(true);\n}\n\n/**\n * @param {boolean} isBody\n * @return {void}\n */\nexport function onScroll(isBody) {\n  const contentElement = getContentElement();\n  const scrollElement = isBody ? document.body : contentElement;\n  const currentScrollY = scrollElement.scrollTop;\n  const change = currentScrollY - lastScrollY;\n  const delta = Math.abs(change);\n  if (delta === 0) {\n    // Horizontal scroll?\n    return;\n  }\n  if (currentScrollY < 0 && lastScrollY <= 0) {\n    // Repeated overscroll event\n    return;\n  }\n\n  const scrollBottom = scrollElement.scrollHeight - scrollElement.clientHeight;\n  const scrollBottomDistance = scrollBottom - currentScrollY;\n  const scrollTopChange = currentScrollY <= 0\n    || lastScrollY <= 0;\n  const scrollBottomChange = scrollBottomDistance === 0 && lastScrollBottomDistance !== 0;\n\n  lastScrollBottomDistance = scrollBottomDistance;\n  if (delta < MIN_SCROLL_DELTA && !scrollTopChange && !scrollBottomChange) {\n    return;\n  }\n\n  const didScrollUp = (scrollBottomDistance > 0) && (change < 0);\n  const isAtScrollTop = didScrollUp && currentScrollY <= 0;\n  const newScrollUp = didScrollUp && lastScrollY >= penultimateScrollY;\n  const didScrollDown = (change > 0);\n  const isAtScrollBottom = didScrollDown && (scrollBottomDistance <= 0);\n  const newScrollDown = didScrollDown && lastScrollY <= penultimateScrollY;\n\n  penultimateScrollY = lastScrollY;\n  lastScrollY = currentScrollY;\n\n  // To avoid DOM read, abort if scrolling in same direction and has already past app bar\n  if ((change === 0) || (!isAtScrollTop && !newScrollUp && !isAtScrollBottom && !newScrollDown\n    && scrolledPastAppBar)) {\n    return;\n  }\n\n  const appBar = getAppBarElement();\n  if (!appBar) {\n    return;\n  }\n\n  const bottomAppBar = appBar.hasAttribute('mdw-bottom');\n\n  const scrolledAway = bottomAppBar ? didScrollUp : didScrollDown;\n  const newScrollAway = scrolledAway && (bottomAppBar ? newScrollUp : newScrollDown);\n\n  // For code readability\n  const scrolledBack = !scrolledAway;\n  const newScrollBack = scrolledBack && (bottomAppBar ? newScrollDown : newScrollUp);\n\n  const isAtRest = (bottomAppBar ? isAtScrollBottom : isAtScrollTop);\n\n  if (scrolledBack) {\n    // scrolledPastAppBar needs to be recalculated\n    scrolledPastAppBar = false;\n  }\n\n  // Don't perform on each scroll back, only on first\n  if (newScrollBack || isAtRest) {\n    if (appBar.hasAttribute('mdw-autohide')) {\n      appBar.removeAttribute('mdw-hide');\n      appBar.style.removeProperty('margin-top');\n    }\n  }\n\n  if (!scrolledPastAppBar) {\n    if (bottomAppBar) {\n      scrolledPastAppBar = currentScrollY <= scrollBottom - appBar.clientHeight;\n    } else {\n      scrolledPastAppBar = currentScrollY > appBar.clientHeight;\n    }\n  }\n\n  if (isAtRest) {\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.setAttribute('mdw-prominent', '');\n    }\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.removeAttribute('mdw-raise');\n    }\n    return;\n  }\n\n  // Not at rest\n  if (scrolledAway && scrolledPastAppBar) {\n    if (shouldAutoHideAppBar()) {\n      appBar.setAttribute('mdw-hide', '');\n      if (!isBody) {\n        appBar.style.setProperty('margin-top', `${-appBar.clientHeight}px`);\n      }\n    }\n    if (appBar.hasAttribute('mdw-autoprominent')) {\n      appBar.removeAttribute('mdw-prominent');\n    }\n  }\n\n  if (newScrollAway) {\n    if (appBar.hasAttribute('mdw-autoraise')) {\n      appBar.setAttribute('mdw-raise', '');\n    }\n  }\n}\n","import { iterateArrayLike, dispatchDomEvent } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\nimport * as Attributes from '../../core/aria/attributes';\nimport * as Keyboard from '../../core/aria/keyboard';\n\nimport * as ListSecondary from './secondary';\n\nexport const ACTIVATE_EVENT = 'mdw:listcontent-activate';\nexport const SELECTED_CHANGE_EVENT = 'mdw:listcontent-selectedchange';\nexport const FOCUS_EVENT = 'mdw:listcontent-focus';\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function attach(listContentElement) {\n  if (!listContentElement.hasAttribute('role')) {\n    if (listContentElement.parentElement.getAttribute('role') === 'none') {\n      listContentElement.setAttribute('role', 'option');\n    }\n  }\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__icon'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  iterateArrayLike(listContentElement.getElementsByClassName('mdw-list__avatar'), (el) => {\n    el.setAttribute('aria-hidden', 'true');\n  });\n  listContentElement.addEventListener('click', onClick);\n\n  if (!listContentElement.hasAttribute('mdw-no-overlay')) {\n    listContentElement.classList.add('mdw-overlay');\n    Overlay.attach(listContentElement);\n  }\n  if (!listContentElement.hasAttribute('mdw-no-ripple')) {\n    listContentElement.classList.add('mdw-ripple');\n    Ripple.attach(listContentElement);\n  }\n  if (listContentElement.getAttribute('role') === 'radio'\n  && listContentElement.getAttribute('aria-checked') === 'true'\n  && listContentElement.getAttribute('tabindex') !== '0') {\n    listContentElement.setAttribute('tabindex', '0');\n  }\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.attach(secondaryElement);\n  }\n  Keyboard.attach(listContentElement);\n  listContentElement.addEventListener(Keyboard.ENTER_KEY, onEnterKey);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onEnterKey(event) {\n  if (event.detail.ctrlKey || event.detail.shiftKey\n    || event.detail.altKey || event.detail.metaKey) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (!listContentElement) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n\n  // Slightly redundant, but performs ripple\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  listContentElement.dispatchEvent(newEvent);\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.preventDefault();\n  /** @type {HTMLElement} */\n  const listContentElement = (event.currentTarget);\n  if (Attributes.isDisabled(listContentElement)) {\n    return;\n  }\n  dispatchDomEvent(listContentElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {Element} listContentElement\n * @return {void}\n */\nexport function detach(listContentElement) {\n  Keyboard.detach(listContentElement);\n  const secondaryElement = listContentElement.getElementsByClassName('mdw-list__secondary')[0];\n  if (secondaryElement) {\n    ListSecondary.detach(secondaryElement);\n  }\n  Ripple.detach(listContentElement);\n  Overlay.detach(listContentElement);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport {\n  dispatchDomEvent,\n  isRtl,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n  nextTick,\n  cancelTick,\n} from '../../core/dom';\n\nimport * as MenuItem from './item';\n\nclass MenuStack {\n  /**\n   * @param {Element} element\n   * @param {Element} previousFocus\n   * @param {Object} [state]\n   * @param {Object} [previousState]\n   * @param {MouseEvent|PointerEvent} [originalEvent]\n   */\n  constructor(element, previousFocus, state, previousState, originalEvent) {\n    this.element = element;\n    this.previousFocus = previousFocus;\n    this.state = state;\n    this.previousState = previousState;\n    this.originalEvent = originalEvent;\n    this.pendingResizeOperation = null;\n  }\n}\n\n/** @type {MenuStack[]} */\nconst OPEN_MENUS = [];\n\nexport const HIDE_EVENT = 'mdw:menu-hide';\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function attach(menuElement) {\n  menuElement.setAttribute('mdw-menu-js', '');\n  menuElement.addEventListener('click', onMenuClick);\n  menuElement.addEventListener('scroll', onMenuScroll);\n  menuElement.addEventListener('touchmove', onMenuScroll);\n  menuElement.addEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  setupARIA(menuElement);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function setupARIA(menuElement) {\n  if (menuElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  if (!menuElement.hasAttribute('aria-hidden')) {\n    menuElement.setAttribute('aria-hidden', 'true');\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-divider'),\n    el => el.setAttribute('role', 'separator'));\n  menuElement.setAttribute('role', 'menu');\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  if (popupElement) {\n    popupElement.setAttribute('role', 'none');\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onMenuScroll(event) {\n  // JS needed for Safari\n  event.preventDefault();\n  event.stopPropagation();\n  if (event.type !== 'scroll') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.scrollTop !== element.scrollHeight / 4) {\n    element.scrollTop = element.scrollHeight / 4;\n  }\n  if (element.scrollLeft !== element.scrollWidth / 4) {\n    element.scrollLeft = element.scrollWidth / 4;\n  }\n}\n\n/**\n * @param {MouseEvent|PointerEvent} event\n * @return {void}\n */\nexport function onMenuClick(event) {\n  if (event.currentTarget === event.target && event.target instanceof HTMLElement) {\n    event.stopPropagation();\n    hide(event.target);\n  }\n}\n\n/**\n * @return {void}\n */\nexport function onWindowResize() {\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.originalEvent) {\n    return;\n  }\n  if (lastOpenMenu.pendingResizeOperation) {\n    cancelTick(lastOpenMenu.pendingResizeOperation);\n  }\n  lastOpenMenu.pendingResizeOperation = nextTick(() => {\n    updateMenuPosition(\n      lastOpenMenu.element,\n      /** @type {HTMLElement} */ (lastOpenMenu.element.getElementsByClassName('mdw-menu__popup')[0]),\n      lastOpenMenu.originalEvent\n    );\n    lastOpenMenu.pendingResizeOperation = null;\n  });\n}\n\n/**\n * @param {PopStateEvent} event\n * @return {void}\n */\nexport function onPopState(event) {\n  if (!event.state) {\n    return;\n  }\n  const lastOpenMenu = OPEN_MENUS[OPEN_MENUS.length - 1];\n  if (!lastOpenMenu || !lastOpenMenu.previousState) {\n    return;\n  }\n  if ((lastOpenMenu.previousState === event.state) || Object.keys(event.state)\n    .every(key => event.state[key] === lastOpenMenu.previousState[key])) {\n    hide(lastOpenMenu.element);\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuElement = (event.currentTarget);\n  if (!menuElement || menuElement.getAttribute('aria-hidden') === 'true') {\n    return;\n  }\n\n  if (event.key === 'ArrowDown' || (event.key === 'Down')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, false);\n    return;\n  }\n  if (event.key === 'ArrowUp' || (event.key === 'Up')) {\n    event.stopPropagation();\n    event.preventDefault();\n    selectNextMenuItem(menuElement, true);\n    return;\n  }\n  if (event.key === 'Tab') {\n    // Hide menu allowing focus to revert to calling element\n    // To then allow browser default Tab interaction\n    // Unless menu hiding is cancelled\n    if (!hide(menuElement)) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    event.stopPropagation();\n    event.preventDefault();\n    hide(menuElement);\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function detach(menuElement) {\n  hide(menuElement);\n  menuElement.removeEventListener('click', onMenuClick);\n  menuElement.removeEventListener('scroll', onMenuScroll);\n  menuElement.removeEventListener('touchmove', onMenuScroll);\n  menuElement.removeEventListener('wheel', onMenuScroll);\n  menuElement.addEventListener('keydown', onKeyDown);\n  menuElement.removeAttribute('mdw-menu-js');\n  /** @type {HTMLElement} */\n  const popupElement = (menuElement.getElementsByClassName('mdw-menu__popup')[0]);\n  if (popupElement) {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), MenuItem.detach);\n}\n\n/**\n * @param {Element} menu\n * @param {boolean} [backwards=false]\n * @return {void}\n */\nexport function selectNextMenuItem(menu, backwards) {\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const menuItems = (menu.getElementsByClassName('mdw-menu__item'));\n  let foundTarget = false;\n  /** @type {HTMLElement} */\n  let candidate = null;\n  /** @type {HTMLElement} */\n  let firstFocusableItem = null;\n  let lastFocusableElement = null;\n  const target = document.activeElement;\n\n  // Hidden elements cannot be focused\n  // Disabled elements cannot be focused on IE11\n  // Skip elements that fail to receive focus\n  iterateSomeOfArrayLike(menuItems, (el) => {\n    el.focus();\n    const focusable = (document.activeElement === el);\n    if (focusable) {\n      if (!firstFocusableItem) {\n        firstFocusableItem = el;\n      }\n      lastFocusableElement = el;\n    }\n    if (el === target) {\n      foundTarget = true;\n      if (backwards && candidate) {\n        return true;\n      }\n      return false;\n    }\n    if (backwards) {\n      if (focusable) {\n        candidate = el;\n      }\n      return false;\n    }\n    if (foundTarget) {\n      if (focusable) {\n        candidate = el;\n        return true;\n      }\n      return false;\n    }\n    return false;\n  });\n  if (!candidate) {\n    if (backwards) {\n      candidate = lastFocusableElement;\n    } else {\n      candidate = firstFocusableItem;\n    }\n  }\n  if (candidate && document.activeElement !== candidate) {\n    candidate.focus();\n  }\n}\n\n/**\n * @param {Element} menuElement\n * @param {HTMLElement} popupElement\n * @param {MouseEvent|PointerEvent} [event]\n * @param {boolean} [alignTarget=true]\n * @return {void}\n */\nexport function updateMenuPosition(menuElement, popupElement, event, alignTarget) {\n  let top = 'auto';\n  let left = 'auto';\n  let transformOrigin = '';\n  const useAlignTarget = (alignTarget !== false);\n  const margin = useAlignTarget ? '0' : '';\n  const mdwPosition = menuElement.getAttribute('mdw-position') || '';\n  const mdwDirection = menuElement.getAttribute('mdw-direction') || '';\n  let alignTop = mdwPosition.indexOf('top') !== -1;\n  let alignBottom = mdwPosition.indexOf('bottom') !== -1;\n  let alignVCenter = mdwPosition.indexOf('vcenter') !== -1;\n\n  const alignStart = mdwPosition.indexOf('start') !== -1;\n  const alignEnd = mdwPosition.indexOf('end') !== -1;\n  let alignLeft = mdwPosition.indexOf('left') !== -1;\n  let alignRight = mdwPosition.indexOf('right') !== -1;\n  let alignHCenter = mdwPosition.indexOf('hcenter') !== -1;\n\n  let openUp = mdwDirection.indexOf('up') !== -1;\n  let openDown = mdwDirection.indexOf('down') !== -1;\n  const openNormal = mdwDirection.indexOf('normal') !== -1;\n  const openReverse = mdwDirection.indexOf('reverse') !== -1;\n  let openVCenter = mdwDirection.indexOf('vcenter') !== -1;\n  let openHCenter = mdwDirection.indexOf('hcenter') !== -1;\n  let openLtr = mdwDirection.indexOf('ltr') !== -1;\n  let openRtl = mdwDirection.indexOf('rtl') !== -1;\n\n  /** @type {HTMLElement} */\n  const target = (event.currentTarget || event.target);\n\n  let isPageRTL = null;\n  if (alignStart || alignEnd || openNormal || openReverse) {\n    // Using page-direction based values\n    isPageRTL = isRtl();\n    if (alignStart || alignEnd) {\n      if (alignStart) {\n        if (isPageRTL) {\n          alignRight = true;\n        } else {\n          alignLeft = true;\n        }\n      } else if (isPageRTL) {\n        alignLeft = true;\n      } else {\n        alignRight = true;\n      }\n    }\n    if (openNormal || openReverse) {\n      if (openNormal) {\n        if (isPageRTL) {\n          openRtl = true;\n        } else {\n          openLtr = true;\n        }\n      } else if (isPageRTL) {\n        openLtr = true;\n      } else {\n        openRtl = true;\n      }\n    }\n  }\n  const offsetTop = useAlignTarget ? 0 : -event.offsetY;\n  const offsetBottom = useAlignTarget ? target.clientHeight : event.offsetY;\n  const offsetLeft = useAlignTarget ? 0 : -event.offsetX;\n  const offsetRight = useAlignTarget ? target.clientWidth : event.offsetX;\n  const rect = target.getBoundingClientRect();\n  const pageX = rect.left;\n  const pageY = rect.top;\n\n  /* Automatic Positioning\n    *\n    * 9 Positions\n    *   3      7      4\n    *     \n    *              \n    *   5     9     6\n    *              \n    *     \n    *   1      8      2\n    *\n    * 1: Bottom Left\n    * 2: Bottom Right\n    * 3: Top Left\n    * 4: Top Right\n    * 5: VCenter Left\n    * 6: VCenter Right\n    * 7: HCenter Top\n    * 8: HCenter Bottom\n    * 9: VCenter HCenter\n    *\n    * 9 Directions:\n    * a - Down LTR\n    * b - Down RTL\n    * c - Up LTR\n    * d - Up RTL\n    * e - LTR\n    * f - RTL\n    * g - Down\n    * h - Up\n    * i - Center\n    *\n    *\n    * 16 total combos\n    * 1a 1b 1c 1d     \n    * 2a 2b 2c 2d     \n    * 3a 3b 3c 3d     \n    * 4a 4b 4c 4d     \n    *\n    * Avoid using opposite angle\n    *\n    * 1a XX 1c 1d     \n    * XX 2b 2c 2d     \n    * 1a 3b 3c XX     \n    * 4a 4b XX 4d     \n    *\n    *\n    * Preference Order:\n    * - Flow from corner           1a 2b 3c 4d       \n    * - Open adjacent to target    4a 3b 2c 1d       \n    * - Overlay target             3a 4b 1c 2d       \n    * - Open from horizontal side  5e 6f           \n    * - Open from center           9i             \n    */\n\n  popupElement.style.setProperty('max-height', 'none');\n  const popupElementHeight = popupElement.clientHeight;\n  const popupElementWidth = popupElement.clientWidth;\n  const canOpenDownwardsFromBottom = !alignTop && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetBottom) <= window.innerHeight;\n  const canOpenDownwardsFromTop = !alignBottom && !alignVCenter\n    && !openUp && !openVCenter\n    && popupElementHeight + (pageY + offsetTop) <= window.innerHeight;\n  const canOpenUpwardsFromTop = !alignBottom && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetTop >= popupElementHeight;\n  const canOpenUpwardsFromBottom = !alignTop && !alignVCenter && !openDown\n    && !openVCenter\n    && pageY + offsetBottom >= popupElementHeight;\n  const canOpenRightwardsFromLeft = !alignRight && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetLeft) <= window.innerWidth;\n  const canOpenRightwardsFromRight = !alignLeft && !alignHCenter\n    && !openRtl && !openHCenter\n    && popupElementWidth + (pageX + offsetRight) <= window.innerWidth;\n  const canOpenLeftwardsFromRight = !alignLeft && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetRight >= popupElementWidth;\n  const canOpenLeftwardsFromLeft = !alignRight && !alignHCenter\n    && !openLtr && !openHCenter\n    && pageX + offsetLeft >= popupElementWidth;\n  const canOpenFromCenter = !alignLeft && !alignRight && !alignTop && !alignBottom\n    && !openUp && !openDown\n    && ((pageX + offsetLeft) / 2) >= (popupElementWidth / 2)\n    && (popupElementWidth / 2) + ((pageX + offsetLeft) / 2) <= window.innerWidth;\n  popupElement.style.removeProperty('max-height');\n  const candidates = [\n    canOpenDownwardsFromBottom && canOpenRightwardsFromLeft, // 1a \n    canOpenDownwardsFromBottom && canOpenLeftwardsFromRight, // 2b \n    canOpenUpwardsFromTop && canOpenRightwardsFromLeft, // 3c \n    canOpenUpwardsFromTop && canOpenLeftwardsFromLeft, // 4d \n    canOpenDownwardsFromTop && canOpenRightwardsFromRight, // 4a \n    canOpenDownwardsFromTop && canOpenLeftwardsFromLeft, // 3b \n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2c \n    canOpenUpwardsFromBottom && canOpenLeftwardsFromLeft, // 1d \n    canOpenDownwardsFromTop && canOpenRightwardsFromLeft, // 3a \n    canOpenDownwardsFromTop && canOpenLeftwardsFromRight, // 4b \n    canOpenUpwardsFromBottom && canOpenRightwardsFromLeft, // 1c \n    canOpenUpwardsFromBottom && canOpenRightwardsFromRight, // 2d \n    canOpenRightwardsFromLeft, // 5e \n    canOpenLeftwardsFromRight, // 6f \n    canOpenFromCenter, // 9i \n  ].map((value, index) => {\n    if (value) {\n      return index + 1;\n    }\n    return 0;\n  }).filter(value => value !== 0);\n  if (candidates.length) {\n    let candidateNumber;\n    if (isPageRTL === null) {\n      isPageRTL = isRtl();\n    }\n    if (isPageRTL) {\n      candidateNumber = [2, 1, 4, 3, 6, 5, 8, 7, 10, 9, 12, 11, 14, 13, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    } else {\n      candidateNumber = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\n        .filter(number => candidates.indexOf(number) !== -1)[0];\n    }\n    if (candidateNumber == null) {\n      candidateNumber = isPageRTL ? 2 : 1;\n    }\n    switch (candidateNumber) {\n      // Position\n      default:\n      case 1:\n      case 8:\n      case 11:\n        alignBottom = true; alignLeft = true;\n        break;\n      case 2:\n      case 7:\n      case 12:\n        alignBottom = true; alignRight = true;\n        break;\n      case 3:\n      case 6:\n      case 9:\n        alignTop = true; alignLeft = true;\n        break;\n      case 4:\n      case 5:\n      case 10:\n        alignTop = true; alignRight = true;\n        break;\n      case 13:\n        alignVCenter = true; alignLeft = true;\n        break;\n      case 14:\n        alignVCenter = true; alignRight = true;\n        break;\n      case 15:\n        alignVCenter = true; alignHCenter = true;\n    }\n    switch (candidateNumber) {\n      // Direction\n      default:\n      case 1:\n      case 5:\n      case 9:\n        openDown = true; openLtr = true;\n        break;\n      case 2:\n      case 6:\n      case 10:\n        openDown = true; openRtl = true;\n        break;\n      case 3:\n      case 7:\n      case 11:\n        openUp = true; openLtr = true;\n        break;\n      case 4:\n      case 8:\n      case 12:\n        openUp = true; openRtl = true;\n        break;\n      case 13:\n        openLtr = true; openVCenter = true;\n        break;\n      case 14:\n        openRtl = true; openVCenter = true;\n        break;\n      case 15:\n        openHCenter = true; openVCenter = true;\n        break;\n    }\n  }\n\n  if (openLtr) {\n    if (alignRight) {\n      left = `${pageX + offsetRight}px`;\n    } else if (alignHCenter) {\n      left = `${pageX + ((offsetLeft + offsetRight) / 2)}px`;\n    } else {\n      left = `${pageX + offsetLeft}px`;\n    }\n    transformOrigin = 'left';\n  } else if (openHCenter) {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - (popupElementWidth / 2)}px`;\n    } else if (alignRight) {\n      left = `${(pageX + offsetRight) - (popupElementWidth / 2)}px`;\n    } else {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - (popupElementWidth / 2)}px`;\n    }\n    transformOrigin = 'center';\n  } else {\n    if (alignLeft) {\n      left = `${(pageX + offsetLeft) - popupElementWidth}px`;\n    } else if (alignHCenter) {\n      left = `${(pageX + ((offsetLeft + offsetRight) / 2)) - popupElementWidth}px`;\n    } else {\n      left = `${(pageX + offsetRight) - popupElementWidth}px`;\n    }\n    transformOrigin = 'right';\n  }\n\n  if (openUp) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - popupElement.clientHeight}px`;\n    } else if (alignVCenter) {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - popupElement.clientHeight}px`;\n    } else {\n      top = `${(pageY + offsetTop) - popupElement.clientHeight}px`;\n    }\n    transformOrigin += ' bottom';\n  } else if (openVCenter) {\n    if (alignBottom) {\n      top = `${(pageY + offsetBottom) - (popupElement.clientHeight / 2)}px`;\n    } else if (alignTop) {\n      top = `${(pageY + offsetTop) - (popupElement.clientHeight / 2)}px`;\n    } else {\n      top = `${(pageY + ((offsetTop + offsetBottom) / 2)) - (popupElement.clientHeight / 2)}px`;\n    }\n    transformOrigin += ' center';\n  } else {\n    if (alignTop) {\n      top = `${pageY + offsetTop}px`;\n    } else if (alignVCenter) {\n      top = `${pageY + ((offsetTop + offsetBottom) / 2)}px`;\n    } else {\n      top = `${pageY + offsetBottom}px`;\n    }\n    transformOrigin += ' top';\n  }\n\n  popupElement.style.setProperty('top', top);\n  popupElement.style.setProperty('left', left);\n  popupElement.style.setProperty('right', 'auto');\n  popupElement.style.setProperty('bottom', 'auto');\n  popupElement.style.setProperty('margin', margin);\n  popupElement.style.setProperty('transform-origin', transformOrigin);\n}\n\n/**\n * @param {Element} menuElement\n * @return {void}\n */\nexport function refreshMenuItems(menuElement) {\n  iterateArrayLike(menuElement.getElementsByClassName('mdw-menu__item'), (menuItem) => {\n    menuItem.setAttribute('tabindex', '-1');\n    MenuItem.attach(menuItem);\n  });\n  const popupElement = menuElement.getElementsByClassName('mdw-menu__popup')[0];\n  popupElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {Element} menuElement\n * @param {MouseEvent|PointerEvent} [event]\n * @param {boolean} [alignTarget=true]\n * @return {boolean} handled\n */\nexport function show(menuElement, event, alignTarget) {\n  if (event && event.currentTarget instanceof HTMLAnchorElement) {\n    // Prevent anchor link\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const popupElement = (menuElement.getElementsByClassName('mdw-menu__popup')[0]);\n  let changed = false;\n  if (event) {\n    updateMenuPosition(menuElement, popupElement, event, alignTarget);\n  } else {\n    popupElement.style.removeProperty('top');\n    popupElement.style.removeProperty('left');\n    popupElement.style.removeProperty('right');\n    popupElement.style.removeProperty('bottom');\n    popupElement.style.removeProperty('margin');\n    popupElement.style.removeProperty('transform-origin');\n    popupElement.style.removeProperty('position');\n    if (popupElement.hasAttribute('style') && !popupElement.getAttribute('style')) {\n      popupElement.removeAttribute('style');\n    }\n  }\n  if (menuElement.getAttribute('aria-hidden') !== 'false') {\n    menuElement.setAttribute('aria-hidden', 'false');\n    changed = true;\n  }\n  if (changed) {\n    attach(menuElement);\n    const previousFocus = document.activeElement;\n    const newState = { hash: Math.random().toString(36).substr(2, 16) };\n    let previousState = null;\n    if (window.history && window.history.pushState) {\n      if (!window.history.state) {\n        // Create new previous state\n        window.history.replaceState({\n          hash: Math.random().toString(36).substr(2, 16),\n        }, document.title);\n      }\n      previousState = window.history.state;\n      window.history.pushState(newState, document.title);\n      window.addEventListener('popstate', onPopState);\n      window.addEventListener('resize', onWindowResize);\n    }\n    const menuStack = new MenuStack(menuElement, previousFocus, newState, previousState, event);\n    OPEN_MENUS.push(menuStack);\n    refreshMenuItems(menuElement);\n    if (event && !event.detail && ('pointerType' in event) && !event.pointerType) {\n      // Triggered with keyboard event\n      selectNextMenuItem(menuElement);\n    } else {\n      popupElement.focus();\n    }\n  }\n  return changed;\n}\n\n/**\n * @param {Element} menuElement\n * @return {boolean} handled\n */\nexport function hide(menuElement) {\n  if (menuElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  menuElement.setAttribute('aria-hidden', 'true');\n  let stackIndex = -1;\n  OPEN_MENUS.some((stack, index) => {\n    if (stack.element === menuElement) {\n      stackIndex = index;\n      return true;\n    }\n    return false;\n  });\n  if (stackIndex !== -1) {\n    const menuStack = OPEN_MENUS[stackIndex];\n    if (menuStack.previousFocus && menuStack.previousFocus instanceof HTMLElement) {\n      menuStack.previousFocus.focus();\n    }\n    OPEN_MENUS.splice(stackIndex, 1);\n    if (menuStack.state && window.history && window.history.state) {\n      // IE11 returns a cloned state object, not the original\n      if (menuStack.state.hash === window.history.state.hash) {\n        window.history.back();\n      }\n    }\n  }\n  if (!OPEN_MENUS.length) {\n    window.removeEventListener('popstate', onPopState);\n    window.removeEventListener('resize', onWindowResize);\n  }\n  dispatchDomEvent(menuElement, HIDE_EVENT);\n  return true;\n}\n","import * as Keyboard from '../../core/aria/keyboard';\nimport { dispatchDomEvent } from '../../core/dom';\n\nexport const CLICK_EVENT = 'mdw:selectioninput-click';\nexport const FOCUS_EVENT = 'mdw:selectioninput-focus';\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.addEventListener(Keyboard.SPACEBAR_KEY, onSpacebarKey);\n  element.addEventListener('click', onClick);\n  element.addEventListener('focus', onFocus);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onSpacebarKey(event) {\n  if (event.target instanceof HTMLInputElement) {\n    // Don't pass up Spacebar on native input elements\n    event.stopPropagation();\n  }\n}\n\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  event.stopPropagation();\n  dispatchDomEvent(/** @type {HTMLElement} */(event.target), CLICK_EVENT);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nfunction onFocus(event) {\n  dispatchDomEvent(/** @type {HTMLElement} */(event.target), FOCUS_EVENT);\n}\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function detach(element) {\n  Keyboard.detach(element);\n}\n","import * as Keyboard from '../../core/aria/keyboard';\nimport * as Attributes from '../../core/aria/attributes';\nimport * as SelectionInput from './input';\n\nexport const CHECKED_CHANGE_EVENT = 'mdw:selection-checkedchange';\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function attach(element) {\n  /** @type {HTMLElement} */\n  const inputElement = (element.getElementsByClassName('mdw-selection__input')[0]);\n  if (inputElement) {\n    SelectionInput.attach(inputElement);\n  }\n  Keyboard.attach(element);\n  element.addEventListener('focus', onActivateEvent);\n  element.addEventListener('click', onActivateEvent);\n  element.addEventListener(Keyboard.SPACEBAR_KEY, onActivateEvent);\n  element.addEventListener(SelectionInput.FOCUS_EVENT, onActivateEvent);\n  element.addEventListener(SelectionInput.CLICK_EVENT, onActivateEvent);\n}\n\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onActivateEvent(event) {\n  if (event.target instanceof HTMLInputElement) {\n    return;\n  }\n  if (event.type === Keyboard.SPACEBAR_KEY) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  /** @type {HTMLElement} */\n  const selectionElement = (event.currentTarget);\n  if (Attributes.isDisabled(selectionElement)) {\n    return;\n  }\n  if (Attributes.isReadonly(selectionElement)) {\n    return;\n  }\n  if (!selectionElement.hasAttribute('aria-checked')) {\n    return;\n  }\n  if (event.type === 'click' || event.type === SelectionInput.CLICK_EVENT) {\n    if (selectionElement.hasAttribute('mdw-no-autocheck')) {\n      return;\n    }\n  }\n  const role = selectionElement.getAttribute('role');\n  if (event.type === 'focus' || event.type === SelectionInput.FOCUS_EVENT) {\n    if (role !== 'radio') {\n      return;\n    }\n  }\n  const newValue = (role === 'radio' ? true : !Attributes.isChecked(selectionElement));\n  setChecked(selectionElement, newValue, true);\n}\n\n\n/**\n * @param {Element} selectionElement\n * @param {boolean|string} newValue\n * @param {boolean} [dispatchEvent=false]\n * @return {boolean} successful\n */\nexport function setChecked(selectionElement, newValue, dispatchEvent) {\n  return Attributes.setChecked(\n    selectionElement,\n    newValue,\n    dispatchEvent ? CHECKED_CHANGE_EVENT : null\n  );\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:tabitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-tab__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#menu\n\nimport * as Attributes from '../../core/aria/attributes';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nimport {\n  dispatchDomEvent,\n  iterateArrayLike,\n  iterateElementSiblings,\n} from '../../core/dom';\n\nexport const ACTIVATE_EVENT = 'mdw:menuitem-activate';\nexport const CHECK_EVENT = 'mdw:menuitem-check';\nexport const UNCHECK_EVENT = 'mdw:menuitem-uncheck';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  // If mouseover is used, an item can still lose focus via keyboard navigation.\n  // An extra event listener would need to be created to catch blur but the cursor\n  // would still remain over the element, thus needing another mousemove event.\n  // Prioritization is given to less event listeners rather than operations per second.\n  element.addEventListener('mousemove', onMouseMove);\n  element.addEventListener('click', onClick);\n  element.addEventListener('keydown', onKeyDown);\n  setupARIA(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function setupARIA(element) {\n  if (element.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  const role = element.getAttribute('role');\n  let useAriaChecked = false;\n  if (role === 'menuitemcheckbox' || role === 'menuitemradio') {\n    useAriaChecked = true;\n  } else if (role !== 'menuitem') {\n    if (element.getElementsByClassName('mdw-menu__check').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemcheckbox');\n    } else if (element.getElementsByClassName('mdw-menu__radio').length) {\n      useAriaChecked = true;\n      element.setAttribute('role', 'menuitemradio');\n    } else {\n      element.setAttribute('role', 'menuitem');\n    }\n  }\n  if (useAriaChecked && !element.hasAttribute('aria-checked')) {\n    element.setAttribute('aria-checked', 'false');\n  }\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__text'),\n    el => el.setAttribute('role', 'text'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__check'),\n    el => el.setAttribute('aria-hidden', 'true'));\n  iterateArrayLike(element.getElementsByClassName('mdw-menu__info'),\n    el => el.setAttribute('role', 'note'));\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n  if (Attributes.isDisabled(menuItemElement)) {\n    return;\n  }\n  const role = menuItemElement.getAttribute('role');\n  if (role === 'menuitemcheckbox') {\n    toggleChecked(menuItemElement);\n  } else if (role === 'menuitemradio') {\n    setChecked(menuItemElement, true);\n  }\n  dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onMouseMove(event) {\n  /** @type {HTMLElement} */\n  const el = (event.currentTarget);\n  if (!el) {\n    return;\n  }\n  const previousFocus = document.activeElement;\n  if (previousFocus === el) {\n    // Already focused\n    return;\n  }\n  if (el.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  el.focus();\n  if (document.activeElement !== el) {\n    if (document.activeElement !== previousFocus && previousFocus instanceof HTMLElement) {\n      previousFocus.focus();\n    }\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  /** @type {HTMLElement} */\n  const menuItemElement = (event.currentTarget);\n\n  if (event.key === 'Enter') {\n    event.stopPropagation();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    onClick(event);\n    return;\n  }\n\n  if (event.key === 'Spacebar' || (event.key === ' ')) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (isDisabled(menuItemElement)) {\n      return;\n    }\n    const role = menuItemElement.getAttribute('role');\n    if (role === 'menuitemcheckbox') {\n      toggleChecked(menuItemElement);\n    } else if (role === 'menuitemradio') {\n      setChecked(menuItemElement, true);\n    } else {\n      dispatchDomEvent(menuItemElement, ACTIVATE_EVENT);\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n * @return {boolean} uiChanged\n */\nexport function setChecked(element, checked) {\n  const role = element.getAttribute('role');\n  let isCheckable = false;\n  if (role === 'menuitemcheckbox') {\n    isCheckable = true;\n    if (!dispatchDomEvent(element, checked ? CHECK_EVENT : UNCHECK_EVENT)) {\n      return false;\n    }\n  }\n  if (role === 'menuitemradio') {\n    isCheckable = true;\n    if (checked) {\n      if (!dispatchDomEvent(element, CHECK_EVENT)) {\n        return false;\n      }\n      iterateElementSiblings(element, (sibling) => {\n        if (sibling.getAttribute('role') === 'menuitemradio') {\n          sibling.setAttribute('aria-checked', 'false');\n        }\n      });\n    }\n  }\n  if (!isCheckable) {\n    return false;\n  }\n  element.setAttribute('aria-checked', checked ? 'true' : 'false');\n  return true;\n}\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nexport function toggleChecked(element) {\n  const checked = !Attributes.isChecked(element);\n  return setChecked(element, checked);\n}\n\n/**\n * @param {Element} element\n * @return {boolean} handled\n */\nexport function openSubMenu(element) {\n  const hasPopup = element.getAttribute('aria-haspopup');\n  if (hasPopup !== 'menu' && hasPopup !== 'true') {\n    return false;\n  }\n\n  // TODO: Open new menu\n  return false;\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  element.removeEventListener('click', onClick);\n  element.removeEventListener('mousemove', onMouseMove);\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-js');\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n","\nimport * as Attributes from '../../core/aria/attributes';\nimport * as Keyboard from '../../core/aria/keyboard';\nimport { dispatchDomEvent } from '../../core/dom';\n\nexport const FOCUS_EVENT = 'mdw:datatablecell-focus';\nexport const CHECKED_CHANGE_EVENT = 'mdw:datatablecell-checkedchange';\nexport const SELECTED_CHANGE_EVENT = 'mdw:datatablecell-selectedchange';\n\n/**\n * @param {HTMLTableCellElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.addEventListener('focus', onFocus);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLElement} */\n  const gridCellElement = (event.currentTarget);\n  dispatchDomEvent(gridCellElement, FOCUS_EVENT);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n\n/**\n * @param {HTMLTableCellElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('focus', onFocus);\n  Keyboard.detach(element);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n// https://www.w3.org/TR/wai-aria-practices/#TreeView\n// https://www.w3.org/TR/wai-aria-practices/examples/landmarks/navigation.html\n\nimport { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\nimport * as Attributes from '../../core/aria/attributes';\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Keyboard from '../../core/aria/keyboard';\n\nimport * as ListItem from './item';\nimport * as ListContent from './content';\n\n/**\n * @param {Element|Document} [root=document]\n * @return {void}\n */\nexport function attachAll(root = document) {\n  iterateArrayLike(root.getElementsByClassName('mdw-list'), attach);\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function attach(listElement) {\n  let role = listElement.getAttribute('role');\n  if (!role) {\n    let newRole = 'listbox';\n    const parentRole = listElement.parentElement && listElement.parentElement.getAttribute('role');\n    if (parentRole === 'treeitem') {\n      newRole = 'group';\n    } else if (iterateSomeOfArrayLike(listElement.children,\n      child => child.hasAttribute('aria-expanded') && child.classList.contains('mdw-list__item'))) {\n      newRole = 'tree';\n    }\n    listElement.setAttribute('role', newRole);\n    role = newRole;\n  }\n\n  setupAria(listElement, role);\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.attach(child);\n    }\n  });\n  iterateArrayLike(listElement.getElementsByClassName('mdw-list'), attach);\n  if (listElement.hasAttribute('mdw-list-js')) {\n    return;\n  }\n  if (role !== 'listbox' && role !== 'tree' && role !== 'radiogroup') {\n    return;\n  }\n\n  switch (role) {\n    case 'tree':\n      RovingTabIndex.setupTabIndexes(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.setupTabIndexes(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.setupTabIndexes(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n      return;\n  }\n\n  listElement.addEventListener(Keyboard.DOWN_ARROW_KEY, onDownArrowKey);\n  listElement.addEventListener(Keyboard.UP_ARROW_KEY, onUpArrowKey);\n  listElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.addEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.addEventListener(ListContent.FOCUS_EVENT, onContentFocusEvent);\n  listElement.setAttribute('mdw-list-js', '');\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onContentFocusEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  const onFocusInteraction = listElement.getAttribute('mdw-on-focus');\n  if (!onFocusInteraction) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const listContentElement = (event.target);\n  if (Attributes.isDisabled(listContentElement)) {\n    return;\n  }\n  onFocusInteraction.split(' ').forEach((interaction) => {\n    switch (interaction) {\n      case 'select':\n        ListContent.setSelected(listContentElement, true);\n        break;\n      default:\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  // List is readonly\n  if (listElement.getAttribute('aria-readonly') === 'true') {\n    event.stopPropagation();\n    event.preventDefault();\n    return;\n  }\n  const listElementRole = listElement.getAttribute('role');\n  if (listElementRole !== 'listbox' && listElementRole !== 'tree') {\n    // Bubble up\n    return;\n  }\n  const { detail } = event;\n  if (detail.value === 'false') {\n    // Item is radio-like and cannot be unselected\n    if (listElement.getAttribute('aria-required') === 'true'\n      && listElement.getAttribute('aria-multiselectable') !== 'true') {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (listElement.getAttribute('aria-multiselectable') !== 'true') {\n    // Item is radio-like and must uncheck others\n    setTimeout(() => {\n      // Wait to see if event is cancelled\n      if (event.defaultPrevented) {\n        return;\n      }\n      const role = itemElement.getAttribute('role');\n      iterateArrayLike(listElement.querySelectorAll(`[role=\"${role}\"][aria-selected=\"true\"]`),\n        (item) => {\n          if (item === itemElement) {\n            return;\n          }\n          item.setAttribute('aria-selected', 'false');\n        });\n    });\n  }\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"treeitem\"]'), [currentItem]);\n      break;\n    case 'listbox':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"option\"]'), [currentItem]);\n      break;\n    case 'radiogroup':\n      RovingTabIndex.removeTabIndex(listElement.querySelectorAll('[role=\"radio\"]'), [currentItem]);\n      break;\n    default:\n  }\n}\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onDownArrowKey(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectNext(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onUpArrowKey(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listElement = (event.currentTarget);\n  switch (listElement.getAttribute('role')) {\n    case 'tree':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"treeitem\"]'));\n      break;\n    case 'listbox':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"option\"]'));\n      break;\n    case 'radiogroup':\n      RovingTabIndex.selectPrevious(listElement.querySelectorAll('[role=\"radio\"]'));\n      break;\n    default:\n  }\n}\n\n/**\n * @param {Element} listElement\n * @param {string} role\n * @return {void}\n */\nexport function setupAria(listElement, role = 'tree') {\n  if (!listElement.hasAttribute('role')) {\n    listElement.setAttribute('role', role);\n  }\n  listElement.setAttribute('aria-orientation', 'vertical');\n  if (!listElement.hasAttribute('aria-multiselectable')) {\n    listElement.setAttribute('aria-multiselectable', 'false');\n  }\n}\n\n/**\n * @param {Element} listElement\n * @return {void}\n */\nexport function detach(listElement) {\n  iterateArrayLike(listElement.children, (child) => {\n    if (child.classList.contains('mdw-list__item')) {\n      ListItem.detach(child);\n    }\n  });\n  iterateArrayLike(listElement.querySelectorAll(`[role=\"${listElement.getAttribute('role') === 'tree' ? 'treeitem' : 'option'}\"]`),\n    RovingTabIndex.detach);\n  listElement.removeEventListener(ListContent.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  listElement.removeEventListener(Keyboard.DOWN_ARROW_KEY, onDownArrowKey);\n  listElement.removeEventListener(Keyboard.UP_ARROW_KEY, onUpArrowKey);\n  listElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  listElement.removeAttribute('mdw-list-js');\n}\n","import { getPassiveEventListenerOption } from '../../core/dom';\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function attach(textfieldElement) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.addEventListener('input', onInput, getPassiveEventListenerOption());\n    onInput({ currentTarget: input });\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {void}\n */\nexport function detach(textfieldElement) {\n  textfieldElement.removeAttribute('mdw-value-empty');\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (input) {\n    input.removeEventListener('input', onInput);\n  }\n}\n\n/**\n * @param {Event|{currentTarget:HTMLElement}} event\n * @return {void}\n */\nexport function onInput(event) {\n  /** @type {HTMLInputElement|HTMLTextAreaElement} */\n  const inputElement = (event.currentTarget);\n  if (inputElement.parentElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(/** @type {HTMLTextAreaElement} */ (inputElement));\n  }\n  updateInputEmptyState(inputElement);\n}\n\n/**\n * @param {HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement} inputElement\n * @return {void} */\nexport function updateInputEmptyState(inputElement) {\n  const attrName = 'mdw-value-empty';\n  const textfieldElement = inputElement.parentElement;\n  if (inputElement.value) {\n    if (textfieldElement.hasAttribute(attrName)) {\n      textfieldElement.removeAttribute(attrName);\n    }\n  } else if (!textfieldElement.hasAttribute(attrName)) {\n    textfieldElement.setAttribute(attrName, '');\n  }\n}\n\n/**\n * @param {HTMLTextAreaElement} inputElement\n * @return {number} Single row height */\nexport function updateTextAreaSize(inputElement) {\n  const previousRowsAttrValue = inputElement.getAttribute('rows');\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = 1;\n  const { height, paddingTop } = window.getComputedStyle(inputElement);\n  if (!height || height === 'auto') {\n    if (previousRowsAttrValue == null) {\n      inputElement.removeAttribute('rows');\n    } else {\n      inputElement.setAttribute('rows', previousRowsAttrValue);\n    }\n    return -1;\n  }\n  const heightPx = parseInt(height.replace('px', ''), 10);\n  const paddingTopPx = parseInt(paddingTop.replace('px', ''), 10);\n  // eslint-disable-next-line no-param-reassign\n  inputElement.rows = Math.floor((inputElement.scrollHeight - paddingTopPx) / heightPx);\n  return heightPx;\n}\n\n/**\n * @param {Element} textfieldElement\n * @return {string|Date|number}\n */\nexport function getValue(textfieldElement) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if ((input instanceof HTMLTextAreaElement) || (input instanceof HTMLSelectElement)) {\n    return input.value;\n  }\n  switch (input.type) {\n    case 'number':\n    case 'range':\n      return Number.isNaN(input.valueAsNumber) ? null : input.valueAsNumber;\n    case 'date':\n    case 'datetime-local':\n    case 'time':\n      if (input.value == null) {\n        return null;\n      }\n      return new Date(\n        (new Date(input.valueAsNumber).getTimezoneOffset() * 60 * 1000) + input.valueAsNumber\n      );\n    default:\n      return input.value;\n  }\n}\n\n/**\n * @param {Element} textfieldElement\n * @param {string|Date|number} [value]\n * @return {void}\n */\nexport function setValue(textfieldElement, value) {\n  /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement} */\n  const input = (textfieldElement.getElementsByClassName('mdw-textfield__input')[0]);\n  if (value == null) {\n    input.value = null;\n  } else if (input instanceof HTMLTextAreaElement || input instanceof HTMLSelectElement) {\n    if (value instanceof Date) {\n      input.value = value.toString();\n    } else if (typeof value === 'string') {\n      input.value = value;\n    } else {\n      input.value = value.toString(10);\n    }\n  } else if (value instanceof Date) {\n    if (input.type === 'time') {\n      const hoursStr = `${value.getHours() < 10 ? '0' : ''}${value.getHours()}`;\n      const minutesStr = `${value.getMinutes() < 10 ? '0' : ''}${value.getMinutes()}`;\n      const secondsStr = `${value.getSeconds() < 10 ? '0' : ''}${value.getSeconds()}`;\n      input.value = `${hoursStr}:${minutesStr}:${secondsStr}.${value.getMilliseconds()}`;\n    } else {\n      switch (input.type) {\n        case 'date':\n          input.valueAsDate = value;\n          break;\n        case 'datetime-local':\n          input.valueAsNumber = value.getTime() - (value.getTimezoneOffset() * 60 * 1000);\n          break;\n        case 'number':\n        case 'range':\n          input.valueAsNumber = value.getTime();\n          break;\n        default:\n          input.value = value.toString();\n      }\n    }\n  } else if (typeof value === 'string') {\n    input.value = value;\n  } else {\n    switch (input.type) {\n      case 'date':\n      case 'time':\n      case 'datetime-local':\n      case 'number':\n      case 'range':\n        input.valueAsNumber = value;\n        break;\n      default:\n        input.value = value.toString();\n    }\n  }\n  updateInputEmptyState(input);\n  if (input instanceof HTMLTextAreaElement && textfieldElement.hasAttribute('mdw-autosize')) {\n    updateTextAreaSize(input);\n  }\n}\n","\nimport * as Attributes from '../../core/aria/attributes';\nimport * as Keyboard from '../../core/aria/keyboard';\nimport * as DataTableCell from './cell';\nimport { dispatchDomEvent, iterateArrayLike } from '../../core/dom';\n\nexport const FOCUS_EVENT = 'mdw:datatablerow-focus';\nexport const SELECTED_CHANGE_EVENT = 'mdw:datatablerow-selectedchange';\n\n/**\n * @param {HTMLTableRowElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.setAttribute('role', 'row');\n  element.addEventListener('focus', onFocus);\n  iterateArrayLike(element.cells, DataTableCell.attach);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onFocus(event) {\n  /** @type {HTMLTableRowElement} */\n  const rowElement = (event.currentTarget);\n  dispatchDomEvent(rowElement, FOCUS_EVENT);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return Attributes.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n\n/**\n * @param {HTMLTableRowElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('focus', onFocus);\n  Keyboard.detach(element);\n  iterateArrayLike(element.cells, DataTableCell.detach);\n}\n","import * as Keyboard from '../../core/aria/keyboard';\nimport { iterateArrayLike, getChildElementByClass } from '../../core/dom';\nimport * as ListContent from './content';\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attach(listItemElement) {\n  attachCore(listItemElement);\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.attach);\n  if (listItemElement.hasAttribute('aria-expanded')) {\n    if (!listItemElement.hasAttribute('mdw-expander-js')) {\n      listItemElement.setAttribute('mdw-pre-expander-js', '');\n      setTimeout(() => {\n        if (listItemElement.hasAttribute('mdw-pre-expander-js')) {\n          listItemElement.removeAttribute('mdw-pre-expander-js');\n          listItemElement.setAttribute('mdw-expander-js', '');\n        }\n      }, 500);\n    }\n    setExpanded(listItemElement, isExpanded(listItemElement));\n  }\n  listItemElement.addEventListener(ListContent.ACTIVATE_EVENT, onChildContentActivate);\n  listItemElement.addEventListener('keydown', onKeyDown);\n  Keyboard.attach(listItemElement);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function attachCore(listItemElement) {\n  setupAria(listItemElement);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {boolean}\n */\nexport function isExpanded(listItemElement) {\n  return (listItemElement.getAttribute('aria-expanded') === 'true');\n}\n\n/**\n * @param {Element} listItemElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(listItemElement, value) {\n  listItemElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n  iterateArrayLike(listItemElement.querySelectorAll('[role=\"treeitem\"]'), (treeitem) => {\n    treeitem.setAttribute('mdw-skip-tab', value ? 'false' : 'true');\n  });\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onChildContentActivate(event) {\n  /** @type {HTMLElement} */\n  const activatedElement = (event.target);\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!activatedElement || activatedElement.parentElement !== element) {\n    return;\n  }\n  if (element.hasAttribute('aria-expanded')) {\n    event.stopPropagation();\n    setExpanded(element, !isExpanded(element));\n  }\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function setupAria(listItemElement) {\n  let isTreeItem = null;\n  let roleIsNone = false;\n  if (!listItemElement.hasAttribute('role')) {\n    if (listItemElement.hasAttribute('aria-expanded')) {\n      listItemElement.setAttribute('role', 'treeitem');\n      isTreeItem = true;\n      roleIsNone = false;\n    } else {\n      listItemElement.setAttribute('role', 'none');\n      isTreeItem = false;\n      roleIsNone = true;\n    }\n  }\n  if (isTreeItem !== false || listItemElement.getAttribute('role') === 'treeitem') {\n    const activatorContent = getChildElementByClass(listItemElement, 'mdw-list__content');\n    if (activatorContent && !activatorContent.hasAttribute('role')) {\n      activatorContent.setAttribute('role', 'none');\n    }\n  }\n  if (!roleIsNone) {\n    return;\n  }\n  const parentRole = listItemElement.parentElement && listItemElement.parentElement.getAttribute('role');\n  if (!parentRole) {\n    return;\n  }\n  const contentChild = getChildElementByClass(listItemElement, 'mdw-list__content');\n  if (!contentChild) {\n    return;\n  }\n  if (contentChild.hasAttribute('role')) {\n    return;\n  }\n  switch (parentRole) {\n    case 'listbox':\n      contentChild.setAttribute('role', 'option');\n      break;\n    case 'radiogroup':\n      contentChild.setAttribute('role', 'radio');\n      break;\n    case 'group':\n    case 'tree':\n    case 'treeitem':\n      contentChild.setAttribute('role', 'treeitem');\n      break;\n    default:\n    case 'list':\n  }\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  if (document.activeElement !== event.currentTarget) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  if (!element.hasAttribute('aria-expanded')) {\n    return;\n  }\n  const activatorContent = getChildElementByClass(element, 'mdw-list__content');\n  if (!activatorContent) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  activatorContent.dispatchEvent(newEvent);\n}\n\n/**\n * @param {Element} listItemElement\n * @return {void}\n */\nexport function detach(listItemElement) {\n  Keyboard.detach(listItemElement);\n  iterateArrayLike(listItemElement.getElementsByClassName('mdw-list__content'), ListContent.detach);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as AriaTab from '../../core/aria/tab';\nimport { iterateArrayLike } from '../../core/dom';\nimport * as Overlay from '../../core/overlay/index';\nimport * as Ripple from '../../core/ripple/index';\n\nexport const SELECTED_CHANGE_EVENT = 'mdw:bottomnavitem-selectedchange';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-overlay');\n  if (!element.hasAttribute('mdw-overlay-off')) {\n    element.setAttribute('mdw-overlay-off', 'selected activated');\n  }\n  if (!element.hasAttribute('mdw-overlay-default')) {\n    element.setAttribute('mdw-overlay-default', 'medium');\n  }\n  Overlay.attach(element);\n\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n\n  attachCore(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachCore(element) {\n  attachAria(element);\n  element.addEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attachAria(element) {\n  AriaTab.attach(element);\n  iterateArrayLike(element.getElementsByClassName('mdw-bottomnav__icon'),\n    el => el.setAttribute('aria-hidden', 'true'));\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detachCore(element) {\n  AriaTab.detach(element);\n  element.removeEventListener('click', onClick);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  detachCore(element);\n  Ripple.detach(element);\n  Overlay.detach(element);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nfunction onClick(event) {\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (element.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  setSelected(element, true);\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {boolean} [dispatchEvent=true]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEvent = true) {\n  return AriaTab.setSelected(element, value, dispatchEvent ? SELECTED_CHANGE_EVENT : null);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#alert\n// https://www.w3.org/TR/wai-aria-practices/#alert\n\nimport {\n  dispatchDomEvent,\n  findElementParentByClassName,\n  nextTick,\n  setTextNode,\n} from '../../core/dom';\n\nimport * as Button from '../button/index';\n\n/**\n * @typedef SnackbarCreateOptions\n * @property {!string} text\n * @property {!string} [buttonText]\n * @property {string} [buttonInk='primary']\n * @property {boolean} [stacked=false]\n * @property {number|boolean} [autoHide=4] Auto hide time in seconds\n * @property {boolean} [autoDestroy=true] Destroy element after hide\n * @property {Element} [parent] Parent element to which to append\n * @property {boolean} [show=true] Show element after creation\n * @property {boolean} [skipQueue=false] Skip queue\n */\n\nclass SnackbarQueueItem {\n  /**\n   * @param {Element} element\n   * @param {SnackbarCreateOptions} [options]\n   */\n  constructor(element, options) {\n    this.element = element;\n    this.options = options;\n    this.hideTimeout = null;\n  }\n\n  /** @return {void} */\n  clearHideTimeout() {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n      this.hideTimeout = null;\n    }\n  }\n}\n\n/** @type {SnackbarQueueItem[]} */\nconst SNACKBAR_QUEUE = [];\n\nexport const HIDE_EVENT = 'mdw:snackbar-hide';\nexport const SHOW_EVENT = 'mdw:snackbar-show';\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function attach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.attach(button);\n    button.addEventListener('click', onButtonClick);\n  }\n  snackbarElement.setAttribute('mdw-js', '');\n  snackbarElement.addEventListener('animationend', onAnimationEnd);\n  snackbarElement.addEventListener('keydown', onKeyDown);\n  setupARIA(snackbarElement);\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function setupARIA(snackbarElement) {\n  if (snackbarElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  snackbarElement.setAttribute('role', 'alert');\n  snackbarElement.setAttribute('tabindex', '-1');\n}\n\n/**\n * @param {KeyboardEvent} event\n * @return {void}\n */\nexport function onKeyDown(event) {\n  if (event.key === 'Escape' || event.key === 'Esc') {\n    // Allow users to close snackbar with escape, for accessibilty reasons\n    event.stopPropagation();\n    event.preventDefault();\n    /** @type {Element} */\n    const snackbarElement = (event.currentTarget);\n    hide(snackbarElement);\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function detach(snackbarElement) {\n  const button = snackbarElement.getElementsByClassName('mdw-button')[0];\n  if (button) {\n    Button.detach(button);\n    button.removeEventListener('click', onButtonClick);\n  }\n  // Remove timeouts and stacks\n  SNACKBAR_QUEUE.slice().reverse().forEach((queue, reverseIndex, array) => {\n    if (queue.element === snackbarElement) {\n      queue.clearHideTimeout();\n      const index = array.length - reverseIndex - 1;\n      SNACKBAR_QUEUE.splice(index, 1);\n    }\n  });\n  snackbarElement.removeAttribute('mdw-js');\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onButtonClick(event) {\n  /** @type {HTMLElement} */\n  const buttonElement = (event.currentTarget);\n  if (buttonElement instanceof HTMLAnchorElement) {\n    event.preventDefault();\n  }\n  const snackbarElement = findElementParentByClassName(buttonElement, 'mdw-snackbar');\n  hide(snackbarElement);\n}\n\n/**\n * @param {Element} element\n * @return {SnackbarQueueItem}\n */\nexport function findNextQueueItem(element) {\n  let queue = null;\n  SNACKBAR_QUEUE.some((q) => {\n    if (q.element === element) {\n      queue = q;\n      return true;\n    }\n    return false;\n  });\n  return queue;\n}\n\n/**\n * @param {AnimationEvent} event\n * @return {void}\n */\nexport function onAnimationEnd(event) {\n  handleAnimationChange(/** @type {Element} */ (event.currentTarget));\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {void}\n */\nexport function handleAnimationChange(snackbarElement) {\n  const showing = snackbarElement.getAttribute('aria-hidden') === 'false';\n  if (showing) {\n    const currentQueueItem = findNextQueueItem(snackbarElement);\n    if (currentQueueItem && currentQueueItem.hideTimeout) {\n      return;\n    }\n    const autoHideString = snackbarElement.getAttribute('mdw-autohide');\n    if (autoHideString == null) {\n      return;\n    }\n    const timeInSeconds = parseFloat(autoHideString) || 4;\n    if (timeInSeconds < 0) {\n      return;\n    }\n    const timeout = setTimeout(() => {\n      hide(snackbarElement);\n    }, timeInSeconds * 1000);\n    if (currentQueueItem) {\n      currentQueueItem.hideTimeout = timeout;\n    }\n    return;\n  }\n\n  const nextQueueItem = findNextQueueItem(snackbarElement);\n  if (nextQueueItem) {\n    update(snackbarElement, nextQueueItem.options);\n    show(snackbarElement);\n    return;\n  }\n  if (snackbarElement.hasAttribute('mdw-autodestroy')) {\n    if (snackbarElement.parentElement) {\n      snackbarElement.parentElement.removeChild(snackbarElement);\n    }\n  }\n}\n\n/**\n * @param {Element} snackbarElement\n * @return {boolean} changed\n */\nexport function hide(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'true') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, HIDE_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'true');\n  const currentQueueItem = findNextQueueItem(snackbarElement);\n  if (currentQueueItem) {\n    SNACKBAR_QUEUE.splice(SNACKBAR_QUEUE.indexOf(currentQueueItem), 1);\n  }\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {?Element} snackbarElement\n * @return {boolean} changed\n */\nexport function show(snackbarElement) {\n  if (snackbarElement.getAttribute('aria-hidden') === 'false') {\n    return false;\n  }\n  if (!dispatchDomEvent(snackbarElement, SHOW_EVENT)) {\n    return false;\n  }\n  snackbarElement.setAttribute('aria-hidden', 'false');\n  attach(snackbarElement);\n  if (window.getComputedStyle(snackbarElement).animationName === 'none') {\n    nextTick(() => handleAnimationChange(snackbarElement));\n  }\n  return true;\n}\n\n/**\n * @param {Element} element\n * @param {SnackbarCreateOptions} options\n * @return {void}\n */\nexport function update(element, options) {\n  element.classList.add('mdw-snackbar');\n  if (!element.classList.contains('mdw-theme')) {\n    // Guidelines conflict stating a background should be fully opaque\n    // But says spec says to use #000000 with 87% opacity\n    // Calculated against white, opaque value is #212121 (Gray-900)\n    element.classList.add('mdw-theme');\n    element.setAttribute('mdw-surface', 'background 900');\n    element.setAttribute('mdw-dark', '');\n  }\n  let span = element.getElementsByTagName('span')[0];\n  if (span) {\n    // To trigger screen readers, we destroy and create a new span and textnode\n    span.parentElement.removeChild(span);\n  }\n  span = document.createElement('span');\n  if (element.firstChild) {\n    element.insertBefore(span, element.firstChild);\n  } else {\n    element.appendChild(span);\n  }\n  const textNode = document.createTextNode(options.text);\n  span.appendChild(textNode);\n  let button = element.getElementsByClassName('mdw-button')[0];\n  if (options.buttonText) {\n    if (!button) {\n      button = document.createElement('a');\n      element.appendChild(button);\n    }\n    setTextNode(button, options.buttonText);\n    button.classList.add('mdw-button');\n    if (typeof options.buttonInk === 'undefined') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', 'secondary');\n    } else if (typeof options.buttonInk === 'string') {\n      button.classList.add('mdw-theme');\n      button.setAttribute('mdw-ink', options.buttonInk);\n    } else {\n      // Don't set attribute if null is passed\n    }\n  } else if (button && button.parentElement) {\n    button.parentElement.removeChild(button);\n  }\n  if (options.stacked) {\n    element.setAttribute('mdw-stacked', '');\n  }\n  if (options.autoHide !== false) {\n    let timeInSeconds;\n    if (options.autoHide === true) {\n      timeInSeconds = 4;\n    } else if (options.autoHide == null) {\n      timeInSeconds = 4;\n    } else {\n      timeInSeconds = options.autoHide;\n    }\n    if (timeInSeconds > 0) {\n      element.setAttribute('mdw-autohide', timeInSeconds.toString());\n    }\n  }\n  if (options.autoDestroy !== false) {\n    element.setAttribute('mdw-autodestroy', '');\n  }\n}\n\n/**\n * Creates a Snackbar element if required and adds to show queue\n * @param {SnackbarCreateOptions} options\n * @return {HTMLElement}\n */\nexport function create(options) {\n  let element;\n  let newlyCreated = false;\n  if (options.parent) {\n    /** @type {HTMLElement} */\n    element = (options.parent.getElementsByClassName('mdw-snackbar')[0]);\n  }\n  if (!element) {\n    element = document.createElement('div');\n    if (options.parent) {\n      options.parent.appendChild(element);\n    }\n    newlyCreated = true;\n  }\n  const queue = new SnackbarQueueItem(element, options);\n  if (options.skipQueue) {\n    SNACKBAR_QUEUE.splice(0, 0, queue);\n  } else {\n    SNACKBAR_QUEUE.push(queue);\n  }\n\n  if (options.show !== false) {\n    if (newlyCreated) {\n      // Update after show to trigger a text change\n      update(element, options);\n      show(element);\n      update(element, options);\n    } else {\n      show(element);\n    }\n  }\n  return element;\n}\n","// https://www.w3.org/TR/wai-aria-practices/#grid\n\nimport * as DataTableCell from './cell';\nimport * as DataTableColumnHeader from './columnheader';\nimport * as DataTableRowHeader from './rowheader';\nimport * as DataTableRow from './row';\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Keyboard from '../../core/aria/keyboard';\n\nimport {\n  findElementParentByClassName,\n  iterateArrayLike,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\nexport const CELL_TABINDEX_QUERIES = [\n  'td:not([mdw-autofocus-widget])',\n  'th:not([mdw-autofocus-widget])',\n  'td[mdw-autofocus-widget] .mdw-datatable__widget',\n  'th[mdw-autofocus-widget] .mdw-datatable__widget',\n];\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('mdw-datatable-js', '');\n\n  const table = getTable(element);\n  table.setAttribute('role', 'grid');\n  const headerRow = getHeaderRow(element);\n  const tbody = getTableBody(element);\n\n  iterateArrayLike(headerRow.getElementsByTagName('th'), DataTableColumnHeader.attach);\n  iterateArrayLike(tbody.getElementsByTagName('th'), DataTableRowHeader.attach);\n\n  const tableRows = tbody.getElementsByTagName('tr');\n  iterateArrayLike(tableRows, DataTableRow.attach);\n\n  const rowFocusable = element.hasAttribute('mdw-row-focusable');\n  if (rowFocusable) {\n    RovingTabIndex.setupTabIndexes(tableRows);\n  }\n  const cellFocusable = element.hasAttribute('mdw-cell-focusable');\n  if (cellFocusable) {\n    RovingTabIndex.setupTabIndexes(tbody.querySelectorAll(CELL_TABINDEX_QUERIES.join(',')));\n  }\n\n  element.addEventListener(DataTableRow.FOCUS_EVENT, onItemFocus);\n  element.addEventListener(DataTableRow.SELECTED_CHANGE_EVENT, onSelectedChange);\n  element.addEventListener(DataTableCell.FOCUS_EVENT, onItemFocus);\n  element.addEventListener(DataTableCell.SELECTED_CHANGE_EVENT, onSelectedChange);\n  element.addEventListener(DataTableColumnHeader.SORT_EVENT, onSort);\n  element.addEventListener(Keyboard.SPACEBAR_KEY, onKeyboard);\n  element.addEventListener(Keyboard.UP_ARROW_KEY, onKeyboard);\n  element.addEventListener(Keyboard.DOWN_ARROW_KEY, onKeyboard);\n  element.addEventListener(Keyboard.FORWARD_ARROW_KEY, onKeyboard);\n  element.addEventListener(Keyboard.BACK_ARROW_KEY, onKeyboard);\n  element.addEventListener(Keyboard.HOME_KEY, onKeyboard);\n  element.addEventListener(Keyboard.END_KEY, onKeyboard);\n  element.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChange(event) {\n  const selected = event.detail.value === 'true';\n  /** @type {HTMLElement} */\n  const dataTableElement = (event.currentTarget);\n  const hasSelection = selected || dataTableElement.querySelector('td[aria-selected=\"true\"],tr[aria-selected=\"true\"]');\n  if (hasSelection) {\n    dataTableElement.setAttribute('mdw-has-selection', '');\n  } else {\n    dataTableElement.removeAttribute('mdw-has-selection');\n  }\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onItemFocus(event) {\n  /** @type {HTMLElement} */\n  const datatableElement = (event.currentTarget);\n  const onFocusInteraction = datatableElement.getAttribute('mdw-on-focus');\n  if (!onFocusInteraction) {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (itemElement.getAttribute('aria-disabled') === 'true') {\n    return;\n  }\n  onFocusInteraction.split(' ').forEach((interaction) => {\n    switch (interaction) {\n      case 'select':\n        if (itemElement instanceof HTMLTableRowElement) {\n          DataTableRow.setSelected(itemElement, true);\n        } else {\n          DataTableCell.setSelected(itemElement, true);\n        }\n        break;\n      default:\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSort(event) {\n  /** @type {HTMLElement} */\n  const datatableElement = (event.currentTarget);\n  /** @type {HTMLTableHeaderCellElement} */\n  const cell = (event.target);\n  sortColumn(datatableElement, cell.cellIndex, event.detail.sort === 'ascending');\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onRowHeaderCheckedChange(event) {\n  /** @type {HTMLTableHeaderCellElement} */\n  const cell = (event.target);\n  const row = cell.parentElement;\n  DataTableRow.setSelected(row, event.detail.value);\n}\n\n/**\n * @param {Element} datatableElement\n * @param {number} columnIndex\n * @param {boolean} ascending\n * @return {void}\n */\nexport function sortColumn(datatableElement, columnIndex, ascending = true) {\n  if (datatableElement.hasAttribute('mdw-datatable-adapter')) {\n    return;\n  }\n  iterateArrayLike(datatableElement.getElementsByTagName('th'), (th) => {\n    if (th.cellIndex === columnIndex) {\n      th.setAttribute('aria-sort', ascending ? 'ascending' : 'descending');\n    } else if (th.hasAttribute('aria-sort')) {\n      th.setAttribute('aria-sort', 'none');\n    }\n  });\n\n  /** @type {HTMLTableSectionElement} */\n  const tbody = getTableBody(datatableElement);\n  const rows = [];\n  for (let i = tbody.rows.length - 1; i >= 0; i -= 1) {\n    rows.push(tbody.rows.item(i));\n    tbody.deleteRow(i);\n  }\n  rows.sort((a, b) => {\n    const aCell = a.cells.item(columnIndex);\n    const bCell = b.cells.item(columnIndex);\n    const aText = aCell.textContent;\n    const bText = bCell.textContent;\n    if (aCell.dataset.type === 'number') {\n      return parseFloat(bText) - parseFloat(aText);\n    }\n    return bText.localeCompare(aText);\n  });\n  if (ascending) {\n    rows.reverse();\n  }\n  const fragment = document.createDocumentFragment();\n  rows.forEach((row) => {\n    fragment.appendChild(row);\n  });\n  tbody.appendChild(fragment);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  /** @type {HTMLElement} */\n  const dataTableElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const emitter = (event.target);\n\n  const row = (emitter instanceof HTMLTableRowElement && emitter);\n  const cell = (!row && emitter instanceof HTMLTableCellElement && emitter);\n  if (!row && !cell) {\n    return;\n  }\n  event.stopPropagation();\n  RovingTabIndex.removeTabIndex(dataTableElement.querySelectorAll(row ? 'tr' : CELL_TABINDEX_QUERIES.join(',')), [emitter]);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onKeyboard(event) {\n  /** @type {HTMLElement} */\n  const dataTableElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const emitter = (event.target);\n  let current = document.activeElement;\n\n  let row = (emitter instanceof HTMLTableRowElement && emitter);\n  const cell = (!row && emitter instanceof HTMLTableCellElement && emitter);\n  if (!row && !cell) {\n    return;\n  }\n  if (!row) {\n    /** @type {HTMLTableRowElement} */\n    row = (cell.parentElement);\n  }\n\n  let checkNavKeys = false;\n  switch (event.type) {\n    case Keyboard.SPACEBAR_KEY:\n      if (event.detail.ctrlKey || event.detail.altKey || event.detail.metaKey) {\n        return;\n      }\n      if (!event.detail.shiftKey) {\n        return;\n      }\n      if (!row.hasAttribute('aria-selected')) {\n        return;\n      }\n      DataTableRow.setSelected(row, row.getAttribute('aria-selected') !== 'true', true);\n      break;\n    default:\n      checkNavKeys = true;\n  }\n\n  if (checkNavKeys) {\n    // Keyboard Navigation\n    /** @type {ArrayLike<HTMLElement>} */\n    let searchElements;\n    let reverse = false;\n    let loop = false;\n    switch (event.type) {\n      case Keyboard.UP_ARROW_KEY:\n        reverse = true;\n        // eslint-disable-next-line no-fallthrough\n      case Keyboard.DOWN_ARROW_KEY:\n        if (event.detail.ctrlKey || event.detail.altKey || event.detail.metaKey) {\n          return;\n        }\n        if (cell) {\n          searchElements = getTableBody(dataTableElement).querySelectorAll(\n            CELL_TABINDEX_QUERIES.map(q => `${q}:nth-child(${cell.cellIndex + 1})`).join(',')\n          );\n        } else {\n          searchElements = getTableBody(dataTableElement).getElementsByTagName('tr');\n        }\n        break;\n      case Keyboard.BACK_ARROW_KEY:\n        reverse = true;\n        // eslint-disable-next-line no-fallthrough\n      case Keyboard.FORWARD_ARROW_KEY:\n        if (event.detail.ctrlKey || event.detail.altKey || event.detail.metaKey) {\n          return;\n        }\n        if (!cell) {\n          return;\n        }\n        searchElements = cell.parentElement.querySelectorAll(CELL_TABINDEX_QUERIES.join(','));\n        break;\n      case Keyboard.END_KEY:\n        reverse = true;\n        // eslint-disable-next-line no-fallthrough\n      case Keyboard.HOME_KEY:\n        if (event.detail.altKey || event.detail.metaKey) {\n          return;\n        }\n        if (!cell) {\n          return;\n        }\n        if (event.detail.ctrlKey) {\n          searchElements = getTableBody(dataTableElement).querySelectorAll(CELL_TABINDEX_QUERIES.join(','));\n        } else {\n          searchElements = cell.parentElement.querySelectorAll(CELL_TABINDEX_QUERIES.join(','));\n        }\n        cell.setAttribute('tabindex', '-1');\n        current = null;\n        loop = true;\n        break;\n      default:\n        return;\n    }\n    RovingTabIndex.selectNext(searchElements, current, loop, reverse);\n  }\n\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeAttribute('mdw-datatable-js');\n  element.removeEventListener(DataTableRow.FOCUS_EVENT, onItemFocus);\n  element.removeEventListener(DataTableCell.FOCUS_EVENT, onItemFocus);\n  element.removeEventListener(DataTableColumnHeader.SORT_EVENT, onSort);\n  element.removeEventListener(Keyboard.UP_ARROW_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.DOWN_ARROW_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.FORWARD_ARROW_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.BACK_ARROW_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.HOME_KEY, onKeyboard);\n  element.removeEventListener(Keyboard.END_KEY, onKeyboard);\n  element.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLElement}\n */\nexport function getScroller(datatableElement) {\n  /** @type {HTMLElement} */\n  let scroller = (datatableElement.getElementsByClassName('mdw-datatable__scroller')[0]);\n  if (!scroller) {\n    scroller = document.createElement('div');\n    scroller.classList.add('mdw-datatable__scroller');\n    const footer = datatableElement.getElementsByClassName('mdw-datatable__footer')[0];\n    if (footer) {\n      datatableElement.insertBefore(scroller, footer);\n    } else {\n      datatableElement.appendChild(scroller);\n    }\n    // Move table into scroller if it exists\n    const table = datatableElement.getElementsByTagName('table')[0];\n    if (table) {\n      table.parentElement.removeChild(table);\n      scroller.appendChild(table);\n    }\n  }\n  return scroller;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableElement}\n */\nexport function getTable(datatableElement) {\n  if (datatableElement instanceof HTMLTableElement) {\n    return datatableElement;\n  }\n  let table = datatableElement.getElementsByTagName('table')[0];\n  if (!table) {\n    const scroller = getScroller(datatableElement);\n    table = document.createElement('table');\n    scroller.appendChild(table);\n  }\n  return table;\n}\n\n/**\n * @param {Element} tableElement\n * @return {HTMLTableRowElement}\n */\nexport function getHeaderRow(tableElement) {\n  let thead = tableElement.getElementsByTagName('thead')[0];\n  if (!thead) {\n    const table = getTable(tableElement);\n    thead = document.createElement('thead');\n    table.appendChild(thead);\n  }\n  let headerRow = thead.getElementsByTagName('tr')[0];\n  if (!headerRow) {\n    headerRow = document.createElement('tr');\n    thead.appendChild(headerRow);\n  }\n  return headerRow;\n}\n\n/**\n * @param {Element} datatableElement\n * @return {HTMLTableSectionElement}\n */\nexport function getTableBody(datatableElement) {\n  let tbody = datatableElement.getElementsByTagName('tbody')[0];\n  if (!tbody) {\n    const table = getTable(datatableElement);\n    tbody = document.createElement('tbody');\n    table.appendChild(tbody);\n  }\n  return tbody;\n}\n","import * as Keyboard from '../../core/aria/keyboard';\nimport * as Attributes from '../../core/aria/attributes';\nimport { dispatchDomEvent } from '../../core/dom';\nimport * as Cell from './cell';\n\nexport const SORT_EVENT = 'mdw:datatablecolumnheader-sort';\n\n/**\n * @param {HTMLTableHeaderCellElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.setAttribute('role', 'columnheader');\n  element.addEventListener('click', onClick);\n  Cell.attach(element);\n}\n\n/**\n * @param {FocusEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  /** @type {HTMLElement} */\n  const columnHeaderElement = (event.currentTarget);\n  if (Attributes.isDisabled(columnHeaderElement)) {\n    return;\n  }\n  const ariaSort = columnHeaderElement.getAttribute('aria-sort');\n  if (!ariaSort) {\n    return;\n  }\n  const sort = (ariaSort === 'ascending' ? 'descending' : 'ascending');\n  const detail = { sort };\n  dispatchDomEvent(columnHeaderElement, SORT_EVENT, detail);\n}\n\n\n/**\n * @param {HTMLTableHeaderCellElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener('click', onClick);\n  Keyboard.detach(element);\n  Cell.detach(element);\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tab\n\nimport * as Keyboard from './keyboard';\nimport * as Attributes from './attributes';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.setAttribute('role', 'tab');\n  element.setAttribute('mdw-aria-tab-js', '');\n  element.addEventListener('keydown', onKeyDown);\n  Keyboard.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  Keyboard.detach(element);\n  element.removeEventListener('keydown', onKeyDown);\n  element.removeAttribute('mdw-aria-tab-js');\n}\n\n/**\n * @param {Element} element\n * @param {string|boolean} value\n * @param {string} [dispatchEventName]\n * @return {boolean} successful\n */\nexport function setSelected(element, value, dispatchEventName) {\n  if (Attributes.setSelected(element, value, dispatchEventName)) {\n    Attributes.setCurrent(element, value);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Remap Space and Enter as Click\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const element = (event.currentTarget);\n  if (!element) {\n    return;\n  }\n  event.stopPropagation();\n  event.preventDefault();\n  const newEvent = document.createEvent('Event');\n  newEvent.initEvent('click', true, true);\n  element.dispatchEvent(newEvent);\n}\n","import DomAdapter from '../dom/index';\nimport * as ListItem from '../../components/list/item';\n\n/**\n * @template T1\n * @template T2\n * @typedef {import('../dom/index').DomAdapterCreateOptions<T1,T2>} DomAdapterCreateOptions<T1,T2>\n */\n\n/**\n * @param {HTMLLIElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyListAdapterRenderer(element, data) {\n  let primaryText = element.getElementsByClassName('mdw-list__text')[0];\n  if (!primaryText) {\n    let contentElement = element.getElementsByClassName('mdw-list__content')[0];\n    if (!contentElement) {\n      contentElement = document.createElement('div');\n      contentElement.className = 'mdw-list__content';\n      element.appendChild(contentElement);\n    }\n    primaryText = document.createElement('div');\n    primaryText.className = 'mdw-list__text';\n    contentElement.appendChild(primaryText);\n    ListItem.attach(element);\n  }\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      s = new String(data).toString(); // eslint-disable-line no-new-wrappers\n    }\n  }\n  if (primaryText.textContent !== s) {\n    primaryText.textContent = s;\n  }\n}\n\n/**\n * @template T\n * @typedef {Object} ListAdapterCreateOptions\n * @prop {HTMLElement} element\n * @prop {Array<T>} datasource\n * @prop {function(HTMLLIElement, T):void} [render={function(HTMLIElement,T):void}]\n */\n\n/**\n * @template T\n * @extends {DomAdapter<T, HTMLLIElement>}\n * */\nexport default class ListAdapter extends DomAdapter {\n  /** @param {ListAdapterCreateOptions<T>} options */\n  constructor(options) {\n    super(options);\n    if (!options.render) {\n      this.render = AnyListAdapterRenderer;\n    }\n    this.create = ListAdapter.create;\n  }\n\n  static create() {\n    const element = document.createElement('li');\n    element.classList.add('mdw-list__item');\n    return element;\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport { iterateArrayLike } from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Keyboard from '../../core/aria/keyboard';\nimport * as BottomNavItem from './item';\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function attach(bottomnavElement) {\n  setupARIA(bottomnavElement);\n  /** @type {Element} */\n  let selectedItem;\n  const items = bottomnavElement.getElementsByClassName('mdw-bottomnav__item');\n\n  iterateArrayLike(items, (item) => {\n    BottomNavItem.attach(item);\n    if (!selectedItem && item.getAttribute('aria-selected') === 'true') {\n      selectedItem = item;\n    }\n  });\n  if (!selectedItem) {\n    selectedItem = items[0];\n  }\n  if (selectedItem) {\n    BottomNavItem.setSelected(selectedItem, true, true);\n  }\n  RovingTabIndex.setupTabIndexes(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n  bottomnavElement.addEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.addEventListener(Keyboard.FORWARD_ARROW_KEY, onForwardsRequested);\n  bottomnavElement.addEventListener(Keyboard.BACK_ARROW_KEY, onBackwardsRequested);\n  bottomnavElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(bottomnavElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onForwardsRequested(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectNext(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onBackwardsRequested(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(bottomnavElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function setupARIA(bottomnavElement) {\n  bottomnavElement.setAttribute('role', 'tablist');\n  bottomnavElement.setAttribute('aria-multiselectable', 'false');\n  bottomnavElement.setAttribute('aria-orientation', 'horizontal');\n}\n\n/**\n * @param {Element} bottomnavElement\n * @return {void}\n */\nexport function detach(bottomnavElement) {\n  bottomnavElement.removeEventListener(BottomNavItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  bottomnavElement.removeEventListener(Keyboard.FORWARD_ARROW_KEY, onForwardsRequested);\n  bottomnavElement.removeEventListener(Keyboard.BACK_ARROW_KEY, onBackwardsRequested);\n  bottomnavElement.removeEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n  iterateArrayLike(bottomnavElement.getElementsByClassName('mdw-bottomnav__item'), BottomNavItem.detach);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const bottomnavElement = (event.currentTarget);\n  iterateArrayLike(bottomnavElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      BottomNavItem.setSelected(item, false);\n    }\n  });\n}\n","// https://www.w3.org/TR/wai-aria-practices/#combobox\n\nimport { iterateSomeOfArrayLike, iterateArrayLike, getTextNode } from '../../core/dom';\n\nimport * as List from '../../components/list/index';\nimport * as ListContent from '../../components/list/content';\nimport * as TextField from '../../components/textfield/index';\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction containsTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) !== -1;\n}\n\n/**\n * @param {string} input\n * @param {string} content\n * @return {boolean}\n */\nfunction startsWithTextFilter(input, content) {\n  return content.trim().toLocaleLowerCase()\n    .indexOf(input.trim().toLocaleLowerCase()) === 0;\n}\n\n/**\n * @param {Element} item\n * @return {string}\n */\nfunction defaultItemTextParser(item) {\n  if (item.hasAttribute('data-mdw-search-text')) {\n    return item.getAttribute('data-mdw-search-text');\n  }\n  let textElement;\n  [\n    'mdw-list__text-line',\n    'mdw-list__text',\n    'mdw-list__content',\n  ].some((className) => {\n    textElement = item.getElementsByClassName(className)[0];\n    return textElement != null;\n  });\n\n  const textNode = textElement ? getTextNode(textElement) : getTextNode(item);\n  if (textNode) {\n    return textNode.textContent || '';\n  }\n  return '';\n}\n\n/**\n * @param {Element} list\n * @param {boolean} [backwards=false]\n * @return {Element} sibling\n */\nfunction selectSibling(list, backwards) {\n  const current = list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n  const items = list.querySelectorAll('[role=\"option\"]:not([aria-hidden=\"true\"]):not([disabled])');\n  let sibling;\n  if (current && current.getAttribute('aria-hidden') !== 'true') {\n    iterateSomeOfArrayLike(items, (item, index) => {\n      if (item !== current) {\n        return false;\n      }\n      if (backwards) {\n        sibling = items[index - 1];\n      } else {\n        sibling = items[index + 1];\n      }\n      return true;\n    });\n  } else if (backwards) {\n    sibling = items[items.length - 1];\n  } else {\n    sibling = items[0];\n  }\n  if (sibling && sibling !== current) {\n    if (current) {\n      current.setAttribute('aria-selected', 'false');\n    }\n    sibling.setAttribute('aria-selected', 'true');\n    return sibling;\n  }\n  return null;\n}\n\n/**\n * @param {Element} listItem\n * @return {void}\n */\nfunction scrollItemIntoView(listItem) {\n  /**\n   * @param {Element} el\n   * @return {number}\n   */\n  function getElementVisibility(el) {\n    let rect = el.getBoundingClientRect();\n    const { top, height } = rect;\n    let next = el.parentElement;\n    do {\n      rect = next.getBoundingClientRect();\n      if ((top + height) > rect.bottom) {\n        // bottom clipped\n        return 1;\n      }\n      if (top < rect.top) {\n        // top clipped\n        return -1;\n      }\n      next = next.parentElement;\n    } while (next !== document.body);\n    if (top < 0) {\n      return -1;\n    }\n    if ((top + height) > document.documentElement.clientHeight) {\n      return 1;\n    }\n    return 0;\n  }\n  const visibility = getElementVisibility(listItem);\n  if (visibility < 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  } else if (visibility > 0) {\n    listItem.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\n  }\n}\n\n/**\n * @callback SearchAdapterTextFilter\n * @param {string} input\n * @param {string} content\n * @return {boolean} passes\n */\n\n/**\n * @template T\n * @typedef SearchAdapterOptions\n * @prop {Element} textfield\n * @prop {Element} list\n * @prop {('contains'|'startsWith'|SearchAdapterTextFilter)} [textFilter='contains']\n * @prop {function(Element):string} [itemTextParser]\n * @prop {boolean} [dropdown=false]\n * @prop {boolean} [filterItems=true]\n * @prop {('replace'|'append'|'none')} [suggestionMethod='replace']\n * @prop {function(string, function(T[]=), function(Error=)=):void} [performSearch]\n * @prop {function(T[], function(), function(Error=)):void} [updateList]\n * @prop {boolean} [searchOnFocus=true]\n * @prop {number} [debounce=null] Debounce time in milliseconds\n */\n\n/** @template T */\nexport default class SearchAdapter {\n  /** @param {SearchAdapterOptions<T>} options */\n  constructor(options) {\n    this.textfield = options.textfield;\n    this.list = options.list;\n    this.list.setAttribute('role', 'listbox');\n    List.attach(this.list);\n    if (typeof options.textFilter === 'function') {\n      this.filter = options.textFilter;\n    } else if (options.textFilter === 'startsWith') {\n      this.filter = startsWithTextFilter;\n    } else {\n      this.filter = containsTextFilter;\n    }\n    this.itemTextParser = defaultItemTextParser || options.itemTextParser;\n    /** @type {HTMLInputElement} */\n    const input = (this.textfield.getElementsByClassName('mdw-textfield__input')[0]);\n    this.input = input;\n    this.list.addEventListener(ListContent.ACTIVATE_EVENT, (event) => {\n      /** @type {HTMLElement} */\n      const item = (event.target);\n      this.onItemSelected(item);\n      const inputValue = this.input.value || '';\n      this.suggestedInput = inputValue;\n      this.input.setSelectionRange(inputValue.length, inputValue.length);\n      this.input.focus();\n      this.hideDropDown();\n    });\n    this.input.addEventListener('keydown', (event) => {\n      this.onTextFieldKeydownEvent(event);\n    });\n    this.input.addEventListener('input', (event) => {\n      if (this.handleInputEvent) {\n        this.handleInputEvent(event);\n      }\n    });\n    this.input.addEventListener('blur', (event) => {\n      if (this.handleBlurEvent) {\n        this.handleBlurEvent(event);\n      }\n    });\n    this.input.addEventListener('focus', (event) => {\n      if (this.searchOnFocus) {\n        this.handleInputEvent(event);\n      }\n    });\n\n    this.dropdown = options.dropdown;\n    if (options.filterItems !== false) {\n      this.filterItems = true;\n    }\n    if (options.searchOnFocus !== false) {\n      this.searchOnFocus = true;\n    }\n    this.debounce = options.debounce;\n    this.suggestionMethod = options.suggestionMethod || 'replace';\n    this.currentSearchTerm = this.input.value || '';\n    /** @type {string} */\n    this.suggestedInput = null;\n    /** @type {string} */\n    this.previousValue = null;\n    this.performSearch = options.performSearch || ((value, resolve = () => {}) => resolve());\n    this.updateList = options.updateList || ((results, resolve = () => {}) => resolve());\n  }\n\n  /**\n   * Default input handler\n   * @param {Event} [event]\n   * @return {void}\n   */\n  handleInputEvent(event) { // eslint-disable-line no-unused-vars\n    if (document.activeElement !== this.input) {\n      return;\n    }\n    const inputValue = this.input.value || '';\n    if (inputValue === this.suggestedInput) {\n      return;\n    }\n    this.showDropDown();\n    if (inputValue === this.previousValue) {\n      return;\n    }\n    this.previousValue = inputValue;\n    this.currentSearchTerm = inputValue;\n\n    /**\n     * @param {Error} error\n     * @return {void}\n     */\n    function onErrorCallback(error) {\n      if (error.message === 'debounced') {\n        return;\n      }\n      if (error.message === 'expired') {\n        return;\n      }\n      throw error;\n    }\n\n    // IE does not support ES6 Promises\n    // Using resolve/reject callbacks instead.\n    // Syntactically ugly, but removes need for a polyfill.\n    this.performDebounce(inputValue,\n      () => this.checkExpired(inputValue,\n        () => this.performSearch(inputValue,\n          searchResults => this.checkExpired(inputValue,\n            () => this.updateList(searchResults,\n              () => this.filterListItems(),\n              onErrorCallback),\n            onErrorCallback),\n          onErrorCallback),\n        onErrorCallback),\n      onErrorCallback);\n\n    /**\n     * Promise.resolve()\n     *   .then(() => this.performDebounce(inputValue))\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.performSearch(inputValue))\n     *   .then((searchResults) => {\n     *     results = searchResults;\n     *   })\n     *   .then(() => this.checkExpired(inputValue))\n     *   .then(() => this.updateList(results))\n     *   .then(() => this.filterListItems())\n     *   .catch((error) => {\n     *     if (error.message === 'debounced') {\n     *       return;\n     *     }\n     *     if (error.message === 'expired') {\n     *       return;\n     *     }\n     *     throw error;\n     *   });\n     */\n  }\n\n  /**\n   * @param {string} inputValue\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  checkExpired(inputValue, resolve, reject) {\n    if (inputValue === this.currentSearchTerm) {\n      resolve();\n    } else {\n      reject(new Error('expired'));\n    }\n  }\n\n  /**\n   * @param {string} searchTerm\n   * @param {function} resolve\n   * @param {function(Error):any} reject\n   * @return {void}\n   */\n  performDebounce(searchTerm, resolve, reject) {\n    if (!this.debounce) {\n      resolve();\n      return;\n    }\n    setTimeout(() => {\n      if (searchTerm !== this.currentSearchTerm) {\n        reject(new Error('debounced'));\n        return;\n      }\n      resolve();\n    }, this.debounce);\n  }\n\n  /** @return {boolean} handled */\n  showDropDown() {\n    if (!this.dropdown) {\n      return false;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    let changed = false;\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.removeAttribute('mdw-hide');\n      changed = true;\n    }\n    if (!dropDownElement.hasAttribute('mdw-show')) {\n      dropDownElement.setAttribute('mdw-show', '');\n      changed = true;\n    }\n    return changed;\n  }\n\n  /** @return {boolean} handled */\n  isDropDownShown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (dropDownElement.hasAttribute('mdw-hide')) {\n      return false;\n    }\n    if (this.input === document.activeElement) {\n      return true;\n    }\n    if (dropDownElement.hasAttribute('mdw-show')) {\n      return true;\n    }\n    return false;\n  }\n\n  /** @return {boolean} handled */\n  hideDropDown() {\n    if (!this.dropdown) {\n      return true;\n    }\n    const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n    if (!dropDownElement.hasAttribute('mdw-hide')) {\n      dropDownElement.setAttribute('mdw-hide', '');\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {Event|FocusEvent} event\n   * @return {void}\n   */\n  handleBlurEvent(event) { // eslint-disable-line no-unused-vars\n    if (this.dropdown) {\n      const dropDownElement = this.textfield.querySelector('.mdw-textfield__dropdown');\n      if (dropDownElement.hasAttribute('mdw-show')) {\n        dropDownElement.removeAttribute('mdw-show');\n      }\n    }\n  }\n\n  /**\n   * @param {Element} item\n   * @return {void}\n   */\n  onItemSelected(item) {\n    if (this.suggestionMethod === 'none') {\n      return;\n    }\n    let suggestion = this.itemTextParser(item);\n    if (suggestion) {\n      suggestion = suggestion.trim();\n    }\n    if (!suggestion) {\n      return;\n    }\n    this.suggestedInput = suggestion;\n    if (this.suggestionMethod === 'replace') {\n      TextField.setValue(this.textfield, suggestion);\n    } else if (this.suggestionMethod === 'append') {\n      const selectionStart = (this.previousValue || '').length;\n      const selectionEnd = suggestion.length;\n      TextField.setValue(this.textfield, suggestion);\n      this.input.setSelectionRange(selectionStart, selectionEnd);\n    }\n  }\n\n  /**\n   * @param {SearchAdapterTextFilter} [fnFilter]\n   * @return {void}\n   */\n  filterListItems(fnFilter) {\n    if (!this.filterItems) {\n      return;\n    }\n    const input = this.input.value;\n    const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n    const items = this.list.querySelectorAll('[role=\"option\"]');\n    let hasItem = false;\n    iterateArrayLike(items, (item) => {\n      const content = this.itemTextParser(item);\n      const fn = fnFilter || this.filter;\n      if (fn(input, content)) {\n        hasItem = true;\n        item.setAttribute('aria-hidden', 'false');\n      } else {\n        item.setAttribute('aria-hidden', 'true');\n      }\n    });\n    if (current && current.getAttribute('aria-hidden') === 'true') {\n      const newSelection = selectSibling(this.list);\n      if (newSelection) {\n        this.onItemSelected(newSelection);\n      }\n    }\n    if (!hasItem) {\n      this.hideDropDown();\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event\n   * @return {void}\n   */\n  onTextFieldKeydownEvent(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    if (event.ctrlKey || event.altKey) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowUp':\n      case 'Up': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, true);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'ArrowDown':\n      case 'Down': {\n        if (this.isDropDownShown()) {\n          const sibling = selectSibling(this.list, false);\n          if (sibling) {\n            scrollItemIntoView(sibling);\n            this.onItemSelected(sibling);\n          }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n      }\n      case 'Esc':\n      case 'Escape': {\n        if (this.hideDropDown()) {\n          this.suggestedInput = this.previousValue;\n          TextField.setValue(this.textfield, this.previousValue);\n          event.stopPropagation();\n          event.preventDefault();\n        }\n        break;\n      }\n      case 'Enter': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n            event.preventDefault();\n          }\n        }\n        break;\n      }\n      case 'Tab': {\n        /** @type {HTMLElement} */\n        const current = this.list.querySelector('[role=\"option\"][aria-selected=\"true\"]');\n        if (current) {\n          if (this.hideDropDown()) {\n            current.click();\n            event.stopPropagation();\n          }\n        }\n        break;\n      }\n      default:\n    }\n  }\n}\n","// https://www.w3.org/TR/wai-aria-1.1/#tabpanel\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function attach(tabPanelElement) {\n  tabPanelElement.setAttribute('role', 'tabpanel');\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {void}\n */\nexport function detach(tabPanelElement) {\n  if (!tabPanelElement.hasAttribute('aria-expanded')) {\n    tabPanelElement.setAttribute('aria-expanded', 'false');\n    tabPanelElement.setAttribute('aria-hidden', 'true');\n  } else if (!tabPanelElement.hasAttribute('aria-hidden')) {\n    tabPanelElement.setAttribute('aria-hidden', isExpanded(tabPanelElement) ? 'false' : 'true');\n  }\n}\n\n/**\n * @param {Element} tabPanelElement\n * @return {boolean}\n */\nexport function isExpanded(tabPanelElement) {\n  return tabPanelElement.getAttribute('aria-expanded') === 'true';\n}\n\n/**\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setExpanded(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-expanded', value ? 'true' : 'false');\n}\n\n/**\n * Hide element to avoid tabbing into next panel\n * @param {Element} tabPanelElement\n * @param {boolean} value\n * @return {void}\n */\nexport function setHidden(tabPanelElement, value) {\n  tabPanelElement.setAttribute('aria-hidden', value ? 'true' : 'false');\n}\n","import {\n  iterateArrayLike,\n  scrollToElement,\n  dispatchDomEvent,\n  isRtl,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\nimport * as TabPanel from './panel';\n\nexport const SCROLL_EVENT = 'mdw:tabcontent-scroll';\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function attach(tabContentElement) {\n  tabContentElement.addEventListener('scroll', onTabContentScroll);\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.attach);\n  tabContentElement.addEventListener('keydown', onKeyDown);\n}\n\n/**\n * @param {Element} tabContentElement\n * @return {void}\n */\nexport function detach(tabContentElement) {\n  tabContentElement.removeEventListener('keydown', onKeyDown);\n  tabContentElement.removeAttribute('mdw-selected-index');\n  tabContentElement.removeEventListener('scroll', onTabContentScroll);\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), TabPanel.detach);\n}\n\n/**\n * Prevent scrolling with keyboard\n * @param {KeyboardEvent} event\n * @return {void}\n */\nfunction onKeyDown(event) {\n  if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n    return;\n  }\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Left':\n    case 'Right':\n      event.preventDefault();\n      break;\n    default:\n  }\n}\n\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabContentElement = (event.currentTarget);\n  if (tabContentElement.hasAttribute('mdw-no-scroll')) {\n    return;\n  }\n  const isPageRtl = isRtl();\n  const scrollPoint = tabContentElement.scrollLeft / tabContentElement.clientWidth;\n  let visibleIndex = Math.floor(scrollPoint);\n  let visibilityPercentage = scrollPoint - visibleIndex;\n\n  // Percentage may be incorrect due to floating point rounding errors\n  // Compare integer values provided by browser to check for 0\n  iterateSomeOfArrayLike(tabContentElement.children, ((/** @type {HTMLElement} */ panel, index) => {\n    if (tabContentElement.scrollLeft === panel.offsetLeft) {\n      visibleIndex = index;\n      visibilityPercentage = 0;\n      return true;\n    }\n    return false;\n  }));\n\n  const isResting = visibilityPercentage === 0;\n  let rightPanel;\n  let leftPeekPanel;\n  let rightPeekPanel;\n  let leftSelected = false;\n  let rightSelected = false;\n  let selectedIndex;\n  let leftPanelIndex;\n  if (isPageRtl) {\n    const lastIndex = tabContentElement.children.length - 1;\n    leftPanelIndex = lastIndex - visibleIndex;\n    leftPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex - 1));\n    rightPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 1));\n    rightPeekPanel = tabContentElement.children.item(lastIndex - (visibleIndex + 2));\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = lastIndex - visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = lastIndex - (visibleIndex + 1);\n    }\n  } else {\n    leftPanelIndex = visibleIndex;\n    rightPanel = tabContentElement.children.item(visibleIndex + 1);\n    leftPeekPanel = tabContentElement.children.item(visibleIndex - 1);\n    rightPeekPanel = tabContentElement.children.item(visibleIndex + 2);\n    if (visibilityPercentage < 0.5) {\n      leftSelected = true;\n      selectedIndex = visibleIndex;\n    } else {\n      rightSelected = true;\n      selectedIndex = visibleIndex + 1;\n    }\n  }\n  /** @type {HTMLElement} */\n  const leftPanel = (tabContentElement.children.item(leftPanelIndex));\n\n  const currentTargetIndexString = tabContentElement.getAttribute('mdw-target-index');\n  const currentTargetIndex = currentTargetIndexString == null\n    ? null : parseInt(currentTargetIndexString, 10);\n\n  let newSelectedIndex = null;\n  if (currentTargetIndex == null) {\n    TabPanel.setExpanded(leftPanel, leftSelected);\n    if (rightPanel) {\n      TabPanel.setExpanded(rightPanel, rightSelected);\n    }\n    newSelectedIndex = selectedIndex;\n  } else if (currentTargetIndex === selectedIndex) {\n    tabContentElement.removeAttribute('mdw-target-index');\n  }\n\n\n  TabPanel.setHidden(leftPanel, false);\n  if (leftPeekPanel) {\n    TabPanel.setHidden(leftPeekPanel, isResting || !leftSelected);\n  }\n  if (rightPanel) {\n    TabPanel.setHidden(rightPanel, isResting);\n  }\n  if (rightPeekPanel) {\n    TabPanel.setHidden(rightPeekPanel, isResting || !rightSelected);\n  }\n\n  dispatchDomEvent(tabContentElement, SCROLL_EVENT, {\n    newSelectedIndex,\n    leftPanelIndex,\n    visibilityPercentage,\n  });\n}\n\n/**\n * @param {HTMLElement} tabContentElement\n * @param {HTMLElement|number} panel element or index\n * @param {true|false|'smooth'} [scrollToPanel='smooth']\n * @return {void}\n */\nexport function selectPanel(tabContentElement, panel, scrollToPanel = 'smooth') {\n  /** @type {HTMLElement} */\n  let panelElement;\n  /** @type {number} */\n  let currentSelectedIndex = null;\n  /** @type {number} */\n  let panelIndex = null;\n  /** @type {Element[]} */\n  const otherPanels = [];\n  iterateArrayLike(tabContentElement.getElementsByClassName('mdw-tab__panel'), (el, index) => {\n    if (currentSelectedIndex == null && TabPanel.isExpanded(el)) {\n      currentSelectedIndex = index;\n    }\n    if (panel === el || panel === index) {\n      TabPanel.setExpanded(el, true);\n      TabPanel.setHidden(el, false);\n      /** @type {HTMLElement} */\n      panelElement = (el);\n      panelIndex = index;\n    } else {\n      otherPanels.push(el);\n    }\n  });\n  if (!panelElement) {\n    // Invalid index or panel not in tabcontent\n    return;\n  }\n  otherPanels.forEach(sibling => TabPanel.setExpanded(sibling, false));\n\n  const isPageRtl = isRtl();\n  const targetScrollLeft = isPageRtl\n    ? panelElement.parentElement.scrollWidth + panelElement.offsetLeft - panelElement.offsetWidth\n    : panelElement.offsetLeft;\n  if (!scrollToPanel || panelElement.parentElement.scrollLeft === targetScrollLeft) {\n    // No scrolling, hide others\n    otherPanels.forEach(sibling => TabPanel.setHidden(sibling, true));\n    return;\n  }\n  if (scrollToPanel && panelElement) {\n    if (panelIndex == null) {\n      tabContentElement.removeAttribute('mdw-target-index');\n    } else {\n      tabContentElement.setAttribute('mdw-target-index', panelIndex.toString(10));\n    }\n    scrollToElement(panelElement, scrollToPanel === 'smooth', isPageRtl);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#tabpanel\n\nimport {\n  iterateArrayLike, getPassiveEventListenerOption, scrollToElement,\n} from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Keyboard from '../../core/aria/keyboard';\nimport * as TabItem from './item';\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function attach(tabListElement) {\n  let indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (!indicatorElement) {\n    indicatorElement = document.createElement('div');\n    indicatorElement.classList.add('mdw-tab__indicator');\n    tabListElement.appendChild(indicatorElement);\n  }\n\n  setupARIA(tabListElement);\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.attach);\n  RovingTabIndex.setupTabIndexes(tabListElement.querySelectorAll('[role=\"tab\"]'));\n  tabListElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent,\n    getPassiveEventListenerOption());\n  tabListElement.addEventListener(Keyboard.FORWARD_ARROW_KEY, onForwardArrowKey);\n  tabListElement.addEventListener(Keyboard.BACK_ARROW_KEY, onBackArrowKey);\n  tabListElement.addEventListener(RovingTabIndex.TABINDEX_ZEROED, onTabIndexZeroed);\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nfunction onTabIndexZeroed(event) {\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const currentItem = (event.target);\n  RovingTabIndex.removeTabIndex(tabListElement.querySelectorAll('[role=\"tab\"]'), [currentItem]);\n}\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onForwardArrowKey(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectNext(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onBackArrowKey(event) {\n  if (event.detail.ctrlKey || event.detail.altKey\n    || event.detail.shiftKey || event.detail.metaKey) {\n    return;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  RovingTabIndex.selectPrevious(tabListElement.querySelectorAll('[role=\"tab\"]'));\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function setupARIA(tabListElement) {\n  if (tabListElement.hasAttribute('mdw-no-aria')) {\n    return;\n  }\n  tabListElement.setAttribute('role', 'tablist');\n  tabListElement.setAttribute('aria-multiselectable', 'false');\n  tabListElement.setAttribute('aria-orientation', 'horizontal');\n  const indicatorElement = tabListElement.getElementsByClassName('mdw-tab__indicator')[0];\n  if (indicatorElement) {\n    indicatorElement.setAttribute('role', 'presentation');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @return {void}\n */\nexport function detach(tabListElement) {\n  tabListElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onSelectedChangeEvent);\n  tabListElement.removeEventListener(Keyboard.FORWARD_ARROW_KEY, onForwardArrowKey);\n  tabListElement.removeEventListener(Keyboard.BACK_ARROW_KEY, onBackArrowKey);\n  iterateArrayLike(tabListElement.querySelectorAll('[role=\"tab\"]'), RovingTabIndex.detach);\n  iterateArrayLike(tabListElement.getElementsByClassName('mdw-tab__item'), TabItem.detach);\n}\n\n/**\n * @param {Element} tabListElement\n * @param {Element|number} item element or index\n * @param {number} [percentage=0]\n * @param {boolean} [animate=false]\n * @return {void}\n */\nexport function setIndicatorPosition(tabListElement, item, percentage, animate = false) {\n  /** @type {HTMLElement} */\n  const indicatorElement = (tabListElement.getElementsByClassName('mdw-tab__indicator')[0]);\n  if (!indicatorElement) {\n    return;\n  }\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  /** @type {HTMLElement} */\n  const leftItem = (item instanceof Element ? item : items.item(item));\n  let left = leftItem.offsetLeft;\n  let right = left + leftItem.offsetWidth;\n\n  if (percentage > 0) {\n    left += (percentage * leftItem.offsetWidth);\n    /** @type {HTMLElement} */\n    let nextItem = (leftItem.nextElementSibling);\n    if (!nextItem.classList.contains('mdw-tab__item')) {\n      // RTL\n      /** @type {HTMLElement} */\n      nextItem = (leftItem.previousElementSibling);\n    }\n    right = nextItem.offsetLeft + (percentage * nextItem.offsetWidth);\n  }\n\n  // RTL is inversed\n  const width = Math.abs(right - left);\n  indicatorElement.style.setProperty('transform', `translateX(${left}px) scaleX(${width / 1000})`);\n  if (animate) {\n    indicatorElement.setAttribute('mdw-animate', '');\n  } else {\n    indicatorElement.removeAttribute('mdw-animate');\n  }\n}\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @return {Element}\n */\n\n/**\n * @param {Element} tabListElement\n * @param {number} tabItemIndex\n * @param {boolean} [dispatchEvents=false]\n * @return {void}\n */\nexport function selectItemAtIndex(tabListElement, tabItemIndex, dispatchEvents = false) {\n  tabListElement.setAttribute('mdw-selected-index', tabItemIndex.toString(10));\n  /** @type {HTMLCollectionOf<HTMLElement>} */\n  const items = (tabListElement.getElementsByClassName('mdw-tab__item'));\n  if (dispatchEvents) {\n    const item = items.item(tabItemIndex);\n    if (item) {\n      TabItem.setSelected(item, true, true);\n    }\n    return;\n  }\n  iterateArrayLike(items, (el, index) => {\n    if (tabItemIndex === index) {\n      TabItem.setSelected(el, true, false);\n      if (tabListElement.hasAttribute('mdw-scrollable')) {\n        scrollToElement(el, true);\n      }\n    } else {\n      TabItem.setSelected(el, false, false);\n    }\n  });\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onSelectedChangeEvent(event) {\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabListElement = (event.currentTarget);\n  iterateArrayLike(tabListElement.querySelectorAll('[role=\"tab\"]'), (item) => {\n    if (item !== itemElement) {\n      TabItem.setSelected(item, false, false);\n    }\n  });\n}\n","import {\n  iterateArrayLike,\n  nextTick,\n  getPassiveEventListenerOption,\n  iterateSomeOfArrayLike,\n} from '../../core/dom';\n\nimport * as TabContent from './content';\nimport * as TabList from './list';\nimport * as TabPanel from './panel';\nimport * as TabItem from './item';\n\nconst RESIZE_WAIT_FRAMES = 5;\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function attach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.attach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.attach(tabContentElement);\n  }\n\n  tabElement.addEventListener(TabContent.SCROLL_EVENT, onTabContentScroll,\n    getPassiveEventListenerOption());\n  tabElement.addEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange,\n    getPassiveEventListenerOption());\n\n  /** @type {ArrayLike<Element>} */\n  const items = (tabListElement && tabListElement.getElementsByClassName('mdw-tab__item')) || [];\n  /** @type {ArrayLike<Element>} */\n  const panels = (tabContentElement && tabContentElement.getElementsByClassName('mdw-tab__panel')) || [];\n\n  let selectedItem;\n  let selectedPanel;\n  iterateArrayLike(items, (itemElement, index) => {\n    if (itemElement.getAttribute('aria-selected') === 'true') {\n      selectedItem = itemElement;\n      selectedPanel = panels[index];\n    }\n  });\n  if (!selectedItem && items.length) {\n    selectedItem = items[0];\n    selectedPanel = panels[0];\n  }\n  if (selectedItem) {\n    TabItem.setSelected(selectedItem, true);\n  }\n  if (selectedPanel) {\n    TabPanel.setHidden(selectedPanel, false);\n    TabPanel.setExpanded(selectedPanel, true);\n  }\n  onResize(tabElement);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabItemSelectedChange(event) {\n  if (event.detail.value !== 'true') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const tabItemElement = (event.target);\n  /** @type {HTMLElement} */\n  const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n  if (tabContentElement) {\n    let tabItemIndex = -1;\n    const tabItems = tabElement.querySelectorAll('.mdw-tab__list [role=\"tab\"]');\n    iterateSomeOfArrayLike(tabItems, (el, index) => {\n      if (el === tabItemElement) {\n        tabItemIndex = index;\n        return true;\n      }\n      return false;\n    });\n    if (!tabContentElement.hasAttribute('mdw-no-scroll')) {\n      TabContent.selectPanel(tabContentElement, tabItemIndex, 'smooth');\n      return;\n    }\n    TabContent.selectPanel(tabContentElement, tabItemIndex, true);\n  }\n\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.setIndicatorPosition(tabListElement, tabItemElement, 0, true);\n  }\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function detach(tabElement) {\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (tabListElement) {\n    TabList.detach(tabListElement);\n  }\n\n  const tabContentElement = tabElement.getElementsByClassName('mdw-tab__content')[0];\n  if (tabContentElement) {\n    TabContent.detach(tabContentElement);\n  }\n\n  tabElement.removeEventListener(TabContent.SCROLL_EVENT, onTabContentScroll);\n  tabElement.removeEventListener(TabItem.SELECTED_CHANGE_EVENT, onTabItemSelectedChange);\n  tabElement.removeAttribute('mdw-resize-stage');\n}\n\n/**\n * @param {Element} tabElement\n * @return {void}\n */\nexport function onResize(tabElement) {\n  let stage = 0;\n  tabElement.setAttribute('mdw-resize-stage', stage.toString());\n  /** @return {void} */\n  function performResize() {\n    if (!tabElement.hasAttribute('mdw-resize-stage')) {\n      // Skip resize\n      return;\n    }\n    const attrStage = tabElement.getAttribute('mdw-resize-stage');\n    if (attrStage !== stage.toString()) {\n      // Off-sync due to another resize event\n      return;\n    }\n    stage += 1;\n    tabElement.setAttribute('mdw-resize-stage', stage.toString());\n    if (stage === RESIZE_WAIT_FRAMES) {\n      /** @type {HTMLElement} */\n      const tabContentElement = (tabElement.getElementsByClassName('mdw-tab__content')[0]);\n      if (tabContentElement && !tabContentElement.hasAttribute('mdw-no-scroll')) {\n        /** @type {HTMLElement} */\n        const relatedPanel = (tabContentElement.querySelector('.mdw-tab__panel[aria-expanded=\"true\"]'));\n        if (relatedPanel) {\n          TabContent.selectPanel(tabContentElement, relatedPanel, true);\n        }\n      }\n    } else if (stage === RESIZE_WAIT_FRAMES * 2) {\n      /** @type {HTMLElement} */\n      const tabListElement = (tabElement.getElementsByClassName('mdw-tab__list')[0]);\n      if (tabListElement) {\n        /** @type {HTMLElement} */\n        const relatedItem = (tabListElement.querySelector('.mdw-tab__item[aria-selected=\"true\"]'));\n        if (relatedItem) {\n          TabList.setIndicatorPosition(tabListElement, relatedItem, 0);\n        }\n      }\n      tabElement.removeAttribute('mdw-resize-stage');\n      return;\n    }\n\n    nextTick(performResize);\n  }\n  nextTick(performResize);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nexport function onTabContentScroll(event) {\n  /** @type {HTMLElement} */\n  const tabElement = (event.currentTarget);\n  if (tabElement.hasAttribute('mdw-resize-stage')) {\n    return;\n  }\n  const { detail } = event;\n  const tabListElement = tabElement.getElementsByClassName('mdw-tab__list')[0];\n  if (!tabListElement) {\n    return;\n  }\n  TabList.setIndicatorPosition(tabListElement, detail.leftPanelIndex, detail.visibilityPercentage);\n  if (detail.newSelectedIndex != null) {\n    TabList.selectItemAtIndex(tabListElement, detail.newSelectedIndex, false);\n  }\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport { iterateArrayLike } from '../../core/dom';\nimport * as ChipItem from './item';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.attach);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  iterateArrayLike(element.getElementsByClassName('mdw-chip__item'), ChipItem.detach);\n}\n","// https://www.w3.org/TR/wai-aria-practices/#Listbox\n\nimport * as Ripple from '../../core/ripple/index';\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function attach(element) {\n  element.classList.add('mdw-ripple');\n  Ripple.attach(element);\n}\n\n/**\n * @param {Element} element\n * @return {void}\n */\nexport function detach(element) {\n  Ripple.detach(element);\n}\n","import * as Attributes from '../../core/aria/attributes';\nimport * as DataTableColumnHeader from '../../components/datatable/columnheader';\nimport * as Selection from '../../components/selection/index';\nimport { setTextNode } from '../../core/dom';\n\n/**\n * @callback DataTableAdapterColumnFormatter<T>\n * @param {any} value\n * @param {T} [object]\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterColumnRenderer<T>\n * @param {HTMLTableCellElement} cell,\n * @param {any} value\n * @param {T} data\n * @return {void}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapterColumn\n * @typedef DataTableAdapterColumnOptions<T>\n * @property {string} key\n * @property {(string|DocumentFragment)} [name='']\n * @property {'checkbox'|'text'|'number'} [type]\n * @property {boolean} [rowSelector]\n * @property {string} [tooltip]\n * @property {boolean} [sortable]\n * @property {boolean} [primaryColumn]\n * @property {HTMLElement} [customSortIcon]\n * @property {string} [innerHTML]\n * @property {DocumentFragment} [fragment]\n * @property {DataTableAdapterColumnRenderer<T>} [renderer]\n * @property {DataTableAdapterColumnFormatter<T>} [formatter]\n * @template T\n */\n\n/** @return {HTMLElement} */\nfunction constructTableCheckbox() {\n  const element = document.createElement('div');\n  element.className = 'mdw-selection';\n  element.setAttribute('aria-checked', 'false');\n  const input = document.createElement('div');\n  input.className = 'mdw-selection__input mdw-datatable__widget';\n  const icon = document.createElement('div');\n  icon.className = 'mdw-selection__icon';\n  icon.setAttribute('mdw-checkbox', '');\n  element.appendChild(input);\n  element.appendChild(icon);\n  Selection.attach(element);\n  return element;\n}\n\n/**\n * @template T\n */\nexport default class DataTableAdapterColumn {\n  /** @param {DataTableAdapterColumnOptions<T>} options */\n  constructor(options) {\n    this.element = document.createElement('th');\n    if (options.innerHTML != null) {\n      this.element.innerHTML = options.innerHTML;\n    } else if (options.fragment) {\n      this.element.appendChild(options.fragment);\n    }\n    this.key = options.key;\n    this.element.dataset.key = options.key;\n\n    if (options.sortable) {\n      this.element.setAttribute('aria-sort', 'none');\n      let sortIcon = options.customSortIcon;\n      if (!sortIcon) {\n        sortIcon = document.createElement('div');\n        sortIcon.classList.add('mdw-datatable__sort-icon');\n        sortIcon.classList.add('material-icons');\n        sortIcon.textContent = 'arrow_downward';\n      }\n      if (this.element.hasChildNodes()) {\n        this.element.insertBefore(this.element.firstChild, options.customSortIcon);\n      } else {\n        this.element.appendChild(sortIcon);\n      }\n    }\n    if (options.tooltip) {\n      const wrapper = document.createElement('span');\n      wrapper.classList.add('mdw-tooltip__wrapper');\n      const target = document.createElement('span');\n      target.classList.add('mdw-tooltip__target');\n      if (!options.name) {\n        target.textContent = '';\n      } else if (typeof options.name === 'string') {\n        target.textContent = options.name;\n      } else {\n        target.appendChild(options.name);\n      }\n      const tooltip = document.createElement('div');\n      tooltip.className = 'mdw-tooltip mdw-theme';\n      tooltip.setAttribute('mdw-surface', 'background 700');\n      tooltip.setAttribute('mdw-dark', '');\n      tooltip.textContent = options.tooltip;\n      wrapper.appendChild(target);\n      wrapper.appendChild(tooltip);\n      this.element.appendChild(wrapper);\n    } else if (options.name) {\n      let node;\n      if (typeof options.name === 'string') {\n        node = document.createTextNode(options.name);\n      } else {\n        node = options.name;\n      }\n      this.element.appendChild(node);\n    }\n\n    this.primaryColumn = options.primaryColumn;\n    if (options.primaryColumn) {\n      this.element.setAttribute('mdw-primary-column', '');\n    }\n\n    this.rowSelector = options.rowSelector;\n\n    if (this.rowSelector) {\n      this.element.setAttribute('mdw-selector', '');\n    }\n\n    this.type = options.type;\n    switch (options.type) {\n      case 'number':\n        this.element.setAttribute('mdw-number', '');\n        break;\n      case 'text':\n        this.element.setAttribute('mdw-text', '');\n        break;\n      case 'checkbox':\n      default:\n    }\n\n    if (this.rowSelector && this.type === 'checkbox') {\n      const checkboxLabel = constructTableCheckbox();\n      this.element.appendChild(checkboxLabel);\n      this.element.classList.add('mdw-autofocus-widget');\n    }\n\n    if (options.renderer) {\n      this.renderer = options.renderer;\n    } else if (options.type === 'checkbox') {\n      this.renderer = DataTableAdapterColumn.defaultCheckboxRenderer;\n    } else {\n      this.renderer = DataTableAdapterColumn.defaultCellRenderer;\n    }\n    this.formatter = options.formatter || (value => value);\n    DataTableColumnHeader.attach(this.element);\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCheckboxRenderer(cell, value) {\n    if (!cell.classList.contains('mdw-autofocus-widget')) {\n      cell.classList.add('mdw-autofocus-widget');\n    }\n    let selectionElement = cell.getElementsByClassName('mdw-selection')[0];\n    const checked = !!value;\n    if (!selectionElement) {\n      selectionElement = constructTableCheckbox();\n      cell.appendChild(selectionElement);\n    }\n    Attributes.setChecked(selectionElement, checked);\n  }\n\n  /**\n   * @param {HTMLTableCellElement} cell\n   * @param {any} value\n   * @return {void}\n   */\n  static defaultCellRenderer(cell, value) {\n    let stringValue;\n    if (value == null) {\n      stringValue = '';\n    } else {\n      stringValue = value.toString();\n    }\n    setTextNode(cell, stringValue);\n  }\n}\n","const radius = 8.75;\nconst circumference = 2 * Math.PI * radius;\n\n// TODO: Upgrade IE/Edge browsers to animate with rAF\n\n/**\n * @param {Element} progressCircleElement\n * @return {void}\n */\nexport function attach(progressCircleElement) {\n  /** @type {Element} */\n  let svg = (progressCircleElement.getElementsByTagName('svg')[0]);\n  if (!svg) {\n    svg = (document.createElement('svg'));\n    svg.setAttribute('viewbox', '0 0 24 24');\n    progressCircleElement.appendChild(svg);\n  }\n  const paths = svg.getElementsByTagName('path');\n  if (paths.length !== 2) {\n    svg.innerHTML = `\n      <path d=\"M12 3.25A8.75 8.75 0 1 1 3.25 12\"/>\n      <path d=\"M12 3.25A8.75 8.75 0 1 1 3.25 12 A 8.75 8.75 0 0 1 12 3.25\"/>\n    `;\n  }\n}\n\n/**\n * @param {Element} progressCircleElement\n * @param {number} value Percentage value (0-100);\n * @return {void}\n */\nexport function setValue(progressCircleElement, value) {\n  const dashOffset = circumference * (3 - (value / 100));\n  const pathElements = progressCircleElement.getElementsByTagName('path');\n  pathElements[pathElements.length - 1].style.setProperty('stroke-dashoffset', dashOffset.toString());\n}\n","import { dispatchDomEvent, getPassiveEventListenerOption } from '../../core/dom';\n\nexport const SECONDARY_ACTION_EVENT = 'mdw:listsecondary-action';\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function attach(listSecondaryElement) {\n  if (!listSecondaryElement.hasAttribute('mdw-action')) {\n    return;\n  }\n  listSecondaryElement.addEventListener('click', onClick);\n  listSecondaryElement.addEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.addEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n\n/**\n * @param {Event} event\n * @return {void}\n */\nexport function onInteraction(event) {\n  event.stopPropagation();\n}\n\n/**\n * @param {MouseEvent|KeyboardEvent|PointerEvent} event\n * @return {void}\n */\nexport function onClick(event) {\n  event.stopPropagation();\n  /** @type {HTMLElement} */\n  const listSecondaryElement = (event.currentTarget);\n  dispatchDomEvent(listSecondaryElement, SECONDARY_ACTION_EVENT);\n}\n\n/**\n * @param {Element} listSecondaryElement\n * @return {void}\n */\nexport function detach(listSecondaryElement) {\n  listSecondaryElement.removeEventListener('click', onClick);\n  listSecondaryElement.removeEventListener('mousedown', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('touchstart', onInteraction, getPassiveEventListenerOption());\n  listSecondaryElement.removeEventListener('keydown', onInteraction, getPassiveEventListenerOption());\n}\n","import { iterateArrayLike, iterateSomeOfArrayLike } from '../../core/dom';\n\nimport * as RovingTabIndex from '../../core/aria/rovingtabindex';\nimport * as Button from '../../components/button/index';\nimport * as DataTable from '../../components/datatable/index';\nimport * as DataTableColumnHeader from '../../components/datatable/columnheader';\nimport * as DataTableRow from '../../components/datatable/row';\nimport * as DataTableRowHeader from '../../components/datatable/rowheader';\nimport * as DataTableCell from '../../components/datatable/cell';\nimport * as Selection from '../../components/selection/index';\nimport DataTableAdapterColumn from './column';\n\n/**\n * @typedef {import('./column').DataTableAdapterColumnOptions<T>} DataTableAdapterColumnOptions<T>\n * @template T\n */\n\n/**\n * Callback fired when value change is requested\n * Return truthy value to cancel updating object\n * @callback DataTableAdapterOnValueChangeRequestedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {boolean} cancel\n * @template T\n */\n\n/**\n * Callback fired when value is changed\n * @callback DataTableAdapterOnValueChangedCallback<T>\n * @param {T} object\n * @param {string} key\n * @param {any} value\n * @return {void}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterFilter<T>\n * @param {T} element\n * @param {number} [index]\n * @param {T[]} array\n * @return {any}\n * @template T\n */\n\n/**\n * @callback DataTableAdapterSorter<T>\n * @param {T} a\n * @param {T} b\n * @return {number}\n * @template T\n */\n\n/**\n * Constructor options for DataTableAdapter\n * @typedef DataTableAdapterOptions<T>\n * @prop {HTMLElement} options.datatable\n * @prop {T[]} options.datasource Object array\n * @prop {DataTableAdapterFilter<T>} [options.filter]\n * @prop {DataTableAdapterOnValueChangeRequestedCallback<T>} [options.onValueChangeRequested]\n * @prop {DataTableAdapterOnValueChangedCallback<T>} [options.onValueChanged]\n * @prop {DataTableAdapterSorter<T>} [options.sorter]\n * @template T\n */\n\n/** @template {Object} T */\nexport default class DataTableAdapter {\n  /** @param {DataTableAdapterOptions<T>} options */\n  constructor(options) {\n    this.element = options.datatable;\n    this.datasource = options.datasource;\n    this.filter = options.filter;\n    this.sorter = options.sorter;\n    this.onValueChangeRequested = options.onValueChangeRequested || (() => false);\n    this.onValueChanged = options.onValueChanged || (() => {});\n    DataTable.attach(this.element);\n\n    this.onElementScrollListener = () => this.onElementScroll();\n\n    this.onDataTableColumnHeaderSortListener = event => this.onDataTableColumnHeaderSort(event);\n    this.onCheckedChangeEventListener = event => this.onCheckedChangeEvent(event);\n\n    this.element.addEventListener(\n      DataTableColumnHeader.SORT_EVENT,\n      this.onDataTableColumnHeaderSortListener\n    );\n    this.element.addEventListener(\n      Selection.CHECKED_CHANGE_EVENT,\n      this.onCheckedChangeEventListener\n    );\n    this.element.addEventListener(\n      DataTableRow.SELECTED_CHANGE_EVENT,\n      DataTableAdapter.onRowSelectedChangeEvent\n    );\n\n    this.scroller = DataTable.getScroller(this.element);\n    this.element.setAttribute('mdw-datatable-adapter', '');\n    /** @type {DataTableAdapterColumn<T>[]} */\n    this.columns = [];\n    this.page = 0;\n    this.pageLimit = 0;\n    this.debounceTimeMs = 0;\n    this.throttleTimeMs = 0;\n    this.useLazyRendering = false;\n  }\n\n  /**\n   * @param {CustomEvent} event\n   * @return {void}\n   */\n  onDataTableColumnHeaderSort(event) {\n    /** @type {HTMLTableHeaderCellElement} */\n    const cell = (event.target);\n    const ascending = event.detail.sort === 'ascending';\n    this.updateSortIcons(cell, ascending);\n    if (this.updateSortColumn) {\n      this.updateSortColumn(cell, ascending);\n    }\n  }\n\n  detach() {\n    this.element.removeAttribute('mdw-datatable-adapter');\n    this.element = null;\n    this.datasource = null;\n    this.filteredDatasource = null;\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  performThrottledRender(forceRefresh = false) {\n    this.performLazyRender(forceRefresh);\n    if (this.throttledRenderPending) {\n      this.throttledRenderPending = false;\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /**\n   * @param {boolean} [forceRefresh=false]\n   * @return {void}\n   */\n  scheduleThrottledRender(forceRefresh = false) {\n    if (this.throttleTimeMs < 17) {\n      window.requestAnimationFrame(() => this.performThrottledRender(forceRefresh));\n    } else {\n      setTimeout(() => this.performThrottledRender(forceRefresh), this.throttleTimeMs);\n    }\n  }\n\n  /**\n   * @param {CustomEvent} event\n   * @return {void}\n   */\n  static onRowSelectedChangeEvent(event) {\n    /** @type {HTMLTableRowElement} */\n    const row = (event.target);\n    const selectionElement = row.querySelector('[mdw-selector] .mdw-selection[aria-checked]');\n    if (!selectionElement) {\n      return;\n    }\n    Selection.setChecked(selectionElement, event.detail.value, true);\n  }\n\n  onElementScroll() {\n    if (this.debounceTimeout) {\n      clearTimeout(this.debounceTimeout);\n      this.debounceTimeout = null;\n    }\n    if (this.throttledRenderPending) {\n      // Will perform in the future\n      return;\n    }\n    if (this.debounceTimeMs) {\n      this.debounceTimeout = setTimeout(() => {\n        this.scheduleThrottledRender();\n        this.throttledRenderPending = true;\n      }, this.debounceTimeMs);\n    } else {\n      this.scheduleThrottledRender();\n      this.throttledRenderPending = true;\n    }\n  }\n\n  buildScrollListener() {\n    this.scroller.addEventListener('scroll', this.onElementScrollListener);\n  }\n\n  destroyScrollListener() {\n    this.scroller.removeEventListener('scroll', this.onElementScrollListener);\n  }\n\n  /**\n   * @param {CustomEvent} event\n   * @return {void}\n   */\n  onCheckedChangeEvent(event) {\n    /** @type {HTMLElement} */\n    const selectionElement = (event.target);\n    const checked = event.detail.value === 'true';\n    const currentCell = this.getTableCell(selectionElement);\n    if (currentCell.getAttribute('role') === 'columnheader') {\n      this.setCheckOnAllRows(checked, currentCell.cellIndex);\n      this.setHasSelection(checked);\n      return;\n    }\n    const currentRow = this.getTableRow(selectionElement);\n    const object = this.getDataForTableRow(currentRow);\n    if (this.onValueChangeRequested(object, currentCell.dataset.key, checked)) {\n      event.preventDefault();\n      return;\n    }\n    object[currentCell.dataset.key] = checked;\n    this.onValueChanged(object, currentCell.dataset.key, checked);\n    if (currentCell.hasAttribute('mdw-selector')) {\n      DataTableRow.setSelected(currentRow, event.detail.value, true);\n    }\n  }\n\n  /**\n   * Overridable sorting method\n   * @param {HTMLTableHeaderCellElement} [tableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortColumn(tableHeaderCell, ascending) {\n    if (!tableHeaderCell) {\n      this.sorter = null;\n      this.refresh();\n      return;\n    }\n    if (tableHeaderCell.cellIndex === -1) {\n      // Header not attached to row!\n      return;\n    }\n    const index = tableHeaderCell.cellIndex;\n    const tableColumn = this.columns[index];\n    const direction = ascending ? 1 : -1;\n    this.sorter = ((/** @type {T} */ a, /** @type {T} */ b) => {\n      const valueA = a[tableColumn.key];\n      const valueB = b[tableColumn.key];\n      if (valueA == null) {\n        if (valueB == null) {\n          return 0;\n        }\n        return -1 * direction;\n      }\n      if (valueB == null) {\n        return direction;\n      }\n      if (tableColumn.type === 'number') {\n        return (parseFloat(valueA) - parseFloat(valueB)) * direction;\n      }\n      if (tableColumn.type === 'checkbox') {\n        return ((valueA ? 1 : 0) - (valueB ? 1 : 0)) * direction;\n      }\n      if (valueA.localeCompare) {\n        return valueA.localeCompare(valueB) * direction;\n      }\n      // eslint-disable-next-line eqeqeq\n      if (valueA == valueB) {\n        return 0;\n      }\n      return (valueA - valueB) * direction;\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLTableHeaderCellElement} [sortedTableHeaderCell] null if none\n   * @param {boolean} [ascending=false]\n   * @return {void}\n   */\n  updateSortIcons(sortedTableHeaderCell, ascending) {\n    if (sortedTableHeaderCell) {\n      if (ascending) {\n        sortedTableHeaderCell.setAttribute('aria-sort', 'ascending');\n      } else {\n        sortedTableHeaderCell.setAttribute('aria-sort', 'descending');\n      }\n    }\n    iterateArrayLike(this.getHeaderRow().getElementsByTagName('th'), (otherTableHeader) => {\n      if (otherTableHeader !== sortedTableHeaderCell && otherTableHeader.hasAttribute('aria-sort')) {\n        otherTableHeader.setAttribute('aria-sort', 'none');\n      }\n    });\n  }\n\n  /**\n   * @param {boolean} value\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  setCheckOnAllRows(value, columnIndex) {\n    const column = this.columns[columnIndex];\n    this.datasource.forEach((object) => {\n      object[column.key] = value; // eslint-disable-line no-param-reassign\n    });\n    this.refresh();\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableRowElement}\n   */\n  getTableRow(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableRowElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableRow(element.parentElement);\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @return {HTMLTableCellElement}\n   */\n  getTableCell(element) {\n    if (element === this.element) {\n      return null;\n    }\n    if (element instanceof HTMLTableCellElement) {\n      return element;\n    }\n    if (!element.parentElement) {\n      return null;\n    }\n    return this.getTableCell(element.parentElement);\n  }\n\n  /** @return {T[]} */\n  getSelectedRows() {\n    const selectorColumn = this.columns.filter(column => column.rowSelector)[0];\n    if (!selectorColumn) {\n      return [];\n    }\n    return this.getDatasource().filter(row => row[selectorColumn.key]);\n  }\n\n  /**\n   * @param {boolean} value\n   * @return {void}\n   */\n  setHasSelection(value) {\n    if (value) {\n      this.element.setAttribute('mdw-has-selection', '');\n      return;\n    }\n    this.element.removeAttribute('mdw-has-selection');\n  }\n\n  /**\n   * @param {T[]} datasource Object array\n   * @return {void}\n   */\n  setDatasource(datasource) {\n    this.datasource = datasource;\n  }\n\n  /**\n   * Toggle lazy rending for datasources\n   * @param {boolean} value\n   * @return {void}\n   */\n  setUseLazyRendering(value) {\n    this.useLazyRendering = value;\n    if (value) {\n      this.buildScrollListener();\n    } else {\n      this.destroyScrollListener();\n    }\n  }\n\n  /**\n   * @param {DataTableAdapterColumnOptions<T>} options\n   * @return {DataTableAdapterColumn<T>}\n   */\n  addColumn(options) {\n    const tableColumn = new DataTableAdapterColumn(options);\n    const headerRow = this.getHeaderRow();\n    headerRow.appendChild(tableColumn.element);\n    this.columns.push(tableColumn);\n    return tableColumn;\n  }\n\n  updatePaginator() {\n    if (!this.pageLimit) {\n      return;\n    }\n    const min = this.page * this.pageLimit;\n    const total = this.getDatasource().length;\n    let max = this.pageLimit + min;\n    if (max > total) {\n      max = total;\n    }\n    this.paginationDetailsElement.textContent = `${min + 1}-${max} of ${total}`;\n    this.previousPageButton.setAttribute('aria-disabled', (min === 0 ? 'true' : 'false'));\n    this.nextPageButton.setAttribute('aria-disabled', (max === total ? 'true' : 'false'));\n  }\n\n  /**\n   * @param {Object} options\n   * @param {boolean} [options.disabled=false]\n   * @param {number} [options.limit=10]\n   * @param {number[]} [options.limits=[10,25,50,100]]\n   * @return {void}\n   */\n  setPagination(options = {}) {\n    const footer = this.getFooter(!options.disabled);\n    if (options.disabled) {\n      this.pageLimit = 0;\n      this.page = 0;\n      if (footer) {\n        footer.style.setProperty('display', 'none');\n      }\n      this.needsDraw = true;\n      return;\n    }\n    footer.style.removeProperty('display');\n    let optionsElement = footer.getElementsByClassName('mdw-datatable__footer-options')[0];\n    if (!optionsElement) {\n      optionsElement = document.createElement('div');\n      optionsElement.classList.add('mdw-datatable__footer-options');\n      const rowsPerPageText = document.createElement('span');\n      rowsPerPageText.textContent = 'Rows per page';\n      const limits = options.limits || [10, 25, 50, 100];\n      const limitsElement = document.createElement('label');\n      limitsElement.classList.add('mdw-textfield');\n      limitsElement.setAttribute('mdw-solo', '');\n      const select = document.createElement('select');\n      select.classList.add('mdw-textfield__input');\n      limits.forEach((limit) => {\n        const option = document.createElement('option');\n        option.value = limit.toString();\n        option.textContent = limit.toString();\n        select.appendChild(option);\n      });\n      select.value = (options.limit && options.limit.toString()) || '10';\n      const dropdownIcon = document.createElement('div');\n      dropdownIcon.classList.add('mdw-textfield__icon');\n      dropdownIcon.setAttribute('mdw-dropdown', '');\n      limitsElement.appendChild(select);\n      limitsElement.appendChild(dropdownIcon);\n      optionsElement.appendChild(rowsPerPageText);\n      optionsElement.appendChild(limitsElement);\n      footer.appendChild(optionsElement);\n      select.addEventListener('input', () => {\n        this.pageLimit = parseInt(select.value, 10);\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = footer.getElementsByClassName('mdw-datatable__footer-details')[0];\n    }\n    if (!this.paginationDetailsElement) {\n      this.paginationDetailsElement = document.createElement('div');\n      this.paginationDetailsElement.classList.add('mdw-datatable__footer-details');\n      footer.appendChild(this.paginationDetailsElement);\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = footer.getElementsByClassName('mdw-datatable__footer-controls')[0];\n    }\n    if (!this.paginationControls) {\n      this.paginationControls = document.createElement('div');\n      this.paginationControls.classList.add('mdw-datatable__footer-controls');\n      footer.appendChild(this.paginationControls);\n    }\n    if (!this.previousPageButton || !this.nextPageButton) {\n      const buttons = this.paginationControls.getElementsByClassName('mdw-button');\n      if (buttons.length !== 2) {\n        this.previousPageButton = document.createElement('a');\n        this.previousPageButton.classList.add('mdw-button');\n        this.previousPageButton.classList.add('material-icons');\n        this.previousPageButton.setAttribute('mdw-icon', '');\n        this.previousPageButton.textContent = 'chevron_left';\n        this.paginationControls.appendChild(this.previousPageButton);\n        Button.attach(this.previousPageButton);\n\n        this.nextPageButton = document.createElement('a');\n        this.nextPageButton.classList.add('mdw-button');\n        this.nextPageButton.classList.add('material-icons');\n        this.nextPageButton.setAttribute('mdw-icon', '');\n        this.nextPageButton.textContent = 'chevron_right';\n        this.paginationControls.appendChild(this.nextPageButton);\n        Button.attach(this.nextPageButton);\n      } else {\n        this.previousPageButton = buttons[0];\n        this.nextPageButton = buttons[1];\n      }\n      this.previousPageButton.addEventListener('click', () => {\n        if (this.previousPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page -= 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n      this.nextPageButton.addEventListener('click', () => {\n        if (this.nextPageButton.getAttribute('aria-disabled') === 'true') {\n          return;\n        }\n        this.page += 1;\n        this.updateRowCount(false);\n        this.updatePaginator();\n        this.refreshRows();\n      });\n    }\n    this.pageLimit = options.limit || 10;\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {boolean} create\n   * @return {HTMLElement}\n   */\n  getFooter(create) {\n    /** @type {HTMLElement} */\n    let footer = (this.element.getElementsByClassName('mdw-datatable__footer')[0]);\n    if (!footer && create) {\n      footer = document.createElement('div');\n      footer.classList.add('mdw-datatable__footer');\n      this.element.appendChild(footer);\n    }\n    return footer;\n  }\n\n  /**\n   * @param {HTMLTableRowElement} el\n   * @param {?number} viewportTop\n   * @param {?number} viewportBottom\n   * @return {boolean}\n   */\n  isRowVisible(\n    el,\n    viewportTop = this.scroller.scrollTop,\n    viewportBottom = this.scroller.scrollTop + this.scroller.offsetHeight\n  ) {\n    const rowTop = el.offsetTop;\n    const rowBottom = rowTop + el.offsetHeight;\n    if (rowTop > viewportTop && rowTop < viewportBottom) {\n      // Top of row is visible\n      return true;\n    }\n    if (rowBottom > viewportTop && rowBottom < viewportBottom) {\n      // Bottom of row is visible\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {(HTMLTableRowElement[])} visibleRows\n   * @return {void}\n   */\n  clearNonvisibleRows(visibleRows) {\n    const tbody = this.getTableBody();\n    if (visibleRows.length === tbody.rows.length) {\n      return;\n    }\n    let firstRowIndex = Infinity;\n    let lastRowIndex = -Infinity;\n    if (visibleRows.length) {\n      firstRowIndex = visibleRows[0].sectionRowIndex;\n      lastRowIndex = visibleRows[visibleRows.length - 1].sectionRowIndex;\n    }\n    iterateArrayLike(tbody.rows, (row, index) => {\n      if (index >= firstRowIndex && index <= lastRowIndex) {\n        return;\n      }\n      if (row.lastChild) {\n        // Store row height to prevent layout shifting\n        row.style.setProperty('height', `${row.offsetHeight || 0}px`);\n      }\n      while (row.lastChild) {\n        row.removeChild(row.lastChild);\n      }\n    });\n  }\n\n  /**\n   * @return {HTMLTableRowElement[]}\n   */\n  getLazyRenderRows() {\n    const tbody = this.getTableBody();\n    const len = tbody.rows.length;\n    /** @type {HTMLTableRowElement[]} */\n    const rows = [];\n    const minRowCount = window.screen.height / 48;\n    if (len <= minRowCount) {\n      iterateArrayLike(tbody.rows, (row) => {\n        rows.push(row);\n      });\n      return rows;\n    }\n    let foundFirstVisibleRow = false;\n    let startIndex = 0;\n    let endIndex = 0;\n    const viewportTop = this.scroller.scrollTop;\n    const viewportBottom = viewportTop + this.scroller.offsetHeight;\n    iterateSomeOfArrayLike(tbody.rows, (row, index) => {\n      if (this.isRowVisible(row, viewportTop, viewportBottom)) {\n        if (!foundFirstVisibleRow) {\n          foundFirstVisibleRow = true;\n          startIndex = index;\n        }\n        endIndex = index;\n      } else if (foundFirstVisibleRow) {\n        return true;\n      }\n      return false;\n    });\n\n    while ((endIndex - startIndex) + 1 < minRowCount) {\n      if (startIndex === 0) {\n        endIndex += 1;\n      } else if (endIndex === len - 1) {\n        startIndex -= 1;\n      } else {\n        startIndex -= 1;\n        endIndex += 1;\n      }\n    }\n    for (let i = startIndex; i <= endIndex; i += 1) {\n      rows.push(tbody.rows.item(i));\n    }\n\n    return rows;\n  }\n\n  /**\n   * @param {boolean} forceRefresh\n   * @return {void}\n   */\n  performLazyRender(forceRefresh = false) {\n    const visibleRows = this.getLazyRenderRows();\n    visibleRows.forEach((row) => {\n      if (forceRefresh || !row.cells.length) {\n        this.refreshRow(row.sectionRowIndex);\n      }\n    });\n    this.clearNonvisibleRows(visibleRows);\n  }\n\n  /**\n   * @param {DataTableAdapterFilter<T>} filter\n   * @return {void}\n   */\n  setFilter(filter) {\n    this.filter = filter;\n    this.refreshFilter();\n  }\n\n  /**\n   * @param {DataTableAdapterSorter<T>} sorter\n   * @return {void}\n   */\n  setSorter(sorter) {\n    this.sorter = sorter;\n    this.refreshFilter();\n  }\n\n  refreshFilter() {\n    if (this.filter && this.sorter) {\n      this.filteredDatasource = this.datasource.filter(this.filter).sort(this.sorter);\n    } else if (this.filter) {\n      this.filteredDatasource = this.datasource.filter(this.filter);\n    } else if (this.sorter) {\n      this.filteredDatasource = this.datasource.slice(0).sort(this.sorter);\n    } else {\n      this.filteredDatasource = null;\n    }\n  }\n\n  /**\n   * Get filtered datasource\n   * @return {T[]}\n   */\n  getDatasource() {\n    if (this.filter || this.sorter) {\n      if (this.filteredDatasource == null) {\n        this.refreshFilter();\n      }\n      return this.filteredDatasource;\n    }\n    return this.datasource;\n  }\n\n  /**\n   * Update number of rows in table\n   * @param {boolean} [refresh=false] Refresh new rows\n   * @return {void}\n   */\n  updateRowCount(refresh) {\n    const tbody = this.getTableBody();\n    const rowLength = tbody.rows.length;\n\n    const datasource = this.getDatasource();\n    let rowsToDisplay = datasource.length;\n    if (this.pageLimit) {\n      let offset = this.page * this.pageLimit;\n      if (offset > rowsToDisplay) {\n        // Datasource or filter likely changed\n        // Reset to page 0\n        this.page = 0;\n        offset = 0;\n      }\n      rowsToDisplay -= offset;\n      if (rowsToDisplay > this.pageLimit) {\n        rowsToDisplay = this.pageLimit;\n      }\n    }\n\n    const rowDifference = rowsToDisplay - rowLength;\n    const newRows = [];\n\n    if (rowDifference < 0) {\n      // too many rows\n      for (let i = rowLength - 1; i >= rowsToDisplay; i -= 1) {\n        const row = tbody.rows.item(i);\n        tbody.removeChild(row);\n      }\n    }\n    if (rowDifference > 0) {\n      const fragment = document.createDocumentFragment();\n      for (let i = 0; i < rowDifference; i += 1) {\n        const row = document.createElement('tr');\n        DataTableRow.attach(row);\n        newRows.push(row);\n        fragment.appendChild(row);\n      }\n      if (this.element.hasAttribute('mdw-row-focusable')) {\n        RovingTabIndex.setupTabIndexes(newRows);\n      }\n      tbody.appendChild(fragment);\n    }\n    if (refresh && rowDifference !== 0) {\n      if (this.useLazyRendering) {\n        this.scheduleThrottledRender(true);\n      } else {\n        newRows.forEach((row) => {\n          this.refreshRow(row.sectionRowIndex);\n        });\n      }\n    }\n  }\n\n  /** @return {void} */\n  refreshRows() {\n    if (this.useLazyRendering) {\n      this.performLazyRender(true);\n    } else {\n      const tbody = this.getTableBody();\n      iterateArrayLike(tbody.rows, (row, index) => {\n        this.refreshRow(index);\n      });\n    }\n    if (this.useLazyRendering) {\n      this.scheduleThrottledRender();\n    }\n  }\n\n  /** @return {void} */\n  refresh() {\n    this.refreshFilter();\n    this.updateRowCount(false);\n    this.updatePaginator();\n    this.refreshRows();\n  }\n\n  /**\n   * @param {HTMLTableRowElement} row\n   * @return {T}\n   */\n  getDataForTableRow(row) {\n    const index = (row.sectionRowIndex) + (this.page * this.pageLimit);\n    return this.getDatasource()[index];\n  }\n\n  /**\n   * @param {T} data\n   * @return {HTMLTableRowElement} row\n   */\n  getTableRowForData(data) {\n    const datasourceIndex = this.getDatasource().indexOf(data);\n    if (datasourceIndex === -1) {\n      return null;\n    }\n    const minIndex = this.page * this.pageLimit;\n    return this.getTableBody().rows.item(datasourceIndex - minIndex);\n  }\n\n  /**\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshRow(rowIndex) {\n    const row = this.getTableBody().rows.item(rowIndex);\n    row.style.removeProperty('height');\n    this.columns.forEach((column, columnIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @param {number} rowIndex\n   * @return {void}\n   */\n  refreshCell(columnIndex, rowIndex) {\n    const tableColumn = this.columns[columnIndex];\n    const row = this.getTableBody().rows.item(rowIndex);\n    let len = row.cells.length;\n    let createdCells = false;\n    while (len <= columnIndex) {\n      createdCells = true;\n      // Generate cells\n      const missingColumn = this.columns[len];\n      let missingCell;\n      if (missingColumn.rowSelector) {\n        missingCell = document.createElement('th');\n        row.appendChild(missingCell);\n        DataTableRowHeader.attach(missingCell);\n      } else {\n        missingCell = row.insertCell();\n        DataTableCell.attach(missingCell);\n      }\n      switch (missingColumn.type) {\n        case 'checkbox':\n          missingCell.setAttribute('mdw-checkbox', '');\n          break;\n        case 'number':\n          missingCell.setAttribute('mdw-number', '');\n          break;\n        case 'text':\n          missingCell.setAttribute('mdw-text', '');\n          break;\n        default:\n      }\n      missingCell.dataset.key = missingColumn.key;\n      if (missingColumn.rowSelector) {\n        missingCell.setAttribute('mdw-selector', '');\n      }\n      if (missingColumn.primaryColumn) {\n        missingCell.setAttribute('mdw-primary-column', '');\n      }\n      len += 1;\n    }\n    if (createdCells) {\n      if (this.element.hasAttribute('mdw-cell-focusable')) {\n        RovingTabIndex.setupTabIndexes(row.querySelectorAll(DataTable.CELL_TABINDEX_QUERIES.join(',')));\n      }\n    }\n    const cell = row.cells.item(columnIndex);\n    const data = this.getDataForTableRow(row);\n    const value = data[tableColumn.key];\n    if (tableColumn.rowSelector) {\n      if (row.getAttribute('aria-selected') !== (value ? 'true' : 'false')) {\n        row.setAttribute('aria-selected', (value ? 'true' : 'false'));\n      }\n    }\n    const formattedValue = tableColumn.formatter(value, data);\n    tableColumn.renderer(cell, formattedValue, data);\n  }\n\n  /**\n   * @param {HTMLTableCellElement|DataTableAdapterColumn<T>|number|string} search\n   * @return {DataTableAdapterColumn<T>}\n   */\n  getColumn(search) {\n    if (search instanceof DataTableAdapterColumn) {\n      return search;\n    }\n    if (search instanceof HTMLTableCellElement) {\n      return this.columns.filter(column => column.element === search)[0];\n    }\n    if (typeof search === 'string') {\n      return this.columns.filter(column => column.element.dataset.key === search)[0];\n    }\n    return this.columns[search];\n  }\n\n  /** @return {HTMLTableElement} */\n  getTable() {\n    let table = this.element.getElementsByTagName('table')[0];\n    if (!table) {\n      table = document.createElement('table');\n      const footer = this.element.getElementsByClassName('mdw-datatable__footer')[0];\n      if (footer) {\n        this.element.insertBefore(table, footer);\n      } else {\n        this.element.appendChild(table);\n      }\n    }\n    return table;\n  }\n\n  /** @return {HTMLTableRowElement} */\n  getHeaderRow() {\n    let thead = this.element.getElementsByTagName('thead')[0];\n    if (!thead) {\n      const table = this.getTable();\n      thead = document.createElement('thead');\n      table.appendChild(thead);\n    }\n    let headerRow = thead.getElementsByTagName('tr')[0];\n    if (!headerRow) {\n      headerRow = document.createElement('tr');\n      thead.appendChild(headerRow);\n    }\n    return headerRow;\n  }\n\n  /** @return {HTMLTableSectionElement} */\n  getTableBody() {\n    if (this.tbody) {\n      return this.tbody;\n    }\n    this.tbody = this.element.getElementsByTagName('tbody')[0];\n    if (!this.tbody) {\n      const table = this.getTable();\n      this.tbody = document.createElement('tbody');\n      table.appendChild(this.tbody);\n    }\n    return this.tbody;\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @return {void}\n   */\n  refreshColumn(columnIndex) {\n    const tbody = this.getTableBody();\n    iterateArrayLike(tbody.rows, (row, rowIndex) => {\n      this.refreshCell(columnIndex, rowIndex);\n    });\n  }\n}\n","import { findElementParentByClassName } from '../../core/dom';\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function attach(fabElement) {\n  let closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (!closer) {\n    closer = document.createElement('div');\n    closer.classList.add('mdw-fab__close');\n    fabElement.appendChild(closer);\n  }\n  closer.addEventListener('click', onCloserClicked);\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.addEventListener('click', onFabButtonClicked);\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function detach(fabElement) {\n  const fabButton = fabElement.getElementsByClassName('mdw-fab__button')[0];\n  fabButton.removeEventListener('click', onFabButtonClicked);\n  const closer = fabElement.getElementsByClassName('mdw-fab__close')[0];\n  if (closer) {\n    closer.removeEventListener('click', onCloserClicked);\n  }\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onCloserClicked(event) {\n  /** @type {HTMLElement} */\n  const closer = (event.currentTarget);\n  const fabElement = findElementParentByClassName(closer, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  hide(fabElement);\n}\n\n/**\n * @param {MouseEvent} event\n * @return {void}\n */\nexport function onFabButtonClicked(event) {\n  /** @type {HTMLElement} */\n  const button = (event.currentTarget);\n  const fabElement = findElementParentByClassName(button, 'mdw-fab');\n  if (!fabElement) {\n    return;\n  }\n  toggle(fabElement);\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function show(fabElement) {\n  let changed = false;\n  if (fabElement.hasAttribute('mdw-hide')) {\n    fabElement.removeAttribute('mdw-hide');\n    changed = true;\n  }\n  if (!fabElement.hasAttribute('mdw-show')) {\n    fabElement.setAttribute('mdw-show', '');\n    changed = true;\n  }\n  return changed;\n}\n\n/**\n * @param {Element} fabElement\n * @return {boolean} handled\n */\nexport function hide(fabElement) {\n  if (!fabElement.hasAttribute('mdw-hide')) {\n    fabElement.setAttribute('mdw-hide', '');\n  } else {\n    return false;\n  }\n  if (fabElement.hasAttribute('mdw-show')) {\n    fabElement.removeAttribute('mdw-show');\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {Element} fabElement\n * @return {void}\n */\nexport function toggle(fabElement) {\n  if (hide(fabElement)) {\n    return;\n  }\n  show(fabElement);\n}\n","import * as Selection from './index';\nimport { iterateArrayLike } from '../../core/dom';\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function attach(element) {\n  element.addEventListener(Selection.CHECKED_CHANGE_EVENT, onCheckedChange);\n}\n\n/**\n * @param {HTMLElement} element\n * @return {void}\n */\nexport function detach(element) {\n  element.removeEventListener(Selection.CHECKED_CHANGE_EVENT, onCheckedChange);\n}\n\n/**\n * @param {CustomEvent} event\n * @return {void}\n */\nfunction onCheckedChange(event) {\n  const { detail } = event;\n  if (detail.value === 'false') {\n    return;\n  }\n  /** @type {HTMLElement} */\n  const radiogroupElement = (event.currentTarget);\n  /** @type {HTMLElement} */\n  const itemElement = (event.target);\n  setTimeout(() => {\n    // Wait to see if event is cancelled\n    if (event.defaultPrevented) {\n      return;\n    }\n    iterateArrayLike(radiogroupElement.querySelectorAll('[role=\"radio\"][aria-checked=\"true\"]'),\n      (item) => {\n        if (item === itemElement) {\n          return;\n        }\n        item.setAttribute('aria-checked', 'false');\n      });\n  });\n}\n","import * as Keyboard from '../../core/aria/keyboard';\n\n/**\n * @param {HTMLTableHeaderCellElement} element\n * @return {void}\n */\nexport function attach(element) {\n  Keyboard.attach(element);\n  element.setAttribute('role', 'rowheader');\n}\n\n/**\n * @param {HTMLTableHeaderCellElement} element\n * @return {void}\n */\nexport function detach(element) {\n  Keyboard.detach(element);\n}\n","/** @return {HTMLElement} */\nfunction AnyDomAdapterCreator() {\n  return document.createElement('div');\n}\n\n/**\n * @param {HTMLElement} element\n * @param {any} data\n * @return {void}\n */\nfunction AnyDomAdapterRenderer(element, data) {\n  let s = '';\n  if (data != null) {\n    if (data.toString) {\n      s = data.toString();\n    } else {\n      // eslint-disable-next-line no-new-wrappers\n      s = new String(data).toString();\n    }\n  }\n  if (element.textContent !== s) {\n    // eslint-disable-next-line no-param-reassign\n    element.textContent = s;\n  }\n}\n\n/**\n * @typedef {Object} DomAdapterRecycleOptions\n * @prop {HTMLElement} scroller Scrolling container element\n * @prop {boolean} [equalSize=false] All elements are equally sized\n * @prop {boolean} [block=false] All elements are block-like\n * @prop {boolean} [fastMeasure=false] Use integer precision for layout\n * @prop {boolean} [deferRender=false] Render on scroll idle\n */\n\n/**\n * @template T1\n * @template {HTMLElement} T2\n * @typedef {Object} DomAdapterCreateOptions\n * @prop {HTMLElement} element\n * @prop {Array<T1>} datasource\n * @prop {DomAdapterRecycleOptions} [recycle]\n * @prop {function(T1):T2} [create={function(T1):HTMLElement}]\n * @prop {function(T2, T1, number):void} [render={function(HTMLElement,T1):void}]\n */\n\n/**\n * @typedef {Object} DomAdapterBounds\n * @prop {number} top\n * @prop {number=} right\n * @prop {number=} bottom\n * @prop {number=} left\n * @prop {number=} height\n * @prop {number=} width\n */\n\n/**\n * @template T1\n * @template {HTMLElement} T2\n */\nexport default class DomAdapter {\n  /** @param {DomAdapterCreateOptions<T1, T2>} options */\n  constructor(options) {\n    this.element = options.element;\n    this.datasource = options.datasource;\n    /** @type {Map<T1, T2>} */\n    this.dataElementMap = new Map();\n    /** @type {WeakMap<T2, T1>} */\n    this.elementDataMap = new WeakMap();\n    /** @type {WeakMap<any, DomAdapterBounds>} */\n    this.dataBoundsMap = new WeakMap();\n    this.create = options.create || AnyDomAdapterCreator;\n    this.render = options.render || AnyDomAdapterRenderer;\n    this.onScrollerScrollListener = () => this.onScrollerScroll();\n    this.setupRecycleOptions(options.recycle);\n  }\n\n  /**\n   * @param {DomAdapterRecycleOptions} recycleOptions\n   * @return {void}\n   */\n  setupRecycleOptions(recycleOptions) {\n    this.recycle = recycleOptions;\n    if (!this.recycle) {\n      return;\n    }\n    this.recycle.scroller.addEventListener('scroll', this.onScrollerScrollListener);\n    const scrollerStyle = window.getComputedStyle(this.recycle.scroller);\n    if (scrollerStyle.position === 'static') {\n      this.recycle.scroller.style.setProperty('position', 'relative');\n    }\n  }\n\n  onScrollerScroll() {\n    this.drawViewport(false);\n    if (this.deferRenderDebounce) {\n      clearTimeout(this.deferRenderDebounce);\n      this.deferRenderDebounce = null;\n    }\n    if (this.recycle && this.recycle.deferRender) {\n      this.deferRenderDebounce = setTimeout(() => {\n        this.drawViewport(true);\n      }, 50);\n    }\n  }\n\n  /**\n   * @param {boolean} [checkForRemovedItems=true]\n   * @return {void}\n   */\n  refresh(checkForRemovedItems = true) {\n    if (checkForRemovedItems) {\n      /** @type {T1[]} */\n      const unlinkedDataItems = [];\n      this.dataElementMap.forEach((element, data) => {\n        if (this.datasource.indexOf(data) === -1) {\n          unlinkedDataItems.push(data);\n        }\n      });\n      unlinkedDataItems.forEach((data) => {\n        this.removeItem(data);\n      });\n    }\n    if (this.recycle) {\n      this.element.style.removeProperty('box-sizing');\n      this.element.style.removeProperty('padding-top');\n      this.element.style.removeProperty('padding-bottom');\n      this.element.style.removeProperty('height');\n      this.clear();\n      this.drawViewport(true);\n    } else {\n      this.datasource.forEach((data) => {\n        this.refreshItem(data);\n      });\n    }\n  }\n\n  /** @return {void} */\n  clear() {\n    this.maxBottomBounds = 0;\n    this.dataElementMap.clear();\n    this.dataBoundsMap = new WeakMap();\n    this.elementDataMap = new WeakMap();\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild);\n    }\n  }\n\n\n  /**\n   * @param {boolean} [idle=true]\n   * @return {void}\n   */\n  drawViewport(idle = true) {\n    if (!this.recycle || !this.recycle.scroller) {\n      return;\n    }\n    const itemsToDraw = [];\n    let foundVisibleItem = false;\n    let expectedTop = null;\n    let paddingTopSet = false;\n    let lastBottom = 0;\n    const additionalPrerenderSize = (window.screen.height - this.recycle.scroller.clientHeight) / 2;\n    const viewportTop = this.recycle.scroller.scrollTop;\n    const viewportBottom = (this.recycle.scroller.scrollTop + this.recycle.scroller.offsetHeight);\n    const preRenderTop = viewportTop - additionalPrerenderSize;\n    const preRenderBottom = viewportBottom + additionalPrerenderSize;\n    for (let i = 0; i < this.datasource.length; i += 1) {\n      const data = this.datasource[i];\n      let dataBounds = this.getBounds(data, i);\n      let newBounds = false;\n      let element = null;\n      if (!dataBounds || dataBounds.top == null || dataBounds.bottom == null) {\n        if (!this.recycle.block && !paddingTopSet) {\n          if (expectedTop != null) {\n            this.element.style.setProperty('padding-top', `${expectedTop}px`);\n          } else {\n            this.element.style.setProperty('padding-top', `${lastBottom}px`);\n          }\n          paddingTopSet = true;\n        }\n        element = this.refreshItem(data, {\n          create: true,\n          render: !this.recycle.deferRender,\n          invalidate: false,\n        });\n        dataBounds = this.storeBoundsCache(data, element);\n        newBounds = true;\n      }\n      lastBottom = dataBounds.bottom;\n      const isBottomInPrerender = (dataBounds.bottom >= preRenderTop\n        && dataBounds.bottom <= preRenderBottom);\n      const isTopInPrerender = (dataBounds.top >= preRenderTop\n          && dataBounds.top <= preRenderBottom);\n      if (isBottomInPrerender || isTopInPrerender) {\n        if (expectedTop == null) {\n          expectedTop = dataBounds.top;\n        }\n        itemsToDraw.push({\n          data,\n          index: i,\n        });\n        if (!foundVisibleItem) {\n          const isBottomVisible = (dataBounds.bottom >= viewportTop\n            && dataBounds.bottom <= viewportBottom);\n          const isTopVisible = (dataBounds.top >= viewportTop\n            && dataBounds.top <= viewportBottom);\n          foundVisibleItem = (isBottomVisible || isTopVisible);\n        }\n      } else {\n        if (!element && !paddingTopSet) {\n          element = this.dataElementMap.get(data);\n          if (element && element.parentElement) {\n            this.removeElement(element);\n          }\n        }\n        if (foundVisibleItem) {\n          if (newBounds) {\n            this.dataBoundsMap.delete(data);\n          }\n          break;\n        }\n      }\n    }\n    const renderedElements = [];\n    let newPaddingTop = 0;\n    let lastRenderedBounds;\n    for (let i = 0; i < itemsToDraw.length; i += 1) {\n      const item = itemsToDraw[i];\n      let element = this.dataElementMap.get(item.data);\n\n      if (!element) {\n        element = this.refreshItem(item.data, {\n          create: true,\n          render: (this.recycle.deferRender ? idle : true),\n          invalidate: false,\n        });\n      } else if (this.recycle.deferRender && idle) {\n        this.render(element, item.data, item.index);\n      }\n      const cachedBounds = this.getBounds(item.data);\n      if (i === 0 && !this.recycle.block) {\n        newPaddingTop = cachedBounds.top;\n      }\n      if (i === itemsToDraw.length - 1) {\n        lastRenderedBounds = cachedBounds;\n      }\n      renderedElements.push(element);\n    }\n    for (let i = this.element.children.length - 1; i >= 0; i -= 1) {\n      const child = this.element.children.item(i);\n      if (renderedElements.indexOf(child) === -1) {\n        this.removeElement(child);\n      }\n    }\n    this.element.style.setProperty('padding-top', `${newPaddingTop}px`);\n    const lastItem = this.datasource[this.datasource.length - 1];\n    const lastItemBounds = this.dataBoundsMap.get(lastItem);\n\n    if (lastItemBounds) {\n      this.element.style.setProperty('box-sizing', 'border-box');\n      this.element.style.setProperty('height', `${lastItemBounds.bottom}px`);\n      this.element.style.removeProperty('padding-bottom');\n    } else if (this.recycle.equalSize) {\n      this.element.style.setProperty('box-sizing', 'border-box');\n      this.element.style.setProperty('height', `${lastRenderedBounds.height * this.datasource.length}px`);\n      this.element.style.removeProperty('padding-bottom');\n    } else {\n      if (!this.maxBottomBounds || lastRenderedBounds.bottom > this.maxBottomBounds) {\n        this.maxBottomBounds = lastRenderedBounds.bottom;\n      }\n      const height = this.maxBottomBounds - newPaddingTop;\n      this.element.style.setProperty('box-sizing', 'content-box');\n      this.element.style.setProperty('height', `${height}px`);\n      this.element.style.setProperty('padding-bottom', `${64}px`);\n    }\n  }\n\n  /**\n   * @param {T1} data\n   * @param {number} [indexHint]\n   * @return {DomAdapterBounds}\n   */\n  getBounds(data, indexHint) {\n    const cached = this.dataBoundsMap.get(data);\n    if (cached) {\n      return cached;\n    }\n    let index = -1;\n    if (indexHint === -1 || indexHint == null) {\n      index = this.datasource.indexOf(data);\n    } else {\n      index = indexHint;\n    }\n    if (index === -1) {\n      return null;\n    }\n    let top = null;\n    if (index === 0) {\n      const cache = {\n        top: 0,\n      };\n      this.dataBoundsMap.set(data, cache);\n      return cache;\n    }\n    if (!this.recycle.block) {\n      return null;\n    }\n    let height = null;\n    const previousBounds = this.dataBoundsMap.get(this.datasource[index - 1]);\n    if (previousBounds && previousBounds.bottom) {\n      top = previousBounds.bottom;\n    } else if (this.recycle.equalSize) {\n      const firstBounds = this.dataBoundsMap.get(this.datasource[0]);\n      if (firstBounds && firstBounds.height) {\n        top = firstBounds.height * index;\n        // eslint-disable-next-line prefer-destructuring\n        height = firstBounds.height;\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n    if (height == null) {\n      const cache = {\n        top,\n      };\n      this.dataBoundsMap.set(data, cache);\n      return cache;\n    }\n    const cache = {\n      top,\n      height,\n      bottom: top + height,\n    };\n    this.dataBoundsMap.set(data, cache);\n    return cache;\n  }\n\n  /**\n   * @param {T2} element\n   * @return {DomAdapterBounds} bounds\n   */\n  measureElementBounds(element) {\n    if (this.recycle.fastMeasure) {\n      return {\n        top: element.offsetTop,\n        right: element.offsetWidth + element.offsetLeft,\n        bottom: element.offsetHeight + element.offsetTop,\n        left: element.offsetLeft,\n        height: element.clientHeight,\n        width: element.clientWidth,\n      };\n    }\n    const offsetParentRect = element.offsetParent.getBoundingClientRect();\n    const elementRect = element.getBoundingClientRect();\n    const top = elementRect.top - offsetParentRect.top + element.offsetParent.scrollTop;\n    const left = elementRect.left - offsetParentRect.left + element.offsetParent.scrollLeft;\n    return {\n      top,\n      right: elementRect.width + left,\n      bottom: elementRect.height + top,\n      left,\n      height: elementRect.height,\n      width: elementRect.width,\n    };\n  }\n\n  /**\n   * @param {T1} data\n   * @param {T2} element\n   * @return {DomAdapterBounds} bounds\n   */\n  storeBoundsCache(data, element) {\n    if (!this.recycle) {\n      return null;\n    }\n    const cache = this.measureElementBounds(element);\n    this.dataBoundsMap.set(data, cache);\n    return cache;\n  }\n\n  invalidateAll() {\n    /** @type {WeakMap<any, DomAdapterBounds>} */\n    this.dataBoundsMap = new WeakMap();\n  }\n\n\n  /**\n   * @param {T1} data\n   * @param {Object} [options]\n   * @param {boolean} [options.checkPosition=true]\n   * @param {boolean} [options.create] Automatic\n   * @param {boolean} [options.render] Automatic based on deferRender\n   * @param {boolean} [options.invalidate] Automatic\n   * @return {T2} element\n   */\n  refreshItem(data, options = {}) {\n    const dataIndex = this.datasource.indexOf(data);\n    if (dataIndex === -1) {\n      // Item has been removed\n      this.removeItem(data);\n      return null;\n    }\n    let elementIndex = -1;\n    let element = this.dataElementMap.get(data);\n    let invalidate = false;\n    if (element && this.recycle && this.recycle.deferRender && options.invalidate === true) {\n      // Deferred Render has a forced invalidation\n      // Item should be recreated\n      this.removeElement(element);\n      element = null;\n    }\n    if (!element) {\n      // Element does not exist, assume size changed\n      invalidate = true;\n      /** @type {T2} */\n      element = (this.create(data));\n      this.dataElementMap.set(data, element);\n      this.elementDataMap.set(element, data);\n    }\n    if (element && this.recycle && this.recycle.block) {\n      const bounds = this.getBounds(data, dataIndex);\n      element.style.setProperty('position', 'absolute');\n      element.style.setProperty('left', '0');\n      element.style.setProperty('right', '0');\n      if (bounds) {\n        element.style.setProperty('top', `${bounds.top}px`);\n      } else {\n        this.removeElement(element);\n        element = null;\n        invalidate = true;\n      }\n    }\n    if (element && options.checkPosition === false) {\n      if (!element.parentElement) {\n        this.element.appendChild(element);\n      }\n    } else if (element) {\n      if (element.parentElement === this.element) {\n        // Element is in DOM\n        let sibling = this.element.firstElementChild;\n        let siblingIndex = -1;\n        while (sibling) {\n          siblingIndex += 1;\n          if (sibling === element) {\n            elementIndex = siblingIndex;\n            break;\n          }\n          sibling = sibling.nextElementSibling;\n        }\n      }\n      if (elementIndex !== dataIndex) {\n        if (!this.element.children.length) {\n          if (element.parentElement) {\n            element.parentElement.removeChild(element);\n          }\n          this.element.appendChild(element);\n        } else {\n          // Iterate through datasource to previous sibling element\n          let siblingIndex = dataIndex - 1;\n          let inserted = false;\n          let previousDataObject;\n          do {\n            previousDataObject = this.datasource[siblingIndex];\n            const previousElement = this.dataElementMap.get(previousDataObject);\n            if (previousElement) {\n              if (element.previousElementSibling !== previousElement) {\n                if (element.parentElement) {\n                  element.parentElement.removeChild(element);\n                }\n                previousElement.insertAdjacentElement('afterend', element);\n              }\n              inserted = true;\n            } else {\n              siblingIndex -= 1;\n            }\n          } while (previousDataObject && !inserted);\n          if (!inserted) {\n            if (element.parentElement) {\n              element.parentElement.removeChild(element);\n            }\n            this.element.insertBefore(element, this.element.firstElementChild);\n          }\n        }\n      }\n    }\n    if ((options.render === false)\n        || (options.render !== true && this.recycle && this.recycle.deferRender)) {\n      invalidate = true;\n    } else if (element\n      && (options.render === true || (!this.recycle || !this.recycle.deferRender))) {\n      let prevClientWidth;\n      let prevClientHeight;\n      if (!invalidate && options.invalidate !== false) {\n        // Store width and height for later comparison\n        prevClientWidth = element.clientWidth;\n        prevClientHeight = element.clientHeight;\n      }\n      this.render(element, data, dataIndex);\n      if (!invalidate && options.invalidate !== false) {\n        if (element.clientWidth !== prevClientWidth || element.clientHeight !== prevClientHeight) {\n          // Element width or height has changed\n          invalidate = true;\n        }\n      }\n    }\n    if (options.invalidate === true || (invalidate && options.invalidate !== false)) {\n      this.invalidateItem(data, dataIndex);\n    }\n    return element;\n  }\n\n  /**\n   * @param {T2} element\n   * @return {void}\n   */\n  removeElement(element) {\n    if (element.parentElement) {\n      element.parentElement.removeChild(element);\n    }\n    const data = this.elementDataMap.get(element);\n    if (data) {\n      this.dataElementMap.delete(data);\n    }\n    this.elementDataMap.delete(element);\n  }\n\n  /**\n   * @param {T1} data\n   * @param {number} [indexHint]\n   * @return {boolean} change\n   */\n  invalidateItem(data, indexHint) {\n    if (!this.recycle || this.recycle.equalSize) {\n      return false;\n    }\n    // Don't auto-create on non-block layouts\n    // Invalidate in case of size change\n    const currentBounds = this.dataBoundsMap.get(data);\n    if (!currentBounds) {\n      return false;\n    }\n    this.dataBoundsMap.delete(data);\n    const dataIndex = (indexHint != null ? indexHint : this.datasource.indexOf(data));\n    if (dataIndex === -1) {\n      // Item was removed\n      return true;\n    }\n    // Invalidate previous items at same Y position\n    for (let j = dataIndex - 1; j >= 0; j -= 1) {\n      const previousBounds = this.dataBoundsMap.get(this.datasource[j]);\n      if (!previousBounds || previousBounds.top < currentBounds.top) {\n        break;\n      }\n      this.dataBoundsMap.delete(this.datasource[j]);\n    }\n    // Invalidate next items\n    for (let j = dataIndex + 1; j < this.datasource.length; j += 1) {\n      if (!this.dataBoundsMap.delete(this.datasource[j])) {\n        break;\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * @param {T1} data\n   * @param {number} [previousIndex]\n   * @return {void}\n   */\n  removeItem(data, previousIndex) {\n    this.invalidateItem(data, previousIndex);\n    this.dataElementMap.delete(data);\n    const element = this.dataElementMap.get(data);\n    if (element) {\n      this.removeElement(element);\n    }\n  }\n\n  detach() {\n    this.element = null;\n    this.datasource = null;\n  }\n}\n","// https://material.io/design/navigation/navigation-transitions.html\n\nimport { nextTick } from '../dom';\n\n/**\n * @param {string} px\n * @return {number}\n */\nfunction pxToInteger(px) {\n  if (!px) {\n    return 0;\n  }\n  return parseInt(px, 10);\n}\n\n/**\n * @param {string} stringValue\n * @param {number} scaleX\n * @param {number} scaleY\n * @return {string}\n */\nfunction convertBoxShadow(stringValue, scaleX, scaleY) {\n  /**\n   * @param {string} shadow\n   * @return {string}\n   */\n  function convertShadow(shadow) {\n    let inset = '';\n    let offsetX = '';\n    let offsetY = '';\n    let blurRadius = '';\n    let spreadRadius = '';\n    let color = '';\n    shadow.split(' ').forEach((value) => {\n      if (value.toLowerCase() === 'inset') {\n        inset = value;\n        return;\n      }\n      if (value.indexOf('(') !== -1 || !value.match(/\\d/).length) {\n        color = value;\n        return;\n      }\n      const numberValue = pxToInteger(value);\n      if (!offsetX) {\n        offsetX = `${numberValue / scaleX}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!offsetY) {\n        offsetY = `${numberValue / scaleY}${value.replace(/[0-9\\\\-\\\\.]/g, '')}`;\n      } else if (!blurRadius) {\n        blurRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      } else {\n        spreadRadius = `${numberValue / (scaleX * scaleY)}${value.replace(/[0-9\\-\\\\.]/g, '')}`;\n      }\n    });\n    return [\n      inset,\n      offsetX,\n      offsetY,\n      blurRadius,\n      spreadRadius,\n      color,\n    ].filter(v => v).join(' ');\n  }\n\n  if (!stringValue) {\n    return '';\n  }\n  return stringValue\n    // Strip spaces from anything parenthesized\n    .replace(/\\([^)]+\\)/g, substring => substring.replace(/ /g, ''))\n    // Split shadows by commas no inside parentheses\n    .match(/[^,(]+\\([^)]+\\)?[^,]*(|$)/g)\n    // Trim empty spaces\n    .map(shadow => shadow.trim())\n    // Convert values\n    .map(convertShadow)\n    // Rejoin shadows\n    .join(', ');\n}\n\n/**\n * @param {string} stringValue\n * @param {number} width\n * @param {number} height\n * @return {{horizontal:number, vertical:number}}\n */\nfunction convertBorderRadius(stringValue, width, height) {\n  /**\n   * @param {string} value\n   * @param {number} length\n   * @return {number}\n   */\n  function parsePercentage(value, length) {\n    const numValue = pxToInteger(value);\n    if (value.indexOf('%') === -1) {\n      return numValue;\n    }\n    return (numValue * length / 100.0);\n  }\n\n  if (!stringValue) {\n    return {\n      horizontal: 0,\n      vertical: 0,\n    };\n  }\n\n  const split = stringValue.split(' ');\n  if (split.length === 1) {\n    return {\n      horizontal: parsePercentage(stringValue, width),\n      vertical: parsePercentage(stringValue, height),\n    };\n  }\n  return {\n    horizontal: parsePercentage(split[0], width),\n    vertical: parsePercentage(split[1], height),\n  };\n}\n\n/**\n * @param {HTMLElement} targetElement\n * @param {HTMLElement} originElement\n * @param {CSSStyleDeclaration} [originStyle]\n * @return {Object}\n */\nexport function getShapeTransform(targetElement, originElement, originStyle) {\n  const originRect = originElement.getBoundingClientRect();\n  const targetRect = targetElement.getBoundingClientRect();\n  const originCSSStyle = originStyle || window.getComputedStyle(originElement);\n\n  let originX = originRect.left;\n  let originWidth = originRect.width;\n  let originY = originRect.top;\n  let originHeight = originRect.height;\n  if (originCSSStyle.boxSizing === 'border-box') {\n    const paddingTop = pxToInteger(originCSSStyle.paddingTop);\n    const paddingRight = pxToInteger(originCSSStyle.paddingRight);\n    const paddingBottom = pxToInteger(originCSSStyle.paddingBottom);\n    const paddingLeft = pxToInteger(originCSSStyle.paddingLeft);\n    originX += paddingLeft;\n    originWidth -= (paddingLeft + paddingRight);\n    originY += paddingTop;\n    originHeight -= (paddingTop + paddingBottom);\n  }\n\n  return {\n    originWidth,\n    originHeight,\n    translateX: originX - targetRect.left,\n    translateY: originY - targetRect.top,\n    scaleX: originWidth / targetRect.width,\n    scaleY: originHeight / targetRect.height,\n    toString() {\n      return [\n        `translateX(${this.translateX}px)`,\n        `translateY(${this.translateY}px)`,\n        `scaleX(${this.scaleX})`,\n        `scaleY(${this.scaleY})`,\n      ].join(' ');\n    },\n  };\n}\n\n/**\n * @param {HTMLElement} element\n * @param {string} property\n * @param {function(TransitionEvent):void} callback\n * @param {number} [expectedDuration]\n * @return {function} removeListener\n */\nfunction buildTransitionEndListener(element, property, callback, expectedDuration) {\n  let hasEnded = false;\n  const onTransitionEnd = (/** @type {TransitionEvent} */ event) => {\n    if (event.propertyName !== property) {\n      return;\n    }\n    hasEnded = true;\n    element.removeEventListener('transitionend', onTransitionEnd);\n    callback(event);\n  };\n  element.addEventListener('transitionend', onTransitionEnd);\n  if (expectedDuration) {\n    setTimeout(() => {\n      element.removeEventListener('transitionend', onTransitionEnd);\n      if (!hasEnded) {\n        callback(null);\n      }\n    }, expectedDuration + 500);\n  }\n  return () => {\n    element.removeEventListener('transitionend', onTransitionEnd);\n  };\n}\n\n/**\n * @typedef {Object} TransitionElementOptions\n * @prop {HTMLElement} fromShapeElement\n * @prop {HTMLElement} toShapeElement\n * @prop {HTMLElement} fromContentElement\n * @prop {HTMLElement} toContentElement\n * @prop {number} [duration=250|300] (250ms collapse or 300ms expand)\n * @prop {boolean} [revertFrom=false] Revert from elements on completion\n * @prop {function(TransitionElementOptions)} [onTransitionEnd]\n * @prop {function(TransitionElementOptions)} [onComplete]\n */\n\n/**\n * @param {TransitionElementOptions} options\n * @return {function():void} revertAllElements()\n */\nexport function transitionElement(options) {\n  const toStyleSyle = window.getComputedStyle(options.toShapeElement);\n\n  const shapeTransform = getShapeTransform(\n    options.fromShapeElement, options.toShapeElement, toStyleSyle\n  );\n  const contentTransform = getShapeTransform(options.toContentElement, options.fromContentElement);\n\n  const transitionProperties = [\n    'transition',\n    'transform-origin',\n    'transform',\n    'background-color',\n    'border-radius',\n    'box-shadow',\n    'z-index',\n    'filter',\n    'opacity',\n    'visibility',\n  ];\n\n  /** @type {Object.<string,string>} */\n  const oldFromShapeProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldToShapeProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldFromContentProperties = {};\n  /** @type {Object.<string,string>} */\n  const oldToContentProperties = {};\n  /** @type {Object.<string,string>} */\n  const newFromShapeProperties = {};\n  transitionProperties.forEach((prop) => {\n    oldFromShapeProperties[prop] = options.fromShapeElement.style.getPropertyValue(prop);\n    oldToShapeProperties[prop] = options.toShapeElement.style.getPropertyValue(prop);\n    oldFromContentProperties[prop] = options.fromContentElement.style.getPropertyValue(prop);\n    oldToContentProperties[prop] = options.toContentElement.style.getPropertyValue(prop);\n    if (prop === 'box-shadow') {\n      newFromShapeProperties[prop] = convertBoxShadow(\n        toStyleSyle.getPropertyValue(prop),\n        shapeTransform.scaleX,\n        shapeTransform.scaleY\n      );\n    } else if (prop === 'border-radius') {\n      const topLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const topRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-top-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomLeft = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-left-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const bottomRight = convertBorderRadius(\n        toStyleSyle.getPropertyValue('border-bottom-right-radius'),\n        shapeTransform.originWidth,\n        shapeTransform.originHeight\n      );\n      const horizontalRadii = [\n        `${topLeft.horizontal / shapeTransform.scaleX}px`,\n        `${topRight.horizontal / shapeTransform.scaleX}px`,\n        `${bottomLeft.horizontal / shapeTransform.scaleX}px`,\n        `${bottomRight.horizontal / shapeTransform.scaleX}px`,\n      ].join(' ');\n      const verticalRadii = [\n        `${topLeft.vertical / shapeTransform.scaleY}px`,\n        `${topRight.vertical / shapeTransform.scaleY}px`,\n        `${bottomLeft.vertical / shapeTransform.scaleY}px`,\n        `${bottomRight.vertical / shapeTransform.scaleY}px`,\n      ].join(' ');\n      newFromShapeProperties[prop] = `${horizontalRadii} / ${verticalRadii}`;\n    } else {\n      newFromShapeProperties[prop] = toStyleSyle.getPropertyValue(prop);\n    }\n  });\n\n  options.fromShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toShapeElement.setAttribute('mdw-transition-busy', '');\n  options.toContentElement.setAttribute('mdw-transition-busy', '');\n  options.fromContentElement.setAttribute('mdw-transition-busy', '');\n\n  // Hide toContentElement and overlay over fromContentElement immediately\n  options.toContentElement.style.setProperty('opacity', '0');\n  options.toContentElement.style.setProperty('transition', 'none');\n  options.toContentElement.style.setProperty('transform-origin', '0 0 0');\n  options.toContentElement.style.setProperty('transform', contentTransform);\n  options.toContentElement.style.setProperty('z-index', '9');\n  options.toContentElement.style.setProperty('visibility', 'visible');\n\n  options.fromContentElement.style.setProperty('opacity', '1');\n\n  options.fromShapeElement.style.setProperty('transition', 'none');\n  options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n  options.fromShapeElement.style.setProperty('transform', 'none');\n  options.fromShapeElement.style.setProperty('z-index', '8');\n\n  options.toShapeElement.style.setProperty('background-color', 'transparent');\n  options.toShapeElement.style.setProperty('filter', 'none');\n  options.toShapeElement.style.setProperty('box-shadow', 'none');\n  options.toShapeElement.style.setProperty('visibility', 'visible');\n\n  const revertFunction = () => {\n    transitionProperties.forEach((prop) => {\n      if (oldFromShapeProperties[prop] == null) {\n        options.fromShapeElement.style.removeProperty(prop);\n      } else {\n        options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n      }\n      if (oldToShapeProperties[prop] == null) {\n        options.toShapeElement.style.removeProperty(prop);\n      } else {\n        options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n      }\n      if (oldFromContentProperties[prop] == null) {\n        options.fromContentElement.style.removeProperty(prop);\n      } else {\n        options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n      }\n      if (oldToContentProperties[prop] == null) {\n        options.toContentElement.style.removeProperty(prop);\n      } else {\n        options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n      }\n    });\n  };\n\n  nextTick(() => {\n    nextTick(() => {\n      let calculatedDuration = options.duration;\n      if (calculatedDuration == null) {\n        if (shapeTransform.scaleX * shapeTransform.scaleY >= 1) {\n          calculatedDuration = 300; // expand\n        } else {\n          calculatedDuration = 250; // collapse\n        }\n      }\n      const totalDuration = calculatedDuration.toString(10);\n      const fadeInTime = (calculatedDuration * 0.70).toString(10);\n      const fadeOutTime = (calculatedDuration * 0.30).toString(10);\n      const transformTransition = transitionProperties\n        .filter(prop => prop !== 'transform-origin' && prop !== 'opacity' && prop !== 'transition')\n        .map(prop => `${prop} ${totalDuration}ms cubic-bezier(0.4, 0.0, 0.2, 1) 0s`)\n        .join(', ');\n      const fadeInTransition = `opacity ${fadeInTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) ${fadeOutTime}ms`;\n      const fadeOutTransition = [\n        `opacity ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n        `visibility ${fadeOutTime}ms cubic-bezier(0.0, 0.0, 0.2, 1) 0ms`,\n      ].join(', ');\n\n      options.fromShapeElement.style.setProperty('transition', transformTransition);\n      transitionProperties.forEach((prop) => {\n        if (prop === 'transform') {\n          options.fromShapeElement.style.setProperty('transform', shapeTransform);\n        } else if (prop === 'transition') {\n          // noop;\n        } else if (prop === 'transform-origin') {\n          options.fromShapeElement.style.setProperty('transform-origin', '0 0 0');\n        } else if (prop === 'z-index') {\n          options.fromShapeElement.style.setProperty('z-index', '8');\n        } else if (prop === 'visibility') {\n          options.fromShapeElement.style.setProperty('visibility', 'hidden');\n        } else if (newFromShapeProperties[prop] == null) {\n          options.fromShapeElement.style.removeProperty(prop);\n        } else {\n          options.fromShapeElement.style.setProperty(prop, newFromShapeProperties[prop]);\n        }\n      });\n\n      nextTick(() => {\n        buildTransitionEndListener(options.fromShapeElement, 'transform', () => {\n          transitionProperties.forEach((prop) => {\n            if (prop === 'transition') {\n              options.toShapeElement.style.setProperty('transition', 'none');\n              options.toContentElement.style.setProperty('transition', 'none');\n            } else {\n              if (oldToShapeProperties[prop] == null) {\n                options.toShapeElement.style.removeProperty(prop);\n              } else {\n                options.toShapeElement.style.setProperty(prop, oldToShapeProperties[prop]);\n              }\n              if (oldToContentProperties[prop] == null) {\n                options.toContentElement.style.removeProperty(prop);\n              } else {\n                options.toContentElement.style.setProperty(prop, oldToContentProperties[prop]);\n              }\n            }\n\n            if (prop === 'visibility' && !options.revertFrom) {\n              return;\n            }\n            if (oldFromContentProperties[prop] == null) {\n              options.fromContentElement.style.removeProperty(prop);\n            } else {\n              options.fromContentElement.style.setProperty(prop, oldFromContentProperties[prop]);\n            }\n            if (oldFromShapeProperties[prop] == null) {\n              options.fromShapeElement.style.removeProperty(prop);\n            } else {\n              options.fromShapeElement.style.setProperty(prop, oldFromShapeProperties[prop]);\n            }\n          });\n          if (options.onTransitionEnd) {\n            options.onTransitionEnd(options);\n          }\n          nextTick(() => {\n            if (oldToShapeProperties.transition == null) {\n              options.toShapeElement.style.removeProperty('transition');\n            } else {\n              options.toShapeElement.style.setProperty('transition', oldToShapeProperties.transition);\n            }\n            if (oldToContentProperties.transition == null) {\n              options.toContentElement.style.removeProperty('transition');\n            } else {\n              options.toContentElement.style.setProperty('transition', oldToContentProperties.transition);\n            }\n            options.fromShapeElement.removeAttribute('mdw-transition-busy');\n            options.toShapeElement.removeAttribute('mdw-transition-busy');\n            options.toContentElement.removeAttribute('mdw-transition-busy');\n            options.fromContentElement.removeAttribute('mdw-transition-busy');\n            if (options.onComplete) {\n              options.onComplete(options);\n            }\n          });\n        }, calculatedDuration);\n      });\n\n      // Fade out fromContent while shaping into new content\n      options.fromContentElement.style.setProperty('transition', fadeOutTransition);\n      options.fromContentElement.style.setProperty('opacity', '0');\n      options.fromContentElement.style.setProperty('visibility', 'hidden');\n\n      options.toContentElement.style.setProperty('transition', [\n        transformTransition,\n        fadeInTransition,\n      ].join(', '));\n      options.toContentElement.style.setProperty('opacity', '1');\n      options.toContentElement.style.setProperty('transform', 'none');\n    });\n  });\n\n  return revertFunction;\n}\n"],"sourceRoot":""}