// https://material.io/design/components/snackbars.html#spec

@use '../../core/_breakpoint.scss' as breakpoint;
@use '../../core/_elevation.scss' as elevation;
@use '../../core/_length.scss' as *;
@use '../../core/_motion.scss' as motion;
@use '../../core/_platform.scss' as platform;
@use '../../core/_type.scss' as type;

$scale-initial: 0.85 !default;

.mdw-snackbar__wrapper {
  position: relative;

  z-index: 6;
}

.mdw-snackbar__container {
  display: flex;
  position: absolute;
  inset-block-end: 0;
  inset-inline: 0;
  flex-direction: row;
  justify-content: flex-start;

  z-index: 6;

  &[mdw-position="end"] {
    justify-content: flex-end;
  }

  &[mdw-position="center"] {
    justify-content: center;
  }
}

.mdw-snackbar {
  @include type.addRules('body-2');

  display: flex;
  position: absolute;
  inset-block-end: 0;
  align-items: center;
  justify-content: space-between;

  min-block-size: 48px;
  max-inline-size: 100%;
  padding-inline: 8px;

  // Default state is hidden
  pointer-events: auto;

  animation-name: none;
  animation-duration: motion.$fadeInDuration;
  animation-timing-function: motion.$decelerateEasing;
  animation-direction: normal;
  animation-fill-mode: forwards;
  will-change: opacity, transform, visibility;

  opacity: 0;
  transform: scale($scale-initial);
  visibility: hidden;

  border-radius: 4px;

  box-shadow: elevation.boxShadow(6);

  &[aria-hidden="false"] {
    animation-name: showSnackbar;

    // Fallback if animations are disabled
    opacity: 1;
    transform: scale(1.0);
    visibility: visible;
  }

  &[aria-hidden="true"] {
    animation-name: hideSnackbar;
    animation-duration: motion.$fadeOutDuration;
    animation-timing-function: motion.$accelerateEasing;
  }

  &:focus {
    outline: none;
  }
}

@keyframes hideSnackbar {
  from {
    opacity: 1;
    transform: scale(1.0);
    visibility: visible;
  }

  to {
    opacity: 0;
    transform: scale($scale-initial);
    visibility: hidden;
  }
}

@keyframes showSnackbar {
  from {
    opacity: 0;
    transform: scale($scale-initial);
    visibility: hidden;
  }

  to {
    opacity: 1;
    transform: scale(1.0);
    visibility: visible;
  }
}

.mdw-snackbar .mdw-button {
  order: 1;

  flex: none;
  margin: 6px 0;
}

.mdw-snackbar > span {
  @include type.textTopToTop(16);
  @include type.baselineToBottom(48 - 30);
  box-sizing: border-box;
  padding: 0 8px;

  white-space: pre-line;
}

@include breakpoint.isXSmallWindow() {
  .mdw-snackbar {
    inset-inline: 0;

    &[mdw-stacked] {
      align-items: flex-end;
      flex-direction: column;
      justify-content: center;

      > span {
        inline-size: 100%;
      }

      .mdw-button {
        margin-block: 2px 8px;
      }
    }
  }
}
