/* https://m3.material.io/components/bottom-app-bar/specs */

:host {
  --mdw-bg: var(--mdw-color__surface);
  --mdw-ink: var(--mdw-color__on-surface);
  --mdw-surface__tint: var(--mdw-surface__tint__0);
  --mdw-surface__tint__raised: var(--mdw-surface__tint__2);
  display: contents;

  z-index:2;
}

#surface {
  position: sticky;
  inset-block-start: 0;

  display: grid;
  align-items: center;
  grid-auto-flow: row;
  grid-template-rows: minmax(64px,min-content) minmax(0, min-content);
  grid-template-columns: minmax(auto,1fr) 12px minmax(0,auto) 12px minmax(auto,1fr);

  box-sizing: border-box;
  inline-size: 100%;
  max-inline-size: 100%;

  /* 16px from icon */
  /* inset = (button.width / 2) - (icon.width / 2) */
  /* paddingInline = 16px - inset */
  /* paddingInlineStart = 16px - ((48px / 2) - (24px / 2)) */
  /* paddingInlineEnd = 16px - ((48px / 2) - (30px / 2)) */

  padding-inline: 4px;

  filter: none; /* Never receive shadow */

  z-index: 5;
  /* inset-inline: 0; */

  background-color: rgb(var(--mdw-bg));
  color: rgb(var(--mdw-ink));

  font: var(--mdw-typescale__title-large__font);
  letter-spacing: var(--mdw-typescale__title-large__letter-spacing);
  white-space: nowrap;

  transition: grid-template-columns 100ms;
}

#surface-tint {
  position: 0;

  z-index: 1;
}

#leading {
  display: flex;
  align-items: center;
  overflow: hidden;

  grid-column: 1;
  grid-row: 1;

}

#headline {
  display: block;
  overflow-x: clip;
  overflow-y: hidden;

  grid-column: 3;
  grid-row: 1;

  text-overflow: ellipsis;
  text-transform: none;
  word-break: break-word;

  transition-duration: 200ms;
  transition-property: transform, opacity, color, background-color;
}

#trailing {
  display: flex;
  align-items: center;
  gap: 8px;
  justify-content: flex-end;
  overflow: hidden;

  grid-column: 5;
  grid-row: 1;

  color: var(--mdw-color__on-surface-variant);
}

#companion {
  position: relative;

  display: flex;
  align-items: flex-end;

  margin-block-start: -4px;
  padding-block-end: 20px;

  padding-inline: 16px;

  background-color: rgb(var(--mdw-bg));
  box-shadow: none;

  font: var(--mdw-typescale__headline-small__font);
  letter-spacing: var(--mdw-typescale__headline-small__letter-spacing);
  white-space: nowrap;
}

#companion-text {
  display: block;
  overflow-x: clip;
  overflow-y: hidden;

  text-overflow: ellipsis;
  text-transform: none;
  word-break: break-word;
}

#companion[size="large"] {
  min-block-size: 108px;

  font: var(--mdw-typescale__headline-medium__font);
  letter-spacing: var(--mdw-typescale__headline-medium__letter-spacing);
  white-space: normal;
}

#companion-text[size="large"] {
  max-block-size: calc(2 * var(--mdw-typescale__headline-medium__line-height));
}

@supports(-webkit-line-clamp: 2) {
  #companion-text[size="large"] {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;

    max-block-size: none;
  }
}

#surface[hide-on-scroll] {
  position: relative;

  inset-block-start: 0;

  transform: translateY(0);

  will-change: transform, position;
}

#surface[size="small"] {
  grid-template-columns: auto 4px 1fr 4px auto;
}

#headline:is([size="medium"],[size="large"]) {
  opacity: 0;

  will-change: opacity;
}
