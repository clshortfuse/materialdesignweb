// https://material.io/guidelines/layout/structure.html#structure-app-bar
// https://material.io/guidelines/components/toolbars.html

@import '../common/motion.scss';
@import '../common/platform.scss';
@import '../common/responsive.scss';
@import '../common/type.scss';

$toolbar__height: 64;
$toolbar__height-dense: 48;
$toolbar__height-mobile: 56;
$toolbar__height-mobile-landscape: 48;
$toolbar__height-prominent: 128;
$toolbar__height-prominent-dense: 96;
$toolbar__icon-height: 40;

.mdw-toolbar {
  position: relative;
  display:flex;
  flex-direction: column;
  z-index: 4;
  &[mdw-app-bar] {
    html[mdw-ios][mdw-standalone] & {
      padding-top: 20px;
      padding-top: constant(safe-area-inset-top);
      padding-top: env(safe-area-inset-top);
    }
  }
  transition-timing-function: $mdw-motion__standard-easing;
  transition-duration: $mdw-motion__default-duration__desktop;
  @include allHandsets {
    transition-duration: $mdw-motion__default-duration__mobile;
  }
  @include allTablets {
    transition-duration: $mdw-motion__default-duration__tablet;
  }
}

.mdw-toolbar__action {
  display: flex;
  flex-direction: row;
  min-height: dp($toolbar__height);
  justify-content: space-between;
  .mdw-toolbar[mdw-prominent] > & {
    min-height: dp($toolbar__height-prominent);
  }
  .mdw-toolbar[mdw-dense] > & {
    min-height: dp($toolbar__height-dense);
  }
  .mdw-toolbar[mdw-dense][mdw-prominent] > & {
    min-height: dp($toolbar__height-prominent-dense);
    @include allHandsetsAndTablets {
      min-height: dp($toolbar__height-prominent);
    }
  }
  .mdw-toolbar[mdw-dense] > &,
  & {
    @include allHandsetsAndTablets {
      min-height: dp($toolbar__height-mobile);
    }
    @include landscapeHandsets {
      min-height: dp($toolbar__height-mobile-landscape);
    }
  }
  transition-property: min-height;
  transition-timing-function: inherit;
  transition-duration: inherit;
}

.mdw-toolbar__content {
  margin-left: dp(80);
  margin-right: dp(24);
  @include margin16dp {
    margin-left: dp(72);
    margin-right: dp(16);
  }
  flex-grow: 1;
  flex-direction: column;
  display: flex;
}

.mdw-toolbar__title {
  flex-grow: 1;
  overflow-x: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  margin: 0 dp(16);
  height: auto;
  align-self: flex-end;
  justify-content: space-around;
  &[mdw-centered] {
    flex-grow: 0;
  }
  @include type-rules('h6');
  @include baseline-bottom(24);

  .mdw-toolbar[mdw-dense] & {
    @include baseline-bottom(16);
  }
  .mdw-toolbar[mdw-dense] &,
  & {
    @include allHandsetsAndTablets {
      @include baseline-bottom(20);
    }
    @include landscapeHandsets {
      @include baseline-bottom(16);
    }
  }

  .mdw-toolbar[mdw-prominent] & {
    white-space: normal;
    @include type-rules('h5');
    @include baseline-bottom(28);
  }
  &[mdw-custom]::after {
    display: none;
  }

  // Animation
  transition-property: font, letter-spacing;
  transition-timing-function: inherit;
  transition-duration: inherit;
}

.mdw-toolbar__start {
  order: -1;
  margin-left: dp(8);
  padding: 0 dp(8);
  @include margin16dp {
    margin-left: 0;
  }
}

.mdw-toolbar__end {
  order: 1;
  margin-left: 0;
  margin-right: dp(12);
  @include margin16dp {
    margin-left: 0;
    margin-right: dp(4);
  }
  [dir=rtl] & {
    margin-left: dp(12);
    margin-right: 0;
    @include margin16dp {
      margin-left: dp(4);
      margin-right: 0;
    }
  }
}


.mdw-toolbar__start,
.mdw-toolbar__end {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
}
.mdw-toolbar__start,
.mdw-toolbar__end,
.mdw-toolbar__title {
  transition-property: margin-top;
  margin-top: dp(($toolbar__height - $toolbar__icon-height) / 2);
  .mdw-toolbar[mdw-dense] & {
    margin-top: dp(($toolbar__height-dense - $toolbar__icon-height) / 2);
  }
  &,
  .mdw-toolbar[mdw-dense] & {
    @include allHandsetsAndTablets {
      margin-top: dp(($toolbar__height-mobile - $toolbar__icon-height) / 2);
    }
    @include landscapeHandsets {
      margin-top: dp(($toolbar__height-mobile-landscape - $toolbar__icon-height) / 2);
    }
  }
}

.mdw-toolbar__start .mdw-button {
  margin: 0;
}

.mdw-toolbar__end .mdw-button {
  margin: 0 dp(4);
  &[mdw-more-button] {
    margin-left: 0;
    margin-right: dp(-2);
    [dir=rtl] & {
      margin-left: dp(-2);
      margin-right: 0;
    }
  }
}